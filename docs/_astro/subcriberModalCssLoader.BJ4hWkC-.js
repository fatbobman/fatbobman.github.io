function a({subscribeText:i,placeholder:l}){window.CustomSubstackWidget={substackUrl:"weekly.fatbobman.com",placeholder:l,buttonText:i,theme:"custom",colors:{primary:"#F50000",input:"#000000",email:"#777777",text:"#000000"}},console.log("CustomSubstackWidget initialized."),c().then(()=>(console.log("External JS loaded. Initializing styles and observing..."),new Promise(e=>{const o=document.querySelector(".custom-substack-widget1");if(o){console.log("Widget already exists, applying styles..."),s(o),e();return}const t=new MutationObserver((n,u)=>{for(let d of n)if(d.type==="childList"){console.log("查找中。。");const r=document.querySelector(".custom-substack-widget1");r&&(console.log("Widget found, applying styles..."),s(r),u.disconnect(),e())}});setTimeout(()=>{document.getElementById("custom-substack-embed1")?(t.observe(document.body,{childList:!0,subtree:!0}),console.log("MutationObserver is now observing document body.")):(console.warn("custom-substack-embed1 element not found."),e())},100)}))).catch(e=>{console.error("Failed to load external JS or apply styles:",e)});function c(){return new Promise((e,o)=>{const t=document.createElement("script");t.src="/js/subscriber.js",t.onload=e,t.onerror=o,document.body.appendChild(t)})}function s(e){const o=e.querySelector("input"),t=e.querySelector("button");e.style.border="var(--subscribe-widget-border)",e.style.padding="0.3rem",e.style.borderRadius="0.7rem",e.style.backgroundColor="var(--subscribe-input-background)",e.style.maxWidth=window.matchMedia("(max-width: 640px)").matches?"325px":"600px",o&&(o.style.border="0px solid #000",o.style.backgroundColor="var(--subscribe-input-background)",o.style.padding="0.5rem",o.style.outline="none"),t&&(t.style.backgroundColor="var(--subscribe-button-background)",t.style.color="var(--subscribe-button-text)",t.style.fontWeight="bold",t.style.padding="0.5rem 1rem",t.style.borderRadius="0.5rem",t.style.maxWidth="100px"),console.log("Styles applied to subscription widget.")}}export{a as initializeSubscriptionWidget};
