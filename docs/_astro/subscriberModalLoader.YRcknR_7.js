const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["_astro/subscriberModalShower.i0qlteqo.js","_astro/preload-helper.CLcXU_4U.js"])))=>i.map(i=>d[i]);
import{_ as h}from"./preload-helper.CLcXU_4U.js";const v=40*1e3,b=60*60*4*1e3,d="subcribeModalLastShownTime";let n,o={subscribeText:"",placeholder:""},s=!1;document.addEventListener("visibilitychange",()=>{document.visibilityState==="visible"&&s&&(r(),s=!1)});function u(){const e=localStorage.getItem(d),t=Date.now();return e?t-parseInt(e,10)>=b:!0}function c(){localStorage.setItem(d,Date.now().toString())}function l(){n&&clearTimeout(n),n=setTimeout(()=>{u()?(f(),c(),document.visibilityState==="visible"?r():s=!0):console.log("not load modal")},v)}function r(){h(()=>import("./subscriberModalShower.i0qlteqo.js"),__vite__mapDeps([0,1])).then(e=>{e.showModal({subscribeText:o.subscribeText,placeholder:o.placeholder})})}function a(){r(),c()}function w({subscribeText:e,placeholder:t}){o.subscribeText=e,o.placeholder=t,window.addEventListener("open-subscribe-modal",()=>{a()});function i(){window.location.hash==="#subscript"&&(a(),window.history.replaceState(null,"",window.location.pathname+window.location.search))}i(),window.addEventListener("hashchange",i)}function m(){["mousemove","keydown","scroll","click"].forEach(t=>{document.addEventListener(t,l)})}function f(){["mousemove","keydown","scroll","click"].forEach(t=>{document.removeEventListener(t,l)})}function E({subscribeText:e,placeholder:t}){o.subscribeText=e,o.placeholder=t,m(),l()}const T={initModalIdleChecker:E,initModalManual:w,triggerModal:a,setupEventListeners:m,removeEventListeners:f,canShowModal:u,updateLastShownTime:c};export{T as default};
