<!DOCTYPE html><html lang="en"> <head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="sitemap" href="/sitemap-index.xml"><!-- <link rel="shortcut icon" href={iconSVG.src} /> --><link rel="icon" type="image/png" sizes="16x16" href="/_astro/favicon-16x16.2312221518-2.DhhY-2ao.png"><link rel="icon" type="image/png" sizes="32x32" href="/_astro/favicon-32x32.2312221518-2.BbUzUdRZ.png"><link rel="mask-icon" href="/_astro/faviconSVG-32x32.2312221518-2.ll_gTgJS.svg"><link rel="apple-touch-icon" sizes="180x180" href="/_astro/apple-touch-icon.2312227635.BE1WvNvp.png"><title>Blog Update Chronicle - Welcoming 2024 with a New Blog</title>
<meta name="description" content="Explore my journey of rebuilding my blog with AI and new technologies like Astro, TailwindCSS, and MDX. Learn about my experience and insights.">
<meta name="robots" content="index,follow">
<link rel="canonical" href="https://fatbobman.com/en/posts/blog-update-chronicle-2024/">
<meta property="og:title" content="Blog Update Chronicle - Welcoming 2024 with a New Blog">
<meta property="og:description" content="Explore my journey of rebuilding my blog with AI and new technologies like Astro, TailwindCSS, and MDX. Learn about my experience and insights.">
<meta property="og:url" content="https://fatbobman.com/en/posts/blog-update-chronicle-2024/">
<meta property="og:type" content="article">
<meta property="og:image" content="https://og.fatbobman.com/card/Blog-Update-Chronicle-2024-en.png">

<meta property="og:locale" content="en">
<meta property="og:site_name" content="fatbobman.com">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:site" content="@fatbobman">
<meta name="twitter:creator" content="@fatbobman"><link rel="alternate" type="application/rss+xml" title="RSS Feed for My Website" href="https://fatbobman.com/en/rss.xml"><link rel="sitemap" href="/sitemap-index.xml"><!-- ÂÖ∂‰ªñË∑ØÂæÑÁöÑ hreflang -->
  <link rel="alternate" hreflang="en" href="https://fatbobman.com/en/posts/blog-update-chronicle-2024/">
  <link rel="alternate" hreflang="zh-CN" href="https://fatbobman.com/zh/posts/blog-update-chronicle-2024/">
  <link rel="alternate" hreflang="x-default" href="https://fatbobman.com/en/posts/blog-update-chronicle-2024/"><script type="text/partytown" src="https://analytics.ahrefs.com/analytics.js" data-key="KF0NNRpbcfyJPzijzZEiOw"></script><script data-partytown-skip="true">
      var _hmt = _hmt || [];
      (function() {
        var hm = document.createElement("script");
        hm.async = true; // Add async attribute
        hm.src = "https://hm.baidu.com/hm.js?14e5d60a3ea6276655f9d14c58b1fcd0";
        var s = document.getElementsByTagName("script")[0];
        s.parentNode.insertBefore(hm, s);
      })();
    </script><script type="text/partytown">(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
      new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
      j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
      'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
      })(window,document,'script','dataLayer','GTM-5C7N4MF5');</script><script>
      // Immediately set theme before page renders
      if (
        localStorage.getItem('color-theme') === 'dark' ||
        (!('color-theme' in localStorage) && window.matchMedia('(prefers-color-scheme: dark)').matches)
      ) {
        document.documentElement.classList.add('dark');
      }
    </script><script type='application/ld+json'>{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "author": {
    "@id": "#author"
  },
  "dateModified": "2023-12-28T00:20:00.000Z",
  "datePublished": "2023-12-28T00:20:00.000Z",
  "description": "Explore my journey of rebuilding my blog with AI and new technologies like Astro, TailwindCSS, and MDX. Learn about my experience and insights.",
  "headline": "Blog Update Chronicle - Welcoming 2024 with a New Blog",
  "image": {
    "@type": "ImageObject",
    "url": "https://og.fatbobman.com/card/Blog-Update-Chronicle-2024-en.png"
  },
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://fatbobman.com/en/posts/blog-update-chronicle-2024/"
  },
  "url": "https://fatbobman.com/en/posts/blog-update-chronicle-2024/",
  "publisher": {
    "@type": "Organization",
    "name": "Fatbobman's Blog",
    "logo": {
      "@type": "ImageObject",
      "url": "https://fatbobman.com/images/blog-card.png"
    }
  },
  "articleSection": [
    "Web"
  ],
  "inLanguage": "en"
}</script><script type='application/ld+json'>{
  "@context": "https://schema.org",
  "@type": "Person",
  "@id": "#author",
  "name": "‰∏úÂù°ËÇòÂ≠ê (ÂæêÊù®)",
  "alternateName": "Fatbobman (Xu Yang)",
  "jobTitle": "Apple Developer",
  "description": "ËãπÊûúÁîüÊÄÅÂºÄÂèëËÄÖÔºå‰∏ìÊ≥® Swift Âíå SwiftUI ÂºÄÂèë„ÄÇFatbobman's Blog ‰ΩúËÄÖ„ÄÇ",
  "url": "https://fatbobman.com",
  "image": {
    "@type": "ImageObject",
    "url": "https://cdn.fatbobman.com/FatWithBoys.png"
  },
  "sameAs": [
    "https://github.com/fatbobman",
    "https://x.com/fatbobman",
    "https://www.linkedin.com/in/fatbobman/",
    "https://bsky.app/profile/fatbobman.com",
    "https://mastodon.social/@fatbobman",
    "https://web.okjike.com/u/e32947ef-7751-4363-9456-b340eef2efd3",
    "https://fatbobman.com/zh/about/",
    "https://fatbobman.com/en/about/"
  ],
  "worksFor": {
    "@type": "Organization",
    "name": "Fatbobman's Blog",
    "logo": {
      "@type": "ImageObject",
      "url": "https://fatbobman.com/images/blog-card.png"
    }
  }
}</script><link rel="stylesheet" href="/_astro/about.CFVz4fBC.css">
<link rel="stylesheet" href="/_astro/_slug_.BRLGXoDU.css">
<style>.sticky[data-astro-cid-4wsjtibl]{position:fixed;top:0;left:50%;transform:translate(-50%);width:100%;max-width:100%;-webkit-backdrop-filter:blur(12px);backdrop-filter:blur(12px);background-color:#ffffffe6}.dark .sticky[data-astro-cid-4wsjtibl]{background-color:#171717e6}.sticky[data-astro-cid-4wsjtibl] .sticky-logo[data-astro-cid-4wsjtibl]{width:2rem;opacity:1;margin-right:.75rem}
</style><script>!(function(w,p,f,c){if(!window.crossOriginIsolated && !navigator.serviceWorker) return;c=w[p]=Object.assign(w[p]||{},{"lib":"/~partytown/","debug":true});c[f]=(c[f]||[]).concat(["dataLayer.push","gtag"])})(window,'partytown','forward');/* Partytown 0.11.2 - MIT QwikDev */
const t={preserveBehavior:!1},e=e=>{if("string"==typeof e)return[e,t];const[n,r=t]=e;return[n,{...t,...r}]},n=Object.freeze((t=>{const e=new Set;let n=[];do{Object.getOwnPropertyNames(n).forEach((t=>{"function"==typeof n[t]&&e.add(t)}))}while((n=Object.getPrototypeOf(n))!==Object.prototype);return Array.from(e)})());!function(t,r,o,i,a,s,c,l,d,p,u=t,f){function h(){f||(f=1,"/"==(c=(s.lib||"/~partytown/")+(s.debug?"debug/":""))[0]&&(d=r.querySelectorAll('script[type="text/partytown"]'),i!=t?i.dispatchEvent(new CustomEvent("pt1",{detail:t})):(l=setTimeout(v,(null==s?void 0:s.fallbackTimeout)||1e4),r.addEventListener("pt0",w),a?y(1):o.serviceWorker?o.serviceWorker.register(c+(s.swPath||"partytown-sw.js"),{scope:c}).then((function(t){t.active?y():t.installing&&t.installing.addEventListener("statechange",(function(t){"activated"==t.target.state&&y()}))}),console.error):v())))}function y(e){p=r.createElement(e?"script":"iframe"),t._pttab=Date.now(),e||(p.style.display="block",p.style.width="0",p.style.height="0",p.style.border="0",p.style.visibility="hidden",p.setAttribute("aria-hidden",!0)),p.src=c+"partytown-"+(e?"atomics.js?v=0.11.2":"sandbox-sw.html?"+t._pttab),r.querySelector(s.sandboxParent||"body").appendChild(p)}function v(n,o){for(w(),i==t&&(s.forward||[]).map((function(n){const[r]=e(n);delete t[r.split(".")[0]]})),n=0;n<d.length;n++)(o=r.createElement("script")).innerHTML=d[n].innerHTML,o.nonce=s.nonce,r.head.appendChild(o);p&&p.parentNode.removeChild(p)}function w(){clearTimeout(l)}s=t.partytown||{},i==t&&(s.forward||[]).map((function(r){const[o,{preserveBehavior:i}]=e(r);u=t,o.split(".").map((function(e,r,o){var a;u=u[o[r]]=r+1<o.length?u[o[r]]||(a=o[r+1],n.includes(a)?[]:{}):(()=>{let e=null;if(i){const{methodOrProperty:n,thisObject:r}=((t,e)=>{let n=t;for(let t=0;t<e.length-1;t+=1)n=n[e[t]];return{thisObject:n,methodOrProperty:e.length>0?n[e[e.length-1]]:void 0}})(t,o);"function"==typeof n&&(e=(...t)=>n.apply(r,...t))}return function(){let n;return e&&(n=e(arguments)),(t._ptf=t._ptf||[]).push(o,arguments),n}})()}))})),"complete"==r.readyState?h():(t.addEventListener("DOMContentLoaded",h),t.addEventListener("load",h))}(window,document,navigator,top,window.crossOriginIsolated);;(e=>{e.addEventListener("astro:before-swap",e=>{let r=document.body.querySelector("iframe[src*='/~partytown/']");if(r)e.newDocument.body.append(r)})})(document);</script></head> <body class="antialiased text-default bg-page">  <div class="flex flex-col min-h-screen justify-between "> <div> <header> <div class="bg-block" id="wholeHeader" data-astro-cid-4wsjtibl> <!-- 
    ‰øÆÊîπÁÇπ 1: px-4 sm:px-6
    ÁªôÂ§ßÊ†áÈ¢òÂå∫ÂüüÂ¢ûÂä†Â∑¶Âè≥ËæπË∑ùÔºåÈò≤Ê≠¢Âú®Â±èÂπïÂèòÁ™ÑÊó∂Ë¥¥Ëæπ„ÄÇ
  --> <div class="max-w-5xl mx-auto px-4 sm:px-6 pt-6 pb-4 sm:pb-6" data-astro-cid-4wsjtibl> <div id="blogTitle" class="w-full"> <!-- 
    ‰øÆÊîπÁÇπ 1: class="group block w-full"
    ËÆ©ÈìæÊé•ÂÆπÂô®ÂèòÊàêÂùóÁ∫ßÂÖÉÁ¥†Âπ∂Âç†Êª°Êï¥Ë°åÔºåÁ°Æ‰øùÂÜÖÈÉ®ÂÜÖÂÆπÂèØ‰ª•Âü∫‰∫éÊï¥‰∏™È°µÈù¢ÂÆΩÂ∫¶Â±Ö‰∏≠
  --> <a href="/en/" class="group block w-full"> <!-- 
      ‰øÆÊîπÁÇπ 2: justify-center
      Á°Æ‰øù Flex ÂÆπÂô®ÁöÑÂÜÖÂÆπÂú®Ê∞¥Âπ≥ÊñπÂêë‰∏äÁªùÂØπÂ±Ö‰∏≠
    --> <div class="flex flex-col sm:flex-row items-center justify-center gap-3 sm:gap-5 mx-auto pt-6 sm:pt-8 pb-2 sm:pb-0"> <!-- ÂêâÁ••Áâ©ÂõæÊ†á --> <img src="/_astro/fat-blog-slug-icon.Cw1pK0wd.webp" class="w-20 h-20 sm:w-14 sm:h-14 rounded-full shadow-sm transition-transform duration-300 group-hover:rotate-12 group-hover:scale-105" alt="Fatbobman Logo"> <!-- SVG ÊñáÂ≠óÂÆπÂô® --> <div class="font-black w-[240px] sm:w-[300px] text-heading transition-opacity duration-300 group-hover:opacity-80 mt-2 sm:mt-0 sm:-mb-1"> <svg fill="currentColor" width="100%" viewBox="0 0 500 100"> <use href="/_astro/blogTitle.Ca1NZNqJ.svg#blog-title"></use> </svg> </div> </div> </a> </div> </div> <div class="bg-block z-50 shadow-custom-light dark:shadow-custom-dark" id="stickyHeader" data-astro-cid-4wsjtibl> <!-- 
      ‰øÆÊîπÁÇπ 2: px-4 sm:px-6 py-3
      1. Âà†Èô§‰∫ÜÂéüÊù•ÁöÑ p-2 sm:p-0
      2. Â¢ûÂä†‰∫ÜÁªü‰∏ÄÁöÑ px-4 sm:px-6ÔºåËÆ© Sticky ÂØºËà™Ê†èÂ∑¶Âè≥‰∏§Á´ØÁïôÊúâÁ©∫ÁôΩÔºå‰∏çÂÜçÁ¥ßË¥¥Â±èÂπïËæπÁºò„ÄÇ
      3. Â¢ûÂä†‰∫Ü py-3ÔºåËÆ©ÂØºËà™Ê†èÈ´òÂ∫¶Á®çÂæÆÈ´ò‰∏ÄÁÇπÁÇπÔºåÁúãËµ∑Êù•Êõ¥‰ªéÂÆπ„ÄÇ
    --> <div class="max-w-5xl flex flex-wrap items-center justify-between mx-auto px-4 sm:px-6 py-3" data-astro-cid-4wsjtibl> <div class="flex items-center space-x-2" data-astro-cid-4wsjtibl> <!-- Sticky Logo --> <a href="/" class="sticky-logo overflow-hidden transition-all duration-500 w-0 opacity-0 flex items-center justify-center" aria-label="Fatbobman Blog" data-astro-cid-4wsjtibl> <!-- ËøôÈáå‰ΩøÁî®‰øÆÊîπÂêéÁöÑÂ∞èÂ∞∫ÂØ∏ Logo (h-6 Êàñ h-7) --> <img src="/_astro/fat-blog-slug-icon.Cw1pK0wd.webp" class="h-6 w-6 rounded-full" alt="Logo" data-astro-cid-4wsjtibl> </a> <div id="lang-data" data-lang="en" style="display: none;"></div> <button id="language-dropdown-button" data-dropdown-toggle="language-dropdown-menu" type="button" aria-label="Change Language" class="group p-2 w-10 h-10 text-default hover:text-secondary hover:bg-gray-100 dark:hover:bg-page focus:outline-none focus:ring-2 focus:ring-gray-200 dark:hover:bg-gray-700 dark:focus:ring-gray-600 rounded-lg flex items-center justify-center"> <!-- ÊõøÊç¢ÊñáÂ≠ó‰∏∫ SVG ÂõæÊ†á --> <!-- 
    ËøôÈáå‰ΩøÁî® w-5 h-5 (20px) ÈÖçÂêà stroke-width="2" 
    ‰ª•ÂåπÈÖç SearchButton Âíå ThemeSwitcher ÁöÑËßÜËßâÂàÜÈáè
  --> <svg class="w-5 h-5 fill-none stroke-current" viewBox="0 0 24 24" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"> <!-- ‰∏Ä‰∏™ÁÆÄÂçïÁöÑÂú∞ÁêÉÂõæÊ†á --> <use href="/_astro/iconCollection.DeMgcnlv.svg#icon-language"></use> </svg> <!-- ÂèØÈÄâÔºöÂ¶ÇÊûúÈùûË¶Å‰øùÁïôÊñáÂ≠óÔºåÂèØ‰ª•ÊääÊñáÂ≠óÂÅöÂ∞è‰∏ÄÁÇπÊîæÂú®ÂõæÊ†áÊóÅËæπÔºåÊàñËÄÖÂè™Âú® Hover Êó∂ÊòæÁ§∫ --> </button> <!-- Dropdown --> <div class="z-50 hidden my-4 text-base list-none bg-page divide-y divide-gray-100 rounded-lg shadow dark:bg-gray-700" id="language-dropdown-menu"> <ul class="py-2 font-medium text-sm" role="none"> <li> <button type="button" onclick="
            try {
                if ('#' !== '#') {
                    window.location.href = '#';
                }
            } catch (e) {
                console.log('Navigation failed:', e);
            }
        " class="w-full text-left px-4 py-2 text-default hover:bg-gray-100 dark:hover:bg-gray-600 dark:hover:text-white" role="menuitem"> <div class="inline-flex items-center">
English
<svg xmlns="http://www.w3.org/2000/svg" class="w-3.5 h-3.5 ml-2 hidden text-primary" id="EN-check" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"> <use href="/_astro/iconCollection.DeMgcnlv.svg#icon-language"></use> </svg> </div> </button> </li><li> <button type="button" onclick="
              try {
                  if ('/zh/posts/blog-update-chronicle-2024/' !== '#') {
                      window.location.href = '/zh/posts/blog-update-chronicle-2024/';
                  }
              } catch (e) {
                  console.log('Navigation failed:', e);
              }
          " class="w-full text-left px-4 py-2 text-default hover:bg-gray-100 dark:hover:bg-gray-600 dark:hover:text-white" role="menuitem"> <div class="inline-flex items-center">
‰∏≠Êñá
<svg xmlns="http://www.w3.org/2000/svg" class="w-3.5 h-3.5 ml-2 hidden text-primary" id="ZH-check" width="24" height="24" viewBox="0 0 24 24"> <use href="/_astro/iconCollection.DeMgcnlv.svg#icon-check"></use> </svg> </div> </button> </li> <li> <div class="border-t border-gray-200 dark:border-gray-800 w-4/5 mx-auto my-2"></div> <button class="block px-4 py-2 text-default hover:bg-gray-100 dark:hover:bg-gray-600 dark:hover:text-white" role="menuitem" id="set-default-lang"> <div class="inline-flex items-center"> Set English as Default </div> </button> </li> </ul> <script type="module">function a(){const t=localStorage.getItem("lang"),e=document.getElementById("EN-check"),n=document.getElementById("ZH-check");e!==null&&n!==null&&(t==="en"?(e.classList.remove("hidden"),n.classList.add("hidden")):t==="zh"&&(n.classList.remove("hidden"),e.classList.add("hidden")))}document.addEventListener("DOMContentLoaded",()=>{a()});const l=document.getElementById("set-default-lang");l?.addEventListener("click",()=>{const t=document.getElementById("lang-data");if(t!=null){const e=t.dataset.lang;e!=null&&(localStorage.setItem("lang",e),a())}});</script> </div> <button id="theme-dropdown-button" data-dropdown-toggle="theme-dropdown-menu" type="button" aria-label="Theme Switcher" class="group p-2 w-10 h-10 text-default hover:text-secondary hover:bg-gray-100 dark:hover:bg-page focus:outline-none focus:ring-2 focus:ring-gray-200 dark:hover:bg-gray-700 dark:focus:ring-gray-600 rounded-lg flex items-center justify-center"> <!-- 
    Â∑≤Êõ¥Êñ∞‰∏∫Áªü‰∏ÄÁöÑ 24px Á∫øÊÄßÂõæÊ†á 
    Ê≥®ÊÑèÔºöÁßªÈô§‰∫Ü fill-currentÔºåÊîπ‰∏∫ fill="none" stroke="currentColor"
  --> <svg viewBox="0 0 24 24" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor" fill="none" class="w-5 h-5 hidden" id="theme_icon_system"> <use href="/_astro/iconCollection.DeMgcnlv.svg#icon-computer"></use> </svg> <svg viewBox="0 0 24 24" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor" fill="none" class="w-5 h-5 hidden" id="theme_icon_dark"> <use href="/_astro/iconCollection.DeMgcnlv.svg#icon-moon"></use> </svg> <svg viewBox="0 0 24 24" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor" fill="none" class="w-5 h-5 hidden" id="theme_icon_light"> <use href="/_astro/iconCollection.DeMgcnlv.svg#icon-sun"></use> </svg> </button> <!-- Dropdown --> <div class="z-50 hidden my-4 text-base list-none bg-white divide-y divide-gray-100 rounded-lg shadow dark:bg-gray-700" id="theme-dropdown-menu"> <ul class="py-2 font-medium" role="none"> <li class="hover:bg-gray-100 dark:hover:bg-gray-600 dark:hover:text-white text-default"> <button class="flex w-full px-4 py-2 text-sm align-text-center hover:text-secondary" id="theme_button_light"> <svg class="w-5 h-5" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"> <use href="/_astro/iconCollection.DeMgcnlv.svg#icon-sun"></use> </svg> <span class="ml-2">Light</span> </button> </li> <li class="hover:bg-gray-100 dark:hover:bg-gray-600 dark:hover:text-white text-default"> <button class="flex w-full px-4 py-2 text-sm align-text-center hover:text-secondary" id="theme_button_dark"> <svg class="w-5 h-5" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"> <use href="/_astro/iconCollection.DeMgcnlv.svg#icon-moon"></use> </svg> <span class="ml-2">Dark</span> </button> </li> <li class="hover:bg-gray-100 dark:hover:bg-gray-600 dark:hover:text-white text-default"> <button class="flex w-full px-4 py-2 text-sm align-text-center hover:text-secondary" id="theme_button_system"> <svg class="w-5 h-5" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"> <use href="/_astro/iconCollection.DeMgcnlv.svg#icon-computer"></use> </svg> <span class="ml-2">System</span> </button> </li> </ul> </div> <script>
  // Ëé∑ÂèñÊåâÈíÆ
  var themeDropdownButton = document.getElementById('theme-dropdown-button'); // Êñ∞Â¢ûÔºöËé∑Âèñ‰∏ªÂºÄÂÖ≥ÊåâÈíÆ
  var themeButtonLight = document.getElementById('theme_button_light');
  var themeButtonDark = document.getElementById('theme_button_dark');
  var themeButtonSystem = document.getElementById('theme_button_system');

  // Ëé∑ÂèñÂõæÊ†á
  var themeToggleDarkIcon = document.getElementById('theme_icon_dark');
  var themeToggleLightIcon = document.getElementById('theme_icon_light');
  var themeToggleSystemIcon = document.getElementById('theme_icon_system');

  function setTheme() {
    if (
      localStorage.getItem('color-theme') === 'dark' ||
      (!('color-theme' in localStorage) && window.matchMedia('(prefers-color-scheme: dark)').matches)
    ) {
      document.documentElement.classList.add('dark');
    } else {
      document.documentElement.classList.remove('dark');
    }
  }

  function setThemeButton() {
    let theme = localStorage.getItem('color-theme');
    // ÂÖàÈöêËóèÊâÄÊúâÔºåÂÜçÊòæÁ§∫ÂØπÂ∫îÁöÑ
    themeToggleDarkIcon.classList.add('hidden');
    themeToggleLightIcon.classList.add('hidden');
    themeToggleSystemIcon.classList.add('hidden');

    if (theme === 'dark') {
      themeToggleDarkIcon.classList.remove('hidden');
    } else if (theme === 'light') {
      themeToggleLightIcon.classList.remove('hidden');
    } else {
      themeToggleSystemIcon.classList.remove('hidden');
    }
  }

  function resetTheme() {
    setTheme();
    setThemeButton();
  }

  // ÂàùÂßãÂåñ
  resetTheme();

  // ÁõëÂê¨Á≥ªÁªüÊöóÈªëÊ®°ÂºèÁöÑÂèòÂåñ
  window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', () => {
    resetTheme();
  });

  // ÁõëÂê¨ Storage ÂèòÂåñ (Â§öÊ†áÁ≠æÈ°µÂêåÊ≠•)
  window.addEventListener('storage', function (event) {
    if (event.key === 'color-theme') {
      resetTheme();
    }
  });

  // --- Ê†∏ÂøÉ‰øÆÂ§çÔºöÁÇπÂáªÈÄâÈ°πÂêéÔºåÂêåÊó∂ÂÖ≥Èó≠‰∏ãÊãâËèúÂçï ---

  // Dark Ê®°Âºè
  themeButtonDark.addEventListener('click', function () {
    localStorage.setItem('color-theme', 'dark');
    resetTheme();
    themeDropdownButton.click(); // Ê®°ÊãüÁÇπÂáª‰∏ªÊåâÈíÆ‰ª•ÂÖ≥Èó≠ËèúÂçï
  });

  // Light Ê®°Âºè
  themeButtonLight.addEventListener('click', function () {
    localStorage.setItem('color-theme', 'light');
    resetTheme();
    themeDropdownButton.click(); // Ê®°ÊãüÁÇπÂáª‰∏ªÊåâÈíÆ‰ª•ÂÖ≥Èó≠ËèúÂçï
  });

  // System Ê®°Âºè
  themeButtonSystem.addEventListener('click', function () {
    localStorage.removeItem('color-theme');
    resetTheme();
    themeDropdownButton.click(); // Ê®°ÊãüÁÇπÂáª‰∏ªÊåâÈíÆ‰ª•ÂÖ≥Èó≠ËèúÂçï
  });
</script> <div id="docsearch" class="group w-10 h-10 text-default hover:bg-gray-100 dark:hover:bg-page focus:outline-none focus:ring-2 focus:ring-gray-200 dark:text-gray-400 dark:hover:bg-gray-700 dark:focus:ring-gray-600 rounded-lg flex items-center justify-center cursor-pointer"> <svg class="w-5 h-5 fill-none stroke-current" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round"> <use href="/_astro/iconCollection.DeMgcnlv.svg#icon-search"></use> </svg> </div> </div> <button data-collapse-toggle="navbar-solid-bg" type="button" class="inline-flex items-center p-2 mx-2 w-10 h-10 justify-center text-sm text-gray-500 rounded-lg md:hidden hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-gray-200 dark:text-gray-400 dark:hover:bg-gray-700 dark:focus:ring-gray-600" aria-controls="navbar-solid-bg" aria-expanded="false" id="navbar-toggle-button"> <span class="sr-only">Open main menu</span> <svg class="w-5 h-5 text-default" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 17 14"> <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M1 1h15M1 7h15M1 13h15"></path> </svg> </button> <nav class="hidden w-full md:block md:w-auto px-4 z-40" id="navbar-solid-bg"> <ul class="flex flex-col font-bold mt-4 rounded-lg bg-gray-50 md:space-x-8 rtl:space-x-reverse md:flex-row md:mt-0 md:border-0 md:bg-transparent dark:bg-gray-800 md:dark:bg-transparent dark:border-gray-700"> <a href="/en/" class="block py-2 px-3 md:p-0 rounded text-heading md:hover:text-secondary hover:bg-gray-100 dark:hover:bg-gray-700 md:hover:bg-transparent md:dark:hover:bg-transparent "> Home </a><a href="/en/posts/" class="block py-2 px-3 md:p-0 rounded text-invert bg-secondary md:bg-transparent md:text-secondary md:dark:bg-transparent " aria-current="page"> Articles </a><a href="/en/weekly/" class="block py-2 px-3 md:p-0 rounded text-heading md:hover:text-secondary hover:bg-gray-100 dark:hover:bg-gray-700 md:hover:bg-transparent md:dark:hover:bg-transparent "> Weekly </a><a href="/en/snippet/" class="block py-2 px-3 md:p-0 rounded text-heading md:hover:text-secondary hover:bg-gray-100 dark:hover:bg-gray-700 md:hover:bg-transparent md:dark:hover:bg-transparent "> Tips </a><a href="/en/sponsorship/" class="block py-2 px-3 md:p-0 rounded text-heading md:hover:text-secondary hover:bg-gray-100 dark:hover:bg-gray-700 md:hover:bg-transparent md:dark:hover:bg-transparent "> Sponsorship </a><a href="/en/about/" class="block py-2 px-3 md:p-0 rounded text-heading md:hover:text-secondary hover:bg-gray-100 dark:hover:bg-gray-700 md:hover:bg-transparent md:dark:hover:bg-transparent "> About </a> </ul> </nav> </div> </div> <div id="placeholder" class="hidden" data-astro-cid-4wsjtibl></div> </div> <script>(function(){const enableSticky = true;
const enableStickyInMobile = true;

  window.onload = function () {
    checkStickyHeader();
    stickySetup();
  };

  window.addEventListener('resize', stickySetup);

  function checkStickyHeader() {
    const title = document.getElementById('blogTitle');
    const stickyHeader = document.getElementById('stickyHeader');
    const placeholder = document.getElementById('placeholder');

    if (title && stickyHeader && placeholder) {
      const offset = title.offsetTop + title.offsetHeight;

      if (shouldStick() && window.scrollY >= offset) {
        stickyHeader.classList.add('sticky');
        placeholder.style.display = 'block';
        placeholder.style.height = `${stickyHeader.offsetHeight}px`;
      } else {
        stickyHeader.classList.remove('sticky');
        placeholder.style.display = 'none';
      }
    }
  }

  function shouldStick() {
    if (!enableSticky) return false;

    let isMobile = window.matchMedia('(max-width: 640px)').matches;
    if (isMobile && !enableStickyInMobile) return false;

    return true;
  }

  function stickySetup() {
    window.onscroll = checkStickyHeader;
  }
})();</script>  </header>  <main class="w-full mx-auto max-w-3xl p-4 md:p-6 "> <div class="container mx-auto">   <div class="mx-auto space-y-4 text-center py-10 " style="width:80%"> <div class="flex mx-auto justify-center"> <div class="flex mx-auto justify-center"> <a class="text-xs font-medium sm:font-semibold mx-2 text-muted hover:text-secondary tracking-normal" href="/en/tags/Web/">
#Web </a> <a class="text-xs font-medium sm:font-semibold mx-2 text-muted hover:text-secondary tracking-wide" href="/zh/posts/blog-update-chronicle-2024/" id="language-switcher-for-topic"> #‰∏≠ÊñáÁâà </a> </div> </div> <h1 class="text-2xl font-bold leadi md:text-3xl text-heading ">Blog Update Chronicle: Welcoming 2024 with a New Blog</h1> <p class="text-sm text-default"> <a itemprop="author" href="https://x.com/intent/follow?screen_name=fatbobman" target="_blank" class="hover:text-secondary font-medium">Fatbobman</a> <!-- <time datetime={`${post.data.publishDate.toISOString()}`}>{date}</time> --> </p> <p class="text-xs text-muted"> Published on <time datetime="2023-12-28T00:20:00.000Z">Dec 28, 2023</time>  </p> </div> <svg style="display: none;"> <symbol id="icon-clipboard" viewBox="0 0 1024 1024"> <path d="M426.666667 42.666667l170.666667 0q41.344 0 74.325333 23.850667t46.336 61.482667l50.005333 0q52.992 0 90.496 37.504t37.504 90.496l0 597.333333q0 52.992-37.504 90.496t-90.496 37.504l-512 0q-52.992 0-90.496-37.504t-37.504-90.496l0-597.333333q0-52.992 37.504-90.496t90.496-37.504l50.005333 0q13.312-37.674667 46.336-61.482667t74.325333-23.850667zM768 213.333333l-50.005333 0q-13.312 37.674667-46.336 61.482667t-74.325333 23.850667l-170.666667 0q-41.344 0-74.325333-23.850667t-46.336-61.482667l-50.005333 0q-17.664 0-30.165333 12.501333t-12.501333 30.165333l0 597.333333q0 17.664 12.501333 30.165333t30.165333 12.501333l512 0q17.664 0 30.165333-12.501333t12.501333-30.165333l0-597.333333q0-17.664-12.501333-30.165333t-30.165333-12.501333zM597.333333 128l-170.666667 0q-17.664 0-30.165333 12.501333t-12.501333 30.165333 12.501333 30.165333 30.165333 12.501333l170.666667 0q17.664 0 30.165333-12.501333t12.501333-30.165333-12.501333-30.165333-30.165333-12.501333z"></path> </symbol> <symbol id="icon-check" viewBox="0 0 1024 1024"> <path d="M421.858 683.366l401.796-448.518c18.66-20.828 50.668-22.586 71.498-3.928 20.828 18.66 22.586 50.67 3.928 71.498L463.638 788.494c-18.606 20.768-50.5 22.586-71.344 4.066l-263.29-233.924c-20.906-18.572-22.796-50.576-4.222-71.48 18.574-20.906 50.576-22.796 71.48-4.222L421.86 683.366z"></path> </symbol> </svg> <div class="relative" id="article-area"> <article class="prose dark:prose-invert mx-auto w-full "> <div> 

<p>Over a month ago, I embarked on a bold venture: to completely revamp my blog site with the aid of artificial intelligence. Now, as the bells of 2024 are about to ring, this brand new version of my blog has finally launched. This article will briefly revisit the journey of this blog update, documenting the key steps and personal insights.</p>
<aside aria-label="advertisement" role="complementary"><div class="dynamic-ad-inline"></div></aside>
<h2 id="the-role-of-ai">The Role of AI</h2>
<p>In my article, ‚Äú<a href="/en/posts/pari-programming-with-ai/" target="_blank">Pair Programming with AI</a>,‚Äù I detailed the core objectives of this blog‚Äôs reconstruction: mastering a brand new programming language and framework while completely overhauling the blog. Looking back at the entire project, I can confidently say that these goals have been successfully achieved.</p>
<p>Throughout this process, AI played multiple roles, including that of a collaborator, mentor, assistant, and designer. It is certain that without the aid of AI, it would have been impossible for me to create such a new blog platform in just over a month. This reconstruction not only deepened my understanding of current front-end technologies but also enriched my knowledge and experience.</p>
<p>AI demonstrated its powerful capability to help us easily venture into previously unknown territories, accelerating our learning and development process. Although AI‚Äôs functionalities are robust, it has not yet reached the point where it can completely replace developers. At present, the relationship between developers and AI is more collaborative than competitive.</p>
<h2 id="astro">Astro</h2>
<p>In pursuit of a better experience and understanding of new front-end development technologies, I deliberately did not choose the static site generation framework commonly used by mainstream blog platforms. Instead, I turned to <a href="https://astro.build/?utm_source=Fatbobman%20Blog&utm_medium=web" rel="noreferrer noopener">Astro</a>.</p>
<p>Astro is a modern front-end framework designed to create faster and more efficient websites. My reasons for choosing Astro include:</p>
<ul>
<li>Astro is a contemporary front-end framework with extensive documentation and an active community.</li>
<li>It offers excellent support for static sites, meaning there was no need for me to upgrade my server configuration.</li>
<li>The framework provides good integration with Markdown files.</li>
<li>Astro can be used in conjunction with any other front-end framework, offering broad possibilities for future development.</li>
<li>Compared to other frameworks, Astro simplifies data flow management and interactivity, making it more user-friendly for beginners.</li>
<li>It includes advanced development tools and optimization features, fulfilling my desire to experience current front-end development technologies.</li>
</ul>
<p>In summary, Astro offers an efficient, flexible, and high-performance solution, making it highly suitable for creating static blogs. It ingeniously combines the advantages of static site generators with the flexibility of modern front-end frameworks, and I am very satisfied with this choice.</p>
<h2 id="starting-from-scratch">Starting from Scratch</h2>
<p>Despite the numerous excellent templates available in the community based on Astro, I decided to build the blog from scratch, aiming for a deeper learning and hands-on experience with the framework.</p>
<p>During this reconstruction process, the assistance of AI, the official Astro documentation, and the <a href="https://astrowind.vercel.app/?utm_source=Fatbobman%20Blog&utm_medium=web" rel="noreferrer noopener">AstroWind</a> template code were immensely helpful. Astro offers comprehensive official documentation in multiple languages, including Chinese, which not only facilitates developers‚Äô learning but also provides a rich corpus of resources for AI. As a result, during the learning and development phase, AI demonstrated a high success rate in addressing questions related to Astro. This underscores the importance of choosing a framework that AI is familiar with when collaborating.</p>
<p>AstroWind, being a full-featured website template based on the Astro framework, allowed me to quickly grasp the structure and functionalities of a complete and mature Astro project.</p>
<p>Of course, starting a project from zero is undeniably a challenging process, especially when adopting a completely new language and framework. Only after more than 20 days of building sufficient foundational code did the blog development enter a phase of rapid progress.</p>
<p><picture>
  <source media="(max-width: 479px)" srcset="https://cdn.fatbobman.com/image-20231227141744629.webp?imageView2/0/w/500"/>
  <source media="(max-width: 767px)" srcset="https://cdn.fatbobman.com/image-20231227141744629.webp?imageView2/0/w/768"/>
  <source media="(max-width: 1024px)" srcset="https://cdn.fatbobman.com/image-20231227141744629.webp?imageView2/0/w/1024"/>
  <img src="https://cdn.fatbobman.com/image-20231227141744629.webp" alt="image-20231227141744629" loading="lazy" decoding="async"/>
</picture></p>
<p><picture>
  <source media="(max-width: 479px)" srcset="https://cdn.fatbobman.com/image-20231227141837829.webp?imageView2/0/w/500"/>
  <source media="(max-width: 767px)" srcset="https://cdn.fatbobman.com/image-20231227141837829.webp?imageView2/0/w/768"/>
  <source media="(max-width: 1024px)" srcset="https://cdn.fatbobman.com/image-20231227141837829.webp?imageView2/0/w/1024"/>
  <img src="https://cdn.fatbobman.com/image-20231227141837829.webp" alt="image-20231227141837829" loading="lazy" decoding="async"/>
</picture></p>
<h2 id="implementing-blog-internationalization-i18n">Implementing Blog Internationalization (i18n)</h2>
<p>Given that my blog needed to support both Chinese and English, my initial hope was to use a framework that provided native internationalization (i18n) support. However, when I started working on this blog reconstruction project, I discovered that only a limited, experimental version of i18n support was available in Astro version 3.5. More critically, its approach to handling different language paths did not meet my expectations. As a result, I decided to implement this functionality myself within the Astro framework.</p>
<p>Fortunately, the difficulty of implementing this part was not significant. It primarily involved configuring routing, formatting dates, and retrieving localized strings. The current implementation has successfully met my needs.</p>
<h2 id="tailwindcss">TailwindCSS</h2>
<p>In the realm of front-end development, TailwindCSS seems to have elicited mixed reactions. Some developers praise it for boosting efficiency, while others view it as somewhat unconventional. As a developer primarily using SwiftUI, I found myself quite accustomed to and fond of the unified approach to structure and style that TailwindCSS offers.</p>
<p>Especially when it comes to building page details, I found it incredibly convenient to directly extract code from other TailwindCSS template libraries, eliminating the need to handle style files separately. This allowed me to quickly visualize the initial layout of a page and then make necessary modifications or restructuring.</p>
<p>Many of the components in my new blog were prototyped using resources from <a href="https://flowbite.com/docs/components/navbar/?utm_source=Fatbobman%20Blog&utm_medium=web" rel="noreferrer noopener">Flowbite</a> and <a href="https://mambaui.com/components/blog?utm_source=Fatbobman%20Blog&utm_medium=web" rel="noreferrer noopener">Mamba UI</a>, and I also utilized some of Flowbite‚Äôs interactive JavaScript code.</p>
<p>Furthermore, the <a href="https://tailwindcss.com/docs/typography-plugin?utm_source=Fatbobman%20Blog&utm_medium=web" rel="noreferrer noopener">@tailwindcss/typography</a> plugin provided elegant basic styling for Markdown content. With just a few adjustments, it met my design needs perfectly. For a blog site primarily based on Markdown content, this significantly enhanced the efficiency of the design process.</p>
<h2 id="mdx">MDX</h2>
<p>Following the reconstruction of my blog, I decided not to synchronize my articles on other platforms anymore. This decision was partly made to facilitate easier maintenance of existing articles. On the other hand, I also wanted to utilize capabilities beyond the normal Markdown functionalities in my future article creations. To achieve this, I converted all previous articles into files with the <code>.mdx</code> extension.</p>
<p>During this conversion process, I found that Astro has stringent requirements for the <code>.mdx</code> file content during the build phase. Many previously unnoticed details (mainly characters that MDX could interpret as directives) led to build failures. This process demanded considerable effort, especially since the compiler‚Äôs error indications often differed from the actual error locations.</p>
<p>With the switch to MDX format, certain issues that were difficult to address in the previous blog version created with Publish have now become much simpler. For instance, automatically adding specific content to articles. In the previous version, I had to create an Ink plugin to implement a custom Markdown directive. Now, with MDX, I can insert a JSX directive into the file and write a remark plugin, enabling greater flexibility and functionality.</p>
<h2 id="typescript">TypeScript</h2>
<p>Reflecting my preference for strongly typed languages, I opted for the strictest checking mode of TypeScript while building the Astro project. Although this approach provided clearer error messages in many instances, it also increased the complexity of starting a project from scratch.</p>
<p>In terms of writing server-side code, TypeScript offered a programming experience similar to Swift, which I greatly appreciate. However, when collaborating with front-end code, especially certain JavaScript codes, the stringent type requirements and Astro‚Äôs special handling of code in <code>.astro</code> files did present some initial challenges.</p>
<p>Despite encountering a few anomalies during development (mostly resolved by clearing the project cache), the overall experience of developing and debugging in VSCode with TypeScript was quite smooth and efficient.</p>
<h2 id="on-site-search">On-Site Search</h2>
<p>Providing an effective static search function for a static blog site has always been a challenge. In my previous version, I tackled this by creating a search dictionary during the construction of static pages. When users performed a search, it was actually conducted by downloading this dictionary to the local system and utilizing JavaScript to execute the search. However, as the content of the blog expanded, the dictionary file grew larger, leading to a less than ideal first-time search experience for users.</p>
<p>In this latest update, I decided to experiment with web-based search services. <a href="https://www.algolia.com/?utm_source=Fatbobman%20Blog&utm_medium=web" rel="noreferrer noopener">Algolia</a>, a search solution provider for businesses, offers free file search services for technology-sharing websites. My blog met their criteria, so the application process went smoothly.</p>
<p>Although integrating Algolia‚Äôs DocSearch service into the blog was relatively straightforward, achieving the desired search results was not as easy. The current search results appear too fragmented, necessitating further adjustments to the server-side crawler settings to yield more effective search outcomes.</p>
<h2 id="deployment-cdn-and-seo">Deployment, CDN, and SEO</h2>
<p>To simplify the workflow for publishing new articles, I decided to implement automated deployment. As Astro generates a new and complete output version during the build process (without differential comparison), I developed a series of small tool scripts with AI‚Äôs help. These tools automated a range of tasks, from the deployment process to generating a list of files for CDN updates, and submitting new URLs to search engines.</p>
<p>With changes in the directory structure and filenames (Astro automatically generates all-lowercase filenames) in the new version, I also used AI to create a path map conversion list for Nginx. This list ensures the stability of SEO through 301 redirects.</p>
<p>Overall, AI played a significant role in this aspect, greatly enhancing work efficiency. Notably, breaking down the tasks and allowing AI to generate specific tool scripts for each operation increased the success rate of AI-generated code.</p>
<h2 id="see-you-in-2024">See You in 2024</h2>
<p>As 2024 draws nearer, I‚Äôd like to extend my sincerest wishes to all my readers at the conclusion of this article. May you enjoy good health and prosperity in the new year. Let‚Äôs embrace a 2024 filled with hope and opportunities together.</p>
<p>If you have any suggestions or comments about the new version of the blog, please feel free to share them in the comments section below.</p> </div> </article> <aside aria-label="advertisement" role="complementary" id="card-advertisement"><div class="dynamic-ad-card"></div></aside> <!-- Ê†áÁ≠æÂÆπÂô®ÔºöÂ±Ö‰∏≠ --><div class="flex flex-wrap justify-center items-center gap-2 mb-10"> <span class="text-xs font-medium text-gray-400 uppercase tracking-widest mr-2">Tags</span> <a href="/en/tags/Web/" class="text-xs font-medium sm:font-semibold mx-2 text-muted hover:text-secondary tracking-normal"> <span class="opacity-50">#</span>Web </a> </div> <section class="py-10" id="related-posts"><!-- Section Ê†áÈ¢òÔºö‰∏éÊ≠£ÊñáÂå∫ÂàÜÔºåÂ¢ûÂä†Â±ÇÊ¨°ÊÑü --><div class="flex items-center gap-2 mb-6 justify-center text-gray-400 dark:text-gray-500"><span class="h-px w-8 bg-gray-200 dark:bg-gray-700"></span><span class="text-xs font-bold uppercase tracking-widest">Recommended Reading</span><span class="h-px w-8 bg-gray-200 dark:bg-gray-700"></span></div><!-- ÁΩëÊ†ºÂ∏ÉÂ±ÄÔºö2Âàó (ÁßªÂä®Á´Ø 1ÂàóÂ§™ÈïøÔºåÁõ¥Êé• 2ÂàóÊõ¥Á¥ßÂáë) --><div class="grid grid-cols-1 md:grid-cols-2 gap-4"><a href="/en/posts/blogupgrade/" class="
                group relative flex flex-col justify-center px-5 py-4 h-full
                bg-white dark:bg-gray-900/50 
                border border-gray-200 dark:border-gray-700/60 rounded-xl
                hover:border-orange-400/50 dark:hover:border-blue-500/50
                hover:shadow-[0_2px_8px_-2px_rgba(0,0,0,0.05)] dark:hover:shadow-none
                transition-all duration-300
              "><!-- Ë£ÖÈ•∞ÔºöÂ∑¶‰∏äËßíÁöÑÂ∞èÁÇπÊàñÂõæÊ†áÔºåÂ¢ûÂä†Á≤æËá¥ÊÑü --><div class="absolute top-4 left-3 w-1 h-1 rounded-full bg-gray-300 dark:bg-gray-600 group-hover:bg-orange-500 dark:group-hover:bg-blue-500 transition-colors"></div><div class="flex items-start justify-between gap-3 pl-2"><!-- Ê†áÈ¢ò --><span class="text-[15px] leading-relaxed font-medium text-gray-700 dark:text-gray-200 group-hover:text-black dark:group-hover:text-white transition-colors ">Blog Update Journal</span><!-- ÁÆ≠Â§¥ÂõæÊ†áÔºöHover Êó∂Âπ≥ÁßªÂá∫Áé∞ --><svg class="w-4 h-4 text-gray-400 opacity-0 -translate-x-2 group-hover:opacity-100 group-hover:translate-x-0 transition-all duration-300 shrink-0 mt-1" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M17 8l4 4m0 0l-4 4m4-4H3"></path></svg></div></a><a href="/en/posts/publish-1/" class="
                group relative flex flex-col justify-center px-5 py-4 h-full
                bg-white dark:bg-gray-900/50 
                border border-gray-200 dark:border-gray-700/60 rounded-xl
                hover:border-orange-400/50 dark:hover:border-blue-500/50
                hover:shadow-[0_2px_8px_-2px_rgba(0,0,0,0.05)] dark:hover:shadow-none
                transition-all duration-300
              "><!-- Ë£ÖÈ•∞ÔºöÂ∑¶‰∏äËßíÁöÑÂ∞èÁÇπÊàñÂõæÊ†áÔºåÂ¢ûÂä†Á≤æËá¥ÊÑü --><div class="absolute top-4 left-3 w-1 h-1 rounded-full bg-gray-300 dark:bg-gray-600 group-hover:bg-orange-500 dark:group-hover:bg-blue-500 transition-colors"></div><div class="flex items-start justify-between gap-3 pl-2"><!-- Ê†áÈ¢ò --><span class="text-[15px] leading-relaxed font-medium text-gray-700 dark:text-gray-200 group-hover:text-black dark:group-hover:text-white transition-colors ">Creating a Blog with Publish: Getting Started</span><!-- ÁÆ≠Â§¥ÂõæÊ†áÔºöHover Êó∂Âπ≥ÁßªÂá∫Áé∞ --><svg class="w-4 h-4 text-gray-400 opacity-0 -translate-x-2 group-hover:opacity-100 group-hover:translate-x-0 transition-all duration-300 shrink-0 mt-1" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M17 8l4 4m0 0l-4 4m4-4H3"></path></svg></div></a><a href="/en/posts/ai-services-i-am-currently-using/" class="
                group relative flex flex-col justify-center px-5 py-4 h-full
                bg-white dark:bg-gray-900/50 
                border border-gray-200 dark:border-gray-700/60 rounded-xl
                hover:border-orange-400/50 dark:hover:border-blue-500/50
                hover:shadow-[0_2px_8px_-2px_rgba(0,0,0,0.05)] dark:hover:shadow-none
                transition-all duration-300
              "><!-- Ë£ÖÈ•∞ÔºöÂ∑¶‰∏äËßíÁöÑÂ∞èÁÇπÊàñÂõæÊ†áÔºåÂ¢ûÂä†Á≤æËá¥ÊÑü --><div class="absolute top-4 left-3 w-1 h-1 rounded-full bg-gray-300 dark:bg-gray-600 group-hover:bg-orange-500 dark:group-hover:bg-blue-500 transition-colors"></div><div class="flex items-start justify-between gap-3 pl-2"><!-- Ê†áÈ¢ò --><span class="text-[15px] leading-relaxed font-medium text-gray-700 dark:text-gray-200 group-hover:text-black dark:group-hover:text-white transition-colors ">AI Services that I am Currently Using</span><!-- ÁÆ≠Â§¥ÂõæÊ†áÔºöHover Êó∂Âπ≥ÁßªÂá∫Áé∞ --><svg class="w-4 h-4 text-gray-400 opacity-0 -translate-x-2 group-hover:opacity-100 group-hover:translate-x-0 transition-all duration-300 shrink-0 mt-1" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M17 8l4 4m0 0l-4 4m4-4H3"></path></svg></div></a><a href="/en/posts/publish-2/" class="
                group relative flex flex-col justify-center px-5 py-4 h-full
                bg-white dark:bg-gray-900/50 
                border border-gray-200 dark:border-gray-700/60 rounded-xl
                hover:border-orange-400/50 dark:hover:border-blue-500/50
                hover:shadow-[0_2px_8px_-2px_rgba(0,0,0,0.05)] dark:hover:shadow-none
                transition-all duration-300
              "><!-- Ë£ÖÈ•∞ÔºöÂ∑¶‰∏äËßíÁöÑÂ∞èÁÇπÊàñÂõæÊ†áÔºåÂ¢ûÂä†Á≤æËá¥ÊÑü --><div class="absolute top-4 left-3 w-1 h-1 rounded-full bg-gray-300 dark:bg-gray-600 group-hover:bg-orange-500 dark:group-hover:bg-blue-500 transition-colors"></div><div class="flex items-start justify-between gap-3 pl-2"><!-- Ê†áÈ¢ò --><span class="text-[15px] leading-relaxed font-medium text-gray-700 dark:text-gray-200 group-hover:text-black dark:group-hover:text-white transition-colors ">Creating a Blog with Publish: Theme</span><!-- ÁÆ≠Â§¥ÂõæÊ†áÔºöHover Êó∂Âπ≥ÁßªÂá∫Áé∞ --><svg class="w-4 h-4 text-gray-400 opacity-0 -translate-x-2 group-hover:opacity-100 group-hover:translate-x-0 transition-all duration-300 shrink-0 mt-1" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M17 8l4 4m0 0l-4 4m4-4H3"></path></svg></div></a></div></section> <!-- <BuymeacoffeeInPost lang={lang} /> --> <!-- <WeeklySubscribe lang={lang} bottom={0} top={8} anchor='related-posts'/> --> <!-- <Author lang={lang} /> --> <!-- Êï¥ÂêàÂ∫ïÂ∫ßÂÆπÂô® --><div class="mt-16 mb-28 bg-gray-50 dark:bg-gray-800/50 border border-gray-100 dark:border-gray-700/60 rounded-2xl p-6 sm:p-8"> <div class="flex flex-col lg:flex-row items-center justify-between gap-8 lg:gap-12"> <!-- Â∑¶‰æßÔºöËÆ¢ÈòÖÂå∫Âüü --> <!-- ÈÄÇÈÖçÈÄªËæëÔºöÁßªÂä®Á´Ø/Âπ≥ÊùøÂ±Ö‰∏≠(text-center)ÔºåÊ°åÈù¢Á´ØÂ±ÖÂ∑¶(lg:text-left) --> <div class="flex-1 w-full text-center lg:text-left flex flex-col items-center lg:items-start"> <h3 class="font-bold text-xl text-gray-900 dark:text-gray-100 mb-2"> Subscribe to Fatbobman </h3> <p class="text-sm text-gray-500 dark:text-gray-400 mb-6 max-w-md"> Weekly Swift &amp; SwiftUI highlights. Join developers. </p> <!-- ËÆ¢ÈòÖÊåâÈíÆÔºö‰ΩøÁî®ÈîöÁÇπÈìæÊé•Ëß¶Âèë Modal --> <a href="#subscript" id="subscribe-bottom-btn" class="
          bg-black dark:bg-white text-white dark:text-black
          font-bold text-sm px-8 py-3 rounded-xl
          hover:opacity-80 hover:scale-105 active:scale-95
          transition-all duration-200 shadow-sm
          w-full sm:w-auto inline-block text-center
        "> Subscribe Now </a> </div> <!-- Âè≥‰æßÔºöÂäüËÉΩÊåâÈíÆÁªÑ --> <!-- ÈÄÇÈÖçÈÄªËæëÔºöÁßªÂä®Á´ØÂ†ÜÂè†(grid-cols-1)ÔºåÂπ≥Êùø‰ª•‰∏äÂπ∂Êéí(sm:grid-cols-2) --> <!-- w-full lg:w-auto ‰øùËØÅÁßªÂä®Á´ØÊíëÊª°ÔºåÊ°åÈù¢Á´ØÁ¥ßÂáë --> <div class="grid grid-cols-1 sm:grid-cols-2 gap-4 w-full lg:w-auto min-w-[320px]"> <!-- ÂíñÂï°ÊåâÈíÆ --> <a href="https://www.buymeacoffee.com/fatbobman" target="_blank" rel="noopener" class="group flex items-center justify-center lg:justify-start gap-3 px-5 py-3 bg-white dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-xl shadow-sm hover:shadow-md hover:border-orange-200 dark:hover:border-orange-900 transition-all"> <span class="text-2xl group-hover:scale-110 transition-transform">‚òïÔ∏è</span> <div class="text-left"> <div class="text-[10px] text-gray-400 font-bold uppercase tracking-wider">Support</div> <div class="text-sm font-bold text-gray-800 dark:text-gray-100">Buy me a Coffee</div> </div> </a> <!-- Discord ÊåâÈíÆ --> <a href="https://x.com/intent/follow?screen_name=fatbobman" target="_blank" rel="noopener" class="group flex items-center justify-center lg:justify-start gap-3 px-5 py-3 bg-white dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-xl shadow-sm hover:shadow-md hover:border-blue-200 dark:hover:border-blue-900 transition-all"> <span class="text-2xl group-hover:scale-110 transition-transform">üí¨</span> <div class="text-left"> <div class="text-[10px] text-gray-400 font-bold uppercase tracking-wider">CONNECT</div> <div class="text-sm font-bold text-gray-800 dark:text-gray-100">Follow on X</div> </div> </a> </div> </div> </div> <script>(function(){const lang = "en";

  // Track newsletter subscription button click via GTM dataLayer
  document.addEventListener('DOMContentLoaded', () => {
    const subscribeBtn = document.getElementById('subscribe-bottom-btn');
    if (!subscribeBtn) return;

    subscribeBtn.addEventListener('click', () => {
      // Initialize dataLayer if not exists
      window.dataLayer = window.dataLayer || [];

      // Push event to dataLayer for GTM
      window.dataLayer.push({
        event: 'subscribe_click',
        content_type: 'newsletter_subscribe',
        click_location: 'bottom',
        lang: lang
      });

      console.log('[Subscribe Tracking] Bottom subscribe button clicked (dataLayer)');
    }, { capture: true });  // ‰ΩøÁî®ÊçïËé∑Èò∂ÊÆµÔºåÁ°Æ‰øùÂú®ÂÖ∂‰ªñÁõëÂê¨Âô®‰πãÂâçÊâßË°å
  });
})();</script> <!-- 
  ÊèêÁ§∫Ê°ÜÂÆπÂô® (Toast Container)
  z-index: Á°Æ‰øùÂú®ÊúÄ‰∏äÂ±Ç
--><div id="copy-alert" class="hidden fixed bottom-10 right-5 z-50"> <div id="alert-1" class="
      flex items-center px-6 py-3 rounded-full shadow-lg border backdrop-blur-md
      transition-all duration-300 transform
      
      /* === Light Mode (Red Theme) === */
      /* ÁôΩÂ∫ï + Á∫¢Ëâ≤ÊñáÂ≠ó + Á∫¢Ëâ≤ËæπÊ°ÜÔºåÈò¥ÂΩ±Â∏¶Á∫¢ */
      bg-white/95 text-red-600 border-red-100 shadow-red-500/10
      
      /* === Dark Mode (Blue Theme) === */
      /* Ê∑±ËìùÂ∫ï + ËìùËâ≤ÊñáÂ≠ó + ËìùËâ≤ËæπÊ°ÜÔºåÈò¥ÂΩ±Â∏¶Ëìù */
      dark:bg-slate-800/90 dark:text-blue-400 dark:border-blue-500/30 dark:shadow-blue-500/20
    " role="alert"> <!-- ÂõæÊ†á (ÂèØÈÄâÔºåÂ¢ûÂä†Á≤æËá¥ÊÑü) --> <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5 mr-2" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"> <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"></path> <polyline points="22 4 12 14.01 9 11.01"></polyline> </svg> <div class="text-sm font-bold tracking-wide">Link copied</div> </div> </div> <style>
  /* ‰øùÊåÅÂéüÊúâÁöÑÂõæÊ†áÂÆö‰ΩçÈÄªËæë */
  .copy-icon {
    position: absolute;
    left: -30px; 
    top: 50%;
    transform: translateY(-50%);
    cursor: pointer;
    transition: opacity 0.3s ease;
    pointer-events: all;
    /* ÁªôÂõæÊ†áÂä†‰∏ÄÁÇπÈ¢úËâ≤ËøáÊ∏° */
    color: #9ca3af; /* gray-400 */
  }
  
  /* Hover Êó∂ÂõæÊ†áÂèòËâ≤ (JSÈáåÊ∑ªÂä†‰∫Ü hover:text-secondary Á±ªÔºåËøôÈáå‰Ωú‰∏∫ÂÖúÂ∫ï) */
  .copy-icon:hover {
    color: var(--aw-color-primary); /* ‰ΩøÁî® CSS ÂèòÈáèÂìçÂ∫î‰∏ªÈ¢ò */
  }

  article h2,
  article h3,
  article h4,
  article h5 {
    position: relative;
  }

  /* ÊèêÁ§∫Ê°ÜÂä®Áîª */
  #copy-alert {
    transition: all 0.5s cubic-bezier(0.68, -0.55, 0.27, 1.55); /* ÂºπÊÄßÂä®Áîª */
    transform: translateY(100px);
    opacity: 0;
  }
  
  #copy-alert.show {
    transform: translateY(0);
    opacity: 1;
  }
</style> <script>(function(){const lang = "en";

  // ‰ΩøÁî® defer Êàñ load ‰∫ã‰ª∂Á°Æ‰øù DOM Â∞±Áª™
  document.addEventListener('DOMContentLoaded', () => {
    let hideTimeout;
    const alertDiv = document.getElementById('copy-alert');

    // ÁªëÂÆöÊ†áÈ¢òÂõæÊ†á
    document.querySelectorAll('article h2, article h3, article h4, article h5').forEach((header) => {
      // ÂàõÂª∫ÂõæÊ†áÂÆπÂô®
      const copyIcon = document.createElement('span');
      // ‰ΩøÁî®Êõ¥ÁÆÄÊ¥ÅÁöÑ Link ÂõæÊ†á SVG
      copyIcon.innerHTML = `<svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5 hidden md:block" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1" /></svg>`;
      copyIcon.className = 'copy-icon';
      copyIcon.style.opacity = '0';
      
      header.insertBefore(copyIcon, header.firstChild);

      // ÊÇ¨ÂÅúÊòæÁ§∫ÈÄªËæë
      header.addEventListener('mouseover', () => copyIcon.style.opacity = '1');
      header.addEventListener('mouseout', () => copyIcon.style.opacity = '0');

      // ÁÇπÂáªÂ§çÂà∂ÈÄªËæë
      copyIcon.addEventListener('click', () => {
        const url = window.location.href.split('#')[0] + '#' + header.id;
        
        navigator.clipboard.writeText(url).then(() => {
          if (alertDiv) {
            // ÊòæÁ§∫Âä®Áîª
            alertDiv.classList.remove('hidden');
            // Âº∫Âà∂ÈáçÁªò‰ª•Ëß¶Âèë transition
            void alertDiv.offsetWidth; 
            alertDiv.classList.add('show');

            // Ê∏ÖÈô§ÊóßÂÆöÊó∂Âô®
            if (hideTimeout) clearTimeout(hideTimeout);

            // 3ÁßíÂêéÈöêËóè
            hideTimeout = setTimeout(() => {
              alertDiv.classList.remove('show');
              // Á≠âÂæÖÂä®ÁîªÁªìÊùüÂêéÂÜç hidden
              setTimeout(() => {
                alertDiv.classList.add('hidden');
              }, 500);
            }, 3000);
          }
        });
      });
    });
  });
})();</script> <script>
  window.copyCode = function(button, event) {
    if (event) event.preventDefault();

    // header ÊòØÊåâÈíÆÁöÑÁà∂Á∫ß div.code-header
    const header = button.closest('.code-header');
    if (!header) return;

    // ‰ª£Á†ÅÂùóÊòØ header ÁöÑ‰∏ã‰∏Ä‰∏™ÂÖÑÂºüÂÖÉÁ¥† (pre ÊàñÂåÖÂê´ pre ÁöÑÂÖÉÁ¥†)
    let nextEl = header.nextElementSibling;
    if (!nextEl) return;

    // ÊâæÂà∞ pre ÂÖÉÁ¥†ÔºàÂèØËÉΩÊòØÁõ¥Êé•ÁöÑ preÔºåÊàñËÄÖÂú® figure/div ÂÜÖÔºâ
    const pre = nextEl.tagName === 'PRE' ? nextEl : nextEl.querySelector('pre');
    const codeEl = pre?.querySelector('code') ?? pre;
    if (!codeEl) return;

    const code = codeEl.textContent ?? '';

    // ÂõæÊ†áÂàáÊç¢ÔºöÁõ¥Êé•Êìç‰Ωú style.opacity Êõ¥ÂèØÈù†
    function showSuccessFeedback() {
      const copyIcon = button.querySelector('.code-copy-icon');
      const successIcon = button.querySelector('.code-success-icon');

      if (copyIcon && successIcon) {
        // ÈöêËóèÂ§çÂà∂ÂõæÊ†áÔºåÊòæÁ§∫ÊàêÂäüÂõæÊ†á
        copyIcon.style.opacity = '0';
        successIcon.style.opacity = '1';

        // 2ÁßíÂêéÊÅ¢Â§ç
        setTimeout(() => {
          copyIcon.style.opacity = '1';
          successIcon.style.opacity = '0';
        }, 2000);
      }
    }

    const handleFailure = (err) => {
      console.error('Copy Failed', err);
      fallbackCopyTextToClipboard(code);
    };

    if (navigator.clipboard && window.isSecureContext) {
      navigator.clipboard.writeText(code).then(showSuccessFeedback).catch(handleFailure);
    } else {
      fallbackCopyTextToClipboard(code);
    }

    function fallbackCopyTextToClipboard(text) {
      const textArea = document.createElement('textarea');
      textArea.value = text;
      textArea.style.position = 'fixed';
      textArea.style.opacity = '0';
      document.body.appendChild(textArea);
      textArea.focus();
      textArea.select();

      try {
        const successful = document.execCommand('copy');
        if (successful) {
          showSuccessFeedback();
        } else {
          console.error('Fallback Copy Failed: execCommand returned false');
        }
      } catch (err) {
        console.error('Fallback Copy Failed', err);
      }
      document.body.removeChild(textArea);
    }
  }
</script> <script>(function(){const baseUrl = "https://fatbobman.com/ads/";
const langSuffix = "en";
const utmTerm = "en/blog-update-chronicle-2024";

  // ========================================
  // Configuration & Constants
  // ========================================

  const CACHE_DURATION = 20 * 60 * 1000; // 20 minutes
  const STALE_THRESHOLD = 24 * 60 * 60 * 1000; // 24 hours - when to force UI refresh

  // ËØªÂèñ URL ÂèÇÊï∞Áî®‰∫éÊµãËØïÂíåÈ¢ÑËßà
  const urlParams = new URLSearchParams(window.location.search);
  const adIdParam = urlParams.get('adid') || urlParams.get('adId');
  const sponsorIdParam = urlParams.get('sponsorId');
  const scheduleIdParam = urlParams.get('scheduleId');
  const forceUpdateParam = urlParams.get('adForceUpdate') === 'true';

  const isPreviewMode = !!(adIdParam || sponsorIdParam || scheduleIdParam);
  const effectiveCacheDuration = isPreviewMode ? 60 * 1000 : CACHE_DURATION;

  // Store current ad metadata for click tracking
  const currentAdMetadata = {
    version1: null,  // .dynamic-ad-card metadata
    version2: null   // .dynamic-ad-inline metadata
  };

  // ========================================
  // Cache Management Functions
  // ========================================

  /**
   * Load ad from cache with SWR metadata
   * @param {string} cacheKey - Cache key
   * @returns {Object|null} - Cached ad data with metadata or null
   */
  function loadFromCache(cacheKey) {
    try {
      const cachedData = localStorage.getItem(cacheKey);
      if (!cachedData) return null;

      const cached = JSON.parse(cachedData);

      // Backward compatibility: handle old cache format
      if (cached.content && !cached.metadata) {
        console.log(`[AdsLoader SWR] Old cache format detected for ${cacheKey}, will update`);
        return null; // Force refresh to get new format
      }

      return cached;
    } catch (e) {
      console.warn(`[AdsLoader SWR] Failed to parse cached ad: ${cacheKey}`, e);
      localStorage.removeItem(cacheKey);
      return null;
    }
  }

  /**
   * Save ad to cache with metadata
   * @param {string} cacheKey - Cache key
   * @param {string} content - Ad HTML content
   * @param {Object} metadata - Ad metadata from response headers
   */
  function saveToCache(cacheKey, content, metadata) {
    try {
      const cacheData = {
        content: content,
        metadata: {
          ...metadata,
          fetchedAt: Date.now()
        }
      };

      localStorage.setItem(cacheKey, JSON.stringify(cacheData));
      const cacheMinutes = Math.round(effectiveCacheDuration / 60000);
      console.log(`[AdsLoader SWR] Saved to cache: ${cacheKey} (${cacheMinutes} min)`, metadata);
    } catch (e) {
      console.warn(`[AdsLoader SWR] Failed to save cache: ${cacheKey}`, e);
    }
  }

  /**
   * Extract metadata from response headers
   * @param {Response} response - Fetch response object
   * @returns {Object} - Metadata object
   */
  function extractMetadata(response) {
    return {
      sponsorId: response.headers.get('X-Sponsor-Id') || 'unknown',
      adId: response.headers.get('X-Ad-Id') || 'unknown',
      version: parseInt(response.headers.get('X-Ad-Version') || '1'),
      lang: response.headers.get('X-Ad-Lang') || langSuffix,
      lastUpdated: response.headers.get('Last-Modified') || new Date().toISOString(),
      forceUpdate: response.headers.get('X-Force-Update') === 'true',
      campaign: response.headers.get('X-UTM-Campaign') || null // Optional UTM campaign
    };
  }

  // ========================================
  // Smart Refresh Logic
  // ========================================

  /**
   * Check if two timestamps are on the same UTC calendar day
   * @param {number} timestamp1 - First timestamp (milliseconds)
   * @param {number} timestamp2 - Second timestamp (milliseconds)
   * @returns {boolean} - True if same UTC day
   */
  function isSameUTCDay(timestamp1, timestamp2) {
    const d1 = new Date(timestamp1);
    const d2 = new Date(timestamp2);
    return d1.getUTCFullYear() === d2.getUTCFullYear() &&
           d1.getUTCMonth() === d2.getUTCMonth() &&
           d1.getUTCDate() === d2.getUTCDate();
  }

  /**
   * Decide if UI should be refreshed based on cache age and ad changes
   * @param {Object|null} cached - Cached ad data with metadata
   * @param {Object} newMetadata - New ad metadata from server
   * @returns {boolean} - True if UI should be refreshed
   */
  function shouldRefreshUI(cached, newMetadata) {
    // Rule 1: No cache -> always render (first load)
    if (!cached || !cached.metadata) {
      console.log('[AdsLoader SWR] No cache, will render immediately');
      return true;
    }

    // Rule 2: Force update parameter -> always refresh
    if (forceUpdateParam || newMetadata.forceUpdate) {
      console.log('[AdsLoader SWR] Force update detected, will refresh UI');
      return true;
    }

    const cachedMeta = cached.metadata;
    const cacheAge = Date.now() - cachedMeta.fetchedAt;

    // Rule 3: Sponsor changed -> always refresh (different advertiser)
    if (cachedMeta.sponsorId !== newMetadata.sponsorId) {
      console.log(`[AdsLoader SWR] Sponsor changed: ${cachedMeta.sponsorId} ‚Üí ${newMetadata.sponsorId}, will refresh UI`);
      return true;
    }

    // Rule 4: UTC date changed -> always refresh (ad schedule switches by calendar day)
    if (!isSameUTCDay(cachedMeta.fetchedAt, Date.now())) {
      const cachedDate = new Date(cachedMeta.fetchedAt).toISOString().split('T')[0];
      const currentDate = new Date().toISOString().split('T')[0];
      console.log(`[AdsLoader SWR] UTC date changed: ${cachedDate} ‚Üí ${currentDate}, will refresh UI`);
      return true;
    }

    // Rule 5: Cache older than 24 hours -> always refresh
    if (cacheAge > STALE_THRESHOLD) {
      console.log(`[AdsLoader SWR] Cache very old (${Math.round(cacheAge / 3600000)}h), will refresh UI`);
      return true;
    }

    // Rule 6: Ad ID changed (same sponsor, different version) -> refresh if old, else silent update
    if (cachedMeta.adId !== newMetadata.adId) {
      console.log(`[AdsLoader SWR] Ad changed but cache fresh (${Math.round(cacheAge / 60000)}min), will update silently`);
      return false; // Silent update
    }

    // Rule 7: Default - silent update
    console.log(`[AdsLoader SWR] Cache fresh (${Math.round(cacheAge / 60000)}min old), will update silently`);
    return false;
  }

  // ========================================
  // UTM Parameters Injection
  // ========================================

  /**
   * Inject UTM parameters to all links in ad HTML
   * Only applies to non-default ads (sponsored ads)
   * @param {string} html - Ad HTML content
   * @param {Object} metadata - Ad metadata (sponsorId, campaign, version, etc.)
   * @returns {string} - Modified HTML with UTM parameters
   */
  function injectUTMParameters(html, metadata) {
    // Skip UTM injection for default ads
    if (metadata.sponsorId === 'default') {
      return html;
    }

    // Create temporary container to parse HTML
    const tempDiv = document.createElement('div');
    tempDiv.innerHTML = html;

    // Find all links
    const links = tempDiv.querySelectorAll('a[href]');

    if (links.length === 0) {
      return html; // No links found, return original HTML
    }

    // Build UTM parameters
    const utmParams = {
      utm_source: 'fatbobman',
      utm_medium: 'blog',
      utm_content: metadata.version === 2 ? 'post-header' : 'post-footer'
    };

    // Add campaign if available
    if (metadata.campaign) {
      utmParams.utm_campaign = metadata.campaign;
    }

    // Add term if available
    if (utmTerm) {
      utmParams.utm_term = utmTerm;
    }

    // Inject UTM parameters to each link
    links.forEach(link => {
      try {
        const url = new URL(link.href);

        // Add each UTM parameter
        Object.entries(utmParams).forEach(([key, value]) => {
          url.searchParams.set(key, value);
        });

        link.href = url.toString();
      } catch (e) {
        // Invalid URL, skip
        console.warn('[AdsLoader SWR] Skipping invalid URL:', link.href, e);
      }
    });

    console.log('[AdsLoader SWR] Injected UTM parameters:', utmParams, `(${links.length} link(s))`);
    return tempDiv.innerHTML;
  }

  // ========================================
  // GA4 Click Tracking
  // ========================================

  /**
   * Track ad click in Google Analytics 4 via GTM dataLayer
   * @param {string} destinationUrl - Click destination URL
   * @param {Object} metadata - Ad metadata
   */
  function trackAdClick(destinationUrl, metadata) {
    // Initialize dataLayer if not exists (works with both regular GTM and Partytown)
    window.dataLayer = window.dataLayer || [];

    // Build event data based on ad type
    const eventData = {
      event: 'ad_click',
      destination_url: destinationUrl
    };

    if (metadata.sponsorId === 'default') {
      // Default ad: simple tracking with position only
      eventData.content_type = 'default_ad';
      eventData.ad_position = metadata.version === 2 ? 'post-header' : 'post-footer';
    } else {
      // Sponsored ad: detailed tracking
      eventData.content_type = 'sponsored_ad';
      eventData.ad_position = metadata.version === 2 ? 'post-header' : 'post-footer';
      eventData.sponsor_id = metadata.sponsorId;
      eventData.ad_id = metadata.adId;
      eventData.ad_version = metadata.version;
      eventData.ad_lang = metadata.lang;
    }

    // Push event to dataLayer for GTM
    window.dataLayer.push(eventData);
    console.log('[AdsLoader SWR] Ad click tracked (dataLayer):', eventData);
  }

  /**
   * Attach click tracking to ad links (reads metadata dynamically from currentAdMetadata)
   * @param {string} containerSelector - Container selector
   * @param {string} version - 'version1' or 'version2' key in currentAdMetadata
   */
  function attachClickTracking(containerSelector, version) {
    const containers = document.querySelectorAll(containerSelector);
    if (containers.length === 0) return;

    containers.forEach(container => {
      // Use event delegation to handle dynamically loaded ads
      container.addEventListener('click', (event) => {
        // Find the clicked link (or parent link)
        const link = event.target.closest('a[href]');
        if (!link) return;

        // Get current metadata dynamically (always up-to-date)
        const metadata = currentAdMetadata[version];
        if (!metadata) {
          console.warn(`[AdsLoader SWR] No metadata available for ${version}, skipping tracking`);
          return;
        }

        // Track the click
        trackAdClick(link.href, metadata);
      }, { capture: false, passive: true });
    });

    console.log(`[AdsLoader SWR] Click tracking attached to ${containers.length} container(s): ${containerSelector}`);
  }

  // ========================================
  // Ad Loading & Rendering
  // ========================================

  /**
   * Render ad to containers
   * @param {string} html - Ad HTML content
   * @param {string} containerSelector - Container selector
   * @param {Object} metadata - Ad metadata for tracking
   * @param {string} reason - Reason for rendering (for logging)
   */
  function renderAd(html, containerSelector, metadata, reason = 'unknown') {
    const containers = document.querySelectorAll(containerSelector);
    if (containers.length === 0) {
      console.warn(`[AdsLoader SWR] No containers found: ${containerSelector}`);
      return;
    }

    containers.forEach(container => {
      container.innerHTML = html;
    });

    // Store metadata for this version
    if (containerSelector === '.dynamic-ad-card') {
      currentAdMetadata.version1 = metadata;
    } else if (containerSelector === '.dynamic-ad-inline') {
      currentAdMetadata.version2 = metadata;
    }

    console.log(`[AdsLoader SWR] Rendered ad to ${containers.length} container(s): ${containerSelector} (${reason})`);
  }

  /**
   * Fetch ad from server
   * @param {number} version - Ad version (1 or 2)
   * @param {string} cacheKey - Cache key
   * @param {string} containerSelector - Container selector
   * @param {Object|null} cached - Cached ad data (if any)
   */
  async function fetchAd(version, cacheKey, containerSelector, cached) {
    // Build URL with parameters
    const params = new URLSearchParams({
      lang: langSuffix,
      version: version.toString()
    });

    // Add test/preview parameters
    if (adIdParam) params.append('adId', adIdParam);
    if (sponsorIdParam) params.append('sponsorId', sponsorIdParam);
    if (scheduleIdParam) params.append('scheduleId', scheduleIdParam);
    if (forceUpdateParam) params.append('adForceUpdate', 'true');

    const url = `${baseUrl}?${params.toString()}`;
    const previewTag = isPreviewMode ? ' [PREVIEW MODE]' : '';
    console.log(`[AdsLoader SWR] Fetching ad: ${url}${previewTag}`);

    try {
      const response = await fetch(url, {
        headers: { 'Accept': 'text/html' },
        cache: 'no-cache'
      });

      // Validate HTTP status
      if (!response.ok) {
        throw new Error(`HTTP ${response.status}: ${response.statusText}`);
      }

      // Validate required metadata headers
      const sponsorId = response.headers.get('X-Sponsor-Id');
      const adId = response.headers.get('X-Ad-Id');

      if (!sponsorId || !adId || sponsorId === 'null' || adId === 'null') {
        console.warn('[AdsLoader SWR] Invalid response: missing or null metadata headers');
        throw new Error('Invalid ad response: missing metadata headers');
      }

      const content = await response.text();
      const metadata = extractMetadata(response);

      // Inject UTM parameters for sponsored ads
      const processedContent = injectUTMParameters(content, metadata);

      console.log('[AdsLoader SWR] Server response metadata:', metadata);

      // Decide if UI should be refreshed
      const shouldRefresh = shouldRefreshUI(cached, metadata);

      // Always update cache (with UTM-enhanced content)
      saveToCache(cacheKey, processedContent, metadata);

      // Conditionally refresh UI (with UTM-enhanced content)
      if (shouldRefresh) {
        renderAd(processedContent, containerSelector, metadata, shouldRefresh === true && !cached ? 'initial load' : 'smart refresh');
      } else {
        console.log(`[AdsLoader SWR] UI kept as-is, updated cache for next visit`);
      }

    } catch (error) {
      console.error(`[AdsLoader SWR] Error loading ad (version ${version}):`, error);

      // Smart fallback strategy based on cached ad type
      if (cached && cached.metadata) {
        if (cached.metadata.sponsorId === 'default') {
          // Default ad: keep displaying cached content (own content, safe to show when stale)
          console.log('[AdsLoader SWR] Fetch failed, keeping default ad cache');
          // UI already shows cached content, no action needed
        } else {
          // Sponsored ad: clear display (avoid showing expired paid ads)
          console.log('[AdsLoader SWR] Fetch failed, clearing sponsored ad to avoid showing stale content');
          const emptyMetadata = { sponsorId: 'error', version: version };
          renderAd('', containerSelector, emptyMetadata, 'error-clear');
        }
      } else {
        // No cache: leave blank
        console.log('[AdsLoader SWR] Fetch failed with no cache, leaving blank');
      }
    }
  }

  /**
   * Load ad with SWR strategy
   * @param {number} version - Ad version
   * @param {string} cacheKey - Cache key
   * @param {string} containerSelector - Container selector
   */
  function loadAd(version, cacheKey, containerSelector) {
    // Check if containers exist
    const containers = document.querySelectorAll(containerSelector);
    if (containers.length === 0) {
      console.log(`[AdsLoader SWR] No containers found for ${containerSelector}, skipping version ${version}`);
      return;
    }

    // Step 1: Load from cache if available
    const cached = loadFromCache(cacheKey);
    if (cached && cached.content) {
      console.log(`[AdsLoader SWR] Displaying cached ad: ${cacheKey}`, cached.metadata);
      // Inject UTM parameters to cached content (in case it's from old cache without UTM)
      const processedCachedContent = injectUTMParameters(cached.content, cached.metadata);
      renderAd(processedCachedContent, containerSelector, cached.metadata, 'from cache');
    } else {
      console.log(`[AdsLoader SWR] No cache available for ${cacheKey}, will show blank until loaded`);
    }

    // Step 2: Fetch from server in background
    fetchAd(version, cacheKey, containerSelector, cached);
  }

  // ========================================
  // Initialization
  // ========================================

  function initAds() {
    console.log('[AdsLoader SWR] Initializing ad loading with Stale-While-Revalidate strategy...');
    console.log(`[AdsLoader SWR] Config: cacheDuration=${effectiveCacheDuration/60000}min, staleThreshold=${STALE_THRESHOLD/3600000}h`);

    if (isPreviewMode) {
      const params = [];
      if (adIdParam) params.push(`adId=${adIdParam}`);
      if (sponsorIdParam) params.push(`sponsorId=${sponsorIdParam}`);
      if (scheduleIdParam) params.push(`scheduleId=${scheduleIdParam}`);
      console.log(`[AdsLoader SWR] üîç PREVIEW MODE: ${params.join(', ')}`);
    }

    if (forceUpdateParam) {
      console.log('[AdsLoader SWR] üîÑ FORCE UPDATE MODE: UI will always refresh');
    }

    // Generate cache keys (include test params to avoid conflicts)
    const cacheKeySuffix = langSuffix + (adIdParam || sponsorIdParam || scheduleIdParam || '');
    const cacheKeyCard = 'dynamicAdCardSWR-' + cacheKeySuffix;
    const cacheKeyInline = 'dynamicAdInlineSWR-' + cacheKeySuffix;

    // Load both ad versions
    loadAd(1, cacheKeyCard, '.dynamic-ad-card');
    loadAd(2, cacheKeyInline, '.dynamic-ad-inline');

    // Attach click tracking event listeners (after ads are loaded)
    // These will dynamically read metadata from currentAdMetadata
    attachClickTracking('.dynamic-ad-card', 'version1');
    attachClickTracking('.dynamic-ad-inline', 'version2');
  }

  // Start loading when page is ready
  if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', initAds);
  } else {
    initAds();
  }
})();</script> <script type="module">var c=document.querySelectorAll("article");c.forEach(function(r){var a=r.querySelectorAll("a");a.forEach(function(e){var t=e.getAttribute("href");t&&t.startsWith("http")&&!t.includes("fatbobman.com")&&!t.includes("fatbobman.github.com")&&!t.includes("localhost")&&e.setAttribute("target","_blank")})});</script> <!-- <LeaveFeedback lang={lang} /> --> <!-- <BottomWeeklySubscribe lang={lang} /> --> <div id="gitalk-container" data-comment-id="Blog Update Chronicle 2024" data-lang="en" data-repo="blogComments" data-createIssueManually="true" data-anchor="card-advertisement" class="pb-16"></div>

    <script defer>
      document.addEventListener('DOMContentLoaded', async function () {
      const container = document.getElementById('gitalk-container');
      let anchor = '';
      if (container) {
        anchor = container.getAttribute('data-anchor') || '';
      }
        // ÊèêÂâçÊ£ÄÊü•ÊòØÂê¶ÈúÄË¶ÅÂä†ËΩΩËØÑËÆ∫
        try {
          const response = await fetch('https://fatbobman.com/status/comment');
          const data = await response.text();
          console.log(data, "comment");

          if (data !== '1') {
            console.log('ËØÑËÆ∫ÂäüËÉΩÊú™ÂêØÁî®ÔºåË∑≥ËøáÁõëÊéßÂíåÂä†ËΩΩÊìç‰Ωú„ÄÇ');
            return; // ÊèêÂâçËøîÂõûÔºåË∑≥ËøáÂêéÁª≠ÈÄªËæë
          }
        } catch (error) {
          console.error('Ê£ÄÊü•ËØÑËÆ∫Áä∂ÊÄÅÊó∂Âá∫ÈîôÔºö', error);
          return; // Âá∫Áé∞ÈîôËØØÊó∂‰πüË∑≥ËøáÂêéÁª≠ÈÄªËæë
        }

        // Â¶ÇÊûúËøîÂõûÂÄº‰∏∫ "1"ÔºåÂàôÂêØÂä®ËßÇÂØüÂô®
        const observerTarget = document.getElementById(anchor);
        if (observerTarget) {
          const observer = new IntersectionObserver(async (entries, observer) => {
            const entry = entries[0];
            if (entry.isIntersecting) {
              console.log("load comment")
              // ÂÅúÊ≠¢ËßÇÂØüÔºåÈÅøÂÖçÈáçÂ§çËß¶Âèë
              observer.unobserve(observerTarget);

              // Âä®ÊÄÅÂä†ËΩΩËØÑËÆ∫Âå∫ËÑöÊú¨
              await loadGitalk();
            }
          }, {
            root: null, // Áõ∏ÂØπ‰∫éËßÜÂè£
            rootMargin: '20%', // ÊèêÂâç 20% ÁöÑ‰ΩçÁΩÆËß¶Âèë
            threshold: 0.1, // ÂÖÉÁ¥†ÊòæÁ§∫ 10% Âç≥Ëß¶Âèë
          });

          observer.observe(observerTarget);
        }

        // Âä®ÊÄÅÂä†ËΩΩ Gitalk ËÑöÊú¨Âπ∂ÂàùÂßãÂåñËØÑËÆ∫Âå∫
        async function loadGitalk() {
          const container = document.getElementById('gitalk-container');
          if (container) {
            const commentID = container.getAttribute('data-comment-id');
            const lang = container.getAttribute('data-lang');
            const repo = container.getAttribute('data-repo')
            const createIssueManually = container.getAttribute('data-createIssueManually')

            console.log(repo);
            console.log(createIssueManually)

            // Âä®ÊÄÅÂä†ËΩΩ Gitalk ËÑöÊú¨
            const script = document.createElement('script');
            script.src = 'https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.min.js';
            script.defer = true;
            script.onload = () => {
              const gitalk = new Gitalk({
                clientID: 'fcf61195c7f73253dc8b',
                clientSecret: '0ac2907be08248a1fcb5312e27480ad535c682e5',
                repo: repo,
                owner: 'fatbobman',
                admin: ['fatbobman'],
                id: commentID.split('/').pop().substring(0, 49),
                distractionFreeMode: true,
                createIssueManually: createIssueManually,
                language: lang,
              });

              gitalk.render('gitalk-container');
            };
            document.body.appendChild(script);
          }
        }
      });
    </script> <!-- 
  Â∑¶‰æßÊÇ¨ÊµÆÂÆπÂô® 
  Âª∫ËÆÆÔºöËøôÈáå top: 0px ÈÖçÂêàÂÜÖÈÉ® padding Â∫îËØ•ËÉΩÂíåÂè≥‰æßÂØπÈΩê„ÄÇ
  Â¶ÇÊûúÂè≥‰æß Sidebar È°∂ÈÉ®Êúâ paddingÔºåËøôÈáå‰πü‰øùÊåÅ‰∏ÄËá¥„ÄÇ
--><div class="hidden lg:block w-32 xl:w-44 lg:absolute" id="toc" style="left: -30px; top: 0px"> <div class="text-muted items-center justify-center opacity-0 transition-all duration-1000 delay-300 ease-out" id="toc-content"> <!-- ÊåâÈíÆÂÆπÂô® --> <!-- id="toc-float-button" ‰æõ JS ÂÆö‰Ωç‰ΩøÁî® --> <!-- Âª∫ËÆÆÔºöpb-2 ÂèØ‰ª•ÂæÆË∞ÉÔºåÁ°Æ‰øùÂíåÂè≥‰æßÈó¥Ë∑ùÊÑü‰∏ÄËá¥ --> <div class="w-full flex justify-end pb-2" id="toc-float-button"> <div class="
group relative flex items-center justify-center w-9 h-9 rounded-full 
transition-all duration-300 
hover:scale-110 hover:-translate-y-0.5

/* === ÈªòËÆ§Áä∂ÊÄÅ (ÈöêÂΩ¢ËÉåÊôØ) === */
bg-transparent ring-0
text-gray-500 dark:text-gray-400

/* === Light Mode Hover (Red Theme) === */
hover:bg-red-50 hover:text-red-600 hover:ring-1 hover:ring-red-100

/* === Dark Mode Hover (Blue Theme) === */
dark:hover:bg-blue-500/10 dark:hover:text-blue-400 dark:hover:ring-blue-500/20
" aria-label="Toggle Table of Contents"> <!-- 
    ÂºÄÂêØÂõæÊ†á (TOC List) 
    ÈÄöÂ∏∏ÊòØÁ∫øÊù°ÔºåÊâÄ‰ª•‰øùÊåÅ stroke Ê®°Âºè
  --> <svg class="w-6 h-6" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" id="toc-list-switcher"> <use href="/_astro/iconCollection.DeMgcnlv.svg#icon-toc"></use> </svg> <!-- 
    ÂÖ≥Èó≠ÂõæÊ†á (Close X)
    ‰øÆÂ§çÁÇπÔºö
    1. fill="currentColor" (ÊÅ¢Â§çÂ°´ÂÖÖÔºåÂõ†‰∏∫ÂÆÉÊòØÂÆûÂøÉÂõæÊ†á)
    2. stroke="currentColor" (‰øùÁïôÂéüÊúâÈÄªËæëÔºå‰ª•Èò≤‰∏á‰∏Ä)
    3. ÁßªÈô§‰∫Ü stroke-width="2" (Èò≤Ê≠¢ÂÆûÂøÉÂõæÊ†áÂèòËÇ•)
  --> <svg class="hidden w-6 h-6" fill="currentColor" stroke="currentColor" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" id="toc-list-close"> <use href="/_astro/iconCollection.DeMgcnlv.svg#icon-toc-close"></use> </svg> </div> </div> <!-- ÂàóË°®ÂÜÖÂÆπ --> <div class="text-default text-xxs xl:text-xs hidden" id="toc-list"> <ul> <li class=" pb-1"> <div class="text-muted hover:text-secondary hover:font-black transition-colors duration-200"> <a href="#the-role-of-ai" class="inline-block hover:text-secondary text-heading font-medium relative before:hidden xl:before:block before:content-[&#34;‚ñ™&#34;] before:absolute before:left-[-15px] before:text-heading before:w-0 py-1 break-words"> The Role of AI </a> </div> </li><li class=" pb-1"> <div class="text-muted hover:text-secondary hover:font-black transition-colors duration-200"> <a href="#astro" class="inline-block hover:text-secondary text-heading font-medium relative before:hidden xl:before:block before:content-[&#34;‚ñ™&#34;] before:absolute before:left-[-15px] before:text-heading before:w-0 py-1 break-words"> Astro </a> </div> </li><li class=" pb-1"> <div class="text-muted hover:text-secondary hover:font-black transition-colors duration-200"> <a href="#starting-from-scratch" class="inline-block hover:text-secondary text-heading font-medium relative before:hidden xl:before:block before:content-[&#34;‚ñ™&#34;] before:absolute before:left-[-15px] before:text-heading before:w-0 py-1 break-words"> Starting from Scratch </a> </div> </li><li class=" pb-1"> <div class="text-muted hover:text-secondary hover:font-black transition-colors duration-200"> <a href="#implementing-blog-internationalization-i18n" class="inline-block hover:text-secondary text-heading font-medium relative before:hidden xl:before:block before:content-[&#34;‚ñ™&#34;] before:absolute before:left-[-15px] before:text-heading before:w-0 py-1 break-words"> Implementing Blog Internationalization (i18n) </a> </div> </li><li class=" pb-1"> <div class="text-muted hover:text-secondary hover:font-black transition-colors duration-200"> <a href="#tailwindcss" class="inline-block hover:text-secondary text-heading font-medium relative before:hidden xl:before:block before:content-[&#34;‚ñ™&#34;] before:absolute before:left-[-15px] before:text-heading before:w-0 py-1 break-words"> TailwindCSS </a> </div> </li><li class=" pb-1"> <div class="text-muted hover:text-secondary hover:font-black transition-colors duration-200"> <a href="#mdx" class="inline-block hover:text-secondary text-heading font-medium relative before:hidden xl:before:block before:content-[&#34;‚ñ™&#34;] before:absolute before:left-[-15px] before:text-heading before:w-0 py-1 break-words"> MDX </a> </div> </li><li class=" pb-1"> <div class="text-muted hover:text-secondary hover:font-black transition-colors duration-200"> <a href="#typescript" class="inline-block hover:text-secondary text-heading font-medium relative before:hidden xl:before:block before:content-[&#34;‚ñ™&#34;] before:absolute before:left-[-15px] before:text-heading before:w-0 py-1 break-words"> TypeScript </a> </div> </li><li class=" pb-1"> <div class="text-muted hover:text-secondary hover:font-black transition-colors duration-200"> <a href="#on-site-search" class="inline-block hover:text-secondary text-heading font-medium relative before:hidden xl:before:block before:content-[&#34;‚ñ™&#34;] before:absolute before:left-[-15px] before:text-heading before:w-0 py-1 break-words"> On-Site Search </a> </div> </li><li class=" pb-1"> <div class="text-muted hover:text-secondary hover:font-black transition-colors duration-200"> <a href="#deployment-cdn-and-seo" class="inline-block hover:text-secondary text-heading font-medium relative before:hidden xl:before:block before:content-[&#34;‚ñ™&#34;] before:absolute before:left-[-15px] before:text-heading before:w-0 py-1 break-words"> Deployment, CDN, and SEO </a> </div> </li><li class=" pb-1"> <div class="text-muted hover:text-secondary hover:font-black transition-colors duration-200"> <a href="#see-you-in-2024" class="inline-block hover:text-secondary text-heading font-medium relative before:hidden xl:before:block before:content-[&#34;‚ñ™&#34;] before:absolute before:left-[-15px] before:text-heading before:w-0 py-1 break-words"> See You in 2024 </a> </div> </li>  </ul> </div> </div> </div> <script type="module" src="/_astro/TOC.astro_astro_type_script_index_0_lang.VDa-wBy_.js"></script> <div class="hidden md:block md:absolute" id="sidebar" style="right: -50px; top: 0px"> <div class="invisible flex flex-col space-y-4 text-muted items-center justify-center opacity-0 transition-all duration-1000 delay-300 ease-out" id="sidebar-content"> <!-- <PreviousPost lang={lang} post = {post} source = {source}/> --> <!-- <NextPost lang={lang} post = {post} source = {source} /> --> <!-- <DictButton lang={lang} post = {post}/> --> <!-- <ShareWithBlueSky lang={lang} post = {post} source = {source}/> --> <!-- <ShareWithFacebook lang={lang} post = {post} source = {source}/> --> <!-- { lang === Lang.ZH &&
    <ShareWithWeibo lang={lang} post = {post} source = {source}/>
    } --> <!-- <ShareWithLinkedin lang={lang} post = {post} source = {source}/> --> <a href="#subscript" id="sidebar-subscribe-btn" class="
    group relative flex items-center justify-center w-9 h-9 rounded-full 
    transition-all duration-500
    hover:scale-110 hover:-translate-y-0.5
    
    /* === ÈªòËÆ§Áä∂ÊÄÅÔºöÊó†ËÉåÊôØÂúÜÔºåÊó†Èò¥ÂΩ±ÔºåÊ†πÊçÆÊ®°ÂºèÊòæÁ§∫ÊñáÂ≠óÈ¢úËâ≤ === */
  text-gray-500 dark:text-gray-400
    
    /* === Èó™ÁÉÅÊàñ hover Êó∂ÊòæÁ§∫ËÉåÊôØÂúÜÂíåÈò¥ÂΩ± === */
    /* Light Mode (Red Theme) */
    hover:bg-red-50 hover:text-red-600 hover:ring-1 hover:ring-red-100 hover:shadow-sm
    hover:hover:bg-red-100 hover:hover:text-red-700
    
    /* Dark Mode (Blue Theme) */
    dark:hover:bg-blue-500/10 dark:hover:text-blue-400 dark:hover:ring-blue-500/20
    dark:hover:hover:bg-blue-500/20 dark:hover:hover:text-blue-300
    
    /* === Èó™ÁÉÅÁä∂ÊÄÅÔºàÈÄöËøá data-blinking Â±ûÊÄßÊéßÂà∂Ôºâ=== */
    data-[blinking=true]:bg-red-50 data-[blinking=true]:text-red-600 data-[blinking=true]:ring-1 data-[blinking=true]:ring-red-100 data-[blinking=true]:shadow-sm
    dark:data-[blinking=true]:bg-blue-500/10 dark:data-[blinking=true]:text-blue-400 dark:data-[blinking=true]:ring-blue-500/20
  " aria-label="Subscribe to Newsletter" data-tooltip-target="tooltip-sidebar-subscribe" data-tooltip-placement="left" data-blinking="false"> <svg class="w-6 h-6 transition-transform duration-300 group-hover:rotate-12" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"> <use href="/_astro/iconCollection.DeMgcnlv.svg#icon-email"></use> </svg>  <span id="ping-dot" class="absolute top-0 right-0 -mt-0.5 -mr-0.5 flex h-2.5 w-2.5 hidden"> <span id="ping-animation" class="absolute inline-flex h-full w-full rounded-full opacity-75 bg-red-400 dark:bg-blue-400"></span> <span class="relative inline-flex rounded-full h-2.5 w-2.5 bg-red-500 dark:bg-blue-500"></span> </span> </a> <!-- Tooltip (‰øùÊåÅ‰∏çÂèòÔºåÊ∑±Ëâ≤ËÉåÊôØÈÄöÁî®) --> <div id="tooltip-sidebar-subscribe" role="tooltip" class="absolute z-50 invisible inline-block px-3 py-2 text-sm font-medium text-white bg-gray-900 rounded-lg shadow-sm opacity-0 tooltip dark:bg-gray-700 transition-opacity duration-300 whitespace-nowrap"> Subscribe to Newsletter <div class="tooltip-arrow" data-popper-arrow></div> </div> <script>(function(){const lang = "en";

  document.addEventListener('DOMContentLoaded', () => {
    const subscribeBtn = document.getElementById('sidebar-subscribe-btn');
    if (subscribeBtn) {
      subscribeBtn.addEventListener('click', () => {
        window.dataLayer = window.dataLayer || [];
        window.dataLayer.push({
          event: 'subscribe_click',
          content_type: 'newsletter_subscribe',
          click_location: 'sidebar_floating',
          lang: lang
        });
      });
    }

    // ÊéßÂà∂ÂëºÂê∏ÁÇπÁöÑÈó¥Ê≠áÈó™ÁÉÅ
    const pingDot = document.getElementById('ping-dot');
    const pingAnimation = document.getElementById('ping-animation');
    
    if (pingDot && pingAnimation && subscribeBtn) {
      // ÁîüÊàê 10-20 Áßí‰πãÈó¥ÁöÑÈöèÊú∫Êó∂Èó¥ÔºàÊØ´ÁßíÔºâ
      const getRandomDelay = () => Math.random() * 10000 + 10000; // 10000-20000ms
      
      const startBlinking = () => {
        // ÊòæÁ§∫ÂëºÂê∏ÁÇπÂπ∂ÂºÄÂßãÈó™ÁÉÅÔºåÂêåÊó∂ÊòæÁ§∫ËÉåÊôØÂúÜ
        pingDot.classList.remove('hidden');
        pingAnimation.classList.add('animate-ping');
        subscribeBtn.setAttribute('data-blinking', 'true');
        
        // Èó™ÁÉÅ 10-20 ÁßíÂêéÂÅúÊ≠¢
        const blinkDuration = getRandomDelay();
        setTimeout(() => {
          // ÂÅúÊ≠¢Èó™ÁÉÅÂπ∂ÈöêËóèÔºåÂêåÊó∂ÈöêËóèËÉåÊôØÂúÜ
          pingAnimation.classList.remove('animate-ping');
          pingDot.classList.add('hidden');
          subscribeBtn.setAttribute('data-blinking', 'false');
          
          // Á≠âÂæÖ 10-20 ÁßíÂêéÂÜçÊ¨°ÂºÄÂßã
          const pauseDuration = getRandomDelay();
          setTimeout(startBlinking, pauseDuration);
        }, blinkDuration);
      };
      
      // ÂàùÂßãÁ≠âÂæÖ 10-20 ÁßíÂêéÂºÄÂßãÁ¨¨‰∏ÄÊ¨°Èó™ÁÉÅ
      const initialDelay = getRandomDelay();
      setTimeout(startBlinking, initialDelay);
    }
  });
})();</script> <!-- 
  ÂÆπÂô®Ê†∑ÂºèÔºö
  1. w-9 h-9: ‰∏éËÆ¢ÈòÖÊåâÈíÆÂ∞∫ÂØ∏‰øùÊåÅ‰∏ÄËá¥ÔºåÁ°Æ‰øùÂûÇÁõ¥ÂØπÈΩê
  2. text-gray-400: ÈªòËÆ§ÁÅ∞Ëâ≤ÔºåÈôç‰ΩéËßÜËßâÊùÉÈáç
  3. hover:text-black / dark:hover:text-white: ÊÇ¨ÊµÆÊó∂Âèò‰∏∫ X ÁöÑÂìÅÁâåËâ≤
  4. hover:bg-gray-100: ÊÇ¨ÊµÆÊó∂Â¢ûÂä†Ê∑°Ê∑°ÁöÑËÉåÊôØÔºåÂ¢ûÂä†ÁÇπÂáªÂå∫ÂüüÊÑü
--><a href="https://x.com/intent/tweet?text=Blog%20Update%20Chronicle%3A%20Welcoming%202024%20with%20a%20New%20Blog&url=https%3A%2F%2Ffatbobman.com%2Fen%2Fposts%2Fblog-update-chronicle-2024%2F&hashtags=ios,swiftlang&via=fatbobman" target="_blank" id="sidebar-share-with-twitter" class="
    group relative flex items-center justify-center w-9 h-9 rounded-full 
    transition-all duration-300 
    hover:scale-110 hover:-translate-y-0.5
    
    /* === ÈªòËÆ§Áä∂ÊÄÅ (ÈöêÂΩ¢ËÉåÊôØ) === */
    bg-transparent ring-0
    text-gray-500 dark:text-gray-400
    
    /* === Light Mode Hover (Red Theme) === */
    hover:bg-red-50 hover:text-red-600 hover:ring-1 hover:ring-red-100
    
    /* === Dark Mode Hover (Blue Theme) === */
    dark:hover:bg-blue-500/10 dark:hover:text-blue-400 dark:hover:ring-blue-500/20
  " data-tooltip-target="tooltip-share-with-twitter" data-tooltip-placement="left" aria-label="Share on X"> <svg class="w-6 h-6 transition-transform duration-300 group-hover:rotate-12" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"> <use href="/_astro/iconCollection.DeMgcnlv.svg#icon-twitter"></use> </svg> </a> <!-- Tooltip: Ê†∑Âºè‰∏éËÆ¢ÈòÖÊåâÈíÆ‰øùÊåÅ‰∏ÄËá¥ --> <div id="tooltip-share-with-twitter" role="tooltip" class="absolute z-50 invisible inline-block px-3 py-2 text-sm font-medium text-white bg-gray-900 rounded-lg shadow-sm opacity-0 tooltip dark:bg-gray-700 transition-opacity duration-300 whitespace-nowrap"> <div>Share on X</div> <div class="tooltip-arrow" data-popper-arrow></div> </div> <!-- 
  ÂÆπÂô®‰øÆÊîπÔºö
  1. ÁßªÈô§ opacity-80: ‰øùÊåÅÈ¢úËâ≤Á∫ØÂáÄÔºåËΩ®ÈÅìÁöÑ gray-200/700 Â∑≤ÁªèË∂≥Â§ü‰ΩéË∞É„ÄÇ
  2. bg-gray-200 dark:bg-gray-700: ‰øùÊåÅ‰∏≠ÊÄßËΩ®ÈÅìËâ≤„ÄÇ
--><div class="relative w-[2px] h-32 bg-gray-200 dark:bg-gray-700 rounded-full overflow-hidden my-4" aria-hidden="true"> <div id="sidebar-reading-progress" class="
        absolute top-0 left-0 w-full transition-all duration-100 ease-out
        
        /* === Light Mode (Red Theme) === */
        /* ‰ΩøÁî®Ê∑±Á∫¢Ëâ≤ÔºåÂëºÂ∫îÂìÅÁâåËâ≤ #c72f1c */
        bg-red-600
        
        /* === Dark Mode (Blue Theme) === */
        /* ‰ΩøÁî®‰∫ÆËìùËâ≤ÔºåÂëºÂ∫îÊöóÈªë‰∏ªËâ≤ #60a5fa */
        dark:bg-blue-400
      " style="height: 0%"></div> </div> <script>
  function initProgressBar() {
    const progressBar = document.getElementById('sidebar-reading-progress');
    // ËØ∑Á°Æ‰øù‰Ω†ÁöÑÊñáÁ´†ÂÆπÂô® ID Á°ÆÂÆûÊòØ 'article-area'ÔºåÂê¶ÂàôËøõÂ∫¶Êù°‰∏ç‰ºöÂä®
    const article = document.getElementById('article-area'); 

    if (!progressBar || !article) return;

    function updateProgress() {
      const articleRect = article.getBoundingClientRect();
      const articleTop = article.offsetTop;
      const articleHeight = article.offsetHeight;
      const windowHeight = window.innerHeight;
      const scrollTop = window.scrollY;

      // ËøõÂ∫¶ËÆ°ÁÆó
      let progress = (scrollTop - articleTop + 150) / (articleHeight - windowHeight + 150);

      progress = Math.min(Math.max(progress, 0), 1);

      progressBar.style.height = `${progress * 100}%`;
    }

    // ‰ºòÂåñÔºö‰ΩøÁî® passive: true ÊèêÈ´òÊªöÂä®ÊÄßËÉΩ
    window.addEventListener('scroll', () => requestAnimationFrame(updateProgress), { passive: true });
    window.addEventListener('resize', updateProgress);
    updateProgress(); 
  }

  // ËøôÈáåÁöÑÂà§Êñ≠ÈÄªËæëÂèØ‰ª•‰øùÁïô
  if (window.innerWidth >= 768) {
    initProgressBar();
    document.addEventListener('astro:page-load', initProgressBar);
  }
</script> <!-- 
  ÂÆπÂô®Ê†∑ÂºèÔºö
  1. w-9 h-9: ‰øùÊåÅÂ∞∫ÂØ∏Áªü‰∏Ä
  2. text-gray-400: ÈªòËÆ§‰ΩéË∞É
  3. hover:text-blue-600: ÊÇ¨ÊµÆÊó∂Âèò‰∏∫ÂìÅÁâåËâ≤ (Âå∫Âà´‰∫é X ÁöÑÈªëËâ≤)
  4. hover:bg-blue-50: ÊÇ¨ÊµÆÊó∂Â¢ûÂä†Ê∑°Ê∑°ÁöÑËìùËâ≤ËÉåÊôØ
--><button id="sidebar-comment-btn" type="button" class="
  group relative flex items-center justify-center w-9 h-9 rounded-full 
  transition-all duration-300 
  hover:scale-110 hover:-translate-y-0.5
  
  /* === ÈªòËÆ§Áä∂ÊÄÅ (ÈöêÂΩ¢ËÉåÊôØ) === */
  bg-transparent ring-0
  text-gray-500 dark:text-gray-400
  
  /* === Light Mode Hover (Red Theme) === */
  hover:bg-red-50 hover:text-red-600 hover:ring-1 hover:ring-red-100
  
  /* === Dark Mode Hover (Blue Theme) === */
  dark:hover:bg-blue-500/10 dark:hover:text-blue-400 dark:hover:ring-blue-500/20
  " aria-label="Comment" data-tooltip-target="tooltip-sidebar-comment" data-tooltip-placement="left"> <svg class="w-6 h-6 transition-transform duration-300 group-hover:rotate-12" " fill="currentColor" stroke="currentColor" stroke-width="5" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg"> <use href="/_astro/iconCollection.DeMgcnlv.svg#icon-comment"></use> </svg> </button> <!-- Tooltip --> <div id="tooltip-sidebar-comment" role="tooltip" class="absolute z-50 invisible inline-block px-3 py-2 text-sm font-medium text-white bg-gray-900 rounded-lg shadow-sm opacity-0 tooltip dark:bg-gray-700 transition-opacity duration-300 whitespace-nowrap"> <div>Share Your Thoughts</div> <div class="tooltip-arrow" data-popper-arrow></div> </div> <script>
  // ‰øùÊåÅÂéüÊúâÈÄªËæëÔºå‰ΩÜÂÅö‰∫ÜÈò≤Âæ°ÊÄßÁºñÁ®ã
  // ‰ΩøÁî® IIFE Êàñ block scope ÈÅøÂÖçÂèòÈáèÊ±°ÊüìÂÖ®Â±Ä
  {
    const SCROLL_OFFSET = 80;

    // ÈÄªËæëÔºöÊâæÂà∞ËØÑËÆ∫Âå∫Âπ∂Âπ≥ÊªëÊªöÂä®
    const handleCommentScroll = () => {
      // ‰ºòÂÖàÂ∞ùËØï gitalkÔºå‰πüÂèØ‰ª•Êâ©Â±ïÊîØÊåÅ giscus ÊàñÂÖ∂‰ªñËØÑËÆ∫Á≥ªÁªü
      const commentContainer = document.getElementById('gitalk-container') || document.getElementById('giscus'); 
      
      if (commentContainer) {
        const topPosition = commentContainer.getBoundingClientRect().top + window.scrollY - SCROLL_OFFSET;
        window.scrollTo({ top: topPosition, behavior: 'smooth' });
      } else {
        // Â¶ÇÊûúÊâæ‰∏çÂà∞ËØÑËÆ∫Âå∫ÂÆπÂô®ÔºàÊØîÂ¶ÇËøòÊ≤°Âä†ËΩΩÔºâÔºåÂ∞ùËØïÁõ¥Êé•ÊªöÂà∞Â∫ïÈÉ®
        window.scrollTo({ top: document.body.scrollHeight, behavior: 'smooth' });
      }
    };

    // ÁªëÂÆö‰∫ã‰ª∂
    // Astro View Transitions ÂÖºÂÆπÔºöÂ¶ÇÊûúÁî®‰∫Ü ViewTransitionsÔºåÈúÄË¶ÅÁõëÂê¨ 'astro:page-load'
    // ËøôÈáå‰ΩøÁî®Âü∫Á°ÄÁöÑ DOMContentLoaded
    document.addEventListener('DOMContentLoaded', () => {
      const btn = document.getElementById('sidebar-comment-btn');
      if (btn) {
        btn.addEventListener('click', handleCommentScroll);
      }
    });
  }
</script> <!-- 
  ÂÆπÂô®Ê†∑ÂºèÔºö
  1. w-9 h-9, rounded-full: Â∞∫ÂØ∏Áªü‰∏Ä
  2. opacity-0 invisible: ÈªòËÆ§ÈöêËóèÔºåÁî± JS ÊéßÂà∂ÊòæÈöê
  3. hover:text-blue-600: ÊÇ¨ÊµÆÈ´ò‰∫Æ
--><button id="sidebar-top-btn" type="button" class="
  group relative flex items-center justify-center w-9 h-9 rounded-full 
  transition-all duration-300 
  hover:scale-110 hover:-translate-y-0.5
  
  /* === ÈªòËÆ§Áä∂ÊÄÅ (ÈöêÂΩ¢ËÉåÊôØ) === */
  bg-transparent ring-0
  text-gray-500 dark:text-gray-400
  
  /* === Light Mode Hover (Red Theme) === */
  hover:bg-red-50 hover:text-red-600 hover:ring-1 hover:ring-red-100
  
  /* === Dark Mode Hover (Blue Theme) === */
  dark:hover:bg-blue-500/10 dark:hover:text-blue-400 dark:hover:ring-blue-500/20
  " aria-label="Back to Top" data-tooltip-target="tooltip-back-to-top" data-tooltip-placement="left"> <svg class="w-6 h-6" fill="currentColor" stroke="currentColor" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg"> <use href="/_astro/iconCollection.DeMgcnlv.svg#icon-top"></use> </svg> </button> <!-- Tooltip --> <div id="tooltip-back-to-top" role="tooltip" class="absolute z-50 invisible inline-block px-3 py-2 text-sm font-medium text-white bg-gray-900 rounded-lg shadow-sm opacity-0 tooltip dark:bg-gray-700 transition-opacity duration-300 whitespace-nowrap"> <div>Back to Top</div> <div class="tooltip-arrow" data-popper-arrow></div> </div> <script>
  document.addEventListener('DOMContentLoaded', () => {
    const topBtn = document.getElementById('sidebar-top-btn');
    const SHOW_THRESHOLD = 400; // ÊªöÂä®Ë∂ÖËøá 400px ÂêéÊòæÁ§∫

    if (topBtn) {
      // 1. ÁÇπÂáª‰∫ã‰ª∂
      topBtn.addEventListener('click', () => {
        window.scrollTo({ top: 0, behavior: 'smooth' });
      });

      // 2. ÊªöÂä®ÁõëÂê¨
      const handleScroll = () => {
        if (window.scrollY > SHOW_THRESHOLD) {
          // ÊòæÁ§∫
          topBtn.classList.remove('opacity-0', 'invisible', 'translate-y-4');
          topBtn.classList.add('opacity-100', 'visible', 'translate-y-0');
        } else {
          // ÈöêËóè (Âä†‰∏ÄÁÇπ‰∏ãÊ≤âÊïàÊûú translate-y-4ÔºåÊòæÂæóÊòØ‰ªé‰∏ãÈù¢ÂÜíÂá∫Êù•ÁöÑ)
          topBtn.classList.remove('opacity-100', 'visible', 'translate-y-0');
          topBtn.classList.add('opacity-0', 'invisible', 'translate-y-4');
        }
      };

      // ÊÄßËÉΩ‰ºòÂåñÔºö‰ΩøÁî® RAF ËøõË°åËäÇÊµÅ
      let ticking = false;
      window.addEventListener('scroll', () => {
        if (!ticking) {
          window.requestAnimationFrame(() => {
            handleScroll();
            ticking = false;
          });
          ticking = true;
        }
      });
      
      // ÂàùÂßãÂåñÊâßË°å‰∏ÄÊ¨°ÔºåÈò≤Ê≠¢Âà∑Êñ∞È°µÈù¢ÂêéÂÅúÁïôÂú®‰∏≠Èó¥‰ΩÜÊåâÈíÆÊ≤°Âá∫Êù•
      handleScroll();
    }
  });
</script> </div> </div> <script type="module" src="/_astro/SideBar.astro_astro_type_script_index_0_lang.DgEmobiE.js"></script> </div>   </div> </main> </div> <footer> <footer class="bg-block border-t border-gray-100 dark:border-slate-800 mt-20"> <div class="mx-auto w-full max-w-5xl px-6 py-12 md:py-16"> <div class="grid grid-cols-1 md:grid-cols-12 gap-8 lg:gap-12">  <div class="md:col-span-4 lg:col-span-5 space-y-4"> <div class="flex items-center space-x-2">  <span class="text-xl font-black tracking-tight text-heading">
Fatbobman's <span class="text-primary">Blog</span> </span> </div> <p class="text-sm text-muted leading-relaxed max-w-xs"> Exploring the infinite possibilities of Swift and Apple development ecosystem. </p> </div>  <div class="md:col-span-8 lg:col-span-7 grid grid-cols-2 sm:grid-cols-3 gap-8">  <div> <h3 class="text-sm font-bold text-heading uppercase tracking-wider mb-4 "> Explore </h3> <ul class="space-y-3 text-sm text-muted"> <li><a href="/en/snippet/" class="hover:text-primary transition-colors">Quick Tips</a></li> <li><a href="/en/posts/" class="hover:text-primary transition-colors">Posts</a></li> <li><a href="/en/tags/" class="hover:text-primary transition-colors">Tags</a></li> <li><a href="/en/collections/" class="hover:text-primary transition-colors">Collections</a></li> </ul> </div>  <div> <h3 class="text-sm font-bold text-heading uppercase tracking-wider mb-4 "> Subscribe </h3> <ul class="space-y-3 text-sm text-muted"> <li><a href="https://weekly.fatbobman.com/welcome" class="hover:text-primary transition-colors" target="_blank">Newsletter</a></li> <li><a href="/rss.xml" class="hover:text-primary transition-colors" target="_blank">RSS</a></li> </ul> </div>  <div> <h3 class="text-sm font-bold text-heading uppercase tracking-wider mb-4 "> Connect &amp; Support </h3> <ul class="space-y-3 text-sm text-muted"> <li><a href="/en/sponsorship/" class="hover:text-primary transition-colors" rel="sponsored">Promote on Blog</a></li> <li><a href="/en/about/#contact" class="hover:text-primary transition-colors">Contact Me</a></li> <li> <a href="https://www.buymeacoffee.com/fatbobman" class="hover:text-primary transition-colors group flex items-center" target="_blank"> <span>Buy Me a Coffee</span> <span class="ml-1 group-hover:scale-110 transition-transform inline-block">‚òïÔ∏è</span> </a> </li> </ul> </div> </div> </div>  <div class="mt-12 pt-8 border-t border-gray-100 dark:border-slate-800 flex flex-col md:flex-row justify-between items-center text-xs text-muted/60 gap-4"> <div class="text-center md:text-left"> <span>&copy; 2025 Fatbobman Digital Limited. All Rights Reserved.</span> </div> <div class="flex items-center gap-4">  <div class="opacity-70 hover:opacity-100 transition-opacity"> <div class="flex items-center justify-center w-full px-6 pt-2 text-sm pb-10"> <button type="button" onclick="
        try {
          window.open('https://beian.miit.gov.cn/#/Integrated/index', '_blank');
        } catch (e) {
          console.log('Failed to open ICP link:', e);
        }
      " class="text-xxs hover:underline text-muted tracking-wide" aria-label="ICP Registration Information">
ËæΩICPÂ§á20006550Âè∑-1
</button> </div> </div> </div> </div> </div> </footer> </footer> </div> <section> <div id="weekly-modal" data-subscribeText="Join Now" data-placeholder="Subscribe with your email" data-embed-url="https://weekly.fatbobman.com/embed" data-iframe-class="mx-auto sm:w-[320px] md:w-[480px] sm:h-[200px] md:h-[320px] dark:opacity-80 dark:rounded-lg dark:shadow-2xl dark:border-gray-600" data-iframe-style="border:0px solid #EEE; background:white; width: 100%; max-width: 480px;"> <div id="popup-modal" tabindex="-1" class="hidden overflow-y-auto overflow-x-hidden fixed top-0 right-0 left-0 z-50 justify-center items-center w-full md:inset-0 h-[calc(100%-1rem)] max-h-full"> <!-- Modal content --> <div class="relative bg-gradient-to-br from-white to-gray-50 dark:from-gray-800 dark:to-gray-900 rounded-lg shadow-2xl border-gray-200 border dark:border-gray-600"> <!-- Modal header --> <div class="flex items-center justify-between px-4 md:px-5 pt-4 pb-0 rounded-t dark:border-gray-600"> <button id="popup-modal-close-button" type="button" class="text-gray-400 bg-transparent hover:bg-gray-200 hover:text-gray-900 rounded-lg text-sm w-8 h-8 ms-auto inline-flex justify-center items-center dark:hover:bg-gray-600 dark:hover:text-white"> <svg class="w-3 h-3" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 14 14"> <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m1 1 6 6m0 0 6 6M7 7l6-6M7 7l-6 6"></path> </svg> <span class="sr-only">Close modal</span> </button> </div> <!-- Modal body --> <div class="px-4 md:px-5 pb-4 md:w-[480px] sm:w-80 mx-auto"> <div class="sm:hidden md:block text-base text-center font-bold text-gray-900 dark:text-blue-100 pt-4 pb-2 ">Weekly Swift &amp; SwiftUI Highlights - Every Monday</div> <div id="weekly-modal-embed" class="flex flex-col items-center justify-center gap-4" data-iframe-loaded="false"> <div class="relative flex items-center justify-center"> <div class="w-8 h-8 border-2 border-gray-200 dark:border-gray-700 border-t-secondary rounded-full animate-spin" aria-hidden="true"></div> </div> <div class="text-sm text-gray-400 dark:text-gray-500 text-center" data-weekly-loader data-error-text="Failed to load subscription form. Please retry later." aria-live="polite"> Preparing subscription form... </div> </div> </div> </div> </div> </div> </section> <script type="module" src="/_astro/WeeklyModalLoader.astro_astro_type_script_index_0_lang.BtEIyxdk.js"></script>  <script src="https://cdn.jsdelivr.net/npm/flowbite@2.5.2/dist/flowbite.min.js" async></script> <script>
  // ‰∏∫ÊØè‰∏™ÈúÄË¶ÅÊ∏ÖÈô§ focus Áä∂ÊÄÅÁöÑÊåâÈíÆÈÉΩÊ∑ªÂä†‰∏Ä‰∏™ clear-focus Á±ª, ‰∏ãÈù¢ÁöÑ‰ª£Á†ÅÂ∞ÜÂú®ÁÇπÂáªÂêéËá™Âä®ÁßªÈô§ focus Áä∂ÊÄÅ
  document.addEventListener('DOMContentLoaded', () => {
    // Ëé∑ÂèñÊâÄÊúâÂÖ∑Êúâ 'clear-focus' Á±ªÁöÑÊåâÈíÆ
    const buttons = document.querySelectorAll('.clear-focus');

    buttons.forEach((button) => {
      button.addEventListener('click', () => {
        setTimeout(() => {
          button.blur();
        }, 0);
      });
    });
  });

  window.onpageshow = function () {
    document.documentElement.classList.add('motion-safe:scroll-smooth');
  };

  if (typeof window !== 'undefined') {
    const videos = Array.from(document.querySelectorAll('video.lazy-video[data-autoplay="lazy"]'));

    if ('IntersectionObserver' in window) {
      const observer = new IntersectionObserver(
        (entries) => {
          entries.forEach((entry) => {
            const video = entry.target;

            if (entry.isIntersecting) {
              // ËøõÂÖ•ËßÜÁ™ó -> Â∞ùËØïÊí≠ÊîæÔºàÊµèËßàÂô®‰ºöÊ†πÊçÆÁ≠ñÁï•ÂÜ≥ÂÆöÊòØÂê¶ÂÖÅËÆ∏Ôºâ
              video.play().catch(() => {
                // Êüê‰∫õÊÉÖÂÜµ‰∏ãÔºàÊµèËßàÂô®Á≠ñÁï•ÔºâÂèØËÉΩ‰ºöÂ§±Ë¥•ÔºåÈùôÈªòÂç≥ÂèØ
              });
            } else {
              // Á¶ªÂºÄËßÜÁ™ó -> ÊöÇÂÅúÔºåËäÇÁúÅ CPU & Â∏¶ÂÆΩ
              video.pause();
            }
          });
        },
        {
          threshold: 0.1, // Ëá≥Â∞ëÊúâ 10% Âá∫Áé∞Âú®ËßÜÁ™óÈáåÊó∂Ëß¶Âèë
        }
      );

      videos.forEach((video) => observer.observe(video));

      // Ê∏ÖÁêÜÈÄªËæëÔºöÈ°µÈù¢Âç∏ËΩΩÊó∂ÂèñÊ∂àÊâÄÊúâËßÇÂØü
      window.addEventListener('beforeunload', () => {
        videos.forEach((video) => observer.unobserve(video));
        observer.disconnect();
      });

      // Â§ÑÁêÜ bfcache ÊÉÖÂÜµ
      window.addEventListener('pageshow', (event) => {
        // Â¶ÇÊûúÊòØ‰ªé bfcache ÊÅ¢Â§çÔºåÈáçÊñ∞ÂàùÂßãÂåñ
        if (event.persisted) {
          const newVideos = Array.from(document.querySelectorAll('video.lazy-video[data-autoplay="lazy"]'));
          newVideos.forEach((video) => {
            if (!videos.includes(video)) {
              observer.observe(video);
            }
          });
        }
      });
    } else {
      // ËÄÅÊµèËßàÂô®ÁöÑÈôçÁ∫ßÁ≠ñÁï•Ôºö‰ªÄ‰πàÈÉΩ‰∏çÂÅöÔºåÁî®Êà∑ÊâãÂä®Êí≠Êîæ
    }
  }
</script> <script>(function(){const lang = "en";
const searchText = "Search...";
const runSearchModuleUrl = "/_astro/runsearch.Cf7wkMmH.js";

  document.addEventListener('DOMContentLoaded', () => {
    const button = document.getElementById('docsearch');
    if (!button) {
      return;
    }

    let docsearchScriptPromise = null;
    let initialized = false;

    const loadDocsearchLibrary = () => {
      if (typeof window !== 'undefined' && typeof window.docsearch === 'function') {
        return Promise.resolve();
      }
      if (!docsearchScriptPromise) {
        docsearchScriptPromise = new Promise((resolve, reject) => {
          const script = document.createElement('script');
          script.src = 'https://cdn.jsdelivr.net/npm/@docsearch/js@3.8.3';
          script.defer = true;
          script.onload = () => resolve();
          script.onerror = reject;
          document.head.appendChild(script);
        });
      }
      return docsearchScriptPromise;
    };

    const handleFirstClick = async (event) => {
      event.preventDefault();
      event.stopPropagation();

      try {
        // Load DocSearch library
        await loadDocsearchLibrary();

        // Import and execute search module
        const module = await import(runSearchModuleUrl);

        // openSearch will call initSearch internally, so we don't need to call both
        await module.openSearch(lang, searchText);

        // Remove the first-click listener after successful initialization
        button.removeEventListener('click', handleFirstClick, true);
        initialized = true;
      } catch (error) {
        console.error('Failed to initialize DocSearch:', error);
      }
    };

    button.addEventListener('click', handleFirstClick, true);
  });
})();</script> <!-- Google Tag Manager (noscript) --><noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-5C7N4MF5" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript><!-- End Google Tag Manager (noscript) --> <!--Magic Fix Ëß£ÂÜ≥Âú® Safari ‰∏ãÊêúÁ¥¢Ê°ÜÂèñÊ∂àÂêé‰ºöÊªöÂä®Âà∞È°µÈù¢Â∫ïÈÉ®--> <div class="fixed"> <input type="text"> </div> </body></html>