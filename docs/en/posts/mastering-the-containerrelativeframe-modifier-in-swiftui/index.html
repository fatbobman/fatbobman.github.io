<!DOCTYPE html><html lang="en"> <head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="sitemap" href="/sitemap-index.xml"><!-- <link rel="shortcut icon" href={iconSVG.src} /> --><link rel="icon" type="image/png" sizes="16x16" href="/_astro/favicon-16x16.2312221518-2.4YWPtmqG.png"><link rel="icon" type="image/png" sizes="32x32" href="/_astro/favicon-32x32.2312221518-2.W1M1HUWf.png"><link rel="mask-icon" href="/_astro/faviconSVG-32x32.2312221518-2.JZf4E4CU.svg"><link rel="apple-touch-icon" sizes="180x180" href="/_astro/apple-touch-icon.2312227635.RNVrzb6f.png"><link rel="stylesheet" href="/style/global-new.css"><title>Mastering the containerRelativeFrame Modifier in SwiftUI | Fatbobman&#39;s Blog</title>
<meta name="description" content="Explore SwiftUI&#39;s containerRelativeFrame modifier: definition, layout rules, use cases, and a backward-compatible replica. Master flexible layouts now!">
<meta name="robots" content="index,follow">
<link rel="canonical" href="https://fatbobman.com/en/posts/mastering-the-containerrelativeframe-modifier-in-swiftui/">
<meta property="og:title" content="Mastering the containerRelativeFrame Modifier in SwiftUI | Fatbobman&#39;s Blog">
<meta property="og:description" content="Explore SwiftUI&#39;s containerRelativeFrame modifier: definition, layout rules, use cases, and a backward-compatible replica. Master flexible layouts now!">
<meta property="og:url" content="https://fatbobman.com/en/posts/mastering-the-containerrelativeframe-modifier-in-swiftui/">
<meta property="og:type" content="article">
<meta property="og:image" content="https://cdn.fatbobman.com/card/mastering-the-containerrelativeframe-modifier-in-swiftui-en.webp">

<meta property="og:locale" content="en">
<meta property="og:site_name" content="fatbobman.com">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:site" content="@fatbobman">
<meta name="twitter:creator" content="@fatbobman"><link rel="alternate" type="application/rss+xml" title="RSS Feed for My Website" href="https://fatbobman.com/en/rss.xml"><link rel="sitemap" href="/sitemap-index.xml"><meta name="keywords" content="Swift 编程,Swift Programming,SwiftUI 教程,SwiftUI Tutorials,Core Data 实践,Core Data Practices,SwiftData 应用,SwiftData Applications,iOS 开发,iOS Development,Swift UI 设计,Swift UI Design,Swift 性能优化,Swift Performance Optimization,Swift 编码技巧,Swift Coding Techniques,iOS 应用开发,iOS App Development,Swift 数据管理,Swift Data Management,SwiftUI 布局,SwiftUI Layout,SwiftUI 动画,SwiftUI Animation"><meta name="apple-mobile-web-app-title" content="Fatbobman's Blog"><link rel="alternate" hreflang="en" href="https://fatbobman.com/en/posts/mastering-the-containerrelativeframe-modifier-in-swiftui/"><link rel="alternate" hreflang="zh" href="https://fatbobman.com/zh/posts/mastering-the-containerrelativeframe-modifier-in-swiftui/"><!-- <BasicScripts /> --><!-- <script is:inline>
  var _hmt = _hmt || [];
  (function() {
    var hm = document.createElement("script");
    hm.src = "https://hm.baidu.com/hm.js?14e5d60a3ea6276655f9d14c58b1fcd0";
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(hm, s);
  })();
</script> --><!-- Google Tag Manager --><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
  new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
  j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
  'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
  })(window,document,'script','dataLayer','GTM-5C7N4MF5');</script> <!-- End Google Tag Manager --><script>
      // Immediately set theme before page renders
      if (
        localStorage.getItem('color-theme') === 'dark' ||
        (!('color-theme' in localStorage) && window.matchMedia('(prefers-color-scheme: dark)').matches)
      ) {
        document.documentElement.classList.add('dark');
      }
    </script><link rel="stylesheet" href="/_astro/about.KmjrvECc.css" />
<link rel="stylesheet" href="/_astro/about.3p2XOxxi.css" />
<link rel="stylesheet" href="/_astro/_slug_.KE54EPLE.css" />
<style>.sticky[data-astro-cid-4wsjtibl]{position:fixed;top:0;left:50%;transform:translate(-50%);width:100%;max-width:100%}
</style><script type="module" src="/_astro/hoisted.i0Vwr4b0.js"></script></head> <body class="antialiased text-default bg-page">  <div class="flex flex-col min-h-screen justify-between "> <div> <header> <div class="bg-block" id="wholeHeader" data-astro-cid-4wsjtibl> <div id="blogTitle"> <a href="/en/"> <div class="flex space-x-4 mx-auto text-center pt-16 sm:pt-12 font-black w-[240px] sm:w-[300px] pb-6 sm:pb-1"> <svg class="text-heading" width="337" height="63"> <use href="/images/title-fatbobman.svg#main"></use> </svg> <svg class="text-primary mt-[-6px] sm:mt-[-5px]" width="130" height="91"> <use href="/images/title-blog.svg#main"></use> </svg> </div> </a> </div> <div class="bg-block z-50 shadow-custom-light dark:shadow-custom-dark" id="stickyHeader" data-astro-cid-4wsjtibl> <div class="max-w-5xl flex flex-wrap items-center justify-between mx-auto p-2 sm:p-0" data-astro-cid-4wsjtibl> <div class="flex space-x-2" data-astro-cid-4wsjtibl> <div id="lang-data" data-lang="en" style="display: none;"></div> <button id="language-dropdown-button" data-dropdown-toggle="language-dropdown-menu" type="button" class="p-2 w-10 h-10 font-medium text-default hover:text-secondary hover:bg-gray-100 dark:hover:bg-page focus:outline-none focus:ring-2 focus:ring-gray-200 dark:hover:bg-gray-700 dark:focus:ring-gray-600 rounded-lg"> EN </button> <!-- Dropdown --> <div class="z-50 hidden my-4 text-base list-none bg-page divide-y divide-gray-100 rounded-lg shadow dark:bg-gray-700" id="language-dropdown-menu"> <ul class="py-2 font-medium text-sm" role="none"> <li> <a href="" class="block px-4 py-2 text-default hover:bg-gray-100 dark:hover:bg-gray-600 dark:hover:text-white" role="menuitem"> <div class="inline-flex items-center">
English
<svg xmlns="http://www.w3.org/2000/svg" class="w-3.5 h-3.5 ml-2 hidden text-primary" id="EN-check" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M6.979 3.074a6 6 0 0 1 4.988 1.425l.037 .033l.034 -.03a6 6 0 0 1 4.733 -1.44l.246 .036a6 6 0 0 1 3.364 10.008l-.18 .185l-.048 .041l-7.45 7.379a1 1 0 0 1 -1.313 .082l-.094 -.082l-7.493 -7.422a6 6 0 0 1 3.176 -10.215z" stroke-width="0" fill="currentColor"></path></svg> </div> </a> </li> <li> <a href="/zh/posts/mastering-the-containerrelativeframe-modifier-in-swiftui/" class="block px-4 py-2 text-default hover:bg-gray-100 dark:hover:bg-gray-600 dark:hover:text-white" role="menuitem"> <div class="inline-flex items-center">
中文
<svg xmlns="http://www.w3.org/2000/svg" class="w-3.5 h-3.5 ml-2 hidden text-primary" id="ZH-check" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M6.979 3.074a6 6 0 0 1 4.988 1.425l.037 .033l.034 -.03a6 6 0 0 1 4.733 -1.44l.246 .036a6 6 0 0 1 3.364 10.008l-.18 .185l-.048 .041l-7.45 7.379a1 1 0 0 1 -1.313 .082l-.094 -.082l-7.493 -7.422a6 6 0 0 1 3.176 -10.215z" stroke-width="0" fill="currentColor"></path></svg> </div> </a> </li> <li> <div class="border-t border-gray-200 dark:border-gray-800 w-4/5 mx-auto my-2"></div> <button class="block px-4 py-2 text-default hover:bg-gray-100 dark:hover:bg-gray-600 dark:hover:text-white" role="menuitem" id="set-default-lang"> <div class="inline-flex items-center"> Set English as Default </div> </button> </li> </ul> </div>  <button id="theme-dropdown-button" data-dropdown-toggle="theme-dropdown-menu" type="button" class="group p-2 w-10 h-10 text-default hover:bg-gray-100 dark:hover:bg-page focus:outline-none focus:ring-2 focus:ring-gray-200 dark:text-gray-400 dark:hover:bg-gray-700 dark:focus:ring-gray-600 rounded-lg flex items-center justify-center"> <svg viewBox="0 0 24 24" id="theme_icon_system" class="w-5 h-5 text-default fill-current group-hover:text-secondary hidden" astro-icon="tabler:device-laptop"><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" class="icon-tabler"><path d="M3 19h18"/><rect width="14" height="10" x="5" y="6" rx="1"/></g></svg> <svg viewBox="0 0 24 24" id="theme_icon_dark" class="w-5 h-5 text-default fill-current group-hover:text-secondary hidden" astro-icon="tabler:moon"><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 3h.393a7.5 7.5 0 0 0 7.92 12.446A9 9 0 1 1 12 2.992z"/></svg> <svg viewBox="0 0 24 24" id="theme_icon_light" class="w-5 h-5 text-default fill-current group-hover:text-secondary hidden" astro-icon="tabler:sun"><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" class="icon-tabler"><circle cx="12" cy="12" r="4"/><path d="M3 12h1m8-9v1m8 8h1m-9 8v1M5.6 5.6l.7.7m12.1-.7-.7.7m0 11.4.7.7m-12.1-.7-.7.7"/></g></svg> </button> <!-- Dropdown --> <div class="z-50 hidden my-4 text-base list-none bg-white divide-y divide-gray-100 rounded-lg shadow dark:bg-gray-700" id="theme-dropdown-menu"> <ul class="py-2 font-medium" role="none"> <li class="hover:bg-gray-100 dark:hover:bg-gray-600"> <button class="flex px-4 py-2 text-sm align-text-center dark:hover:text-white text-default" id="theme_button_light"> <svg viewBox="0 0 24 24" class="w-5 h-5 fill-current" astro-icon="tabler:sun"><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" class="icon-tabler"><circle cx="12" cy="12" r="4"/><path d="M3 12h1m8-9v1m8 8h1m-9 8v1M5.6 5.6l.7.7m12.1-.7-.7.7m0 11.4.7.7m-12.1-.7-.7.7"/></g></svg> <span class="ml-2 dark:hover:text-white">Light</span> </button> </li> <li class="hover:bg-gray-100 dark:hover:bg-gray-600"> <button class="flex px-4 py-2 text-sm align-text-center dark:hover:text-white text-default" id="theme_button_dark"> <svg viewBox="0 0 24 24" class="w-5 h-5" astro-icon="tabler:moon"><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 3h.393a7.5 7.5 0 0 0 7.92 12.446A9 9 0 1 1 12 2.992z"/></svg> <span class="ml-2 text-default dark:hover:text-white">Dark</span> </button> </li> <li class="hover:bg-gray-100 dark:hover:bg-gray-600"> <button class="flex px-4 py-2 text-sm align-text-center dark:hover:text-white text-default" id="theme_button_system"> <svg viewBox="0 0 24 24" class="w-5 h-5" astro-icon="tabler:device-laptop"><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" class="icon-tabler"><path d="M3 19h18"/><rect width="14" height="10" x="5" y="6" rx="1"/></g></svg> <span class="ml-2 dark:hover:text-white">System</span> </button> </li> </ul> </div> <script>
  (async () => {
    const { setTheme } = await import('/js/theme.js');
    // Use setTheme here
    // Change the icons inside the button based on previous settings
    // 如果 localStorage 里面有设置过 color-theme 的值, 则 themeToggleSystemIcon.classList.remove('hidden')
    function setThemeButton() {
      let theme = localStorage.getItem('color-theme');
      if (theme === 'dark') {
        themeToggleDarkIcon.classList.remove('hidden');
        themeToggleLightIcon.classList.add('hidden');
        themeToggleSystemIcon.classList.add('hidden');
      } else if (theme === 'light') {
        themeToggleDarkIcon.classList.add('hidden');
        themeToggleLightIcon.classList.remove('hidden');
        themeToggleSystemIcon.classList.add('hidden');
      } else {
        themeToggleDarkIcon.classList.add('hidden');
        themeToggleLightIcon.classList.add('hidden');
        themeToggleSystemIcon.classList.remove('hidden');
      }
    }

    // 监听暗黑模式的变化
    window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', (event) => {
      setThemeButton();
    });

    // 保证其他的页面也能够监听到 localStorage 的变化
    window.addEventListener('storage', function (event) {
      if (event.key === 'color-theme') {
        setThemeButton();
      }
    });

    function resetTheme() {
      setTheme();
      setThemeButton();
    }

    // 获取按钮
    var themeButtonLight = document.getElementById('theme_button_light');
    var themeButtonDark = document.getElementById('theme_button_dark');
    var themeButtonSystem = document.getElementById('theme_button_system');
    // 获取图标
    var themeToggleDarkIcon = document.getElementById('theme_icon_dark');
    var themeToggleLightIcon = document.getElementById('theme_icon_light');
    var themeToggleSystemIcon = document.getElementById('theme_icon_system');

    // Listen for clicks on the button themeToggleDarkIcon
    themeButtonDark.addEventListener('click', function () {
      localStorage.setItem('color-theme', 'dark');
      resetTheme();
    });

    // // Listen for clicks on the button themeToggleLightIcon
    themeButtonLight.addEventListener('click', function () {
      localStorage.setItem('color-theme', 'light');
      resetTheme();
    });

    // // Listen for clicks on the button themeToggleSystemIcon
    themeButtonSystem.addEventListener('click', function () {
      localStorage.removeItem('color-theme');
      resetTheme();
    });

    resetTheme();
  })();
</script> <link rel="stylesheet" href="/style/docsearch.css"><div id="docsearch" class="group w-10 h-10 text-default hover:bg-gray-100 dark:hover:bg-page focus:outline-none focus:ring-2 focus:ring-gray-200 dark:text-gray-400 dark:hover:bg-gray-700 dark:focus:ring-gray-600 rounded-lg flex items-center justify-center"></div> </div> <button data-collapse-toggle="navbar-solid-bg" type="button" class="inline-flex items-center p-2 mx-2 w-10 h-10 justify-center text-sm text-gray-500 rounded-lg md:hidden hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-gray-200 dark:text-gray-400 dark:hover:bg-gray-700 dark:focus:ring-gray-600" aria-controls="navbar-solid-bg" aria-expanded="false" id="navbar-toggle-button"> <span class="sr-only">Open main menu</span> <svg class="w-5 h-5 text-default" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 17 14"> <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M1 1h15M1 7h15M1 13h15"></path> </svg> </button> <nav class="hidden w-full md:block md:w-auto px-4 z-40" id="navbar-solid-bg"> <ul class="flex flex-col font-bold mt-4 rounded-lg bg-gray-50 md:space-x-8 rtl:space-x-reverse md:flex-row md:mt-0 md:border-0 md:bg-transparent dark:bg-gray-800 md:dark:bg-transparent dark:border-gray-700"> <a href="/en/" class="block py-2 px-3 md:p-0 rounded  text-heading md:hover:text-secondary hover:bg-gray-100 dark:hover:bg-gray-700 md:hover:bg-transparent md:dark:hover:bg-transparent"> Home </a><a href="/en/posts/" class="block py-2 px-3 md:p-0 rounded text-invert bg-secondary md:bg-transparent md:text-secondary md:dark:bg-transparent" aria-current="page"> Articles </a><a href="/en/weekly/" class="block py-2 px-3 md:p-0 rounded  text-heading md:hover:text-secondary hover:bg-gray-100 dark:hover:bg-gray-700 md:hover:bg-transparent md:dark:hover:bg-transparent"> Weekly </a><a href="/en/snippet/" class="block py-2 px-3 md:p-0 rounded  text-heading md:hover:text-secondary hover:bg-gray-100 dark:hover:bg-gray-700 md:hover:bg-transparent md:dark:hover:bg-transparent"> Quick Tips </a><a href="/en/about/" class="block py-2 px-3 md:p-0 rounded  text-heading md:hover:text-secondary hover:bg-gray-100 dark:hover:bg-gray-700 md:hover:bg-transparent md:dark:hover:bg-transparent"> About </a> </ul> </nav>  </div> </div> <div id="placeholder" class="hidden" data-astro-cid-4wsjtibl></div> </div> <script>(function(){const enableSticky = true;
const enableStickyInMobile = true;

  window.onload = function () {
    checkStickyHeader();
    stickySetup();
  };

  window.addEventListener('resize', stickySetup);

  function checkStickyHeader() {
    const title = document.getElementById('blogTitle');
    const stickyHeader = document.getElementById('stickyHeader');
    const placeholder = document.getElementById('placeholder');

    if (title && stickyHeader && placeholder) {
      const offset = title.offsetTop + title.offsetHeight;

      if (shouldStick() && window.scrollY >= offset) {
        stickyHeader.classList.add('sticky');
        placeholder.style.display = 'block';
        placeholder.style.height = `${stickyHeader.offsetHeight}px`;
      } else {
        stickyHeader.classList.remove('sticky');
        placeholder.style.display = 'none';
      }
    }
  }

  function shouldStick() {
    if (!enableSticky) return false;

    let isMobile = window.matchMedia('(max-width: 640px)').matches;
    if (isMobile && !enableStickyInMobile) return false;

    return true;
  }

  function stickySetup() {
    window.onscroll = checkStickyHeader;
  }
})();</script>  </header> <main class="w-full mx-auto max-w-3xl p-4 md:p-6 "> <div class="container mx-auto space-y-6 sm:space-y-12">   <div class="mx-auto space-y-4 text-center py-10" style="width:80%"> <div class="flex mx-auto justify-center"> <div class="flex mx-auto justify-center"> <a class="text-xs font-medium sm:font-semibold mx-2 text-muted hover:text-secondary" href="/en/tags/SwiftUI/">
#SwiftUI </a> <a class="text-xs font-medium sm:font-semibold mx-2 text-muted hover:text-secondary" href="/zh/posts/mastering-the-containerrelativeframe-modifier-in-swiftui/" id="language-switcher-for-topic"> #中文版 </a> </div> </div> <h1 class="text-2xl font-bold leadi md:text-3xl text-heading">Mastering the containerRelativeFrame Modifier in SwiftUI</h1> <p class="text-sm text-default"> <a itemprop="author" href="https://x.com/intent/follow?screen_name=fatbobman" target="_blank" class="hover:text-secondary font-medium">Fatbobman</a> <!-- <time datetime={`${post.data.publishDate.toISOString()}`}>{date}</time> --> </p> <p class="text-xs text-muted"> Published on <time datetime="2024-05-08T00:12:00.000Z">May 8, 2024</time>  </p> </div> <svg style="display: none;"> <symbol id="icon-clipboard" viewBox="0 0 1024 1024"> <path d="M426.666667 42.666667l170.666667 0q41.344 0 74.325333 23.850667t46.336 61.482667l50.005333 0q52.992 0 90.496 37.504t37.504 90.496l0 597.333333q0 52.992-37.504 90.496t-90.496 37.504l-512 0q-52.992 0-90.496-37.504t-37.504-90.496l0-597.333333q0-52.992 37.504-90.496t90.496-37.504l50.005333 0q13.312-37.674667 46.336-61.482667t74.325333-23.850667zM768 213.333333l-50.005333 0q-13.312 37.674667-46.336 61.482667t-74.325333 23.850667l-170.666667 0q-41.344 0-74.325333-23.850667t-46.336-61.482667l-50.005333 0q-17.664 0-30.165333 12.501333t-12.501333 30.165333l0 597.333333q0 17.664 12.501333 30.165333t30.165333 12.501333l512 0q17.664 0 30.165333-12.501333t12.501333-30.165333l0-597.333333q0-17.664-12.501333-30.165333t-30.165333-12.501333zM597.333333 128l-170.666667 0q-17.664 0-30.165333 12.501333t-12.501333 30.165333 12.501333 30.165333 30.165333 12.501333l170.666667 0q17.664 0 30.165333-12.501333t12.501333-30.165333-12.501333-30.165333-30.165333-12.501333z"></path> </symbol> <symbol id="icon-check" viewBox="0 0 1024 1024"> <path d="M421.858 683.366l401.796-448.518c18.66-20.828 50.668-22.586 71.498-3.928 20.828 18.66 22.586 50.67 3.928 71.498L463.638 788.494c-18.606 20.768-50.5 22.586-71.344 4.066l-263.29-233.924c-20.906-18.572-22.796-50.576-4.222-71.48 18.574-20.906 50.576-22.796 71.48-4.222L421.86 683.366z"></path> </symbol> </svg> <div class="relative" id="article-area"> <article class="prose dark:prose-invert mx-auto w-full"> <div> 

<p>At the WWDC 2023, Apple introduced the <code>containerRelativeFrame</code> view modifier to SwiftUI. This modifier simplifies some layout operations that were previously difficult to achieve through conventional methods. This article will delve into the <code>containerRelativeFrame</code> modifier, covering its definition, layout rules, use cases, and relevant considerations. At the end of the article, we will also create a backward-compatible replica of <code>containerRelativeFrame</code> for older versions of SwiftUI, further enhancing our understanding of its functionalities.</p>
<div class="dynamic-ad-container pt-4"></div>
<h2 id="definition">Definition</h2>
<p>According to Apple’s <a href="https://developer.apple.com/documentation/swiftui/view/containerrelativeframe(_:alignment:)?&#38;utm_source=Fatbobman%20Blog&#38;utm_medium=web&#38;utm_campaign=Fatbobman%20Blog" rel="noreferrer noopener">official documentation</a>, the functionality of <code>containerRelativeFrame</code> is described as follows:</p>
<blockquote>
<p>Positions this view within an invisible frame with a size relative to the nearest container.</p>
<p>Use this modifier to specify a size for a view’s width, height, or both that is dependent on the size of the nearest container. Different things can represent a “container” including:</p>
<ul>
<li>The window presenting a view on iPadOS or macOS, or the screen of a device on iOS.</li>
<li>A column of a NavigationSplitView</li>
<li>A NavigationStack</li>
<li>A tab of a TabView</li>
<li>A scrollable view like ScrollView or List</li>
</ul>
<p>The size provided to this modifier is the size of a container like the ones listed above subtracting any safe area insets that might be applied to that container.</p>
</blockquote>
<p>In addition to the above definition, the official documentation contains several example codes to help readers better understand the use of this modifier. To further elucidate its working mechanism, I will re-describe the functionality of this modifier based on my understanding:</p>
<p>The <code>containerRelativeFrame</code> modifier starts from the view it is applied to and searches up the view hierarchy for the <strong>nearest</strong> container that fits within the <strong>list of containers</strong>. Based on the <strong>transformation rules</strong> set by the developer, it calculates the <strong>size provided by that container</strong> and uses this as the proposed size for the view. In a sense, it can be seen as a special version of the <code>frame</code> modifier that allows for custom transformation rules.</p>
<h2 id="constructors">Constructors</h2>
<p><code>containerRelativeFrame</code> offers three constructor methods, each catering to different layout needs:</p>
<ol>
<li>
<p><strong>Basic Version</strong>: Using this constructor method, the modifier does not transform the size of the container in any way. Instead, it directly takes the size provided by the nearest container as the suggested size for the view.</p>
<div>
        <div class="flex justify-between items-center h-8 font-medium bg-[#96744d] dark:bg-[#002565] text-gray-200 text-xs rounded-tl-md rounded-tr-md">
          <span class="px-4 py-1">Swift</span>
          <button class="copy-button py-1 px-4" onclick="copyCode(this, event)">
          <div class="copy-text">
            <span class="flex items-center justify-center sm:hover:text-white sm:hover:font-bold">
              <svg class="w-3 h-3 mr-1" fill="currentColor" stroke="currentColor">
                <use xlink:href="#icon-clipboard"></use>
              </svg>
            Copy code
            </span>
          </div>
          <div class="copied-text hidden">
            <span class="flex items-center justify-center">
              <svg class="w-3 h-3 mr-1" fill="currentColor" stroke="currentColor">
                  <use xlink:href="#icon-check"></use>
             </svg>
              Copied!
            </span>
          </div>
        </button>
        </div>
      <pre class="astro-code dracula" style="background-color:#282A36;color:#F8F8F2;overflow-x:auto" tabindex="0"><code><span class="line"><span style="color:#FF79C6">public</span><span style="color:#FF79C6"> func</span><span style="color:#50FA7B"> containerRelativeFrame</span><span style="color:#F8F8F2">(</span><span style="color:#50FA7B">_</span><span style="color:#FFB86C;font-style:italic"> axes</span><span style="color:#F8F8F2">: Axis.</span><span style="color:#8BE9FD;font-style:italic">Set</span><span style="color:#F8F8F2">, </span><span style="color:#50FA7B;font-style:italic">alignment</span><span style="color:#F8F8F2">: Alignment </span><span style="color:#FF79C6">=</span><span style="color:#F8F8F2"> .center) </span><span style="color:#FF79C6">-&gt;</span><span style="color:#FF79C6"> some</span><span style="color:#F8F8F2"> View</span></span></code></pre></div>
</li>
<li>
<p><strong>Preset Parameters Version</strong>: With this method, developers can specify the division of size, the number of columns or rows to span, and the spacing to consider, thus appropriately transforming the size along specified axes. This method is particularly suited for configuring the size of a view in proportion to the size of the container.</p>
<div>
        <div class="flex justify-between items-center h-8 font-medium bg-[#96744d] dark:bg-[#002565] text-gray-200 text-xs rounded-tl-md rounded-tr-md">
          <span class="px-4 py-1">Swift</span>
          <button class="copy-button py-1 px-4" onclick="copyCode(this, event)">
          <div class="copy-text">
            <span class="flex items-center justify-center sm:hover:text-white sm:hover:font-bold">
              <svg class="w-3 h-3 mr-1" fill="currentColor" stroke="currentColor">
                <use xlink:href="#icon-clipboard"></use>
              </svg>
            Copy code
            </span>
          </div>
          <div class="copied-text hidden">
            <span class="flex items-center justify-center">
              <svg class="w-3 h-3 mr-1" fill="currentColor" stroke="currentColor">
                  <use xlink:href="#icon-check"></use>
             </svg>
              Copied!
            </span>
          </div>
        </button>
        </div>
      <pre class="astro-code dracula" style="background-color:#282A36;color:#F8F8F2;overflow-x:auto" tabindex="0"><code><span class="line"><span style="color:#FF79C6">public</span><span style="color:#FF79C6"> func</span><span style="color:#50FA7B"> containerRelativeFrame</span><span style="color:#F8F8F2">(</span><span style="color:#50FA7B">_</span><span style="color:#FFB86C;font-style:italic"> axes</span><span style="color:#F8F8F2">: Axis.</span><span style="color:#8BE9FD;font-style:italic">Set</span><span style="color:#F8F8F2">, </span><span style="color:#50FA7B;font-style:italic">count</span><span style="color:#F8F8F2">: </span><span style="color:#8BE9FD;font-style:italic">Int</span><span style="color:#F8F8F2">, </span><span style="color:#50FA7B;font-style:italic">span</span><span style="color:#F8F8F2">: </span><span style="color:#8BE9FD;font-style:italic">Int</span><span style="color:#FF79C6"> =</span><span style="color:#BD93F9"> 1</span><span style="color:#F8F8F2">, </span><span style="color:#50FA7B;font-style:italic">spacing</span><span style="color:#F8F8F2">: CGFloat, </span><span style="color:#50FA7B;font-style:italic">alignment</span><span style="color:#F8F8F2">: Alignment </span><span style="color:#FF79C6">=</span><span style="color:#F8F8F2"> .center) </span><span style="color:#FF79C6">-&gt;</span><span style="color:#FF79C6"> some</span><span style="color:#F8F8F2"> View</span></span></code></pre></div>
</li>
<li>
<p><strong>Fully Customizable Version</strong>: This constructor offers the maximum flexibility, allowing developers to customize the calculation logic based on the size of the container. It is suitable for highly customized layout requirements.</p>
<div>
        <div class="flex justify-between items-center h-8 font-medium bg-[#96744d] dark:bg-[#002565] text-gray-200 text-xs rounded-tl-md rounded-tr-md">
          <span class="px-4 py-1">Swift</span>
          <button class="copy-button py-1 px-4" onclick="copyCode(this, event)">
          <div class="copy-text">
            <span class="flex items-center justify-center sm:hover:text-white sm:hover:font-bold">
              <svg class="w-3 h-3 mr-1" fill="currentColor" stroke="currentColor">
                <use xlink:href="#icon-clipboard"></use>
              </svg>
            Copy code
            </span>
          </div>
          <div class="copied-text hidden">
            <span class="flex items-center justify-center">
              <svg class="w-3 h-3 mr-1" fill="currentColor" stroke="currentColor">
                  <use xlink:href="#icon-check"></use>
             </svg>
              Copied!
            </span>
          </div>
        </button>
        </div>
      <pre class="astro-code dracula" style="background-color:#282A36;color:#F8F8F2;overflow-x:auto" tabindex="0"><code><span class="line"><span style="color:#FF79C6">public</span><span style="color:#FF79C6"> func</span><span style="color:#50FA7B"> containerRelativeFrame</span><span style="color:#F8F8F2">(</span><span style="color:#50FA7B">_</span><span style="color:#FFB86C;font-style:italic"> axes</span><span style="color:#F8F8F2">: Axis.</span><span style="color:#8BE9FD;font-style:italic">Set</span><span style="color:#F8F8F2">, </span><span style="color:#50FA7B;font-style:italic">alignment</span><span style="color:#F8F8F2">: Alignment </span><span style="color:#FF79C6">=</span><span style="color:#F8F8F2"> .center, </span><span style="color:#50FA7B">_</span><span style="color:#FFB86C;font-style:italic"> length</span><span style="color:#F8F8F2">: </span><span style="color:#FF79C6">@escaping</span><span style="color:#F8F8F2"> (CGFloat, Axis) </span><span style="color:#FF79C6">-&gt;</span><span style="color:#F8F8F2"> CGFloat) </span><span style="color:#FF79C6">-&gt;</span><span style="color:#FF79C6"> some</span><span style="color:#F8F8F2"> View</span></span></code></pre></div>
</li>
</ol>
<p>These constructor methods provide developers with powerful tools to achieve complex layout designs that meet diverse interface requirements.</p>
<h2 id="keyword-explanation">Keyword Explanation</h2>
<p>To gain a deeper understanding of the <code>containerRelativeFrame</code> modifier’s functionalities, we will conduct a thorough analysis of several key terms mentioned in its definition.</p>
<h3 id="containers-in-the-container-list">Containers in the Container List</h3>
<p>In SwiftUI, typically, child views directly receive their proposed size from their parent views. However, when we apply a <code>frame</code> modifier to a view, the child view ignores the parent’s proposed size and uses the dimensions specified by the <code>frame</code> as the proposed dimension for the specified axis.</p>
<div>
        <div class="flex justify-between items-center h-8 font-medium bg-[#96744d] dark:bg-[#002565] text-gray-200 text-xs rounded-tl-md rounded-tr-md">
          <span class="px-4 py-1">Swift</span>
          <button class="copy-button py-1 px-4" onclick="copyCode(this, event)">
          <div class="copy-text">
            <span class="flex items-center justify-center sm:hover:text-white sm:hover:font-bold">
              <svg class="w-3 h-3 mr-1" fill="currentColor" stroke="currentColor">
                <use xlink:href="#icon-clipboard"></use>
              </svg>
            Copy code
            </span>
          </div>
          <div class="copied-text hidden">
            <span class="flex items-center justify-center">
              <svg class="w-3 h-3 mr-1" fill="currentColor" stroke="currentColor">
                  <use xlink:href="#icon-check"></use>
             </svg>
              Copied!
            </span>
          </div>
        </button>
        </div>
      <pre class="astro-code dracula" style="background-color:#282A36;color:#F8F8F2;overflow-x:auto" tabindex="0"><code><span class="line"><span style="color:#F8F8F2">VStack {</span></span>
<span class="line"><span style="color:#8BE9FD">  Rectangle</span><span style="color:#F8F8F2">()</span></span>
<span class="line"><span style="color:#F8F8F2">    .</span><span style="color:#8BE9FD">frame</span><span style="color:#F8F8F2">(</span><span style="color:#8BE9FD">width</span><span style="color:#F8F8F2">: </span><span style="color:#BD93F9">200</span><span style="color:#F8F8F2">, </span><span style="color:#8BE9FD">height</span><span style="color:#F8F8F2">: </span><span style="color:#BD93F9">200</span><span style="color:#F8F8F2">)</span></span>
<span class="line"><span style="color:#6272A4">    // other views</span></span>
<span class="line"><span style="color:#FF79C6">    ...</span></span>
<span class="line"><span style="color:#F8F8F2">}</span></span>
<span class="line"><span style="color:#F8F8F2">.</span><span style="color:#8BE9FD">frame</span><span style="color:#F8F8F2">(</span><span style="color:#8BE9FD">width</span><span style="color:#F8F8F2">: </span><span style="color:#BD93F9">400</span><span style="color:#F8F8F2">, </span><span style="color:#8BE9FD">height</span><span style="color:#F8F8F2">: </span><span style="color:#BD93F9">500</span><span style="color:#F8F8F2">)</span></span></code></pre></div>
<p>For example, when running on an iPhone, if we want the height of the <code>Rectangle</code> to be half the available height of the screen, we can use the following logic:</p>
<div>
        <div class="flex justify-between items-center h-8 font-medium bg-[#96744d] dark:bg-[#002565] text-gray-200 text-xs rounded-tl-md rounded-tr-md">
          <span class="px-4 py-1">Swift</span>
          <button class="copy-button py-1 px-4" onclick="copyCode(this, event)">
          <div class="copy-text">
            <span class="flex items-center justify-center sm:hover:text-white sm:hover:font-bold">
              <svg class="w-3 h-3 mr-1" fill="currentColor" stroke="currentColor">
                <use xlink:href="#icon-clipboard"></use>
              </svg>
            Copy code
            </span>
          </div>
          <div class="copied-text hidden">
            <span class="flex items-center justify-center">
              <svg class="w-3 h-3 mr-1" fill="currentColor" stroke="currentColor">
                  <use xlink:href="#icon-check"></use>
             </svg>
              Copied!
            </span>
          </div>
        </button>
        </div>
      <pre class="astro-code dracula" style="background-color:#282A36;color:#F8F8F2;overflow-x:auto" tabindex="0"><code><span class="line"><span style="color:#FF79C6">var</span><span style="color:#F8F8F2"> screenAvailableHeight: CGFloat </span><span style="color:#6272A4">// Obtain the available height of the screen by some means</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F8F8F2">VStack {</span></span>
<span class="line"><span style="color:#8BE9FD">  Rectangle</span><span style="color:#F8F8F2">()</span></span>
<span class="line"><span style="color:#F8F8F2">    .</span><span style="color:#8BE9FD">frame</span><span style="color:#F8F8F2">(</span><span style="color:#8BE9FD">width</span><span style="color:#F8F8F2">: </span><span style="color:#BD93F9">200</span><span style="color:#F8F8F2">, </span><span style="color:#8BE9FD">height</span><span style="color:#F8F8F2">: screenHeight </span><span style="color:#FF79C6">/</span><span style="color:#BD93F9"> 2</span><span style="color:#F8F8F2">)</span></span>
<span class="line"><span style="color:#6272A4">    // other views</span></span>
<span class="line"><span style="color:#FF79C6">    ...</span></span>
<span class="line"><span style="color:#F8F8F2">}</span></span>
<span class="line"><span style="color:#F8F8F2">.</span><span style="color:#8BE9FD">frame</span><span style="color:#F8F8F2">(</span><span style="color:#8BE9FD">width</span><span style="color:#F8F8F2">: </span><span style="color:#BD93F9">400</span><span style="color:#F8F8F2">, </span><span style="color:#8BE9FD">height</span><span style="color:#F8F8F2">: </span><span style="color:#BD93F9">500</span><span style="color:#F8F8F2">)</span></span></code></pre></div>
<p>Before the advent of <code>containerRelativeFrame</code>, we had to use methods like <code>GeometryReader</code> or <code>UIScreen.main.bounds</code> to obtain the screen dimensions. Now, we can achieve the same effect more conveniently:</p>
<div>
        <div class="flex justify-between items-center h-8 font-medium bg-[#96744d] dark:bg-[#002565] text-gray-200 text-xs rounded-tl-md rounded-tr-md">
          <span class="px-4 py-1">Swift</span>
          <button class="copy-button py-1 px-4" onclick="copyCode(this, event)">
          <div class="copy-text">
            <span class="flex items-center justify-center sm:hover:text-white sm:hover:font-bold">
              <svg class="w-3 h-3 mr-1" fill="currentColor" stroke="currentColor">
                <use xlink:href="#icon-clipboard"></use>
              </svg>
            Copy code
            </span>
          </div>
          <div class="copied-text hidden">
            <span class="flex items-center justify-center">
              <svg class="w-3 h-3 mr-1" fill="currentColor" stroke="currentColor">
                  <use xlink:href="#icon-check"></use>
             </svg>
              Copied!
            </span>
          </div>
        </button>
        </div>
      <pre class="astro-code dracula" style="background-color:#282A36;color:#F8F8F2;overflow-x:auto" tabindex="0"><code><span class="line"><span style="color:#FF79C6">@main</span></span>
<span class="line"><span style="color:#FF79C6">struct</span><span style="color:#8BE9FD;font-style:italic"> containerRelativeFrameDemoApp</span><span style="color:#F8F8F2">: App {</span></span>
<span class="line"><span style="color:#FF79C6">  var</span><span style="color:#F8F8F2"> body: </span><span style="color:#FF79C6">some</span><span style="color:#F8F8F2"> Scene {</span></span>
<span class="line"><span style="color:#F8F8F2">    WindowGroup {</span></span>
<span class="line"><span style="color:#F8F8F2">      VStack {</span></span>
<span class="line"><span style="color:#8BE9FD">        Rectangle</span><span style="color:#F8F8F2">()</span></span>
<span class="line"><span style="color:#6272A4">          // Divide the vertical dimension by two and return</span></span>
<span class="line"><span style="color:#F8F8F2">          .</span><span style="color:#8BE9FD">containerRelativeFrame</span><span style="color:#F8F8F2">(.vertical){ height, </span><span style="color:#BD93F9">_</span><span style="color:#FF79C6"> in</span><span style="color:#F8F8F2"> height </span><span style="color:#FF79C6">/</span><span style="color:#BD93F9"> 2</span><span style="color:#F8F8F2">}</span></span>
<span class="line"><span style="color:#F8F8F2">      }</span></span>
<span class="line"><span style="color:#F8F8F2">      .</span><span style="color:#8BE9FD">frame</span><span style="color:#F8F8F2">(</span><span style="color:#8BE9FD">width</span><span style="color:#F8F8F2">: </span><span style="color:#BD93F9">400</span><span style="color:#F8F8F2">, </span><span style="color:#8BE9FD">height</span><span style="color:#F8F8F2">: </span><span style="color:#BD93F9">500</span><span style="color:#F8F8F2">)</span></span>
<span class="line"><span style="color:#F8F8F2">    }</span></span>
<span class="line"><span style="color:#F8F8F2">  }</span></span>
<span class="line"><span style="color:#F8F8F2">}</span></span>
<span class="line"></span></code></pre></div>
<p>Or</p>
<div>
        <div class="flex justify-between items-center h-8 font-medium bg-[#96744d] dark:bg-[#002565] text-gray-200 text-xs rounded-tl-md rounded-tr-md">
          <span class="px-4 py-1">Swift</span>
          <button class="copy-button py-1 px-4" onclick="copyCode(this, event)">
          <div class="copy-text">
            <span class="flex items-center justify-center sm:hover:text-white sm:hover:font-bold">
              <svg class="w-3 h-3 mr-1" fill="currentColor" stroke="currentColor">
                <use xlink:href="#icon-clipboard"></use>
              </svg>
            Copy code
            </span>
          </div>
          <div class="copied-text hidden">
            <span class="flex items-center justify-center">
              <svg class="w-3 h-3 mr-1" fill="currentColor" stroke="currentColor">
                  <use xlink:href="#icon-check"></use>
             </svg>
              Copied!
            </span>
          </div>
        </button>
        </div>
      <pre class="astro-code dracula" style="background-color:#282A36;color:#F8F8F2;overflow-x:auto" tabindex="0"><code><span class="line"><span style="color:#FF79C6">@main</span></span>
<span class="line"><span style="color:#FF79C6">struct</span><span style="color:#8BE9FD;font-style:italic"> containerRelativeFrameDemoApp</span><span style="color:#F8F8F2">: App {</span></span>
<span class="line"><span style="color:#FF79C6">  var</span><span style="color:#F8F8F2"> body: </span><span style="color:#FF79C6">some</span><span style="color:#F8F8F2"> Scene {</span></span>
<span class="line"><span style="color:#F8F8F2">    WindowGroup {</span></span>
<span class="line"><span style="color:#F8F8F2">      VStack {</span></span>
<span class="line"><span style="color:#8BE9FD">        Rectangle</span><span style="color:#F8F8F2">()</span></span>
<span class="line"><span style="color:#6272A4">          // Divide the vertical dimension into two equal parts, no spanning, no consideration for spacing</span></span>
<span class="line"><span style="color:#F8F8F2">          .</span><span style="color:#8BE9FD">containerRelativeFrame</span><span style="color:#F8F8F2">(.vertical, </span><span style="color:#8BE9FD">count</span><span style="color:#F8F8F2">: </span><span style="color:#BD93F9">2</span><span style="color:#F8F8F2">, </span><span style="color:#8BE9FD">span</span><span style="color:#F8F8F2">: </span><span style="color:#BD93F9">1</span><span style="color:#F8F8F2">, </span><span style="color:#8BE9FD">spacing</span><span style="color:#F8F8F2">: </span><span style="color:#BD93F9">0</span><span style="color:#F8F8F2">)</span></span>
<span class="line"><span style="color:#F8F8F2">      }</span></span>
<span class="line"><span style="color:#F8F8F2">      .</span><span style="color:#8BE9FD">frame</span><span style="color:#F8F8F2">(</span><span style="color:#8BE9FD">width</span><span style="color:#F8F8F2">: </span><span style="color:#BD93F9">400</span><span style="color:#F8F8F2">, </span><span style="color:#8BE9FD">height</span><span style="color:#F8F8F2">: </span><span style="color:#BD93F9">500</span><span style="color:#F8F8F2">)</span></span>
<span class="line"><span style="color:#F8F8F2">    }</span></span>
<span class="line"><span style="color:#F8F8F2">  }</span></span>
<span class="line"><span style="color:#F8F8F2">}</span></span></code></pre></div>
<p>In the code above, <code>Rectangle()</code> ignores the <code>400 x 500</code> proposed size provided by the <code>VStack</code> and instead looks directly upward in the view hierarchy for a suitable container. In these examples, the appropriate container is the <code>screen of an iPhone</code>.</p>
<p>This means that <code>containerRelativeFrame</code> provides a way to access container dimensions across view hierarchies. However, it can only access dimensions provided by specific containers listed in the <strong>container list</strong> (like a window, <code>ScrollView</code>, <code>TabView</code>, <code>NavigationStack</code>, etc.).</p>
<h3 id="nearest">Nearest</h3>
<p>Within the view hierarchy, if multiple containers meet the criteria, <code>containerRelativeFrame</code> will select the container <strong>nearest</strong> to the current view and use its dimensions for calculations. For example, in the following code snippet, the final height of the <code>Rectangle</code> is 100 because it uses the height of the <code>NavigationStack</code> (200) divided by 2, rather than half of the available screen height.</p>
<div>
        <div class="flex justify-between items-center h-8 font-medium bg-[#96744d] dark:bg-[#002565] text-gray-200 text-xs rounded-tl-md rounded-tr-md">
          <span class="px-4 py-1">Swift</span>
          <button class="copy-button py-1 px-4" onclick="copyCode(this, event)">
          <div class="copy-text">
            <span class="flex items-center justify-center sm:hover:text-white sm:hover:font-bold">
              <svg class="w-3 h-3 mr-1" fill="currentColor" stroke="currentColor">
                <use xlink:href="#icon-clipboard"></use>
              </svg>
            Copy code
            </span>
          </div>
          <div class="copied-text hidden">
            <span class="flex items-center justify-center">
              <svg class="w-3 h-3 mr-1" fill="currentColor" stroke="currentColor">
                  <use xlink:href="#icon-check"></use>
             </svg>
              Copied!
            </span>
          </div>
        </button>
        </div>
      <pre class="astro-code dracula" style="background-color:#282A36;color:#F8F8F2;overflow-x:auto" tabindex="0"><code><span class="line"><span style="color:#FF79C6">@main</span></span>
<span class="line"><span style="color:#FF79C6">struct</span><span style="color:#8BE9FD;font-style:italic"> containerRelativeFrameDemoApp</span><span style="color:#F8F8F2">: App {</span></span>
<span class="line"><span style="color:#FF79C6">  var</span><span style="color:#F8F8F2"> body: </span><span style="color:#FF79C6">some</span><span style="color:#F8F8F2"> Scene {</span></span>
<span class="line"><span style="color:#F8F8F2">    WindowGroup {</span></span>
<span class="line"><span style="color:#F8F8F2">      NavigationStack {</span></span>
<span class="line"><span style="color:#F8F8F2">        VStack {</span></span>
<span class="line"><span style="color:#8BE9FD">          Rectangle</span><span style="color:#F8F8F2">() </span><span style="color:#6272A4">// height is 100</span></span>
<span class="line"><span style="color:#F8F8F2">            .</span><span style="color:#8BE9FD">containerRelativeFrame</span><span style="color:#F8F8F2">(.vertical) { height, </span><span style="color:#BD93F9">_</span><span style="color:#FF79C6"> in</span><span style="color:#F8F8F2"> height </span><span style="color:#FF79C6">/</span><span style="color:#BD93F9"> 2</span><span style="color:#F8F8F2"> }</span></span>
<span class="line"><span style="color:#F8F8F2">        }</span></span>
<span class="line"><span style="color:#F8F8F2">        .</span><span style="color:#8BE9FD">frame</span><span style="color:#F8F8F2">(</span><span style="color:#8BE9FD">width</span><span style="color:#F8F8F2">: </span><span style="color:#BD93F9">400</span><span style="color:#F8F8F2">, </span><span style="color:#8BE9FD">height</span><span style="color:#F8F8F2">: </span><span style="color:#BD93F9">500</span><span style="color:#F8F8F2">)</span></span>
<span class="line"><span style="color:#F8F8F2">      }</span></span>
<span class="line"><span style="color:#F8F8F2">      .</span><span style="color:#8BE9FD">frame</span><span style="color:#F8F8F2">(</span><span style="color:#8BE9FD">height</span><span style="color:#F8F8F2">: </span><span style="color:#BD93F9">200</span><span style="color:#F8F8F2">) </span><span style="color:#6272A4">// NavigationStack&#39;s height is 200</span></span>
<span class="line"><span style="color:#F8F8F2">    }</span></span>
<span class="line"><span style="color:#F8F8F2">  }</span></span>
<span class="line"><span style="color:#F8F8F2">}</span></span></code></pre></div>
<p>This demonstrates that when using the <code>containerRelativeFrame</code> modifier, it searches upward from its position to find the nearest container and obtains the dimensions it provides. Special attention should be given to this behavior when designing reusable views, as the same code may result in different layout effects depending on its location.</p>
<p>Moreover, special care is needed when using <code>containerRelativeFrame</code> in <code>overlay</code> or <code>background</code> views that correspond to a container listed in the container list. In such cases, <code>containerRelativeFrame</code> will ignore the current container while searching for the nearest container. This behavior differs from the typical behavior of <code>overlay</code> and <code>background</code> views.</p>
<blockquote>
<p>Typically, a view and its <code>overlay</code> or <code>background</code> are considered to have a master-slave relationship. To learn more, read <a href="/en/posts/in-depth-exploration-of-overlay-and-background-modifiers-in-swiftui/" target="_blank">In-Depth Exploration of Overlay and Background Modifiers in SwiftUI</a>.</p>
</blockquote>
<p>Consider the following example where an <code>overlay</code> that contains a <code>Rectangle</code> using <code>containerRelativeFrame</code> to set its height is applied to a <code>NavigationStack</code>. In this case, <code>containerRelativeFrame</code> will not use the height of the <code>NavigationStack</code>, but will instead seek the dimensions of a higher-level container—in this case, the available size of the screen.</p>
<div>
        <div class="flex justify-between items-center h-8 font-medium bg-[#96744d] dark:bg-[#002565] text-gray-200 text-xs rounded-tl-md rounded-tr-md">
          <span class="px-4 py-1">Swift</span>
          <button class="copy-button py-1 px-4" onclick="copyCode(this, event)">
          <div class="copy-text">
            <span class="flex items-center justify-center sm:hover:text-white sm:hover:font-bold">
              <svg class="w-3 h-3 mr-1" fill="currentColor" stroke="currentColor">
                <use xlink:href="#icon-clipboard"></use>
              </svg>
            Copy code
            </span>
          </div>
          <div class="copied-text hidden">
            <span class="flex items-center justify-center">
              <svg class="w-3 h-3 mr-1" fill="currentColor" stroke="currentColor">
                  <use xlink:href="#icon-check"></use>
             </svg>
              Copied!
            </span>
          </div>
        </button>
        </div>
      <pre class="astro-code dracula" style="background-color:#282A36;color:#F8F8F2;overflow-x:auto" tabindex="0"><code><span class="line"><span style="color:#FF79C6">@main</span></span>
<span class="line"><span style="color:#FF79C6">struct</span><span style="color:#8BE9FD;font-style:italic"> containerRelativeFrameDemoApp</span><span style="color:#F8F8F2">: App {</span></span>
<span class="line"><span style="color:#FF79C6">  var</span><span style="color:#F8F8F2"> body: </span><span style="color:#FF79C6">some</span><span style="color:#F8F8F2"> Scene {</span></span>
<span class="line"><span style="color:#F8F8F2">    WindowGroup {</span></span>
<span class="line"><span style="color:#F8F8F2">      NavigationStack {</span></span>
<span class="line"><span style="color:#F8F8F2">        VStack {</span></span>
<span class="line"><span style="color:#8BE9FD">          Rectangle</span><span style="color:#F8F8F2">()</span></span>
<span class="line"><span style="color:#F8F8F2">        }</span></span>
<span class="line"><span style="color:#F8F8F2">        .</span><span style="color:#8BE9FD">frame</span><span style="color:#F8F8F2">(</span><span style="color:#8BE9FD">width</span><span style="color:#F8F8F2">: </span><span style="color:#BD93F9">400</span><span style="color:#F8F8F2">, </span><span style="color:#8BE9FD">height</span><span style="color:#F8F8F2">: </span><span style="color:#BD93F9">500</span><span style="color:#F8F8F2">)</span></span>
<span class="line"><span style="color:#F8F8F2">      }</span></span>
<span class="line"><span style="color:#F8F8F2">      .</span><span style="color:#8BE9FD">frame</span><span style="color:#F8F8F2">(</span><span style="color:#8BE9FD">height</span><span style="color:#F8F8F2">: </span><span style="color:#BD93F9">200</span><span style="color:#F8F8F2">) </span><span style="color:#6272A4">// NavigationStack&#39;s height is 200</span></span>
<span class="line"><span style="color:#F8F8F2">      .</span><span style="color:#8BE9FD">overlay</span><span style="color:#F8F8F2">(</span></span>
<span class="line"><span style="color:#8BE9FD">        Rectangle</span><span style="color:#F8F8F2">()</span></span>
<span class="line"><span style="color:#F8F8F2">          .</span><span style="color:#8BE9FD">containerRelativeFrame</span><span style="color:#F8F8F2">(.vertical) { height, </span><span style="color:#BD93F9">_</span><span style="color:#FF79C6"> in</span><span style="color:#F8F8F2"> height </span><span style="color:#FF79C6">/</span><span style="color:#BD93F9"> 2</span><span style="color:#F8F8F2"> } </span><span style="color:#6272A4">// screen available height / 2</span></span>
<span class="line"><span style="color:#F8F8F2">      )</span></span>
<span class="line"><span style="color:#F8F8F2">    }</span></span>
<span class="line"><span style="color:#F8F8F2">  }</span></span>
<span class="line"><span style="color:#F8F8F2">}</span></span></code></pre></div>
<h3 id="transformation-rules">Transformation Rules</h3>
<p>In the constructors offered by <code>containerRelativeFrame</code>, there are two methods that allow dynamic transformation of dimensions. The third method provides the most flexibility:</p>
<div>
        <div class="flex justify-between items-center h-8 font-medium bg-[#96744d] dark:bg-[#002565] text-gray-200 text-xs rounded-tl-md rounded-tr-md">
          <span class="px-4 py-1">Swift</span>
          <button class="copy-button py-1 px-4" onclick="copyCode(this, event)">
          <div class="copy-text">
            <span class="flex items-center justify-center sm:hover:text-white sm:hover:font-bold">
              <svg class="w-3 h-3 mr-1" fill="currentColor" stroke="currentColor">
                <use xlink:href="#icon-clipboard"></use>
              </svg>
            Copy code
            </span>
          </div>
          <div class="copied-text hidden">
            <span class="flex items-center justify-center">
              <svg class="w-3 h-3 mr-1" fill="currentColor" stroke="currentColor">
                  <use xlink:href="#icon-check"></use>
             </svg>
              Copied!
            </span>
          </div>
        </button>
        </div>
      <pre class="astro-code dracula" style="background-color:#282A36;color:#F8F8F2;overflow-x:auto" tabindex="0"><code><span class="line"><span style="color:#FF79C6">public</span><span style="color:#FF79C6"> func</span><span style="color:#50FA7B"> containerRelativeFrame</span><span style="color:#F8F8F2">(</span><span style="color:#50FA7B">_</span><span style="color:#FFB86C;font-style:italic"> axes</span><span style="color:#F8F8F2">: Axis.</span><span style="color:#8BE9FD;font-style:italic">Set</span><span style="color:#F8F8F2">, </span><span style="color:#50FA7B;font-style:italic">alignment</span><span style="color:#F8F8F2">: Alignment </span><span style="color:#FF79C6">=</span><span style="color:#F8F8F2"> .center, </span><span style="color:#50FA7B">_</span><span style="color:#FFB86C;font-style:italic"> length</span><span style="color:#F8F8F2">: </span><span style="color:#FF79C6">@escaping</span><span style="color:#F8F8F2"> (CGFloat, Axis) </span><span style="color:#FF79C6">-&gt;</span><span style="color:#F8F8F2"> CGFloat) </span><span style="color:#FF79C6">-&gt;</span><span style="color:#FF79C6"> some</span><span style="color:#F8F8F2"> View</span></span></code></pre></div>
<p>The <code>length</code> closure in this method is applicable to two different axes, allowing different dimension calculations based on the axis. For example, in the following code, the width of the <code>Rectangle</code> is set to two-thirds of the nearest container’s available width, and the height to half of the available height:</p>
<div>
        <div class="flex justify-between items-center h-8 font-medium bg-[#96744d] dark:bg-[#002565] text-gray-200 text-xs rounded-tl-md rounded-tr-md">
          <span class="px-4 py-1">Swift</span>
          <button class="copy-button py-1 px-4" onclick="copyCode(this, event)">
          <div class="copy-text">
            <span class="flex items-center justify-center sm:hover:text-white sm:hover:font-bold">
              <svg class="w-3 h-3 mr-1" fill="currentColor" stroke="currentColor">
                <use xlink:href="#icon-clipboard"></use>
              </svg>
            Copy code
            </span>
          </div>
          <div class="copied-text hidden">
            <span class="flex items-center justify-center">
              <svg class="w-3 h-3 mr-1" fill="currentColor" stroke="currentColor">
                  <use xlink:href="#icon-check"></use>
             </svg>
              Copied!
            </span>
          </div>
        </button>
        </div>
      <pre class="astro-code dracula" style="background-color:#282A36;color:#F8F8F2;overflow-x:auto" tabindex="0"><code><span class="line"><span style="color:#8BE9FD">Rectangle</span><span style="color:#F8F8F2">()</span></span>
<span class="line"><span style="color:#F8F8F2">  .</span><span style="color:#8BE9FD">containerRelativeFrame</span><span style="color:#F8F8F2">([.horizontal, .vertical]) { length, axis </span><span style="color:#FF79C6">in</span></span>
<span class="line"><span style="color:#FF79C6">    if</span><span style="color:#F8F8F2"> axis </span><span style="color:#FF79C6">==</span><span style="color:#F8F8F2"> .vertical {</span></span>
<span class="line"><span style="color:#FF79C6">      return</span><span style="color:#F8F8F2"> length </span><span style="color:#FF79C6">/</span><span style="color:#BD93F9"> 2</span></span>
<span class="line"><span style="color:#F8F8F2">    } </span><span style="color:#FF79C6">else</span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#FF79C6">      return</span><span style="color:#F8F8F2"> length </span><span style="color:#FF79C6">*</span><span style="color:#F8F8F2"> (</span><span style="color:#BD93F9">2</span><span style="color:#FF79C6"> /</span><span style="color:#BD93F9"> 3</span><span style="color:#F8F8F2">)</span></span>
<span class="line"><span style="color:#F8F8F2">    }</span></span>
<span class="line"><span style="color:#F8F8F2">  }</span></span></code></pre></div>
<p>For axes not specified in the <code>axes</code> parameter of the constructor, <code>containerRelativeFrame</code> will not set the dimensions for that axis (it retains the proposed dimension given by the parent view).</p>
<div>
        <div class="flex justify-between items-center h-8 font-medium bg-[#96744d] dark:bg-[#002565] text-gray-200 text-xs rounded-tl-md rounded-tr-md">
          <span class="px-4 py-1">Swift</span>
          <button class="copy-button py-1 px-4" onclick="copyCode(this, event)">
          <div class="copy-text">
            <span class="flex items-center justify-center sm:hover:text-white sm:hover:font-bold">
              <svg class="w-3 h-3 mr-1" fill="currentColor" stroke="currentColor">
                <use xlink:href="#icon-clipboard"></use>
              </svg>
            Copy code
            </span>
          </div>
          <div class="copied-text hidden">
            <span class="flex items-center justify-center">
              <svg class="w-3 h-3 mr-1" fill="currentColor" stroke="currentColor">
                  <use xlink:href="#icon-check"></use>
             </svg>
              Copied!
            </span>
          </div>
        </button>
        </div>
      <pre class="astro-code dracula" style="background-color:#282A36;color:#F8F8F2;overflow-x:auto" tabindex="0"><code><span class="line"><span style="color:#FF79C6">struct</span><span style="color:#8BE9FD;font-style:italic"> TransformsDemo</span><span style="color:#F8F8F2">: View {</span></span>
<span class="line"><span style="color:#FF79C6">  var</span><span style="color:#F8F8F2"> body: </span><span style="color:#FF79C6">some</span><span style="color:#F8F8F2"> View {</span></span>
<span class="line"><span style="color:#F8F8F2">    VStack {</span></span>
<span class="line"><span style="color:#8BE9FD">      Rectangle</span><span style="color:#F8F8F2">()</span></span>
<span class="line"><span style="color:#F8F8F2">        .</span><span style="color:#8BE9FD">containerRelativeFrame</span><span style="color:#F8F8F2">(.horizontal) { length, axis </span><span style="color:#FF79C6">in</span></span>
<span class="line"><span style="color:#FF79C6">          if</span><span style="color:#F8F8F2"> axis </span><span style="color:#FF79C6">==</span><span style="color:#F8F8F2"> .vertical {</span></span>
<span class="line"><span style="color:#FF79C6">            return</span><span style="color:#F8F8F2"> length </span><span style="color:#FF79C6">/</span><span style="color:#BD93F9"> 2</span><span style="color:#6272A4"> // This line will not execute because .vertical is not set in axes</span></span>
<span class="line"><span style="color:#F8F8F2">          } </span><span style="color:#FF79C6">else</span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#FF79C6">            return</span><span style="color:#F8F8F2"> length </span><span style="color:#FF79C6">*</span><span style="color:#F8F8F2"> (</span><span style="color:#BD93F9">2</span><span style="color:#FF79C6"> /</span><span style="color:#BD93F9"> 3</span><span style="color:#F8F8F2">)</span></span>
<span class="line"><span style="color:#F8F8F2">          }</span></span>
<span class="line"><span style="color:#F8F8F2">        }</span></span>
<span class="line"><span style="color:#F8F8F2">    }.</span><span style="color:#8BE9FD">frame</span><span style="color:#F8F8F2">(</span><span style="color:#8BE9FD">height</span><span style="color:#F8F8F2">: </span><span style="color:#BD93F9">100</span><span style="color:#F8F8F2">)</span></span>
<span class="line"><span style="color:#F8F8F2">  }</span></span>
<span class="line"><span style="color:#F8F8F2">}</span></span></code></pre></div>
<p>In the above code, the width of the <code>Rectangle</code> is set to two-thirds of the nearest container’s available width, while the height remains at 100 (consistent with the height of the parent <code>VStack</code>).</p>
<blockquote>
<p>A detailed explanation of the second constructor method will be discussed in the next section.</p>
</blockquote>
<h3 id="size-provided-by-the-container-available-container-size">Size Provided by the Container (Available Container Size)</h3>
<p>The official documentation describes the size used by the <code>containerRelativeFrame</code> modifier as follows: “The size provided to this modifier is the size of a container like the ones listed above subtracting any safe area insets that might be applied to that container”. This description is fundamentally correct, but there are some important details to note when implementing it with different containers:</p>
<ul>
<li>When used within a <code>NavigationSplitView</code>, <code>containerRelativeFrame</code> receives the dimensions of the current column (<code>SideBar</code>, <code>Content</code>, <code>Detail</code>). In addition to considering the reduction due to safe areas, the height of the toolbar (<code>navigationBarHeight</code>) must also be subtracted in the top area. However, when used in a <code>NavigationStack</code>, the toolbar height is not subtracted.</li>
<li>When using <code>containerRelativeFrame</code> in a <code>TabView</code>, the calculated height is the total height of the <code>TabView</code> minus the height of the safe area above and the <code>TabBar</code> below.</li>
<li>In a <code>ScrollView</code>, if the developer has added <code>padding</code> through <code>safeAreaPadding</code>, then <code>containerRelativeFrame</code> will also subtract these padding values.</li>
<li>In environments supporting multiple windows (iPadOS, macOS), the root container size corresponds to the available dimensions of the window in which the view is currently displayed.</li>
<li>Although the official documentation states that <code>containerRelativeFrame</code> can be used with <code>List</code>, according to its actual performance in Xcode Version 15.3 (15E204a), this modifier is not yet capable of correctly calculating dimensions in <code>List</code>.</li>
</ul>
<h2 id="usage-examples">Usage Examples</h2>
<p>After mastering the principles of the <code>containerRelativeFrame</code> modifier, developers can use this modifier to achieve many layout operations that were previously impossible or difficult to accomplish. In this section, we will showcase several representative examples.</p>
<h3 id="creating-proportional-galleries-based-on-scroll-area-dimensions">Creating Proportional Galleries Based on Scroll Area Dimensions</h3>
<p>This is a common scenario often highlighted in articles discussing the use of the <code>containerRelativeFrame</code>. Consider the following requirement: we need to build a horizontal scrolling gallery layout, similar to the style of the App Store or Apple Music, where each child view (image) is one-third the width of the scrollable area and two-thirds the height of its width.</p>
<p>Typically, if not using <code>containerRelativeFrame</code>, developers might use the method introduced in <a href="/en/posts/mastring-geometrygroup/" target="_blank">SwiftUI geometryGroup() Guide: From Theory to Practice</a>, which involves adding a <code>background</code> to <code>ScrollView</code> to obtain its dimensions, and then somehow passing this dimension information to set the specific sizes of the child views. This means we cannot achieve this solely by manipulating the child views; we must first obtain the dimensions of the <code>ScrollView</code>.</p>
<p>Using the second constructor method of <code>containerRelativeFrame</code>, this requirement can be easily met:</p>
<div>
        <div class="flex justify-between items-center h-8 font-medium bg-[#96744d] dark:bg-[#002565] text-gray-200 text-xs rounded-tl-md rounded-tr-md">
          <span class="px-4 py-1">Swift</span>
          <button class="copy-button py-1 px-4" onclick="copyCode(this, event)">
          <div class="copy-text">
            <span class="flex items-center justify-center sm:hover:text-white sm:hover:font-bold">
              <svg class="w-3 h-3 mr-1" fill="currentColor" stroke="currentColor">
                <use xlink:href="#icon-clipboard"></use>
              </svg>
            Copy code
            </span>
          </div>
          <div class="copied-text hidden">
            <span class="flex items-center justify-center">
              <svg class="w-3 h-3 mr-1" fill="currentColor" stroke="currentColor">
                  <use xlink:href="#icon-check"></use>
             </svg>
              Copied!
            </span>
          </div>
        </button>
        </div>
      <pre class="astro-code dracula" style="background-color:#282A36;color:#F8F8F2;overflow-x:auto" tabindex="0"><code><span class="line"><span style="color:#FF79C6">struct</span><span style="color:#8BE9FD;font-style:italic"> ScrollViewDemo</span><span style="color:#F8F8F2">:View {</span></span>
<span class="line"><span style="color:#FF79C6">  var</span><span style="color:#F8F8F2"> body: </span><span style="color:#FF79C6">some</span><span style="color:#F8F8F2"> View {</span></span>
<span class="line"><span style="color:#8BE9FD">    ScrollView</span><span style="color:#F8F8F2">(.horizontal) {</span></span>
<span class="line"><span style="color:#8BE9FD">      HStack</span><span style="color:#F8F8F2">(</span><span style="color:#8BE9FD">spacing</span><span style="color:#F8F8F2">: </span><span style="color:#BD93F9">10</span><span style="color:#F8F8F2">) {</span></span>
<span class="line"><span style="color:#8BE9FD">        ForEach</span><span style="color:#F8F8F2">(</span><span style="color:#BD93F9">0</span><span style="color:#FF79C6">..&lt;</span><span style="color:#BD93F9">10</span><span style="color:#F8F8F2">){ </span><span style="color:#BD93F9">_</span><span style="color:#FF79C6"> in</span></span>
<span class="line"><span style="color:#8BE9FD">          Rectangle</span><span style="color:#F8F8F2">()</span></span>
<span class="line"><span style="color:#F8F8F2">            .</span><span style="color:#8BE9FD">fill</span><span style="color:#F8F8F2">(.purple)</span></span>
<span class="line"><span style="color:#F8F8F2">            .</span><span style="color:#8BE9FD">aspectRatio</span><span style="color:#F8F8F2">(</span><span style="color:#BD93F9">3</span><span style="color:#FF79C6"> /</span><span style="color:#BD93F9"> 2</span><span style="color:#F8F8F2">, </span><span style="color:#8BE9FD">contentMode</span><span style="color:#F8F8F2">: .fit)</span></span>
<span class="line"><span style="color:#6272A4">            // Horizontally divide into thirds, no span, no spacing considered</span></span>
<span class="line"><span style="color:#F8F8F2">            .</span><span style="color:#8BE9FD">containerRelativeFrame</span><span style="color:#F8F8F2">(.horizontal, </span><span style="color:#8BE9FD">count</span><span style="color:#F8F8F2">: </span><span style="color:#BD93F9">3</span><span style="color:#F8F8F2">, </span><span style="color:#8BE9FD">span</span><span style="color:#F8F8F2">: </span><span style="color:#BD93F9">1</span><span style="color:#F8F8F2">, </span><span style="color:#8BE9FD">spacing</span><span style="color:#F8F8F2">: </span><span style="color:#BD93F9">0</span><span style="color:#F8F8F2">)</span></span>
<span class="line"><span style="color:#F8F8F2">        }</span></span>
<span class="line"><span style="color:#F8F8F2">      }</span></span>
<span class="line"><span style="color:#F8F8F2">    }</span></span>
<span class="line"><span style="color:#F8F8F2">  }</span></span>
<span class="line"><span style="color:#F8F8F2">}</span></span></code></pre></div>
<p><picture>
                    <source media="(max-width: 479px)" srcset="https://cdn.fatbobman.com/containerRelativeFrame-scrollview-demo1.webp?imageView2/0/w/500"/>
                    <source media="(max-width: 767px)" srcset="https://cdn.fatbobman.com/containerRelativeFrame-scrollview-demo1.webp?imageView2/0/w/768"/>
                    <source media="(max-width: 1024px)" srcset="https://cdn.fatbobman.com/containerRelativeFrame-scrollview-demo1.webp?imageView2/0/w/1024"/>
                    <img src="https://cdn.fatbobman.com/containerRelativeFrame-scrollview-demo1.webp" alt="image-20240505181749569" loading="lazy" decoding="async"/>
                  </picture></p>
<p>Astute readers may notice that since the <code>HStack</code> itself has <code>spacing: 10</code>, the third view (on the far right) will be incompletely displayed, with a small part not immediately visible in the scrolling area. If you wish to consider the <code>spacing: 10</code> of the <code>HStack</code> when setting the width of the child views, then you would need to also account for this spacing factor in <code>containerRelativeFrame</code>. With this adjustment, although each child view’s width is less than one-third of the <code>ScrollView</code>’s visible area width, considering the spacing, we can perfectly see three complete views on the initial screen.</p>
<div>
        <div class="flex justify-between items-center h-8 font-medium bg-[#96744d] dark:bg-[#002565] text-gray-200 text-xs rounded-tl-md rounded-tr-md">
          <span class="px-4 py-1">Swift</span>
          <button class="copy-button py-1 px-4" onclick="copyCode(this, event)">
          <div class="copy-text">
            <span class="flex items-center justify-center sm:hover:text-white sm:hover:font-bold">
              <svg class="w-3 h-3 mr-1" fill="currentColor" stroke="currentColor">
                <use xlink:href="#icon-clipboard"></use>
              </svg>
            Copy code
            </span>
          </div>
          <div class="copied-text hidden">
            <span class="flex items-center justify-center">
              <svg class="w-3 h-3 mr-1" fill="currentColor" stroke="currentColor">
                  <use xlink:href="#icon-check"></use>
             </svg>
              Copied!
            </span>
          </div>
        </button>
        </div>
      <pre class="astro-code dracula" style="background-color:#282A36;color:#F8F8F2;overflow-x:auto" tabindex="0"><code><span class="line"><span style="color:#FF79C6">struct</span><span style="color:#8BE9FD;font-style:italic"> ScrollViewDemo</span><span style="color:#F8F8F2">:View {</span></span>
<span class="line"><span style="color:#FF79C6">  var</span><span style="color:#F8F8F2"> body: </span><span style="color:#FF79C6">some</span><span style="color:#F8F8F2"> View {</span></span>
<span class="line"><span style="color:#8BE9FD">    ScrollView</span><span style="color:#F8F8F2">(.horizontal) {</span></span>
<span class="line"><span style="color:#8BE9FD">      HStack</span><span style="color:#F8F8F2">(</span><span style="color:#8BE9FD">spacing</span><span style="color:#F8F8F2">: </span><span style="color:#BD93F9">10</span><span style="color:#F8F8F2">) {</span></span>
<span class="line"><span style="color:#8BE9FD">        ForEach</span><span style="color:#F8F8F2">(</span><span style="color:#BD93F9">0</span><span style="color:#FF79C6">..&lt;</span><span style="color:#BD93F9">10</span><span style="color:#F8F8F2">){ </span><span style="color:#BD93F9">_</span><span style="color:#FF79C6"> in</span></span>
<span class="line"><span style="color:#8BE9FD">          Rectangle</span><span style="color:#F8F8F2">()</span></span>
<span class="line"><span style="color:#F8F8F2">            .</span><span style="color:#8BE9FD">fill</span><span style="color:#F8F8F2">(.purple)</span></span>
<span class="line"><span style="color:#F8F8F2">            .</span><span style="color:#8BE9FD">aspectRatio</span><span style="color:#F8F8F2">(</span><span style="color:#BD93F9">3</span><span style="color:#FF79C6"> /</span><span style="color:#BD93F9"> 2</span><span style="color:#F8F8F2">, </span><span style="color:#8BE9FD">contentMode</span><span style="color:#F8F8F2">: .fit)</span></span>
<span class="line"><span style="color:#F8F8F2">            .</span><span style="color:#8BE9FD">border</span><span style="color:#F8F8F2">(.yellow, </span><span style="color:#8BE9FD">width</span><span style="color:#F8F8F2">: </span><span style="color:#BD93F9">3</span><span style="color:#F8F8F2">)</span></span>
<span class="line"><span style="color:#6272A4">            // Include spacing consideration in calculations</span></span>
<span class="line"><span style="color:#F8F8F2">            .</span><span style="color:#8BE9FD">containerRelativeFrame</span><span style="color:#F8F8F2">(.horizontal, </span><span style="color:#8BE9FD">count</span><span style="color:#F8F8F2">: </span><span style="color:#BD93F9">3</span><span style="color:#F8F8F2">, </span><span style="color:#8BE9FD">span</span><span style="color:#F8F8F2">: </span><span style="color:#BD93F9">1</span><span style="color:#F8F8F2">, </span><span style="color:#8BE9FD">spacing</span><span style="color:#F8F8F2">: </span><span style="color:#BD93F9">10</span><span style="color:#F8F8F2">)</span></span>
<span class="line"><span style="color:#F8F8F2">        }</span></span>
<span class="line"><span style="color:#F8F8F2">      }</span></span>
<span class="line"><span style="color:#F8F8F2">    }</span></span>
<span class="line"><span style="color:#F8F8F2">  }</span></span>
<span class="line"><span style="color:#F8F8F2">}</span></span></code></pre></div>
<video src="https://cdn.fatbobman.com/containerRelativeFrame-scrollview-spacing-demo.mp4" autoplay="true" loop="true" muted="true" playsInline="true" loading="lazy" controls="true"></video>
<p>In <code>containerRelativeFrame</code>, the <code>spacing</code> parameter differs from the spacing in layout containers like <code>VStack</code> or <code>HStack</code>. It does not directly add space but is used in the second constructor method to add a spacing factor to the transformation rules.</p>
<p>The official documentation explains in detail the roles of <code>count</code>, <code>span</code>, and <code>spacing</code> in the transformation rules, taking width calculations as an example:</p>
<div>
        <div class="flex justify-between items-center h-8 font-medium bg-[#96744d] dark:bg-[#002565] text-gray-200 text-xs rounded-tl-md rounded-tr-md">
          <span class="px-4 py-1">Swift</span>
          <button class="copy-button py-1 px-4" onclick="copyCode(this, event)">
          <div class="copy-text">
            <span class="flex items-center justify-center sm:hover:text-white sm:hover:font-bold">
              <svg class="w-3 h-3 mr-1" fill="currentColor" stroke="currentColor">
                <use xlink:href="#icon-clipboard"></use>
              </svg>
            Copy code
            </span>
          </div>
          <div class="copied-text hidden">
            <span class="flex items-center justify-center">
              <svg class="w-3 h-3 mr-1" fill="currentColor" stroke="currentColor">
                  <use xlink:href="#icon-check"></use>
             </svg>
              Copied!
            </span>
          </div>
        </button>
        </div>
      <pre class="astro-code dracula" style="background-color:#282A36;color:#F8F8F2;overflow-x:auto" tabindex="0"><code><span class="line"><span style="color:#FF79C6">let</span><span style="color:#F8F8F2"> availableWidth </span><span style="color:#FF79C6">=</span><span style="color:#F8F8F2"> (containerWidth </span><span style="color:#FF79C6">-</span><span style="color:#F8F8F2"> (spacing </span><span style="color:#FF79C6">*</span><span style="color:#F8F8F2"> (count </span><span style="color:#FF79C6">-</span><span style="color:#BD93F9"> 1</span><span style="color:#F8F8F2">)))</span></span>
<span class="line"><span style="color:#FF79C6">let</span><span style="color:#F8F8F2"> columnWidth </span><span style="color:#FF79C6">=</span><span style="color:#F8F8F2"> (availableWidth </span><span style="color:#FF79C6">/</span><span style="color:#F8F8F2"> count)</span></span>
<span class="line"><span style="color:#FF79C6">let</span><span style="color:#F8F8F2"> itemWidth </span><span style="color:#FF79C6">=</span><span style="color:#F8F8F2"> (columnWidth </span><span style="color:#FF79C6">*</span><span style="color:#F8F8F2"> span) </span><span style="color:#FF79C6">+</span><span style="color:#F8F8F2"> ((span </span><span style="color:#FF79C6">-</span><span style="color:#BD93F9"> 1</span><span style="color:#F8F8F2">) </span><span style="color:#FF79C6">*</span><span style="color:#F8F8F2"> spacing)</span></span></code></pre></div>
<p>It is important to note that due to the layout characteristics of <code>ScrollView</code> (it uses all the proposed dimension in the scrolling direction, while in the non-scrolling direction, it depends on the required dimensions of the child views), when using <code>containerRelativeFrame</code> in a <code>ScrollView</code>, the <code>axes</code> parameter should at least include dimension handling in the scrolling direction (unless the child views have provided specific demand dimensions). Otherwise, it might lead to anomalies. For example, the following code might cause the application to crash in most cases:</p>
<div>
        <div class="flex justify-between items-center h-8 font-medium bg-[#96744d] dark:bg-[#002565] text-gray-200 text-xs rounded-tl-md rounded-tr-md">
          <span class="px-4 py-1">Swift</span>
          <button class="copy-button py-1 px-4" onclick="copyCode(this, event)">
          <div class="copy-text">
            <span class="flex items-center justify-center sm:hover:text-white sm:hover:font-bold">
              <svg class="w-3 h-3 mr-1" fill="currentColor" stroke="currentColor">
                <use xlink:href="#icon-clipboard"></use>
              </svg>
            Copy code
            </span>
          </div>
          <div class="copied-text hidden">
            <span class="flex items-center justify-center">
              <svg class="w-3 h-3 mr-1" fill="currentColor" stroke="currentColor">
                  <use xlink:href="#icon-check"></use>
             </svg>
              Copied!
            </span>
          </div>
        </button>
        </div>
      <pre class="astro-code dracula" style="background-color:#282A36;color:#F8F8F2;overflow-x:auto" tabindex="0"><code><span class="line"><span style="color:#FF79C6">struct</span><span style="color:#8BE9FD;font-style:italic"> ScrollViewDemo</span><span style="color:#F8F8F2">:View {</span></span>
<span class="line"><span style="color:#FF79C6">  var</span><span style="color:#F8F8F2"> body: </span><span style="color:#FF79C6">some</span><span style="color:#F8F8F2"> View {</span></span>
<span class="line"><span style="color:#F8F8F2">    ScrollView {</span></span>
<span class="line"><span style="color:#8BE9FD">      HStack</span><span style="color:#F8F8F2">(</span><span style="color:#8BE9FD">spacing</span><span style="color:#F8F8F2">: </span><span style="color:#BD93F9">10</span><span style="color:#F8F8F2">) {</span></span>
<span class="line"><span style="color:#8BE9FD">        ForEach</span><span style="color:#F8F8F2">(</span><span style="color:#BD93F9">0</span><span style="color:#FF79C6">..&lt;</span><span style="color:#BD93F9">10</span><span style="color:#F8F8F2">){ </span><span style="color:#BD93F9">_</span><span style="color:#FF79C6"> in</span></span>
<span class="line"><span style="color:#8BE9FD">          Rectangle</span><span style="color:#F8F8F2">()</span></span>
<span class="line"><span style="color:#F8F8F2">            .</span><span style="color:#8BE9FD">fill</span><span style="color:#F8F8F2">(.purple)</span></span>
<span class="line"><span style="color:#F8F8F2">            .</span><span style="color:#8BE9FD">aspectRatio</span><span style="color:#F8F8F2">(</span><span style="color:#BD93F9">3</span><span style="color:#FF79C6"> /</span><span style="color:#BD93F9"> 2</span><span style="color:#F8F8F2">, </span><span style="color:#8BE9FD">contentMode</span><span style="color:#F8F8F2">: .fit)</span></span>
<span class="line"><span style="color:#F8F8F2">            .</span><span style="color:#8BE9FD">border</span><span style="color:#F8F8F2">(.yellow, </span><span style="color:#8BE9FD">width</span><span style="color:#F8F8F2">: </span><span style="color:#BD93F9">3</span><span style="color:#F8F8F2">)</span></span>
<span class="line"><span style="color:#6272A4">            // Calculation direction inconsistent with scrolling direction</span></span>
<span class="line"><span style="color:#F8F8F2">            .</span><span style="color:#8BE9FD">containerRelativeFrame</span><span style="color:#F8F8F2">(.horizontal, </span><span style="color:#8BE9FD">count</span><span style="color:#F8F8F2">: </span><span style="color:#BD93F9">3</span><span style="color:#F8F8F2">, </span><span style="color:#8BE9FD">span</span><span style="color:#F8F8F2">: </span><span style="color:#BD93F9">1</span><span style="color:#F8F8F2">, </span><span style="color:#8BE9FD">spacing</span><span style="color:#F8F8F2">: </span><span style="color:#BD93F9">0</span><span style="color:#F8F8F2">)</span></span>
<span class="line"><span style="color:#F8F8F2">        }</span></span>
<span class="line"><span style="color:#F8F8F2">      }</span></span>
<span class="line"><span style="color:#F8F8F2">    }</span></span>
<span class="line"><span style="color:#F8F8F2">    .</span><span style="color:#8BE9FD">border</span><span style="color:#F8F8F2">(.red)</span></span>
<span class="line"><span style="color:#F8F8F2">  }</span></span>
<span class="line"><span style="color:#F8F8F2">}</span></span></code></pre></div>
<p><strong>Note</strong>: Due to the differences in layout logic between <code>LazyHStack</code> and <code>HStack</code>, using <code>LazyHStack</code> instead of <code>HStack</code> can cause the <code>ScrollView</code> to occupy all available space, which may not align with the expected layout (official documentation examples use <code>LazyHStack</code>). In scenarios where <code>LazyHStack</code> is necessary, a better choice might be to use <code>GeometryReader</code> to obtain the width of the <code>ScrollView</code> and calculate the height accordingly to ensure the layout meets expectations.</p>
<video src="https://cdn.fatbobman.com/lazyhstack-hstack-containerRelativeFrame-diff.mp4" autoplay="true" loop="true" muted="true" playsInline="true" loading="lazy" controls="true"></video>
<h3 id="setting-sizes-proportionally">Setting Sizes Proportionally</h3>
<p>When the required size proportions are irregular, the third constructor method that allows for complete customization of transformation rules is more suitable. Consider the following scenario: we need to display a piece of text within a container (such as a <code>NavigationStack</code> or <code>TabView</code>) and set a background composed of two colors, blue on the top and orange on the bottom, with the division point at the container’s golden ratio (0.618).</p>
<p>Without using <code>containerRelativeFrame</code>, we might implement this as follows:</p>
<div>
        <div class="flex justify-between items-center h-8 font-medium bg-[#96744d] dark:bg-[#002565] text-gray-200 text-xs rounded-tl-md rounded-tr-md">
          <span class="px-4 py-1">Swift</span>
          <button class="copy-button py-1 px-4" onclick="copyCode(this, event)">
          <div class="copy-text">
            <span class="flex items-center justify-center sm:hover:text-white sm:hover:font-bold">
              <svg class="w-3 h-3 mr-1" fill="currentColor" stroke="currentColor">
                <use xlink:href="#icon-clipboard"></use>
              </svg>
            Copy code
            </span>
          </div>
          <div class="copied-text hidden">
            <span class="flex items-center justify-center">
              <svg class="w-3 h-3 mr-1" fill="currentColor" stroke="currentColor">
                  <use xlink:href="#icon-check"></use>
             </svg>
              Copied!
            </span>
          </div>
        </button>
        </div>
      <pre class="astro-code dracula" style="background-color:#282A36;color:#F8F8F2;overflow-x:auto" tabindex="0"><code><span class="line"><span style="color:#FF79C6">struct</span><span style="color:#8BE9FD;font-style:italic"> SplitDemo</span><span style="color:#F8F8F2">:View {</span></span>
<span class="line"><span style="color:#FF79C6">  var</span><span style="color:#F8F8F2"> body: </span><span style="color:#FF79C6">some</span><span style="color:#F8F8F2"> View {</span></span>
<span class="line"><span style="color:#F8F8F2">    NavigationStack {</span></span>
<span class="line"><span style="color:#F8F8F2">      ZStack {</span></span>
<span class="line"><span style="color:#F8F8F2">        Color.blue</span></span>
<span class="line"><span style="color:#F8F8F2">          .</span><span style="color:#8BE9FD">overlay</span><span style="color:#F8F8F2">(</span></span>
<span class="line"><span style="color:#F8F8F2">            GeometryReader { proxy </span><span style="color:#FF79C6">in</span></span>
<span class="line"><span style="color:#F8F8F2">              Color.clear</span></span>
<span class="line"><span style="color:#F8F8F2">                .</span><span style="color:#8BE9FD">overlay</span><span style="color:#F8F8F2">(</span><span style="color:#8BE9FD">alignment</span><span style="color:#F8F8F2">: .bottom) {</span></span>
<span class="line"><span style="color:#F8F8F2">                  Color.orange</span></span>
<span class="line"><span style="color:#F8F8F2">                    .</span><span style="color:#8BE9FD">frame</span><span style="color:#F8F8F2">(</span><span style="color:#8BE9FD">height</span><span style="color:#F8F8F2">: proxy.</span><span style="color:#BD93F9">size</span><span style="color:#F8F8F2">.height </span><span style="color:#FF79C6">*</span><span style="color:#F8F8F2"> (</span><span style="color:#BD93F9">1</span><span style="color:#FF79C6"> -</span><span style="color:#BD93F9"> 0.618</span><span style="color:#F8F8F2">))</span></span>
<span class="line"><span style="color:#F8F8F2">                }</span></span>
<span class="line"><span style="color:#F8F8F2">            }</span></span>
<span class="line"><span style="color:#F8F8F2">          )</span></span>
<span class="line"><span style="color:#8BE9FD">        Text</span><span style="color:#F8F8F2">(</span><span style="color:#E9F284">&quot;</span><span style="color:#F1FA8C">Hello World</span><span style="color:#E9F284">&quot;</span><span style="color:#F8F8F2">)</span></span>
<span class="line"><span style="color:#F8F8F2">          .</span><span style="color:#8BE9FD">font</span><span style="color:#F8F8F2">(.title)</span></span>
<span class="line"><span style="color:#F8F8F2">          .</span><span style="color:#8BE9FD">foregroundStyle</span><span style="color:#F8F8F2">(.yellow)</span></span>
<span class="line"><span style="color:#F8F8F2">      }</span></span>
<span class="line"><span style="color:#F8F8F2">    }</span></span>
<span class="line"><span style="color:#F8F8F2">  }</span></span>
<span class="line"><span style="color:#F8F8F2">}</span></span></code></pre></div>
<p><picture>
                    <source media="(max-width: 479px)" srcset="https://cdn.fatbobman.com/containerRelativeFrame-split-demo.webp?imageView2/0/w/500"/>
                    <source media="(max-width: 767px)" srcset="https://cdn.fatbobman.com/containerRelativeFrame-split-demo.webp?imageView2/0/w/768"/>
                    <source media="(max-width: 1024px)" srcset="https://cdn.fatbobman.com/containerRelativeFrame-split-demo.webp?imageView2/0/w/1024"/>
                    <img src="https://cdn.fatbobman.com/containerRelativeFrame-split-demo.webp" alt="image-20240505190535855" loading="lazy" decoding="async"/>
                  </picture></p>
<p>With <code>containerRelativeFrame</code>, our implementation logic would be entirely different:</p>
<div>
        <div class="flex justify-between items-center h-8 font-medium bg-[#96744d] dark:bg-[#002565] text-gray-200 text-xs rounded-tl-md rounded-tr-md">
          <span class="px-4 py-1">Swift</span>
          <button class="copy-button py-1 px-4" onclick="copyCode(this, event)">
          <div class="copy-text">
            <span class="flex items-center justify-center sm:hover:text-white sm:hover:font-bold">
              <svg class="w-3 h-3 mr-1" fill="currentColor" stroke="currentColor">
                <use xlink:href="#icon-clipboard"></use>
              </svg>
            Copy code
            </span>
          </div>
          <div class="copied-text hidden">
            <span class="flex items-center justify-center">
              <svg class="w-3 h-3 mr-1" fill="currentColor" stroke="currentColor">
                  <use xlink:href="#icon-check"></use>
             </svg>
              Copied!
            </span>
          </div>
        </button>
        </div>
      <pre class="astro-code dracula" style="background-color:#282A36;color:#F8F8F2;overflow-x:auto" tabindex="0"><code><span class="line"><span style="color:#FF79C6">struct</span><span style="color:#8BE9FD;font-style:italic"> SplitDemo</span><span style="color:#F8F8F2">: View {</span></span>
<span class="line"><span style="color:#FF79C6">  var</span><span style="color:#F8F8F2"> body: </span><span style="color:#FF79C6">some</span><span style="color:#F8F8F2"> View {</span></span>
<span class="line"><span style="color:#F8F8F2">    NavigationStack {</span></span>
<span class="line"><span style="color:#8BE9FD">      Text</span><span style="color:#F8F8F2">(</span><span style="color:#E9F284">&quot;</span><span style="color:#F1FA8C">Hello World</span><span style="color:#E9F284">&quot;</span><span style="color:#F8F8F2">)</span></span>
<span class="line"><span style="color:#F8F8F2">        .</span><span style="color:#8BE9FD">font</span><span style="color:#F8F8F2">(.title)</span></span>
<span class="line"><span style="color:#F8F8F2">        .</span><span style="color:#8BE9FD">foregroundStyle</span><span style="color:#F8F8F2">(.yellow)</span></span>
<span class="line"><span style="color:#F8F8F2">        .</span><span style="color:#8BE9FD">background</span><span style="color:#F8F8F2">(</span></span>
<span class="line"><span style="color:#F8F8F2">          Color.blue</span></span>
<span class="line"><span style="color:#6272A4">            // Blue occupies the entire available space of the container</span></span>
<span class="line"><span style="color:#F8F8F2">            .</span><span style="color:#8BE9FD">containerRelativeFrame</span><span style="color:#F8F8F2">([.horizontal, .vertical])</span></span>
<span class="line"><span style="color:#F8F8F2">            .</span><span style="color:#8BE9FD">overlay</span><span style="color:#F8F8F2">(</span><span style="color:#8BE9FD">alignment</span><span style="color:#F8F8F2">: .bottom) {</span></span>
<span class="line"><span style="color:#F8F8F2">              Color.orange</span></span>
<span class="line"><span style="color:#6272A4">                // Orange height is the container height x (1 - 0.618), aligned with blue at the bottom</span></span>
<span class="line"><span style="color:#F8F8F2">                .</span><span style="color:#8BE9FD">containerRelativeFrame</span><span style="color:#F8F8F2">(.vertical) { length, </span><span style="color:#BD93F9">_</span><span style="color:#FF79C6"> in</span></span>
<span class="line"><span style="color:#F8F8F2">                  length </span><span style="color:#FF79C6">*</span><span style="color:#F8F8F2"> (</span><span style="color:#BD93F9">1</span><span style="color:#FF79C6"> -</span><span style="color:#BD93F9"> 0.618</span><span style="color:#F8F8F2">)</span></span>
<span class="line"><span style="color:#F8F8F2">                }</span></span>
<span class="line"><span style="color:#F8F8F2">            }</span></span>
<span class="line"><span style="color:#F8F8F2">        )</span></span>
<span class="line"><span style="color:#F8F8F2">    }</span></span>
<span class="line"><span style="color:#F8F8F2">  }</span></span>
<span class="line"><span style="color:#F8F8F2">}</span></span></code></pre></div>
<p>If you want the blue and orange backgrounds to extend beyond the safe area, you can achieve this by adding the <code>ignoresSafeArea</code> modifier:</p>
<div>
        <div class="flex justify-between items-center h-8 font-medium bg-[#96744d] dark:bg-[#002565] text-gray-200 text-xs rounded-tl-md rounded-tr-md">
          <span class="px-4 py-1">Swift</span>
          <button class="copy-button py-1 px-4" onclick="copyCode(this, event)">
          <div class="copy-text">
            <span class="flex items-center justify-center sm:hover:text-white sm:hover:font-bold">
              <svg class="w-3 h-3 mr-1" fill="currentColor" stroke="currentColor">
                <use xlink:href="#icon-clipboard"></use>
              </svg>
            Copy code
            </span>
          </div>
          <div class="copied-text hidden">
            <span class="flex items-center justify-center">
              <svg class="w-3 h-3 mr-1" fill="currentColor" stroke="currentColor">
                  <use xlink:href="#icon-check"></use>
             </svg>
              Copied!
            </span>
          </div>
        </button>
        </div>
      <pre class="astro-code dracula" style="background-color:#282A36;color:#F8F8F2;overflow-x:auto" tabindex="0"><code><span class="line"><span style="color:#F8F8F2">NavigationStack {</span></span>
<span class="line"><span style="color:#8BE9FD">  Text</span><span style="color:#F8F8F2">(</span><span style="color:#E9F284">&quot;</span><span style="color:#F1FA8C">Hello World</span><span style="color:#E9F284">&quot;</span><span style="color:#F8F8F2">)</span></span>
<span class="line"><span style="color:#F8F8F2">    .</span><span style="color:#8BE9FD">font</span><span style="color:#F8F8F2">(.title)</span></span>
<span class="line"><span style="color:#F8F8F2">    .</span><span style="color:#8BE9FD">foregroundStyle</span><span style="color:#F8F8F2">(.yellow)</span></span>
<span class="line"><span style="color:#F8F8F2">    .</span><span style="color:#8BE9FD">background</span><span style="color:#F8F8F2">(</span></span>
<span class="line"><span style="color:#F8F8F2">      Color.blue</span></span>
<span class="line"><span style="color:#F8F8F2">        .</span><span style="color:#8BE9FD">ignoresSafeArea</span><span style="color:#F8F8F2">()</span></span>
<span class="line"><span style="color:#F8F8F2">        .</span><span style="color:#8BE9FD">containerRelativeFrame</span><span style="color:#F8F8F2">([.horizontal, .vertical])</span></span>
<span class="line"><span style="color:#F8F8F2">        .</span><span style="color:#8BE9FD">overlay</span><span style="color:#F8F8F2">(</span><span style="color:#8BE9FD">alignment</span><span style="color:#F8F8F2">: .bottom) {</span></span>
<span class="line"><span style="color:#F8F8F2">          Color.orange</span></span>
<span class="line"><span style="color:#F8F8F2">            .</span><span style="color:#8BE9FD">ignoresSafeArea</span><span style="color:#F8F8F2">()</span></span>
<span class="line"><span style="color:#F8F8F2">            .</span><span style="color:#8BE9FD">containerRelativeFrame</span><span style="color:#F8F8F2">(.vertical) { length, </span><span style="color:#BD93F9">_</span><span style="color:#FF79C6"> in</span></span>
<span class="line"><span style="color:#F8F8F2">              length </span><span style="color:#FF79C6">*</span><span style="color:#F8F8F2"> (</span><span style="color:#BD93F9">1</span><span style="color:#FF79C6"> -</span><span style="color:#BD93F9"> 0.618</span><span style="color:#F8F8F2">)</span></span>
<span class="line"><span style="color:#F8F8F2">            }</span></span>
<span class="line"><span style="color:#F8F8F2">        }</span></span>
<span class="line"><span style="color:#F8F8F2">    )</span></span>
<span class="line"><span style="color:#F8F8F2">}</span></span></code></pre></div>
<video src="https://cdn.fatbobman.com/containerRelativeFrame-ignoresSafeArea-demo.mp4" autoplay="true" loop="true" muted="true" playsInline="true" loading="lazy" controls="true"></video>
<p>In the article <a href="/en/posts/geometryreader-blessing-or-curse/" target="_blank">GeometryReader: Blessing or Curse?</a>, we explored how to use <code>GeometryReader</code> to place two views at a specific ratio within a given space. Although <code>containerRelativeFrame</code> only supports obtaining dimensions of specific containers, we can still employ certain techniques to meet similar layout requirements.</p>
<p>Here is an example of implementing this with <code>GeometryReader</code>:</p>
<div>
        <div class="flex justify-between items-center h-8 font-medium bg-[#96744d] dark:bg-[#002565] text-gray-200 text-xs rounded-tl-md rounded-tr-md">
          <span class="px-4 py-1">Swift</span>
          <button class="copy-button py-1 px-4" onclick="copyCode(this, event)">
          <div class="copy-text">
            <span class="flex items-center justify-center sm:hover:text-white sm:hover:font-bold">
              <svg class="w-3 h-3 mr-1" fill="currentColor" stroke="currentColor">
                <use xlink:href="#icon-clipboard"></use>
              </svg>
            Copy code
            </span>
          </div>
          <div class="copied-text hidden">
            <span class="flex items-center justify-center">
              <svg class="w-3 h-3 mr-1" fill="currentColor" stroke="currentColor">
                  <use xlink:href="#icon-check"></use>
             </svg>
              Copied!
            </span>
          </div>
        </button>
        </div>
      <pre class="astro-code dracula" style="background-color:#282A36;color:#F8F8F2;overflow-x:auto" tabindex="0"><code><span class="line"><span style="color:#FF79C6">struct</span><span style="color:#8BE9FD;font-style:italic"> RatioSplitHStack</span><span style="color:#F8F8F2">&lt;</span><span style="color:#BD93F9;font-style:italic">L</span><span style="color:#F8F8F2">, </span><span style="color:#BD93F9;font-style:italic">R</span><span style="color:#F8F8F2">&gt;: View </span><span style="color:#FF79C6">where</span><span style="color:#F8F8F2"> L: View, R: View {</span></span>
<span class="line"><span style="color:#FF79C6">    let</span><span style="color:#F8F8F2"> leftWidthRatio: CGFloat</span></span>
<span class="line"><span style="color:#FF79C6">    let</span><span style="color:#F8F8F2"> leftContent: L</span></span>
<span class="line"><span style="color:#FF79C6">    let</span><span style="color:#F8F8F2"> rightContent: R</span></span>
<span class="line"><span style="color:#FF79C6">    init</span><span style="color:#F8F8F2">(</span><span style="color:#50FA7B;font-style:italic">leftWidthRatio</span><span style="color:#F8F8F2">: CGFloat, @</span><span style="color:#50FA7B">ViewBuilder</span><span style="color:#FFB86C;font-style:italic"> leftContent</span><span style="color:#F8F8F2">: </span><span style="color:#FF79C6">@escaping</span><span style="color:#F8F8F2"> () </span><span style="color:#FF79C6">-&gt;</span><span style="color:#F8F8F2"> L, @</span><span style="color:#50FA7B">ViewBuilder</span><span style="color:#FFB86C;font-style:italic"> rightContent</span><span style="color:#F8F8F2">: </span><span style="color:#FF79C6">@escaping</span><span style="color:#F8F8F2"> () </span><span style="color:#FF79C6">-&gt;</span><span style="color:#F8F8F2"> R) {</span></span>
<span class="line"><span style="color:#BD93F9;font-style:italic">        self</span><span style="color:#F8F8F2">.leftWidthRatio </span><span style="color:#FF79C6">=</span><span style="color:#F8F8F2"> leftWidthRatio</span></span>
<span class="line"><span style="color:#BD93F9;font-style:italic">        self</span><span style="color:#F8F8F2">.leftContent </span><span style="color:#FF79C6">=</span><span style="color:#8BE9FD"> leftContent</span><span style="color:#F8F8F2">()</span></span>
<span class="line"><span style="color:#BD93F9;font-style:italic">        self</span><span style="color:#F8F8F2">.rightContent </span><span style="color:#FF79C6">=</span><span style="color:#8BE9FD"> rightContent</span><span style="color:#F8F8F2">()</span></span>
<span class="line"><span style="color:#F8F8F2">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FF79C6">    var</span><span style="color:#F8F8F2"> body: </span><span style="color:#FF79C6">some</span><span style="color:#F8F8F2"> View {</span></span>
<span class="line"><span style="color:#F8F8F2">        GeometryReader { proxy </span><span style="color:#FF79C6">in</span></span>
<span class="line"><span style="color:#8BE9FD">            HStack</span><span style="color:#F8F8F2">(</span><span style="color:#8BE9FD">spacing</span><span style="color:#F8F8F2">: </span><span style="color:#BD93F9">0</span><span style="color:#F8F8F2">) {</span></span>
<span class="line"><span style="color:#F8F8F2">                Color.clear</span></span>
<span class="line"><span style="color:#F8F8F2">                    .</span><span style="color:#8BE9FD">frame</span><span style="color:#F8F8F2">(</span><span style="color:#8BE9FD">width</span><span style="color:#F8F8F2">: proxy.</span><span style="color:#BD93F9">size</span><span style="color:#F8F8F2">.width </span><span style="color:#FF79C6">*</span><span style="color:#F8F8F2"> leftWidthRatio)</span></span>
<span class="line"><span style="color:#F8F8F2">                    .</span><span style="color:#8BE9FD">overlay</span><span style="color:#F8F8F2">(leftContent)</span></span>
<span class="line"><span style="color:#F8F8F2">                Color.clear</span></span>
<span class="line"><span style="color:#F8F8F2">                    .</span><span style="color:#8BE9FD">overlay</span><span style="color:#F8F8F2">(rightContent)</span></span>
<span class="line"><span style="color:#F8F8F2">            }</span></span>
<span class="line"><span style="color:#F8F8F2">        }</span></span>
<span class="line"><span style="color:#F8F8F2">    }</span></span>
<span class="line"><span style="color:#F8F8F2">}</span></span></code></pre></div>
<p>In a version using <code>containerRelativeFrame</code>, we can utilize a <code>ScrollView</code> to provide dimensions without actually enabling its scrolling feature:</p>
<div>
        <div class="flex justify-between items-center h-8 font-medium bg-[#96744d] dark:bg-[#002565] text-gray-200 text-xs rounded-tl-md rounded-tr-md">
          <span class="px-4 py-1">Swift</span>
          <button class="copy-button py-1 px-4" onclick="copyCode(this, event)">
          <div class="copy-text">
            <span class="flex items-center justify-center sm:hover:text-white sm:hover:font-bold">
              <svg class="w-3 h-3 mr-1" fill="currentColor" stroke="currentColor">
                <use xlink:href="#icon-clipboard"></use>
              </svg>
            Copy code
            </span>
          </div>
          <div class="copied-text hidden">
            <span class="flex items-center justify-center">
              <svg class="w-3 h-3 mr-1" fill="currentColor" stroke="currentColor">
                  <use xlink:href="#icon-check"></use>
             </svg>
              Copied!
            </span>
          </div>
        </button>
        </div>
      <pre class="astro-code dracula" style="background-color:#282A36;color:#F8F8F2;overflow-x:auto" tabindex="0"><code><span class="line"><span style="color:#FF79C6">struct</span><span style="color:#8BE9FD;font-style:italic"> RatioSplitHStack</span><span style="color:#F8F8F2">&lt;</span><span style="color:#BD93F9;font-style:italic">L</span><span style="color:#F8F8F2">, </span><span style="color:#BD93F9;font-style:italic">R</span><span style="color:#F8F8F2">&gt;: View </span><span style="color:#FF79C6">where</span><span style="color:#F8F8F2"> L: View, R: View {</span></span>
<span class="line"><span style="color:#FF79C6">  let</span><span style="color:#F8F8F2"> leftWidthRatio: CGFloat</span></span>
<span class="line"><span style="color:#FF79C6">  let</span><span style="color:#F8F8F2"> leftContent: L</span></span>
<span class="line"><span style="color:#FF79C6">  let</span><span style="color:#F8F8F2"> rightContent: R</span></span>
<span class="line"><span style="color:#FF79C6">  init</span><span style="color:#F8F8F2">(</span><span style="color:#50FA7B;font-style:italic">leftWidthRatio</span><span style="color:#F8F8F2">: CGFloat, @</span><span style="color:#50FA7B">ViewBuilder</span><span style="color:#FFB86C;font-style:italic"> leftContent</span><span style="color:#F8F8F2">: </span><span style="color:#FF79C6">@escaping</span><span style="color:#F8F8F2"> () </span><span style="color:#FF79C6">-&gt;</span><span style="color:#F8F8F2"> L, @</span><span style="color:#50FA7B">ViewBuilder</span><span style="color:#FFB86C;font-style:italic"> rightContent</span><span style="color:#F8F8F2">: </span><span style="color:#FF79C6">@escaping</span><span style="color:#F8F8F2"> () </span><span style="color:#FF79C6">-&gt;</span><span style="color:#F8F8F2"> R) {</span></span>
<span class="line"><span style="color:#BD93F9;font-style:italic">    self</span><span style="color:#F8F8F2">.leftWidthRatio </span><span style="color:#FF79C6">=</span><span style="color:#F8F8F2"> leftWidthRatio</span></span>
<span class="line"><span style="color:#BD93F9;font-style:italic">    self</span><span style="color:#F8F8F2">.leftContent </span><span style="color:#FF79C6">=</span><span style="color:#8BE9FD"> leftContent</span><span style="color:#F8F8F2">()</span></span>
<span class="line"><span style="color:#BD93F9;font-style:italic">    self</span><span style="color:#F8F8F2">.rightContent </span><span style="color:#FF79C6">=</span><span style="color:#8BE9FD"> rightContent</span><span style="color:#F8F8F2">()</span></span>
<span class="line"><span style="color:#F8F8F2">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FF79C6">  var</span><span style="color:#F8F8F2"> body: </span><span style="color:#FF79C6">some</span><span style="color:#F8F8F2"> View {</span></span>
<span class="line"><span style="color:#8BE9FD">    ScrollView</span><span style="color:#F8F8F2">(.horizontal) {</span></span>
<span class="line"><span style="color:#8BE9FD">      HStack</span><span style="color:#F8F8F2">(</span><span style="color:#8BE9FD">spacing</span><span style="color:#F8F8F2">: </span><span style="color:#BD93F9">0</span><span style="color:#F8F8F2">) {</span></span>
<span class="line"><span style="color:#F8F8F2">        Color.clear</span></span>
<span class="line"><span style="color:#F8F8F2">          .</span><span style="color:#8BE9FD">containerRelativeFrame</span><span style="color:#F8F8F2">(.horizontal) { length, </span><span style="color:#BD93F9">_</span><span style="color:#FF79C6"> in</span><span style="color:#F8F8F2"> length </span><span style="color:#FF79C6">*</span><span style="color:#F8F8F2"> leftWidthRatio }</span></span>
<span class="line"><span style="color:#F8F8F2">          .</span><span style="color:#8BE9FD">overlay</span><span style="color:#F8F8F2">(leftContent)</span></span>
<span class="line"><span style="color:#F8F8F2">        Color</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F8F8F2">.clear</span></span>
<span class="line"><span style="color:#F8F8F2">          .</span><span style="color:#8BE9FD">overlay</span><span style="color:#F8F8F2">(rightContent)</span></span>
<span class="line"><span style="color:#F8F8F2">          .</span><span style="color:#8BE9FD">containerRelativeFrame</span><span style="color:#F8F8F2">(.horizontal) { length, </span><span style="color:#BD93F9">_</span><span style="color:#FF79C6"> in</span><span style="color:#F8F8F2"> length </span><span style="color:#FF79C6">*</span><span style="color:#F8F8F2"> (</span><span style="color:#BD93F9">1</span><span style="color:#FF79C6"> -</span><span style="color:#F8F8F2"> leftWidthRatio) }</span></span>
<span class="line"><span style="color:#F8F8F2">      }</span></span>
<span class="line"><span style="color:#F8F8F2">    }</span></span>
<span class="line"><span style="color:#F8F8F2">    .</span><span style="color:#8BE9FD">scrollDisabled</span><span style="color:#F8F8F2">(</span><span style="color:#BD93F9">true</span><span style="color:#F8F8F2">) </span><span style="color:#6272A4">// Using ScrollView solely as a dimension provider, scrolling disabled</span></span>
<span class="line"><span style="color:#F8F8F2">  }</span></span>
<span class="line"><span style="color:#F8F8F2">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FF79C6">struct</span><span style="color:#8BE9FD;font-style:italic"> RatioSplitHStackDemo</span><span style="color:#F8F8F2">: View {</span></span>
<span class="line"><span style="color:#FF79C6">    var</span><span style="color:#F8F8F2"> body: </span><span style="color:#FF79C6">some</span><span style="color:#F8F8F2"> View {</span></span>
<span class="line"><span style="color:#8BE9FD">        RatioSplitHStack</span><span style="color:#F8F8F2">(</span><span style="color:#8BE9FD">leftWidthRatio</span><span style="color:#F8F8F2">: </span><span style="color:#BD93F9">0.25</span><span style="color:#F8F8F2">) {</span></span>
<span class="line"><span style="color:#8BE9FD">            Rectangle</span><span style="color:#F8F8F2">().</span><span style="color:#8BE9FD">fill</span><span style="color:#F8F8F2">(.red)</span></span>
<span class="line"><span style="color:#F8F8F2">        } rightContent</span><span style="color:#FF79C6">:</span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#F8F8F2">            Color.clear</span></span>
<span class="line"><span style="color:#F8F8F2">                .</span><span style="color:#8BE9FD">overlay</span><span style="color:#F8F8F2">(</span></span>
<span class="line"><span style="color:#8BE9FD">                    Text</span><span style="color:#F8F8F2">(</span><span style="color:#E9F284">&quot;</span><span style="color:#F1FA8C">Hello World</span><span style="color:#E9F284">&quot;</span><span style="color:#F8F8F2">)</span></span>
<span class="line"><span style="color:#F8F8F2">                )</span></span>
<span class="line"><span style="color:#F8F8F2">        }</span></span>
<span class="line"><span style="color:#F8F8F2">        .</span><span style="color:#8BE9FD">border</span><span style="color:#F8F8F2">(.blue)</span></span>
<span class="line"><span style="color:#F8F8F2">        .</span><span style="color:#8BE9FD">frame</span><span style="color:#F8F8F2">(</span><span style="color:#8BE9FD">width</span><span style="color:#F8F8F2">: </span><span style="color:#BD93F9">300</span><span style="color:#F8F8F2">, </span><span style="color:#8BE9FD">height</span><span style="color:#F8F8F2">: </span><span style="color:#BD93F9">60</span><span style="color:#F8F8F2">)</span></span>
<span class="line"><span style="color:#F8F8F2">    }</span></span>
<span class="line"><span style="color:#F8F8F2">}</span></span></code></pre></div>
<p><picture>
                    <source media="(max-width: 479px)" srcset="https://cdn.fatbobman.com/containerRelativeFrame-ratio-split-demo.webp?imageView2/0/w/500"/>
                    <source media="(max-width: 767px)" srcset="https://cdn.fatbobman.com/containerRelativeFrame-ratio-split-demo.webp?imageView2/0/w/768"/>
                    <source media="(max-width: 1024px)" srcset="https://cdn.fatbobman.com/containerRelativeFrame-ratio-split-demo.webp?imageView2/0/w/1024"/>
                    <img src="https://cdn.fatbobman.com/containerRelativeFrame-ratio-split-demo.webp" alt="image-20240505193128775" loading="lazy" decoding="async"/>
                  </picture></p>
<h3 id="obtaining-container-dimensions-as-a-subview-across-view-hierarchies">Obtaining Container Dimensions as a Subview Across View Hierarchies</h3>
<p>An important feature of <code>containerRelativeFrame</code> is its ability to directly obtain the available dimensions of the nearest suitable container within the view hierarchy. This capability is particularly suited for constructing subviews or view modifiers that contain independent logic and need to be aware of the dimensions of their containers, but do not want to disrupt the current view layout as <code>GeometryReader</code> might.</p>
<p>The following example demonstrates how to build a <code>ViewModifier</code> called <code>ContainerSizeGetter</code>, whose purpose is to obtain and pass on the available dimensions of its container (which is part of the container list):</p>
<div>
        <div class="flex justify-between items-center h-8 font-medium bg-[#96744d] dark:bg-[#002565] text-gray-200 text-xs rounded-tl-md rounded-tr-md">
          <span class="px-4 py-1">Swift</span>
          <button class="copy-button py-1 px-4" onclick="copyCode(this, event)">
          <div class="copy-text">
            <span class="flex items-center justify-center sm:hover:text-white sm:hover:font-bold">
              <svg class="w-3 h-3 mr-1" fill="currentColor" stroke="currentColor">
                <use xlink:href="#icon-clipboard"></use>
              </svg>
            Copy code
            </span>
          </div>
          <div class="copied-text hidden">
            <span class="flex items-center justify-center">
              <svg class="w-3 h-3 mr-1" fill="currentColor" stroke="currentColor">
                  <use xlink:href="#icon-check"></use>
             </svg>
              Copied!
            </span>
          </div>
        </button>
        </div>
      <pre class="astro-code dracula" style="background-color:#282A36;color:#F8F8F2;overflow-x:auto" tabindex="0"><code><span class="line"><span style="color:#6272A4">// Store the retrieved dimensions to prevent updates during the view refresh cycle</span></span>
<span class="line"><span style="color:#FF79C6">class</span><span style="color:#8BE9FD"> ContainerSize</span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#FF79C6">  var</span><span style="color:#F8F8F2"> width: CGFloat</span><span style="color:#FF79C6">?</span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#FF79C6">    didSet</span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#8BE9FD">      sendSize</span><span style="color:#F8F8F2">()</span></span>
<span class="line"><span style="color:#F8F8F2">    }</span></span>
<span class="line"><span style="color:#F8F8F2">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FF79C6">  var</span><span style="color:#F8F8F2"> height: CGFloat</span><span style="color:#FF79C6">?</span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#FF79C6">    didSet</span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#8BE9FD">      sendSize</span><span style="color:#F8F8F2">()</span></span>
<span class="line"><span style="color:#F8F8F2">    }</span></span>
<span class="line"><span style="color:#F8F8F2">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FF79C6">  func</span><span style="color:#50FA7B"> sendSize</span><span style="color:#F8F8F2">() {</span></span>
<span class="line"><span style="color:#FF79C6">    if</span><span style="color:#FF79C6"> let</span><span style="color:#F8F8F2"> width </span><span style="color:#FF79C6">=</span><span style="color:#F8F8F2"> width, </span><span style="color:#FF79C6">let</span><span style="color:#F8F8F2"> height </span><span style="color:#FF79C6">=</span><span style="color:#F8F8F2"> height {</span></span>
<span class="line"><span style="color:#F8F8F2">      publisher.</span><span style="color:#8BE9FD">send</span><span style="color:#F8F8F2">(.</span><span style="color:#FF79C6">init</span><span style="color:#F8F8F2">(</span><span style="color:#8BE9FD">width</span><span style="color:#F8F8F2">: width, </span><span style="color:#8BE9FD">height</span><span style="color:#F8F8F2">: height))</span></span>
<span class="line"><span style="color:#F8F8F2">    }</span></span>
<span class="line"><span style="color:#F8F8F2">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FF79C6">  var</span><span style="color:#F8F8F2"> publisher </span><span style="color:#FF79C6">=</span><span style="color:#F8F8F2"> PassthroughSubject</span><span style="color:#FF79C6">&lt;</span><span style="color:#F8F8F2">CGSize, </span><span style="color:#BD93F9">Never</span><span style="color:#FF79C6">&gt;</span><span style="color:#F8F8F2">()</span></span>
<span class="line"><span style="color:#F8F8F2">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6272A4">// Retrieve and pass the available dimensions of the nearest container</span></span>
<span class="line"><span style="color:#FF79C6">struct</span><span style="color:#8BE9FD;font-style:italic"> ContainerSizeGetter</span><span style="color:#F8F8F2">: ViewModifier {</span></span>
<span class="line"><span style="color:#FF79C6">  @Binding</span><span style="color:#FF79C6"> var</span><span style="color:#F8F8F2"> size: CGSize</span><span style="color:#FF79C6">?</span></span>
<span class="line"><span style="color:#FF79C6">  @State</span><span style="color:#FF79C6"> var</span><span style="color:#F8F8F2"> containerSize </span><span style="color:#FF79C6">=</span><span style="color:#8BE9FD"> ContainerSize</span><span style="color:#F8F8F2">()</span></span>
<span class="line"><span style="color:#FF79C6">  func</span><span style="color:#50FA7B"> body</span><span style="color:#F8F8F2">(</span><span style="color:#50FA7B;font-style:italic">content</span><span style="color:#F8F8F2">: Content) </span><span style="color:#FF79C6">-&gt;</span><span style="color:#FF79C6"> some</span><span style="color:#F8F8F2"> View {</span></span>
<span class="line"><span style="color:#F8F8F2">    content</span></span>
<span class="line"><span style="color:#F8F8F2">      .</span><span style="color:#8BE9FD">overlay</span><span style="color:#F8F8F2">(</span></span>
<span class="line"><span style="color:#F8F8F2">        Color.yellow</span></span>
<span class="line"><span style="color:#F8F8F2">          .</span><span style="color:#8BE9FD">containerRelativeFrame</span><span style="color:#F8F8F2">([.vertical, .horizontal]) { length, axes </span><span style="color:#FF79C6">in</span></span>
<span class="line"><span style="color:#FF79C6">            if</span><span style="color:#F8F8F2"> axes </span><span style="color:#FF79C6">==</span><span style="color:#F8F8F2"> .vertical {</span></span>
<span class="line"><span style="color:#F8F8F2">              containerSize.height </span><span style="color:#FF79C6">=</span><span style="color:#F8F8F2"> length</span></span>
<span class="line"><span style="color:#F8F8F2">            } </span><span style="color:#FF79C6">else</span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#F8F8F2">              containerSize.width </span><span style="color:#FF79C6">=</span><span style="color:#F8F8F2"> length</span></span>
<span class="line"><span style="color:#F8F8F2">            }</span></span>
<span class="line"><span style="color:#FF79C6">            return</span><span style="color:#BD93F9"> 0</span></span>
<span class="line"><span style="color:#F8F8F2">          }</span></span>
<span class="line"><span style="color:#F8F8F2">      )</span></span>
<span class="line"><span style="color:#F8F8F2">      .</span><span style="color:#8BE9FD">onReceive</span><span style="color:#F8F8F2">(containerSize.publisher) { size </span><span style="color:#FF79C6">in</span></span>
<span class="line"><span style="color:#BD93F9;font-style:italic">        self</span><span style="color:#F8F8F2">.</span><span style="color:#BD93F9">size</span><span style="color:#FF79C6"> =</span><span style="color:#F8F8F2"> size</span></span>
<span class="line"><span style="color:#F8F8F2">      }</span></span>
<span class="line"><span style="color:#F8F8F2">  }</span></span>
<span class="line"><span style="color:#F8F8F2">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FF79C6">extension</span><span style="color:#8BE9FD;font-style:italic"> View</span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#FF79C6">  func</span><span style="color:#50FA7B"> containerSizeGetter</span><span style="color:#F8F8F2">(</span><span style="color:#50FA7B;font-style:italic">size</span><span style="color:#F8F8F2">: Binding&lt;CGSize</span><span style="color:#FF79C6">?</span><span style="color:#F8F8F2">&gt;) </span><span style="color:#FF79C6">-&gt;</span><span style="color:#FF79C6"> some</span><span style="color:#F8F8F2"> View {</span></span>
<span class="line"><span style="color:#8BE9FD">    modifier</span><span style="color:#F8F8F2">(</span><span style="color:#8BE9FD">ContainerSizeGetter</span><span style="color:#F8F8F2">(</span><span style="color:#8BE9FD">size</span><span style="color:#F8F8F2">: size))</span></span>
<span class="line"><span style="color:#F8F8F2">  }</span></span>
<span class="line"><span style="color:#F8F8F2">}</span></span></code></pre></div>
<p>This <code>ViewModifier</code> utilizes <code>containerRelativeFrame</code> to measure and update the dimensions of the container, and uses a <code>PassthroughSubject</code> to notify the externally bound <code>size</code> property of any dimension changes. The advantage of this method is that it does not disrupt the original layout of the view, serving merely as a tool for dimension monitoring and transmission.</p>
<video src="https://cdn.fatbobman.com/get-container-size-by-containerRelativeFrame-720.mp4" autoplay="true" loop="true" muted="true" playsInline="true" loading="lazy" controls="true"></video>
<h2 id="building-a-replica-version-of-containerrelativeframe">Building a Replica Version of containerRelativeFrame</h2>
<p>In my blog articles related to layout, I often attempt to build replica versions of layout containers. This practice not only helps deepen the understanding of the layout mechanisms of containers but also allows for testing hypotheses about certain layout logics. Additionally, where feasible, these replicas can be applied to earlier versions of SwiftUI (such as iOS 13+).</p>
<blockquote>
<p>To simplify the effort of replication, the current version supports only iOS. The complete code can be viewed <a href="https://gist.github.com/fatbobman/dca984afab837a72c2da30a427f312ef?&#38;utm_source=Fatbobman%20Blog&#38;utm_medium=web&#38;utm_campaign=Fatbobman%20Blog" rel="noreferrer noopener">here</a>.</p>
</blockquote>
<h3 id="identifying-the-nearest-container">Identifying the Nearest Container</h3>
<p>The official <code>containerRelativeFrame</code> may obtain the dimensions of the nearest container in one of two ways:</p>
<ul>
<li>By letting containers send their dimensions downward through the environmental values system.</li>
<li>By allowing <code>containerRelativeFrame</code> to autonomously search upwards for the nearest container and obtain its dimensions.</li>
</ul>
<p>Considering that the first method can increase system load (as containers would continuously send size changes even when <code>containerRelativeFrame</code> is not used) and that it is challenging to design precise dimension-passing logic for different containers, our replica version opts for the second method—autonomously searching upwards for the nearest container.</p>
<div>
        <div class="flex justify-between items-center h-8 font-medium bg-[#96744d] dark:bg-[#002565] text-gray-200 text-xs rounded-tl-md rounded-tr-md">
          <span class="px-4 py-1">Swift</span>
          <button class="copy-button py-1 px-4" onclick="copyCode(this, event)">
          <div class="copy-text">
            <span class="flex items-center justify-center sm:hover:text-white sm:hover:font-bold">
              <svg class="w-3 h-3 mr-1" fill="currentColor" stroke="currentColor">
                <use xlink:href="#icon-clipboard"></use>
              </svg>
            Copy code
            </span>
          </div>
          <div class="copied-text hidden">
            <span class="flex items-center justify-center">
              <svg class="w-3 h-3 mr-1" fill="currentColor" stroke="currentColor">
                  <use xlink:href="#icon-check"></use>
             </svg>
              Copied!
            </span>
          </div>
        </button>
        </div>
      <pre class="astro-code dracula" style="background-color:#282A36;color:#F8F8F2;overflow-x:auto" tabindex="0"><code><span class="line"><span style="color:#FF79C6">extension</span><span style="color:#8BE9FD;font-style:italic"> UIView</span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#FF79C6">  fileprivate</span><span style="color:#FF79C6"> func</span><span style="color:#50FA7B"> findRelevantContainer</span><span style="color:#F8F8F2">() </span><span style="color:#FF79C6">-&gt;</span><span style="color:#F8F8F2"> ContainerType</span><span style="color:#FF79C6">?</span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#FF79C6">    var</span><span style="color:#F8F8F2"> responder: UIResponder</span><span style="color:#FF79C6">?</span><span style="color:#FF79C6"> =</span><span style="color:#BD93F9;font-style:italic"> self</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FF79C6">    while</span><span style="color:#FF79C6"> let</span><span style="color:#F8F8F2"> currentResponder </span><span style="color:#FF79C6">=</span><span style="color:#F8F8F2"> responder {</span></span>
<span class="line"><span style="color:#FF79C6">      if</span><span style="color:#FF79C6"> let</span><span style="color:#F8F8F2"> viewController </span><span style="color:#FF79C6">=</span><span style="color:#F8F8F2"> currentResponder </span><span style="color:#FF79C6">as?</span><span style="color:#F8F8F2"> UIViewController {</span></span>
<span class="line"><span style="color:#FF79C6">        if</span><span style="color:#FF79C6"> let</span><span style="color:#F8F8F2"> tabview </span><span style="color:#FF79C6">=</span><span style="color:#F8F8F2"> viewController </span><span style="color:#FF79C6">as?</span><span style="color:#F8F8F2"> UITabBarController {</span></span>
<span class="line"><span style="color:#FF79C6">          return</span><span style="color:#F8F8F2"> .</span><span style="color:#8BE9FD">tabview</span><span style="color:#F8F8F2">(tabview) </span><span style="color:#6272A4">// UITabBarController</span></span>
<span class="line"><span style="color:#F8F8F2">        }</span></span>
<span class="line"><span style="color:#FF79C6">        if</span><span style="color:#FF79C6"> let</span><span style="color:#F8F8F2"> navigator </span><span style="color:#FF79C6">=</span><span style="color:#F8F8F2"> viewController </span><span style="color:#FF79C6">as?</span><span style="color:#F8F8F2"> UINavigationController {</span></span>
<span class="line"><span style="color:#FF79C6">          return</span><span style="color:#F8F8F2"> .</span><span style="color:#8BE9FD">navigator</span><span style="color:#F8F8F2">(navigator) </span><span style="color:#6272A4">// UINavigationController</span></span>
<span class="line"><span style="color:#F8F8F2">        }</span></span>
<span class="line"><span style="color:#F8F8F2">      }</span></span>
<span class="line"><span style="color:#FF79C6">      if</span><span style="color:#FF79C6"> let</span><span style="color:#F8F8F2"> scrollView </span><span style="color:#FF79C6">=</span><span style="color:#F8F8F2"> currentResponder </span><span style="color:#FF79C6">as?</span><span style="color:#F8F8F2"> UIScrollView {</span></span>
<span class="line"><span style="color:#FF79C6">        return</span><span style="color:#F8F8F2"> .</span><span style="color:#8BE9FD">scrollView</span><span style="color:#F8F8F2">(scrollView) </span><span style="color:#6272A4">// UIScrollView</span></span>
<span class="line"><span style="color:#F8F8F2">      }</span></span>
<span class="line"><span style="color:#F8F8F2">      responder </span><span style="color:#FF79C6">=</span><span style="color:#F8F8F2"> currentResponder.next</span></span>
<span class="line"><span style="color:#F8F8F2">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FF79C6">    if</span><span style="color:#FF79C6"> let</span><span style="color:#F8F8F2"> currentWindow {</span></span>
<span class="line"><span style="color:#FF79C6">      return</span><span style="color:#F8F8F2"> .</span><span style="color:#8BE9FD">window</span><span style="color:#F8F8F2">(currentWindow) </span><span style="color:#6272A4">// UIWindow</span></span>
<span class="line"><span style="color:#F8F8F2">    } </span><span style="color:#FF79C6">else</span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#FF79C6">      return</span><span style="color:#BD93F9"> nil</span></span>
<span class="line"><span style="color:#F8F8F2">    }</span></span>
<span class="line"><span style="color:#F8F8F2">  }</span></span>
<span class="line"><span style="color:#F8F8F2">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FF79C6">private</span><span style="color:#FF79C6"> enum</span><span style="color:#8BE9FD;font-style:italic"> ContainerType</span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#FF79C6">  case</span><span style="color:#8BE9FD"> scrollView</span><span style="color:#F8F8F2">(UIScrollView)</span></span>
<span class="line"><span style="color:#FF79C6">  case</span><span style="color:#8BE9FD"> navigator</span><span style="color:#F8F8F2">(UINavigationController)</span></span>
<span class="line"><span style="color:#FF79C6">  case</span><span style="color:#8BE9FD"> tabview</span><span style="color:#F8F8F2">(UITabBarController)</span></span>
<span class="line"><span style="color:#FF79C6">  case</span><span style="color:#8BE9FD"> window</span><span style="color:#F8F8F2">(UIWindow)</span></span>
<span class="line"><span style="color:#F8F8F2">}</span></span></code></pre></div>
<p>By adding an extension method <code>findRelevantContainer</code> to <code>UIView</code>, we can identify the specific container that is closest to the current view (<code>UIView</code>).</p>
<h3 id="calculating-the-dimensions-provided-by-the-container">Calculating the Dimensions Provided by the Container</h3>
<p>After identifying the nearest container, it is necessary to adjust for the safe area insets, <code>TabBar</code> height, <code>navigationBarHeight</code>, and other dimensions based on the type of container. This is done by monitoring changes in the <code>frame</code> property to dynamically respond to changes in dimensions:</p>
<div>
        <div class="flex justify-between items-center h-8 font-medium bg-[#96744d] dark:bg-[#002565] text-gray-200 text-xs rounded-tl-md rounded-tr-md">
          <span class="px-4 py-1">Swift</span>
          <button class="copy-button py-1 px-4" onclick="copyCode(this, event)">
          <div class="copy-text">
            <span class="flex items-center justify-center sm:hover:text-white sm:hover:font-bold">
              <svg class="w-3 h-3 mr-1" fill="currentColor" stroke="currentColor">
                <use xlink:href="#icon-clipboard"></use>
              </svg>
            Copy code
            </span>
          </div>
          <div class="copied-text hidden">
            <span class="flex items-center justify-center">
              <svg class="w-3 h-3 mr-1" fill="currentColor" stroke="currentColor">
                  <use xlink:href="#icon-check"></use>
             </svg>
              Copied!
            </span>
          </div>
        </button>
        </div>
      <pre class="astro-code dracula" style="background-color:#282A36;color:#F8F8F2;overflow-x:auto" tabindex="0"><code><span class="line"><span style="color:#FF79C6">@MainActor</span></span>
<span class="line"><span style="color:#FF79C6">class</span><span style="color:#8BE9FD"> Coordinator</span><span style="color:#F8F8F2">: NSObject, ObservableObject {</span></span>
<span class="line"><span style="color:#FF79C6">  var</span><span style="color:#F8F8F2"> size: Binding&lt;CGSize</span><span style="color:#FF79C6">?</span><span style="color:#F8F8F2">&gt;</span></span>
<span class="line"><span style="color:#FF79C6">  var</span><span style="color:#F8F8F2"> cancellable: AnyCancellable</span><span style="color:#FF79C6">?</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FF79C6">  init</span><span style="color:#F8F8F2">(</span><span style="color:#50FA7B;font-style:italic">size</span><span style="color:#F8F8F2">: Binding&lt;CGSize</span><span style="color:#FF79C6">?</span><span style="color:#F8F8F2">&gt;) {</span></span>
<span class="line"><span style="color:#BD93F9;font-style:italic">    self</span><span style="color:#F8F8F2">.</span><span style="color:#BD93F9">size</span><span style="color:#FF79C6"> =</span><span style="color:#F8F8F2"> size</span></span>
<span class="line"><span style="color:#F8F8F2">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FF79C6">  func</span><span style="color:#50FA7B"> trackContainerSizeChanges</span><span style="color:#F8F8F2">(</span><span style="color:#50FA7B">ofType</span><span style="color:#FFB86C;font-style:italic"> type</span><span style="color:#F8F8F2">: ContainerType) {</span></span>
<span class="line"><span style="color:#FF79C6">    switch</span><span style="color:#F8F8F2"> type {</span></span>
<span class="line"><span style="color:#FF79C6">    case</span><span style="color:#FF79C6"> let</span><span style="color:#F8F8F2"> .</span><span style="color:#8BE9FD">window</span><span style="color:#F8F8F2">(window)</span><span style="color:#FF79C6">:</span></span>
<span class="line"><span style="color:#F8F8F2">      cancellable </span><span style="color:#FF79C6">=</span><span style="color:#F8F8F2"> window.</span><span style="color:#8BE9FD">publisher</span><span style="color:#F8F8F2">(</span><span style="color:#8BE9FD">for</span><span style="color:#F8F8F2">: \.frame)</span></span>
<span class="line"><span style="color:#F8F8F2">        .</span><span style="color:#8BE9FD">receive</span><span style="color:#F8F8F2">(</span><span style="color:#8BE9FD">on</span><span style="color:#F8F8F2">: RunLoop.main)</span></span>
<span class="line"><span style="color:#F8F8F2">        .</span><span style="color:#8BE9FD">sink</span><span style="color:#F8F8F2">(</span><span style="color:#8BE9FD">receiveValue</span><span style="color:#F8F8F2">: { [</span><span style="color:#FF79C6">weak</span><span style="color:#BD93F9;font-style:italic"> self</span><span style="color:#F8F8F2">] </span><span style="color:#BD93F9">_</span><span style="color:#FF79C6"> in</span></span>
<span class="line"><span style="color:#FF79C6">          guard</span><span style="color:#FF79C6"> let</span><span style="color:#BD93F9;font-style:italic"> self</span><span style="color:#FF79C6"> =</span><span style="color:#BD93F9;font-style:italic"> self</span><span style="color:#FF79C6"> else</span><span style="color:#F8F8F2"> { </span><span style="color:#FF79C6">return</span><span style="color:#F8F8F2"> }</span></span>
<span class="line"><span style="color:#FF79C6">          let</span><span style="color:#F8F8F2"> size </span><span style="color:#FF79C6">=</span><span style="color:#BD93F9;font-style:italic"> self</span><span style="color:#F8F8F2">.</span><span style="color:#8BE9FD">calculateContainerSize</span><span style="color:#F8F8F2">(</span><span style="color:#8BE9FD">ofType</span><span style="color:#F8F8F2">: type)</span></span>
<span class="line"><span style="color:#BD93F9;font-style:italic">          self</span><span style="color:#F8F8F2">.</span><span style="color:#BD93F9">size</span><span style="color:#F8F8F2">.wrappedValue </span><span style="color:#FF79C6">=</span><span style="color:#F8F8F2"> size</span></span>
<span class="line"><span style="color:#F8F8F2">        })</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6272A4">    // ...</span></span>
<span class="line"><span style="color:#F8F8F2">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FF79C6">  func</span><span style="color:#50FA7B"> calculateContainerSize</span><span style="color:#F8F8F2">(</span><span style="color:#50FA7B">ofType</span><span style="color:#FFB86C;font-style:italic"> type</span><span style="color:#F8F8F2">: ContainerType) </span><span style="color:#FF79C6">-&gt;</span><span style="color:#F8F8F2"> CGSize {</span></span>
<span class="line"><span style="color:#FF79C6">    switch</span><span style="color:#F8F8F2"> type {</span></span>
<span class="line"><span style="color:#FF79C6">    case</span><span style="color:#FF79C6"> let</span><span style="color:#F8F8F2"> .</span><span style="color:#8BE9FD">window</span><span style="color:#F8F8F2">(window)</span><span style="color:#FF79C6">:</span></span>
<span class="line"><span style="color:#FF79C6">      let</span><span style="color:#F8F8F2"> windowSize </span><span style="color:#FF79C6">=</span><span style="color:#F8F8F2"> window.frame.</span><span style="color:#BD93F9">size</span></span>
<span class="line"><span style="color:#FF79C6">      let</span><span style="color:#F8F8F2"> safeAreaInsets </span><span style="color:#FF79C6">=</span><span style="color:#F8F8F2"> window.safeAreaInsets</span></span>
<span class="line"><span style="color:#FF79C6">      let</span><span style="color:#F8F8F2"> width </span><span style="color:#FF79C6">=</span><span style="color:#F8F8F2"> windowSize.width </span><span style="color:#FF79C6">-</span><span style="color:#F8F8F2"> safeAreaInsets.left </span><span style="color:#FF79C6">-</span><span style="color:#F8F8F2"> safeAreaInsets.right</span></span>
<span class="line"><span style="color:#FF79C6">      let</span><span style="color:#F8F8F2"> height </span><span style="color:#FF79C6">=</span><span style="color:#F8F8F2"> windowSize.height </span><span style="color:#FF79C6">-</span><span style="color:#F8F8F2"> safeAreaInsets.top </span><span style="color:#FF79C6">-</span><span style="color:#F8F8F2"> safeAreaInsets.bottom</span></span>
<span class="line"><span style="color:#FF79C6">      return</span><span style="color:#8BE9FD"> CGSize</span><span style="color:#F8F8F2">(</span><span style="color:#8BE9FD">width</span><span style="color:#F8F8F2">: width, </span><span style="color:#8BE9FD">height</span><span style="color:#F8F8F2">: height)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6272A4">    // ...</span></span>
<span class="line"><span style="color:#F8F8F2">  }</span></span>
<span class="line"><span style="color:#F8F8F2">}</span></span></code></pre></div>
<h3 id="building-viewmodifier-and-view-extension">Building ViewModifier and View Extension</h3>
<p>We encapsulate the above logic into a SwiftUI view using <code>UIViewRepresentable</code> and apply it to the view, ultimately using the <code>frame</code> modifier to apply the transformed dimensions to the view:</p>
<div>
        <div class="flex justify-between items-center h-8 font-medium bg-[#96744d] dark:bg-[#002565] text-gray-200 text-xs rounded-tl-md rounded-tr-md">
          <span class="px-4 py-1">Swift</span>
          <button class="copy-button py-1 px-4" onclick="copyCode(this, event)">
          <div class="copy-text">
            <span class="flex items-center justify-center sm:hover:text-white sm:hover:font-bold">
              <svg class="w-3 h-3 mr-1" fill="currentColor" stroke="currentColor">
                <use xlink:href="#icon-clipboard"></use>
              </svg>
            Copy code
            </span>
          </div>
          <div class="copied-text hidden">
            <span class="flex items-center justify-center">
              <svg class="w-3 h-3 mr-1" fill="currentColor" stroke="currentColor">
                  <use xlink:href="#icon-check"></use>
             </svg>
              Copied!
            </span>
          </div>
        </button>
        </div>
      <pre class="astro-code dracula" style="background-color:#282A36;color:#F8F8F2;overflow-x:auto" tabindex="0"><code><span class="line"><span style="color:#FF79C6">private</span><span style="color:#FF79C6"> struct</span><span style="color:#8BE9FD;font-style:italic"> ContainerDetectorModifier</span><span style="color:#F8F8F2">: ViewModifier {</span></span>
<span class="line"><span style="color:#FF79C6">  let</span><span style="color:#F8F8F2"> type: DetectorType</span></span>
<span class="line"><span style="color:#FF79C6">  @State</span><span style="color:#FF79C6"> private</span><span style="color:#FF79C6"> var</span><span style="color:#F8F8F2"> containerSize: CGSize</span><span style="color:#FF79C6">?</span></span>
<span class="line"><span style="color:#FF79C6">  func</span><span style="color:#50FA7B"> body</span><span style="color:#F8F8F2">(</span><span style="color:#50FA7B;font-style:italic">content</span><span style="color:#F8F8F2">: Content) </span><span style="color:#FF79C6">-&gt;</span><span style="color:#FF79C6"> some</span><span style="color:#F8F8F2"> View {</span></span>
<span class="line"><span style="color:#F8F8F2">    content</span></span>
<span class="line"><span style="color:#F8F8F2">      .</span><span style="color:#8BE9FD">background</span><span style="color:#F8F8F2">(</span></span>
<span class="line"><span style="color:#8BE9FD">        ContainerDetector</span><span style="color:#F8F8F2">(</span><span style="color:#8BE9FD">size</span><span style="color:#F8F8F2">: $containerSize)</span></span>
<span class="line"><span style="color:#F8F8F2">      )</span></span>
<span class="line"><span style="color:#F8F8F2">      .</span><span style="color:#8BE9FD">frame</span><span style="color:#F8F8F2">(</span><span style="color:#8BE9FD">width</span><span style="color:#F8F8F2">: result.width, </span><span style="color:#8BE9FD">height</span><span style="color:#F8F8F2">: result.height, </span><span style="color:#8BE9FD">alignment</span><span style="color:#F8F8F2">: result.</span><span style="color:#BD93F9">alignment</span><span style="color:#F8F8F2">)</span></span>
<span class="line"><span style="color:#F8F8F2">  }</span></span>
<span class="line"><span style="color:#F8F8F2">  </span></span>
<span class="line"><span style="color:#FF79C6">  ...</span></span>
<span class="line"><span style="color:#F8F8F2">}</span></span></code></pre></div>
<p>Through the above operations, we obtain a replica version that matches the functionality of the official <code>containerRelativeFrame</code> and validate hypotheses about details not mentioned in the official documentation.</p>
<video src="https://cdn.fatbobman.com/myContainerRelativeFrame-demo.mp4" autoplay="true" loop="true" muted="true" playsInline="true" loading="lazy" controls="true"></video>
<blockquote>
<p>The results show that <code>containerRelativeFrame</code> can indeed be viewed as a special version of the <code>frame</code> modifier that allows for custom transformation rules. Therefore, in this article, I did not specifically discuss the use of the <code>alignment</code> parameter, as it aligns completely with the logic of the <code>frame</code>.</p>
</blockquote>
<h3 id="considerations">Considerations:</h3>
<ul>
<li>On iOS versions below 17, if the replica version modifies the dimensions on two axes simultaneously, <code>ScrollView</code> might behave incorrectly.</li>
<li>Compared to the official version, the replica version provides more accurate dimension retrieval for <code>List</code>.</li>
<li>Currently, the replica version is only capable of observing frame changes in versions below iOS 17. In iOS 17 and above, the replica version cannot dynamically respond to changes in container dimensions.</li>
</ul>
<div class="dynamic-ad-container pt-4"></div>
<h2 id="conclusion">Conclusion</h2>
<p>Through the in-depth discussions and examples presented in this article, you should now have a comprehensive understanding of the <code>containerRelativeFrame</code> modifier in SwiftUI, including its definition, usage, and considerations. We have not only mastered how to use this powerful view modifier to optimize and innovate our layout strategies, but also learned how to expand its application to older versions of SwiftUI by replicating existing layout tools, thereby enhancing our understanding of SwiftUI’s layout mechanisms. I hope this content inspires your interest in SwiftUI layout and proves useful in your development practices.</p> </div> </article> <script src="/js/modalsubscribecontroller.js" defer></script> <!-- Modal toggle --><button data-modal-target="default-modal" data-modal-toggle="default-modal" class="hidden text-white bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800" type="button">
Toggle modal
</button> <!-- Main modal --> <div id="modal-backdrop" class="hidden fixed inset-0 bg-black bg-opacity-50 z-40"> <div id="default-modal" tabindex="-1" aria-hidden="true" class="hidden w-full h-full justify-center items-center"> <div class="relative p-4 w-full max-w-2xl"> <!-- Modal content --> <div class="relative bg-white rounded-lg shadow-2xl dark:bg-gray-800 border-gray-200 border dark:border-gray-600"> <!-- Modal header --> <div class="flex items-center justify-between px-4 md:px-5 pt-4 pb-0 rounded-t dark:border-gray-600"> <button type="button" class="text-gray-400 bg-transparent hover:bg-gray-200 hover:text-gray-900 rounded-lg text-sm w-8 h-8 ms-auto inline-flex justify-center items-center dark:hover:bg-gray-600 dark:hover:text-white" data-modal-hide="default-modal"> <svg class="w-3 h-3" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 14 14"> <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m1 1 6 6m0 0 6 6M7 7l6-6M7 7l-6 6"></path> </svg> <span class="sr-only">Close modal</span> </button> </div> <!-- Modal body --> <div class="px-4 md:px-5 pb-4"> <div class="w-full mx-auto text-center px-6 pb-6"> <div class="text-lg font-semibold text-gray-900 dark:text-blue-100 pt-4 pb-8">Every Monday, sharing handpicked Swift and SwiftUI development highlights with you.</div> <div id="custom-substack-embed1"></div> <!-- <div class="text-gray-700 dark:text-blue-200 text-xs font-medium pt-4">{bottomTip}</div> --> <script>(function(){const subscribeText = "Join Now";
const placeholder = "Subscribe with your email";

    window.CustomSubstackWidget = {
      substackUrl: 'weekly.fatbobman.com',
      placeholder: placeholder,
      buttonText: subscribeText,
      theme: 'custom',
      colors: {
        primary: '#F50000',
        input: '#000000',
        email: '#777777',
        text: '#000000',
      },
    };

    // 创建一个新的 MutationObserver 实例
    const observer = new MutationObserver((mutationsList, observer) => {
      // 遍历所有的 mutations
      for (let mutation of mutationsList) {
        // 如果这个 mutation 是一个子节点的添加或删除
        if (mutation.type === 'childList') {
          // 查找订阅框
          const widget = document.querySelector('.custom-substack-widget1');
          if (widget) {
            // 查找 input 元素
            const input = widget.querySelector('input');
            const button = widget.querySelector('button');
            // 根据当前的颜色方案修改订阅框的样式
            if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) {
              // 暗黑模式
              widget.style.border = 'var(--subscribe-widget-border)';
              widget.style.padding = '0.3rem';
              widget.style.borderRadius = '0.7rem 0.7rem 0.7rem 0.7rem';
              widget.style.backgroundColor = 'var(--subscribe-input-background)';
              input.style.border = '0px solid #000';
              input.style.backgroundColor = 'var(--subscribe-input-background)';
              input.style.padding = '0.5rem';
              // input.style.border = '1px solid #E2E8F0';
              input.style.outline = 'none';
              button.style.backgroundColor = 'var(--subscribe-button-background)';
              button.style.color = 'var(--subscribe-button-text)';
              button.style.fontWeight = 'bold';
              button.style.padding = '0.5rem 1rem';
              button.style.borderRadius = '0.5rem 0.5rem 0.5rem 0.5rem';
              button.style.maxWidth = '100px';
            } else {
              // 正常模式
              widget.style.border = 'var(--subscribe-widget-border)';
              widget.style.padding = '0.3rem';
              widget.style.borderRadius = '0.7rem 0.7rem 0.7rem 0.7rem';
              widget.style.backgroundColor = 'var(--subscribe-input-background)';
              input.style.border = '0px solid #000';
              input.style.backgroundColor = 'var(--subscribe-input-background)';
              input.style.padding = '0.5rem';
              // input.style.border = '1px solid #E2E8F0';
              input.style.outline = 'none';
              button.style.backgroundColor = 'var(--subscribe-button-background)';
              button.style.color = 'var(--subscribe-button-text)';
              button.style.fontWeight = 'bold';
              button.style.padding = '0.5rem 1rem';
              button.style.borderRadius = '0.5rem 0.5rem 0.5rem 0.5rem';
              button.style.maxWidth = '100px';
            }

            if (window.matchMedia('(max-width: 640px)').matches) {
              // 屏幕尺寸小于 640px
              widget.style.maxWidth = '325px';
            } else {
              // 屏幕尺寸大于或等于 640px
              widget.style.maxWidth = '600px';
            }
            // 停止观察
            observer.disconnect();
          }
        }
      }
    });

    // 开始观察 #custom-substack-embed 元素的子节点的变化
    observer.observe(document.getElementById('custom-substack-embed1'), { childList: true });
  })();</script> <script src="/js/subscriber.js" async></script> </div> <div class="flex justify-center pb-6"> <button data-modal-hide="default-modal" type="button" class="text-gray-600 dark:text-gray-400 bg-transparent hover:text-gray-800 dark:hover:text-gray-200 font-medium rounded-lg text-sm px-8 py-2.5 text-center transition-colors">Continue Reading</button> </div> </div> </div> </div> </div> </div> <script type="application/ld+json">{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "author": {
    "@type": "Person",
    "name": "Fatbobman",
    "url": "https://twitter.com/fatbobman"
  },
  "dateModified": "2024-05-08T00:12:00.000Z",
  "datePublished": "2024-05-08T00:12:00.000Z",
  "description": "Explore SwiftUI's containerRelativeFrame modifier: definition, layout rules, use cases, and a backward-compatible replica. Master flexible layouts now!",
  "headline": "Mastering the containerRelativeFrame Modifier in SwiftUI",
  "image": {
    "@type": "ImageObject",
    "url": [
      {
        "url": "https://cdn.fatbobman.com/card/mastering-the-containerrelativeframe-modifier-in-swiftui-en.webp"
      }
    ]
  },
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://fatbobman.com/en/posts/mastering-the-containerrelativeframe-modifier-in-swiftui/"
  },
  "url": "https://fatbobman.com/en/posts/mastering-the-containerrelativeframe-modifier-in-swiftui/",
  "publisher": {
    "@type": "Organization",
    "name": "Fatbobman's Blog",
    "logo": {
      "@type": "ImageObject",
      "url": "https://fatbobman.com/images/blog-card.png"
    }
  }
}</script> <div class="w-full mx-auto text-center pb-0 sm:pb-6 pt-8"> <div id="custom-substack-embed"></div> <div class="text-xs font-medium text-heading p-4">Get weekly handpicked updates on Swift and SwiftUI!</div> <script>(function(){const subscribeText = "Join Now";
const placeholder = "Subscribe with your email";

    window.CustomSubstackWidget = {
      substackUrl: 'weekly.fatbobman.com',
      placeholder: placeholder,
      buttonText: subscribeText,
      theme: 'custom',
      colors: {
        primary: '#F50000',
        input: '#000000',
        email: '#777777',
        text: '#000000',
      },
    };
  
    const observer = new MutationObserver((mutationsList) => {
      const widget = document.querySelector('.custom-substack-widget');
      if (widget) {
        const input = widget.querySelector('input');
        const button = widget.querySelector('button');
  
        // 设置样式（合并暗黑模式与默认模式逻辑）
        const darkMode = window.matchMedia('(prefers-color-scheme: dark)').matches;
        widget.style.padding = '0.5rem';
        widget.style.borderRadius = '1.2rem';
        widget.style.border = '0.1px solid var(--aw-color-text-muted)';
        input.style.border = '0px solid #000';
        input.style.backgroundColor = 'var(--aw-background-color)';
        button.style.backgroundColor = 'var(--subscribe-button-background)';
        button.style.color = 'var(--subscribe-button-text)';
        button.style.borderRadius = '0.8rem';
        button.style.maxWidth = '100px';
        button.style.fontWeight = 'bold';
  
        // 响应式调整
        widget.style.maxWidth = window.matchMedia('(max-width: 640px)').matches
          ? '325px'
          : '400px';
  
        observer.disconnect(); // 停止观察
      }
    });
  
    // 开始观察
    observer.observe(document.getElementById('custom-substack-embed'), { childList: true });
  })();</script> <script src="https://substackapi.com/widget.js" defer></script> </div> <div class="pt-6 pb-6  dark:border-gray-700"> <!-- <p class="flex justify-center align-center text-sm font-medium text-heading">
    { lang === Lang.ZH && <SupportMeTextZH /> }
    { lang === Lang.EN && <SupportMeTextEN /> }
  </p> --> <div class="flex flex-col sm:flex-row justify-center items-center mx-auto sm:space-x-8 align-center pt-2"> <button type="button" class="text-gray-900 bg-yellow-200 hover:bg-yellow-300 border border-gray-200 focus:ring-4 focus:outline-none focus:ring-gray-100 font-medium rounded-lg text-sm px-8 py-4 text-center inline-flex items-center dark:focus:ring-gray-600 dark:border-gray-700 me-2 mb-2" onclick="window.open('https://www.buymeacoffee.com/fatbobman')"> <img src="/images/buymeacoffee.svg" alt="Buy me a coffee" class="w-5 h-5 me-2 -ms-1" decoding="async" loading="lazy"> <span class="text-black font-medium">Buy me a coffee</span> </button> <div class="pt-4 sm:pt-0">  <button type="button" class="bg-[#3270e1] hover:bg-blue-700 border border-gray-200 focus:ring-4 focus:outline-none focus:ring-gray-100 font-medium rounded-lg text-sm px-8 py-4 text-center inline-flex items-center dark:focus:ring-gray-600 dark:border-gray-700  me-2 mb-2" onclick="window.open('https://www.paypal.com/paypalme/fatbobman')"> <!-- <svg class="w-4 h-4 me-2 -ms-1" width="337" height="63">
    <use href="/images/paypal.svg#main"></use>
  </svg> --> <img src="/images/paypal.svg" alt="" width="24" height="24" loading="lazy" decoding="async" class="w-4 h-4 me-2 -ms-1" aria-hidden="true"> <span class="text-white font-medium hover:text-yellow-100">Donate via Paypal</span> </button> </div> </div> </div> <!-- <WeeklySubscribe1 lang={lang} top={0} bottom={4}/> --> <div id="copy-alert" class="hidden fixed bottom-28 right-5"> <div id="alert-1" class="flex items-center p-4 mb-4 text-blue-800 rounded-lg bg-blue-50/90 dark:bg-gray-800/90 dark:text-blue-400" role="alert"> <div class="text-sm font-medium">Link copied</div> </div> </div> <style>
  .copy-icon {
    position: absolute;
    left: -30px; /* 根据您的布局调整位置 */
    top: 50%; /* 将图标定位到标题的中间高度 */
    transform: translateY(-50%); /* 垂直居中对齐图标 */
    cursor: pointer;
    transition: opacity 0.6s ease;
    pointer-events: all; /* 始终响应鼠标事件 */
  }

  article h2,
  article h3,
  article h4,
  article h5 {
    position: relative;
  }

  #copy-alert {
    position: fixed;
    bottom: -100px; /* 初始在视窗下方 */
    right: 20px;
    transition: bottom 0.5s ease-in-out;
  }

  /* 进入动画 */
  @keyframes slideIn {
    from {
      bottom: -100px;
    }
    to {
      bottom: 0px;
    }
  }

  /* 消失动画 */
  @keyframes slideOut {
    from {
      bottom: 20px;
    }
    to {
      bottom: -100px;
    }
  }
</style> <script>
  var hideTimeout; // 用于保存自动隐藏定时器的引用
  document.querySelectorAll('article h2, article h3, article h4, article h5').forEach(function (header) {
    var copyIcon = document.createElement('span');
    copyIcon.innerHTML =
      '<svg fill="currentColor" aria-hidden="true" stroke="currentColor" class="w-5 h-5 hidden md:block hover:text-secondary" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg"><path d="M861.866667 164.266667c-87.466667-87.466667-230.4-89.6-320-2.133334l-68.266667 68.266667c-12.8 12.8-12.8 32 0 44.8s32 12.8 44.8 0l68.266667-68.266667c64-61.866667 166.4-61.866667 230.4 2.133334 64 64 64 168.533333 2.133333 232.533333l-117.333333 119.466667c-34.133333 34.133333-81.066667 51.2-128 49.066666-46.933333-4.266667-91.733333-27.733333-119.466667-66.133333-10.666667-14.933333-29.866667-17.066667-44.8-6.4-14.933333 10.666667-17.066667 29.866667-6.4 44.8 40.533333 53.333333 100.266667 87.466667 166.4 91.733333h17.066667c59.733333 0 119.466667-23.466667 162.133333-68.266666l117.333333-119.466667c83.2-89.6 83.2-234.666667-4.266666-322.133333z"></path><path d="M505.6 750.933333l-66.133333 68.266667c-64 61.866667-166.4 61.866667-230.4-2.133333-64-64-64-168.533333-2.133334-232.533334l117.333334-119.466666c34.133333-34.133333 81.066667-51.2 128-49.066667 46.933333 4.266667 91.733333 27.733333 119.466666 66.133333 10.666667 14.933333 29.866667 17.066667 44.8 6.4 14.933333-10.666667 17.066667-29.866667 6.4-44.8-40.533333-53.333333-100.266667-87.466667-166.4-91.733333-66.133333-4.266667-130.133333 19.2-177.066666 66.133333l-117.333334 119.466667c-85.333333 89.6-85.333333 234.666667 2.133334 322.133333 44.8 44.8 102.4 66.133333 162.133333 66.133334 57.6 0 115.2-21.333333 160-64l66.133333-68.266667c12.8-12.8 12.8-32 0-44.8-14.933333-10.666667-34.133333-10.666667-46.933333 2.133333z"></path></svg>'; // 使用您选择的图标
    copyIcon.className = 'copy-icon';
    copyIcon.style.opacity = '0'; // 默认透明
    header.insertBefore(copyIcon, header.firstChild);

    header.addEventListener('mouseover', function () {
      copyIcon.style.opacity = '1';
    });
    header.addEventListener('mouseout', function () {
      copyIcon.style.opacity = '0';
    });

    copyIcon.addEventListener('click', function () {
        var url = window.location.href.split('#')[0] + '#' + header.id;
        navigator.clipboard.writeText(url).then(function () {
            var alertDiv = document.getElementById('copy-alert');
            if (alertDiv) {
                alertDiv.classList.remove('hidden'); // 确保提示框是可见的
                alertDiv.style.display = 'block'; // 显示提示框
                clearTimeout(hideTimeout); // 清除之前的定时器
                alertDiv.style.animation = 'none'; // 先清除之前的动画
                setTimeout(function () {
                    alertDiv.style.animation = 'slideIn 0.5s forwards'; // 应用新动画
                }, 10);

                // 设置自动隐藏定时器
                hideTimeout = setTimeout(function () {
                    alertDiv.style.animation = 'slideOut 0.5s forwards'; // 应用消失动画
                    setTimeout(function () {
                        alertDiv.style.display = 'none';
                    }, 500);
                }, 3000);
            }
        });
    });
  });
</script> <script>
function copyCode(button, event) {
  event.preventDefault();
  const codeBlock = button.parentNode.nextElementSibling.textContent; // 获取代码内容
  navigator.clipboard.writeText(codeBlock).then(() => {
    // 显示 "Copied"
    button.querySelector('.copy-text').style.display = 'none';
    button.querySelector('.copied-text').style.display = 'inline';

    // 3秒后恢复
    setTimeout(() => {
      button.querySelector('.copy-text').style.display = 'inline';
      button.querySelector('.copied-text').style.display = 'none';
    }, 3000);
  });
}
</script> <script>(function(){const url = "https://fatbobman.com/ads/en";

  const adCacheKey = 'dynamicAdCache';

  // 尝试从缓存中获取广告
  const cachedAd = JSON.parse(localStorage.getItem(adCacheKey));
  const now = Date.now();

  if (cachedAd && cachedAd.expiresAt > now) {
    console.log('Using cached ad');
    console.log(cachedAd.expiresAt - now);
    // 如果缓存有效，直接使用缓存的广告
    renderAd(cachedAd.content);
  } else {
    console.log('Fetching ad from the server');
    // 如果缓存无效，从服务器获取广告
    fetch(url, {
      headers: {
        'Accept': 'text/html',
      },
      cache: 'default'
    })
      .then(response => {
        const maxAgeMatch = response.headers.get('Cache-Control')?.match(/max-age=(\d+)/);
        const maxAge = maxAgeMatch ? parseInt(maxAgeMatch[1], 10) : 0;

        if (!response.ok || maxAge <= 0) {
          throw new Error('Invalid response or missing Cache-Control');
        }

        return response.text().then(adContent => {
          const expiresAt = now + maxAge * 1000; // 计算失效时间
          // 缓存广告内容
          localStorage.setItem(adCacheKey, JSON.stringify({ content: adContent, expiresAt }));
          // 渲染广告
          renderAd(adContent);
        });
      })
      .catch(error => console.error('Error loading the ad:', error));
  }

  // 渲染广告函数
  function renderAd(html) {
    const adSlots = document.querySelectorAll('.dynamic-ad-container');
    adSlots.forEach(slot => {
      slot.innerHTML = html;
    });
  }
})();</script>  <!-- <LeaveFeedback lang={lang} /> --> <section class="pt-10"><div class="max-w-5xl sm:px-4 py-2 mx-auto"><div class="grid gap-4 sm:gap-2 sm:mx-4 sm:grid-cols-12"><div class="col-span-12 sm:col-span-3 hidden sm:block"><div class="text-center sm:text-left mt-3 mb-14 before:block before:w-24 before:h-1 before:mb-3 before:rounded before:mx-auto sm:before:mx-0 before:bg-secondary"><h3 class="text-lg font-medium text-default">Related Posts</h3></div></div><div class="sm:hidden text-lg font-medium text-heading col-span-12 text-left">Related Posts</div><div class="relative col-span-12 sm:px-4 space-y-6 sm:col-span-9"><div class="col-span-12 space-y-2 relative sm:px-4 sm:col-span-8 sm:space-y-4 sm:before:absolute sm:before:top-2 sm:before:bottom-0 sm:before:w-0.5 sm:before:-left-3 before:bg-block"><a class="flex flex-col sm:relative sm:before:absolute sm:before:top-2 sm:before:w-2 sm:before:h-2 sm:before:rounded-full sm:before:left-[-31px] sm:before:z-[1] before:bg-secondary group cursor-pointer" href="/en/posts/geometryreader-blessing-or-curse/" id="relatedPosts-GeometryReader: Blessing or Curse?"><div class="flex items-start"><div class="w-[7px] h-[7px] bg-secondary ml-4 mr-2 flex-shrink-0 mt-2 sm:hidden" style="border-radius: 50%;"></div><h3 class="text-default group-hover:text-secondary">GeometryReader: Blessing or Curse?</h3></div></a><a class="flex flex-col sm:relative sm:before:absolute sm:before:top-2 sm:before:w-2 sm:before:h-2 sm:before:rounded-full sm:before:left-[-31px] sm:before:z-[1] before:bg-secondary group cursor-pointer" href="/en/posts/layout-dimensions-1/" id="relatedPosts-SwiftUI Layout: The Mystery of Size"><div class="flex items-start"><div class="w-[7px] h-[7px] bg-secondary ml-4 mr-2 flex-shrink-0 mt-2 sm:hidden" style="border-radius: 50%;"></div><h3 class="text-default group-hover:text-secondary">SwiftUI Layout: The Mystery of Size</h3></div></a><a class="flex flex-col sm:relative sm:before:absolute sm:before:top-2 sm:before:w-2 sm:before:h-2 sm:before:rounded-full sm:before:left-[-31px] sm:before:z-[1] before:bg-secondary group cursor-pointer" href="/en/posts/layout-dimensions-2/" id="relatedPosts-SwiftUI Layout: Cracking the Size Code"><div class="flex items-start"><div class="w-[7px] h-[7px] bg-secondary ml-4 mr-2 flex-shrink-0 mt-2 sm:hidden" style="border-radius: 50%;"></div><h3 class="text-default group-hover:text-secondary">SwiftUI Layout: Cracking the Size Code</h3></div></a><a class="flex flex-col sm:relative sm:before:absolute sm:before:top-2 sm:before:w-2 sm:before:h-2 sm:before:rounded-full sm:before:left-[-31px] sm:before:z-[1] before:bg-secondary group cursor-pointer" href="/en/posts/mastering-transaction/" id="relatedPosts-The Secret to Flawless SwiftUI Animations: A Deep Dive into Transactions"><div class="flex items-start"><div class="w-[7px] h-[7px] bg-secondary ml-4 mr-2 flex-shrink-0 mt-2 sm:hidden" style="border-radius: 50%;"></div><h3 class="text-default group-hover:text-secondary">The Secret to Flawless SwiftUI Animations: A Deep Dive into Transactions</h3></div></a><a class="flex flex-col sm:relative sm:before:absolute sm:before:top-2 sm:before:w-2 sm:before:h-2 sm:before:rounded-full sm:before:left-[-31px] sm:before:z-[1] before:bg-secondary group cursor-pointer" href="/en/posts/mixing_text_and_graphics_with_text_in_swiftui/" id="relatedPosts-Mixing Text and Image in SwiftUI"><div class="flex items-start"><div class="w-[7px] h-[7px] bg-secondary ml-4 mr-2 flex-shrink-0 mt-2 sm:hidden" style="border-radius: 50%;"></div><h3 class="text-default group-hover:text-secondary">Mixing Text and Image in SwiftUI</h3></div></a><a class="flex flex-col sm:relative sm:before:absolute sm:before:top-2 sm:before:w-2 sm:before:h-2 sm:before:rounded-full sm:before:left-[-31px] sm:before:z-[1] before:bg-secondary group cursor-pointer" href="/en/posts/layout-in-swiftui-way/" id="relatedPosts-Layout in SwiftUI Way"><div class="flex items-start"><div class="w-[7px] h-[7px] bg-secondary ml-4 mr-2 flex-shrink-0 mt-2 sm:hidden" style="border-radius: 50%;"></div><h3 class="text-default group-hover:text-secondary">Layout in SwiftUI Way</h3></div></a><a class="flex flex-col sm:relative sm:before:absolute sm:before:top-2 sm:before:w-2 sm:before:h-2 sm:before:rounded-full sm:before:left-[-31px] sm:before:z-[1] before:bg-secondary group cursor-pointer" href="/en/posts/mastering-viewthatfits/" id="relatedPosts-Mastering ViewThatFits"><div class="flex items-start"><div class="w-[7px] h-[7px] bg-secondary ml-4 mr-2 flex-shrink-0 mt-2 sm:hidden" style="border-radius: 50%;"></div><h3 class="text-default group-hover:text-secondary">Mastering ViewThatFits</h3></div></a><a class="flex flex-col sm:relative sm:before:absolute sm:before:top-2 sm:before:w-2 sm:before:h-2 sm:before:rounded-full sm:before:left-[-31px] sm:before:z-[1] before:bg-secondary group cursor-pointer" href="/en/weekly/issue-052" id="relatedPosts-Weekly #52 - Reflecting on the Original Aspiration: On the First Anniversary of the Weekly's Inception"><div class="flex items-start"><div class="w-[7px] h-[7px] bg-secondary ml-4 mr-2 flex-shrink-0 mt-2 sm:hidden" style="border-radius: 50%;"></div><h3 class="text-default group-hover:text-secondary">Weekly #52 - Reflecting on the Original Aspiration: On the First Anniversary of the Weekly&#39;s Inception</h3></div></a><a class="flex flex-col sm:relative sm:before:absolute sm:before:top-2 sm:before:w-2 sm:before:h-2 sm:before:rounded-full sm:before:left-[-31px] sm:before:z-[1] before:bg-secondary group cursor-pointer" href="/en/posts/layout-alignment/" id="relatedPosts-Alignment in SwiftUI: Everything You Need to Know"><div class="flex items-start"><div class="w-[7px] h-[7px] bg-secondary ml-4 mr-2 flex-shrink-0 mt-2 sm:hidden" style="border-radius: 50%;"></div><h3 class="text-default group-hover:text-secondary">Alignment in SwiftUI: Everything You Need to Know</h3></div></a><a class="flex flex-col sm:relative sm:before:absolute sm:before:top-2 sm:before:w-2 sm:before:h-2 sm:before:rounded-full sm:before:left-[-31px] sm:before:z-[1] before:bg-secondary group cursor-pointer" href="/en/posts/in-depth-exploration-of-overlay-and-background-modifiers-in-swiftui/" id="relatedPosts-In-Depth Exploration of Overlay and Background Modifiers in SwiftUI"><div class="flex items-start"><div class="w-[7px] h-[7px] bg-secondary ml-4 mr-2 flex-shrink-0 mt-2 sm:hidden" style="border-radius: 50%;"></div><h3 class="text-default group-hover:text-secondary">In-Depth Exploration of Overlay and Background Modifiers in SwiftUI</h3></div></a></div></div></div></div></section> <!-- <BottomWeeklySubscribe lang={lang} /> --> <div><div id="gitalk-container" data-comment-id="精通 SwiftUI 的 containerRelativeFrame 修饰器" data-lang="en"></div><script src="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.min.js"></script></div><script>
  document.addEventListener('DOMContentLoaded', async function () {
    console.log('fetching comment is enable');
    const response = await fetch('https://fatbobman.com/status/comment');
    const data = await response.text();
    console.log(data);
    if (data === '1') {
      var container = document.getElementById('gitalk-container');
      if (container) {
        var commentID = container.getAttribute('data-comment-id');
        var lang = container.getAttribute('data-lang');

        var gitalk = new Gitalk({
          clientID: 'fcf61195c7f73253dc8b',
          clientSecret: '0ac2907be08248a1fcb5312e27480ad535c682e5',
          repo: 'blogComments',
          owner: 'fatbobman',
          admin: ['fatbobman'],
          id: commentID.split('/').pop().substring(0, 49),
          distractionFreeMode: true,
          createIssueManually: true,
          language: lang,
        });

        gitalk.render('gitalk-container');
      }
    }
  });
</script> <div class="hidden xl:block w-44 lg:absolute" id="toc" style="left: -30px; top: 0px"> <div class="text-muted items-center justify-center overflow-x-clip"> <div class="w-full flex justify-start pb-2" id="toc-button"> <div class=" opacity-50 hover:opacity-100 text-heading hover:text-secondary" style="width:20px; height:20px;">  <svg fill="currentColor" stroke="currentColor" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" id="toc-list-switcher"> <use href="/images/iconCollection.svg#icon-toc"></use> </svg>  </div> </div> <div class="text-default text-xs hidden" id="toc-list"> <ul> <li class=" pb-1"> <div class="text-muted hover:text-secondary items-center justify-start"> <a href="#definition" class=""> Definition </a> </div> </li><li class=" pb-1"> <div class="text-muted hover:text-secondary items-center justify-start"> <a href="#constructors" class=""> Constructors </a> </div> </li><li class=" pb-1"> <div class="text-muted hover:text-secondary items-center justify-start"> <a href="#keyword-explanation" class=""> Keyword Explanation </a> </div> </li><li class="pl-2 pb-1"> <div class="text-muted hover:text-secondary items-center justify-start"> <a href="#containers-in-the-container-list" class=""> Containers in the Container List </a> </div> </li><li class="pl-2 pb-1"> <div class="text-muted hover:text-secondary items-center justify-start"> <a href="#nearest" class=""> Nearest </a> </div> </li><li class="pl-2 pb-1"> <div class="text-muted hover:text-secondary items-center justify-start"> <a href="#transformation-rules" class=""> Transformation Rules </a> </div> </li><li class="pl-2 pb-1"> <div class="text-muted hover:text-secondary items-center justify-start"> <a href="#size-provided-by-the-container-available-container-size" class=""> Size Provided by the Container (Available Container Size) </a> </div> </li><li class=" pb-1"> <div class="text-muted hover:text-secondary items-center justify-start"> <a href="#usage-examples" class=""> Usage Examples </a> </div> </li><li class="pl-2 pb-1"> <div class="text-muted hover:text-secondary items-center justify-start"> <a href="#creating-proportional-galleries-based-on-scroll-area-dimensions" class=""> Creating Proportional Galleries Based on Scroll Area Dimensions </a> </div> </li><li class="pl-2 pb-1"> <div class="text-muted hover:text-secondary items-center justify-start"> <a href="#setting-sizes-proportionally" class=""> Setting Sizes Proportionally </a> </div> </li><li class="pl-2 pb-1"> <div class="text-muted hover:text-secondary items-center justify-start"> <a href="#obtaining-container-dimensions-as-a-subview-across-view-hierarchies" class=""> Obtaining Container Dimensions as a Subview Across View Hierarchies </a> </div> </li><li class=" pb-1"> <div class="text-muted hover:text-secondary items-center justify-start"> <a href="#building-a-replica-version-of-containerrelativeframe" class=""> Building a Replica Version of containerRelativeFrame </a> </div> </li><li class="pl-2 pb-1"> <div class="text-muted hover:text-secondary items-center justify-start"> <a href="#identifying-the-nearest-container" class=""> Identifying the Nearest Container </a> </div> </li><li class="pl-2 pb-1"> <div class="text-muted hover:text-secondary items-center justify-start"> <a href="#calculating-the-dimensions-provided-by-the-container" class=""> Calculating the Dimensions Provided by the Container </a> </div> </li><li class="pl-2 pb-1"> <div class="text-muted hover:text-secondary items-center justify-start"> <a href="#building-viewmodifier-and-view-extension" class=""> Building ViewModifier and View Extension </a> </div> </li><li class="pl-2 pb-1"> <div class="text-muted hover:text-secondary items-center justify-start"> <a href="#considerations" class=""> Considerations: </a> </div> </li><li class=" pb-1"> <div class="text-muted hover:text-secondary items-center justify-start"> <a href="#conclusion" class=""> Conclusion </a> </div> </li> </ul> </div> </div> </div> <style>
  #toc-list {
    transition: all 0.9s ease-in-out;
  }

  #toc-button {
    transition: all 0.9s ease-in-out;
  }
</style> <script>
  function getOffsetTop(element) {
    var offsetTop = 0;
    while (element) {
      offsetTop += element.offsetTop;
      element = element.offsetParent;
    }
    return offsetTop;
  }

  var toc = document.querySelector('#toc');
  // 获取 sidebar 在浏览器中的初始 top 值
  var initialTop = getOffsetTop(toc);
  var positioningElement = document.querySelector('#article-area'); // 定位视图的选择器
  var stickyPoint = 150;
  var tocPadding = 30;
  var tocTopOffset = 4;
  var sidebarWidth = toc.offsetWidth;

  function adjustTocPosition() {
    var sidebarOffsetTop = toc.getBoundingClientRect().top;
    if (sidebarOffsetTop <= stickyPoint) {
      // 获取 positioningElement 的左侧侧与浏览器左侧之间的距离
      var positioningElementRight = (window.innerWidth - positioningElement.getBoundingClientRect().width) / 2;
      toc.style.position = 'fixed';
      toc.style.top = stickyPoint + 'px';
      toc.style.left = positioningElementRight - toc.getBoundingClientRect().width - tocPadding + 'px';
    }

    if (window.scrollY <= initialTop - stickyPoint) {
      toc.style.position = 'absolute';
      toc.style.top = tocTopOffset + 'px';
      toc.style.left = -(tocPadding + toc.getBoundingClientRect().width) + 'px';
    }
  }

  document.addEventListener('scroll', adjustTocPosition);
  window.addEventListener('resize', adjustTocPosition);
  // doc 加载完成后，调整 toc 的位置
  toc.style.left = -(tocPadding + toc.getBoundingClientRect().width) + 'px';

  document.addEventListener('DOMContentLoaded', function () {
    const tocList = document.getElementById('toc-list');
    const tocButton = document.getElementById('toc-button');

    // 更新toc-list和toc-button的显示状态
    function updateDisplay() {
      const showToc = localStorage.getItem('showToc') === 'true';
      if (showToc) {
        tocList.classList.remove('hidden');
        tocButton.classList.add('justify-start');
        tocButton.classList.remove('justify-end');
      } else {
        tocList.classList.add('hidden');
        tocButton.classList.remove('justify-start');
        tocButton.classList.add('justify-end');
      }
    }

    // 初始状态检查
    updateDisplay();

    // 点击事件监听器，用于切换toc-list的显示状态并更新按钮位置
    tocButton.addEventListener('click', function () {
      const isHidden = tocList.classList.contains('hidden');
      localStorage.setItem('showToc', isHidden);
      updateDisplay();
    });
  });
</script> <div class="hidden md:block md:absolute" id="sidebar" style="right: -50px; top: 0px"> <div class="flex flex-col space-y-4 text-muted items-center justify-center"> <div class=" opacity-50 hover:opacity-100 text-heading hover:text-secondary" style="width:20px; height:20px;">  <a href="/en/posts/developing-embedded-applications-with-swift/" data-tooltip-target="tooltip-next-post" data-tooltip-placement="left" id="sidebar-next-post"> <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="currentColor" stroke-linecap="round" stroke-linejoin="round"> <!-- <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
      <path
        d="M9.586 4l-6.586 6.586a2 2 0 0 0 0 2.828l6.586 6.586a2 2 0 0 0 2.18 .434l.145 -.068a2 2 0 0 0 1.089 -1.78v-2.586h7a2 2 0 0 0 2 -2v-4l-.005 -.15a2 2 0 0 0 -1.995 -1.85l-7 -.001v-2.585a2 2 0 0 0 -3.414 -1.414z"
        stroke-width="0"
        fill="currentColor"
      ></path> --> <use href="/images/iconCollection.svg#icon-previous"></use> </svg> </a>  </div> <div id="tooltip-next-post" role="tooltip" class="absolute z-10 invisible inline-block px-3 py-2 w-44 text-sm font-medium text-gray-200 bg-gray-600/90 rounded-lg shadow-sm transition-opacity duration-300 tooltip dark:bg-gray-700/90"> <div> <div>Developing Embedded Applications with Swift</div> <div class="text-xs text-yellow-200 font-extrabold pt-2">⌥ + ←</div> </div> <div class="tooltip-arrow" data-popper-arrow></div> </div> <script>(function(){const url = "/en/posts/developing-embedded-applications-with-swift/";
const isHidden = false;

  document.addEventListener('keydown', (e) => {
    // Check if Alt+RightArrow or just RightArrow was pressed
    if (e.altKey && e.key === 'ArrowLeft') {
      // Only navigate if there's a URL and the button isn't hidden
      if (url && !isHidden) {
        e.preventDefault(); // Prevent default browser behavior
        window.location.href = url;
      }
    }
  });
})();</script> <div class=" opacity-50 hover:opacity-100 text-heading hover:text-secondary" style="width:20px; height:20px;">  <a href="/en/posts/spacing-of-swiftui/" data-tooltip-target="tooltip-previous-post" data-tooltip-placement="left" id="sidebar-previous-post"> <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="currentColor" stroke-linecap="round" stroke-linejoin="round"> <use href="/images/iconCollection.svg#icon-next"></use> <symbol id="icon-next" viewBox="0 0 24 24" fill="currentColor"> <path stroke="none" d="M0 0h24v24H0z" fill="none"></path> <path d="M12.089 3.634a2 2 0 0 0 -1.089 1.78l-.001 2.586h-6.999a2 2 0 0 0 -2 2v4l.005 .15a2 2 0 0 0 1.995 1.85l6.999 -.001l.001 2.587a2 2 0 0 0 3.414 1.414l6.586 -6.586a2 2 0 0 0 0 -2.828l-6.586 -6.586a2 2 0 0 0 -2.18 -.434l-.145 .068z" stroke-width="0" fill="currentColor"></path> </symbol> </svg> </a>  </div> <div id="tooltip-previous-post" role="tooltip" class="absolute z-10 invisible inline-block px-3 py-2 w-44 text-sm font-medium text-gray-200 bg-gray-600/90 rounded-lg shadow-sm transition-opacity duration-300 tooltip dark:bg-gray-700/90">  <div>What Does spacing = nil Mean in SwiftUI?</div> <div class="text-xs text-yellow-200 font-extrabold pt-2">⌥ + →</div>  <div class="tooltip-arrow" data-popper-arrow></div> </div> <script>(function(){const url = "/en/posts/spacing-of-swiftui/";
const isHidden = false;

  document.addEventListener('keydown', (e) => {
    // Check if Alt+RightArrow or just RightArrow was pressed
    if (e.altKey && e.key === 'ArrowRight') {
      // Only navigate if there's a URL and the button isn't hidden
      if (url && !isHidden) {
        e.preventDefault(); // Prevent default browser behavior
        window.location.href = url;
      }
    }
  });
})();</script> <!-- <DictButton lang={lang} post = {post}/> --> <div class=" opacity-50 hover:opacity-100 text-heading hover:text-secondary" style="width:20px; height:20px;">  <a href="https://x.com/intent/tweet?text=Mastering%20the%20containerRelativeFrame%20Modifier%20in%20SwiftUI&#38;url=https%3A%2F%2Ffatbobman.com%2Fen%2Fposts%2Fmastering-the-containerrelativeframe-modifier-in-swiftui%2F&#38;hashtags=ios%2Cswiftlang&#38;via=fatbobman" target="_blank" id="sidebar-share-with-twitter"> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"> <use href="/images/iconCollection.svg#icon-twitter"></use> </svg> </a>  </div> <div class=" opacity-50 hover:opacity-100 text-heading hover:text-secondary" style="width:20px; height:20px;">  <a href="https://bsky.app/intent/compose?text=Mastering%20the%20containerRelativeFrame%20Modifier%20in%20SwiftUI%0A by %40fatbobman.bsky.social %0Ahttps%3A%2F%2Ffatbobman.com%2Fen%2Fposts%2Fmastering-the-containerrelativeframe-modifier-in-swiftui%2F%0A #ios #swift" target="_blank" id="sidebar-share-with-bluesky"> <svg xmlns="http://www.w3.org/2000/svg" class="text-default hover:text-secondary" width="20" height="20" viewBox="0 0 24 24" stroke-width="0.7" stroke="currentColor" fill="currentColor" stroke-linecap="round" stroke-linejoin="round"> <use href="/images/iconCollection.svg#icon-bluesky"></use> </svg> </a>  </div> <div class=" opacity-50 hover:opacity-100 text-heading hover:text-secondary" style="width:20px; height:20px;">  <a href="https://www.facebook.com/sharer/sharer.php?u=https%253A%252F%252Ffatbobman.com%252Fen%252Fposts%252Fmastering-the-containerrelativeframe-modifier-in-swiftui%252F" target="_blank" id="sidebar-share-with-facebook"> <svg fill="currentColor" stroke="currentColor" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg"> <use href="/images/iconCollection.svg#icon-facebook"></use> </svg> </a>  </div> <div class="hidden opacity-50 hover:opacity-100 text-heading hover:text-secondary" style="width:20px; height:20px;">  <a href="https://service.weibo.com/share/share.php?url=https%3A%2F%2Ffatbobman.com%2Fen%2Fposts%2Fmastering-the-containerrelativeframe-modifier-in-swiftui%2F&#38;title=Mastering%20the%20containerRelativeFrame%20Modifier%20in%20SwiftUI%0A%20%23ios%20%23swift%0A%20by%20%40fatbobman%0A" target="_blank" id="sidebar-share-with-weibo"> <svg fill="currentColor" stroke="currentColor" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg"> <!-- <path
        d="M457.3 543c-68.1-17.7-145 16.2-174.6 76.2-30.1 61.2-1 129.1 67.8 151.3 71.2 23 155.2-12.2 184.4-78.3 28.7-64.6-7.2-131-77.6-149.2z m-52 156.2c-13.8 22.1-43.5 31.7-65.8 21.6-22-10-28.5-35.7-14.6-57.2 13.7-21.4 42.3-31 64.4-21.7 22.4 9.5 29.6 35 16 57.3z m45.5-58.5c-5 8.6-16.1 12.7-24.7 9.1-8.5-3.5-11.2-13.1-6.4-21.5 5-8.4 15.6-12.4 24.1-9.1 8.7 3.2 11.8 12.9 7 21.5zM785.3 443.5c15 4.8 31-3.4 35.9-18.3 11.8-36.6 4.4-78.4-23.2-109-27.6-30.6-68.4-42.3-106-34.3-15.4 3.3-25.2 18.4-21.9 33.8 3.3 15.3 18.4 25.2 33.8 21.8 18.4-3.9 38.3 1.8 51.9 16.7 13.5 15 17.2 35.4 11.3 53.3-4.9 15.1 3.2 31.1 18.2 36z"
      ></path><path
        d="M885.1 237.5c-56.7-62.9-140.4-86.9-217.7-70.5-17.9 3.8-29.3 21.4-25.4 39.3 3.8 17.9 21.4 29.3 39.3 25.5 55-11.7 114.4 5.4 154.8 50.1 40.3 44.7 51.2 105.7 34 159.1-5.6 17.4 3.9 36 21.3 41.7 17.4 5.6 36-3.9 41.6-21.2v-0.1c24.1-75.4 8.9-161.1-47.9-223.9zM729 499c-12.2-3.6-20.5-6.1-14.1-22.1 13.8-34.7 15.2-64.7 0.3-86-28-40.1-104.8-37.9-192.8-1.1 0 0-27.6 12.1-20.6-9.8 13.5-43.5 11.5-79.9-9.6-101-47.7-47.8-174.6 1.8-283.5 110.6C127.3 471.1 80 557.5 80 632.2 80 775.1 263.2 862 442.5 862c235 0 391.3-136.5 391.3-245 0-65.5-55.2-102.6-104.8-118zM443 810.8c-143 14.1-266.5-50.5-275.8-144.5-9.3-93.9 99.2-181.5 242.2-195.6 143-14.2 266.5 50.5 275.8 144.4C694.4 709 586 796.6 443 810.8z"
      ></path> --> <use href="/images/iconCollection.svg#icon-weibo"></use> </svg> </a>  </div> <div class=" opacity-50 hover:opacity-100 text-heading hover:text-secondary" style="width:16px; height:16px;">  <a href="https://www.linkedin.com/sharing/share-offsite/?url=https%3A%2F%2Ffatbobman.com%2Fen%2Fposts%2Fmastering-the-containerrelativeframe-modifier-in-swiftui%2F" target="_blank" id="sidebar-share-with-linkedin"> <svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 15 15"> <use href="/images/iconCollection.svg#icon-linkedin"></use> </svg> </a>  </div> <div class=" opacity-50 hover:opacity-100 text-heading hover:text-secondary" style="width:20px; height:20px;">  <a href="mailto:?subject=Article%3A%E3%80%90Mastering%20the%20containerRelativeFrame%20Modifier%20in%20SwiftUI%E3%80%91&#38;body=Here's%20an%20article%20you%20may%20find%20interesting%3A%0A%0AMastering%20the%20containerRelativeFrame%20Modifier%20in%20SwiftUI%0A%0ALink%3A%20https%3A%2F%2Ffatbobman.com%2Fen%2Fposts%2Fmastering-the-containerrelativeframe-modifier-in-swiftui%2F" target="_blank" id="sidebar-share-with-email"> <svg fill="currentColor" stroke="currentColor" stroke-width="4" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg"> <use href="/images/iconCollection.svg#icon-email"></use> </svg> </a>  </div> <div class=" opacity-50 hover:opacity-100 text-heading hover:text-secondary" style="width:20px; height:20px;">  <svg fill="currentColor" stroke="currentColor" onclick="scrollToElement()" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg"> <use href="/images/iconCollection.svg#icon-comment"></use> </svg>  </div> <script>
  var offset = 80
  function scrollToElement() {
    var gitalkContainer = document.getElementById('gitalk-container');
    if (gitalkContainer) {
      var topPosition = gitalkContainer.getBoundingClientRect().top + window.scrollY - offset;
      window.scrollTo({ top: topPosition, behavior: 'smooth' });
    }
  }
</script> <div class=" opacity-50 hover:opacity-100 text-heading hover:text-secondary" style="width:20px; height:20px;">  <svg fill="currentColor" stroke="currentColor" onclick="window.scrollTo({top:0,behavior:'smooth'})" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg"> <!-- <path d="M862.464 161.536l-700.928 0c-30.976 0-56.096-25.12-56.096-56.096l0-28.064c0-30.944 25.12-56.064 56.096-56.064l700.896 0c30.976 0 56.096 25.12 56.096 56.064l0 28.032c0 31.008-25.12 56.096-56.096 56.096l0 0 0 0zM138.528 531.68c0 0 306.816-245.792 309.888-248.864 14.304-13.888 31.904-22.368 49.952-25.312 1.76-0.32 3.488-0.608 5.248-0.8 2.816-0.32 5.6-0.352 8.384-0.352 2.816-0.032 5.568 0.032 8.352 0.352 1.792 0.192 3.552 0.48 5.28 0.8 18.048 2.976 35.616 11.424 49.92 25.312 3.104 3.008 309.856 248.864 309.856 248.864 33.152 32.224 30.304 65.44-2.784 97.696s-77.376 3.04-110.496-29.216l-190.08-150.432 0 496.864c0 31.008-25.088 56.096-56.096 56.096l-28 0c-30.976 0-56.096-25.12-56.096-56.096l0-496.864-190.048 150.432c-33.088 32.288-77.408 61.536-110.496 29.216-33.056-32.256-35.872-65.44-2.816-97.696l0 0 0 0z"></path> --> <use href="/images/iconCollection.svg#icon-top"></use> </svg>  </div> </div> </div>  </div>   </div> </main> </div> <footer> <footer class="bg-block"> <div class="mx-auto w-full max-w-3xl px-4 md:px-6"> <div class="container flex flex-col items-center pt-10"> <div class="flex flex-row justify-around w-full space-x-3"> <div class="flex flex-col space-y-4"> <h2 class="font-bold text-heading">Website</h2> <div class="flex flex-col space-y-2 text-sm text-default font-medium"> <a href="https://apps.apple.com/us/app/id1534513553" class="hover:text-secondary" target="_blank">Health Notes</a> <a href="https://discord.gg/zhou-zi-de-swiftji-shi-ben-967978112509935657" class="hover:text-secondary" target="_blank">Discord</a> <a href="/en/posts/" class="hover:text-secondary">Posts</a> <a href="/en/tags/" class="hover:text-secondary">Tags</a> <a href="/en/collections/" class="hover:text-secondary">Collections</a> <a href="/en/snippet/" class="hover:text-secondary">Quick Tips</a> </div> </div> <div class="flex flex-col space-y-4"> <h2 class="font-bold text-heading">Follow</h2> <div class="flex flex-col space-y-2 text-sm text-default font-medium"> <a href="https://weekly.fatbobman.com" class="hover:text-secondary">Newsletter</a> <a href="https://x.com/intent/follow?screen_name=fatbobman" class="hover:text-secondary" target="_blank">Twitter</a> <a href="https://mastodon.social/@fatbobman" class="hover:text-secondary" target="_blank">Mastodon</a> <a href="https://www.linkedin.com/in/fatbobman/" class="hover:text-secondary" target="_blank">Linkedin</a> <a href="https://bsky.app/profile/fatbobman.bsky.social" class="hover:text-secondary" target="_blank">Blue Sky</a>  <a href="https://github.com/fatbobman" class="hover:text-secondary" target="_blank">GitHub</a> <a href="/rss.xml" class="hover:text-secondary hover:font-medium" target="_blank">RSS</a> </div> </div> <div class="flex flex-col space-y-4"> <h2 class="font-bold text-heading">Info</h2> <div class="flex flex-col space-y-2 text-sm text-default font-medium"> <a href="/en/about/" class="hover:text-secondary">About</a> <a href="/en/sponsorship/" class="hover:text-secondary"> Sponsor </a> </div> </div> </div> <div class="pb-0"> <div class="flex items-center justify-center w-full px-6 pt-12 text-sm"> <span class="text-muted text-xs">Copyright ©  2025 <a href="https://x.com/fatbobman" class="border-b-secondary border-b-[1px]">Fatbobman Digital Limited</a>. All Rights
            Reserved.</span> </div> <div class="flex items-center justify-center w-full px-6 pt-2 text-sm pb-10"> <span> <a href="https://beian.miit.gov.cn/#/Integrated/index" target="_blank" class="block text-xs text-muted">
辽ICP备20006550号-1
</a> </span> </div> </div> </div> </div> </footer> </footer> </div>   <!-- <script is:inline src="https://cdnjs.cloudflare.com/ajax/libs/flowbite/1.8.0/flowbite.min.js"></script> --><script type="module" src="/js/theme.js" defer></script> <script>(function(){const currentLang = "en";

  function attachEvent(selector, event, fn) {
    const matches = typeof selector === 'string' ? document.querySelectorAll(selector) : selector;
    if (matches && matches.length) {
      matches.forEach((elem) => {
        elem.addEventListener(event, (e) => fn(e, elem), false);
      });
    }
  }

  // 为每个需要清除 focus 状态的按钮都添加一个 clear-focus 类, 下面的代码将在点击后自动移除 focus 状态
  document.addEventListener('DOMContentLoaded', (event) => {
    // 获取所有具有 'clear-focus' 类的按钮
    const buttons = document.querySelectorAll('.clear-focus');

    buttons.forEach((button) => {
      button.addEventListener('click', () => {
        setTimeout(() => {
          button.blur();
        }, 0);
      });
    });
  });

  window.onpageshow = function () {
    document.documentElement.classList.add('motion-safe:scroll-smooth');
  };
})();</script> <div id="docsearch-container-data" data-lang="en" data-searchtext="Search..."></div> <script src="https://cdn.jsdelivr.net/npm/@docsearch/js@3"></script> <script src="/js/runsearch.js"></script> <!-- Google Tag Manager (noscript) --><noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-5C7N4MF5" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript><!-- End Google Tag Manager (noscript) --> </body></html>