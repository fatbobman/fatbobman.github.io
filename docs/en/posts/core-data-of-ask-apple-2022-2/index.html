<!DOCTYPE html><html lang="en"> <head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="sitemap" href="/sitemap-index.xml"><!-- <link rel="shortcut icon" href={iconSVG.src} /> --><link rel="icon" type="image/png" sizes="16x16" href="/_astro/favicon-16x16.2312221518-2.DhhY-2ao.png"><link rel="icon" type="image/png" sizes="32x32" href="/_astro/favicon-32x32.2312221518-2.BbUzUdRZ.png"><link rel="mask-icon" href="/_astro/faviconSVG-32x32.2312221518-2.ll_gTgJS.svg"><link rel="apple-touch-icon" sizes="180x180" href="/_astro/apple-touch-icon.2312227635.BE1WvNvp.png"><title>Ask Apple 2022 Q&amp;A Related on Core Data (Part 2)</title>
<meta name="description" content="Explore Core Data insights from Ask Apple 2022, Part 2. Learn about derived attributes, syncing, Spotlight, @FetchRequest, and more. Includes expert tips.">
<meta name="robots" content="index,follow">
<link rel="canonical" href="https://fatbobman.com/en/posts/core-data-of-ask-apple-2022-2/">
<meta property="og:title" content="Ask Apple 2022 Q&amp;A Related on Core Data (Part 2)">
<meta property="og:description" content="Explore Core Data insights from Ask Apple 2022, Part 2. Learn about derived attributes, syncing, Spotlight, @FetchRequest, and more. Includes expert tips.">
<meta property="og:url" content="https://fatbobman.com/en/posts/core-data-of-ask-apple-2022-2/">
<meta property="og:type" content="article">
<meta property="og:image" content="https://fatbobman.com/images/blog-card.png">

<meta property="og:locale" content="en">
<meta property="og:site_name" content="fatbobman.com">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:site" content="@fatbobman">
<meta name="twitter:creator" content="@fatbobman"><link rel="alternate" type="application/rss+xml" title="RSS Feed for My Website" href="https://fatbobman.com/en/rss.xml"><link rel="sitemap" href="/sitemap-index.xml"><!-- ÂÖ∂‰ªñË∑ØÂæÑÁöÑ hreflang -->
  <link rel="alternate" hreflang="en" href="https://fatbobman.com/en/posts/core-data-of-ask-apple-2022-2/">
  <link rel="alternate" hreflang="zh-CN" href="https://fatbobman.com/zh/posts/core-data-of-ask-apple-2022-2/">
  <link rel="alternate" hreflang="x-default" href="https://fatbobman.com/en/posts/core-data-of-ask-apple-2022-2/"><script>
  var _hmt = _hmt || [];
  (function() {
    var hm = document.createElement("script");
    hm.async = true; // Add async attribute
    hm.src = "https://hm.baidu.com/hm.js?14e5d60a3ea6276655f9d14c58b1fcd0";
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(hm, s);
  })();
</script> <!-- Google Tag Manager --><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
  new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
  j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
  'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
  })(window,document,'script','dataLayer','GTM-5C7N4MF5');</script> <!-- End Google Tag Manager --><script>
      // Immediately set theme before page renders
      if (
        localStorage.getItem('color-theme') === 'dark' ||
        (!('color-theme' in localStorage) && window.matchMedia('(prefers-color-scheme: dark)').matches)
      ) {
        document.documentElement.classList.add('dark');
      }
    </script><script type='application/ld+json'>{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "author": {
    "@id": "#author"
  },
  "dateModified": "2022-10-24T00:12:00.000Z",
  "datePublished": "2022-10-24T00:12:00.000Z",
  "description": "Explore Core Data insights from Ask Apple 2022, Part 2. Learn about derived attributes, syncing, Spotlight, @FetchRequest, and more. Includes expert tips.",
  "headline": "Ask Apple 2022 Q&A Related on Core Data (Part 2)",
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://fatbobman.com/en/posts/core-data-of-ask-apple-2022-2/"
  },
  "url": "https://fatbobman.com/en/posts/core-data-of-ask-apple-2022-2/",
  "publisher": {
    "@type": "Organization",
    "name": "Fatbobman's Blog",
    "logo": {
      "@type": "ImageObject",
      "url": "https://fatbobman.com/images/blog-card.png"
    }
  },
  "articleSection": [
    "Core Data",
    "Apple Event"
  ],
  "inLanguage": "en"
}</script><script type='application/ld+json'>{
  "@context": "https://schema.org",
  "@type": "Person",
  "@id": "#author",
  "name": "‰∏úÂù°ËÇòÂ≠ê (ÂæêÊù®)",
  "alternateName": "Fatbobman (Xu Yang)",
  "jobTitle": "Apple Developer",
  "description": "ËãπÊûúÁîüÊÄÅÂºÄÂèëËÄÖÔºå‰∏ìÊ≥® Swift Âíå SwiftUI ÂºÄÂèë„ÄÇFatbobman's Blog ‰ΩúËÄÖ„ÄÇ",
  "url": "https://fatbobman.com",
  "image": {
    "@type": "ImageObject",
    "url": "https://cdn.fatbobman.com/FatWithBoys.png"
  },
  "sameAs": [
    "https://github.com/fatbobman",
    "https://x.com/fatbobman",
    "https://www.linkedin.com/in/fatbobman/",
    "https://bsky.app/profile/fatbobman.com",
    "https://mastodon.social/@fatbobman",
    "https://web.okjike.com/u/e32947ef-7751-4363-9456-b340eef2efd3",
    "https://fatbobman.com/zh/about/",
    "https://fatbobman.com/en/about/"
  ],
  "worksFor": {
    "@type": "Organization",
    "name": "Fatbobman's Blog",
    "logo": {
      "@type": "ImageObject",
      "url": "https://fatbobman.com/images/blog-card.png"
    }
  }
}</script><link rel="stylesheet" href="/_astro/about.Bv8GOHPN.css">
<link rel="stylesheet" href="/_astro/_slug_.BRLGXoDU.css">
<style>.sticky[data-astro-cid-4wsjtibl]{position:fixed;top:0;left:50%;transform:translate(-50%);width:100%;max-width:100%}
</style></head> <body class="antialiased text-default bg-page">  <div class="flex flex-col min-h-screen justify-between "> <div> <header> <div class="bg-block" id="wholeHeader" data-astro-cid-4wsjtibl> <div id="blogTitle"> <a href="/en/"> <div class="flex space-x-4 mx-auto text-center pt-6 sm:pt-6 font-black w-[240px] sm:w-[300px] pb-2 sm:pb-0"> <svg fill="currentColor" class="text-heading" width="500"> <use href="/_astro/blogTitle.Ca1NZNqJ.svg#blog-title"></use> </svg> </div> </a> </div> <div class="bg-block z-50 shadow-custom-light dark:shadow-custom-dark" id="stickyHeader" data-astro-cid-4wsjtibl> <div class="max-w-5xl flex flex-wrap items-center justify-between mx-auto p-2 sm:p-0" data-astro-cid-4wsjtibl> <div class="flex space-x-2" data-astro-cid-4wsjtibl> <div id="lang-data" data-lang="en" style="display: none;"></div> <button id="language-dropdown-button" data-dropdown-toggle="language-dropdown-menu" type="button" class="p-2 w-10 h-10 font-medium text-default hover:text-secondary hover:bg-gray-100 dark:hover:bg-page focus:outline-none focus:ring-2 focus:ring-gray-200 dark:hover:bg-gray-700 dark:focus:ring-gray-600 rounded-lg"> EN </button> <!-- Dropdown --> <div class="z-50 hidden my-4 text-base list-none bg-page divide-y divide-gray-100 rounded-lg shadow dark:bg-gray-700" id="language-dropdown-menu"> <ul class="py-2 font-medium text-sm" role="none"> <li> <button type="button" onclick="
            try {
                if ('#' !== '#') {
                    window.location.href = '#';
                }
            } catch (e) {
                console.log('Navigation failed:', e);
            }
        " class="w-full text-left px-4 py-2 text-default hover:bg-gray-100 dark:hover:bg-gray-600 dark:hover:text-white" role="menuitem"> <div class="inline-flex items-center">
English
<svg xmlns="http://www.w3.org/2000/svg" class="w-3.5 h-3.5 ml-2 hidden text-primary" id="EN-check" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"> <use href="/_astro/iconCollection.C9WNJL2e.svg#icon-aifadian"></use> </svg> </div> </button> </li><li> <button type="button" onclick="
              try {
                  if ('/zh/posts/core-data-of-ask-apple-2022-2/' !== '#') {
                      window.location.href = '/zh/posts/core-data-of-ask-apple-2022-2/';
                  }
              } catch (e) {
                  console.log('Navigation failed:', e);
              }
          " class="w-full text-left px-4 py-2 text-default hover:bg-gray-100 dark:hover:bg-gray-600 dark:hover:text-white" role="menuitem"> <div class="inline-flex items-center">
‰∏≠Êñá
<svg xmlns="http://www.w3.org/2000/svg" class="w-3.5 h-3.5 ml-2 hidden text-primary" id="ZH-check" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"> <use href="/_astro/iconCollection.C9WNJL2e.svg#icon-aifadian"></use> </svg> </div> </button> </li> <li> <div class="border-t border-gray-200 dark:border-gray-800 w-4/5 mx-auto my-2"></div> <button class="block px-4 py-2 text-default hover:bg-gray-100 dark:hover:bg-gray-600 dark:hover:text-white" role="menuitem" id="set-default-lang"> <div class="inline-flex items-center"> Set English as Default </div> </button> </li> </ul> <script type="module">function a(){const t=localStorage.getItem("lang"),e=document.getElementById("EN-check"),n=document.getElementById("ZH-check");e!==null&&n!==null&&(t==="en"?(e.classList.remove("hidden"),n.classList.add("hidden")):t==="zh"&&(n.classList.remove("hidden"),e.classList.add("hidden")))}document.addEventListener("DOMContentLoaded",()=>{a()});const l=document.getElementById("set-default-lang");l?.addEventListener("click",()=>{const t=document.getElementById("lang-data");if(t!=null){const e=t.dataset.lang;e!=null&&(localStorage.setItem("lang",e),a())}});</script> </div> <button id="theme-dropdown-button" data-dropdown-toggle="theme-dropdown-menu" type="button" class="group p-2 w-10 h-10 text-default hover:bg-gray-100 dark:hover:bg-page focus:outline-none focus:ring-2 focus:ring-gray-200 dark:text-gray-400 dark:hover:bg-gray-700 dark:focus:ring-gray-600 rounded-lg flex items-center justify-center"> <svg viewBox="0 0 1024 1024" stroke="currentColor" class="w-5 h-5 text-default fill-current group-hover:text-secondary hidden" id="theme_icon_system"> <use href="/_astro/iconCollection.C9WNJL2e.svg#icon-computer"></use> </svg> <svg viewBox="0 0 1024 1024" stroke="currentColor" class="w-5 h-5 text-default fill-current group-hover:text-secondary hidden" id="theme_icon_dark"> <use href="/_astro/iconCollection.C9WNJL2e.svg#icon-moon"></use> </svg> <svg viewBox="0 0 24 24" stroke="currentColor" class="w-5 h-5 text-default fill-current group-hover:text-secondary hidden" id="theme_icon_light"> <use href="/_astro/iconCollection.C9WNJL2e.svg#icon-sun"></use> </svg> </button> <!-- Dropdown --> <div class="z-50 hidden my-4 text-base list-none bg-white divide-y divide-gray-100 rounded-lg shadow dark:bg-gray-700" id="theme-dropdown-menu"> <ul class="py-2 font-medium" role="none"> <li class="hover:bg-gray-100 dark:hover:bg-gray-600 dark:hover:text-white text-default"> <button class="flex px-4 py-2 text-sm align-text-center" id="theme_button_light"> <svg class="w-5 h-5" viewBox="0 0 1024 1024" stroke-width="2" stroke="currentColor" fill="currentColor" stroke-linecap="round" stroke-linejoin="round"> <use href="/_astro/iconCollection.C9WNJL2e.svg#icon-sun"></use> </svg> <span class="ml-2 dark:hover:text-white">Light</span> </button> </li> <li class="hover:bg-gray-100 dark:hover:bg-gray-600 dark:hover:text-white text-default"> <button class="flex px-4 py-2 text-sm align-text-center " id="theme_button_dark"> <svg class="w-5 h-5"> <use href="/_astro/iconCollection.C9WNJL2e.svg#icon-moon"></use> </svg> <span class="ml-2">Dark</span> </button> </li> <li class="hover:bg-gray-100 dark:hover:bg-gray-600 dark:hover:text-white text-default"> <button class="flex px-4 py-2 text-sm align-text-center " id="theme_button_system"> <svg class="w-5 h-5"> <use href="/_astro/iconCollection.C9WNJL2e.svg#icon-computer"></use> </svg> <span class="ml-2 dark:hover:text-white">System</span> </button> </li> </ul> </div> <script>
  // Ëé∑ÂèñÊåâÈíÆ
  var themeButtonLight = document.getElementById('theme_button_light');
  var themeButtonDark = document.getElementById('theme_button_dark');
  var themeButtonSystem = document.getElementById('theme_button_system');
  // Ëé∑ÂèñÂõæÊ†á
  var themeToggleDarkIcon = document.getElementById('theme_icon_dark');
  var themeToggleLightIcon = document.getElementById('theme_icon_light');
  var themeToggleSystemIcon = document.getElementById('theme_icon_system');

  function setTheme() {
    if (
      localStorage.getItem('color-theme') === 'dark' ||
      (!('color-theme' in localStorage) && window.matchMedia('(prefers-color-scheme: dark)').matches)
    ) {
      document.documentElement.classList.add('dark');
    } else {
      document.documentElement.classList.remove('dark');
    }
  }

  function setThemeButton() {
    let theme = localStorage.getItem('color-theme');
    if (theme === 'dark') {
      themeToggleDarkIcon.classList.remove('hidden');
      themeToggleLightIcon.classList.add('hidden');
      themeToggleSystemIcon.classList.add('hidden');
    } else if (theme === 'light') {
      themeToggleDarkIcon.classList.add('hidden');
      themeToggleLightIcon.classList.remove('hidden');
      themeToggleSystemIcon.classList.add('hidden');
    } else {
      themeToggleDarkIcon.classList.add('hidden');
      themeToggleLightIcon.classList.add('hidden');
      themeToggleSystemIcon.classList.remove('hidden');
    }
  }

  function resetTheme() {
    setTheme();
    setThemeButton();
  }

  resetTheme();

  // ÁõëÂê¨ÊöóÈªëÊ®°ÂºèÁöÑÂèòÂåñ
  window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', () => {
    resetTheme();
  });

  // ‰øùËØÅÂÖ∂‰ªñÁöÑÈ°µÈù¢‰πüËÉΩÂ§üÁõëÂê¨Âà∞ localStorage ÁöÑÂèòÂåñ
  window.addEventListener('storage', function (event) {
    if (event.key === 'color-theme') {
      resetTheme();
    }
  });


  // Listen for clicks on the button themeToggleDarkIcon
  themeButtonDark.addEventListener('click', function () {
    localStorage.setItem('color-theme', 'dark');
    resetTheme();
  });

  // // Listen for clicks on the button themeToggleLightIcon
  themeButtonLight.addEventListener('click', function () {
    localStorage.setItem('color-theme', 'light');
    resetTheme();
  });

  // // Listen for clicks on the button themeToggleSystemIcon
  themeButtonSystem.addEventListener('click', function () {
    localStorage.removeItem('color-theme');
    resetTheme();
  });
</script> <div id="docsearch" class="group w-10 h-10 text-default hover:bg-gray-100 dark:hover:bg-page focus:outline-none focus:ring-2 focus:ring-gray-200 dark:text-gray-400 dark:hover:bg-gray-700 dark:focus:ring-gray-600 rounded-lg flex items-center justify-center"> <svg width="20" height="20" viewBox="0 0 20 20" aria-hidden="true" class="DocSearch-Search-Icon"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg> </div> </div> <button data-collapse-toggle="navbar-solid-bg" type="button" class="inline-flex items-center p-2 mx-2 w-10 h-10 justify-center text-sm text-gray-500 rounded-lg md:hidden hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-gray-200 dark:text-gray-400 dark:hover:bg-gray-700 dark:focus:ring-gray-600" aria-controls="navbar-solid-bg" aria-expanded="false" id="navbar-toggle-button"> <span class="sr-only">Open main menu</span> <svg class="w-5 h-5 text-default" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 17 14"> <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M1 1h15M1 7h15M1 13h15"></path> </svg> </button> <nav class="hidden w-full md:block md:w-auto px-4 z-40" id="navbar-solid-bg"> <ul class="flex flex-col font-bold mt-4 rounded-lg bg-gray-50 md:space-x-8 rtl:space-x-reverse md:flex-row md:mt-0 md:border-0 md:bg-transparent dark:bg-gray-800 md:dark:bg-transparent dark:border-gray-700"> <a href="/en/" class="block py-2 px-3 md:p-0 rounded text-heading md:hover:text-secondary hover:bg-gray-100 dark:hover:bg-gray-700 md:hover:bg-transparent md:dark:hover:bg-transparent "> Home </a><a href="/en/posts/" class="block py-2 px-3 md:p-0 rounded text-invert bg-secondary md:bg-transparent md:text-secondary md:dark:bg-transparent " aria-current="page"> Articles </a><a href="/en/weekly/" class="block py-2 px-3 md:p-0 rounded text-heading md:hover:text-secondary hover:bg-gray-100 dark:hover:bg-gray-700 md:hover:bg-transparent md:dark:hover:bg-transparent "> Weekly </a><a href="/en/snippet/" class="block py-2 px-3 md:p-0 rounded text-heading md:hover:text-secondary hover:bg-gray-100 dark:hover:bg-gray-700 md:hover:bg-transparent md:dark:hover:bg-transparent "> Tips </a><a href="/en/sponsorship/" class="block py-2 px-3 md:p-0 rounded text-heading md:hover:text-secondary hover:bg-gray-100 dark:hover:bg-gray-700 md:hover:bg-transparent md:dark:hover:bg-transparent "> Sponsorship </a><a href="/en/about/" class="block py-2 px-3 md:p-0 rounded text-heading md:hover:text-secondary hover:bg-gray-100 dark:hover:bg-gray-700 md:hover:bg-transparent md:dark:hover:bg-transparent "> About </a> </ul> </nav> </div> </div> <div id="placeholder" class="hidden" data-astro-cid-4wsjtibl></div> </div> <script>(function(){const enableSticky = true;
const enableStickyInMobile = true;

  window.onload = function () {
    checkStickyHeader();
    stickySetup();
  };

  window.addEventListener('resize', stickySetup);

  function checkStickyHeader() {
    const title = document.getElementById('blogTitle');
    const stickyHeader = document.getElementById('stickyHeader');
    const placeholder = document.getElementById('placeholder');

    if (title && stickyHeader && placeholder) {
      const offset = title.offsetTop + title.offsetHeight;

      if (shouldStick() && window.scrollY >= offset) {
        stickyHeader.classList.add('sticky');
        placeholder.style.display = 'block';
        placeholder.style.height = `${stickyHeader.offsetHeight}px`;
      } else {
        stickyHeader.classList.remove('sticky');
        placeholder.style.display = 'none';
      }
    }
  }

  function shouldStick() {
    if (!enableSticky) return false;

    let isMobile = window.matchMedia('(max-width: 640px)').matches;
    if (isMobile && !enableStickyInMobile) return false;

    return true;
  }

  function stickySetup() {
    window.onscroll = checkStickyHeader;
  }
})();</script>  </header>  <main class="w-full mx-auto max-w-3xl p-4 md:p-6 "> <div class="container mx-auto space-y-6 sm:space-y-12">   <div class="mx-auto space-y-4 text-center py-10 " style="width:80%"> <div class="flex mx-auto justify-center"> <div class="flex mx-auto justify-center"> <a class="text-xs font-medium sm:font-semibold mx-2 text-muted hover:text-secondary tracking-normal" href="/en/tags/Core-Data/">
#Core Data </a><a class="text-xs font-medium sm:font-semibold mx-2 text-muted hover:text-secondary tracking-normal" href="/en/tags/Apple-Event/">
#Apple Event </a> <a class="text-xs font-medium sm:font-semibold mx-2 text-muted hover:text-secondary tracking-wide" href="/zh/posts/core-data-of-ask-apple-2022-2/" id="language-switcher-for-topic"> #‰∏≠ÊñáÁâà </a> </div> </div> <h1 class="text-2xl font-bold leadi md:text-3xl text-heading ">Ask Apple 2022 Q&amp;A Related on Core Data (Part 2)</h1> <p class="text-sm text-default"> <a itemprop="author" href="https://x.com/intent/follow?screen_name=fatbobman" target="_blank" class="hover:text-secondary font-medium">Fatbobman</a> <!-- <time datetime={`${post.data.publishDate.toISOString()}`}>{date}</time> --> </p> <p class="text-xs text-muted"> Published on <time datetime="2022-10-24T00:12:00.000Z">Oct 24, 2022</time>  </p> </div> <svg style="display: none;"> <symbol id="icon-clipboard" viewBox="0 0 1024 1024"> <path d="M426.666667 42.666667l170.666667 0q41.344 0 74.325333 23.850667t46.336 61.482667l50.005333 0q52.992 0 90.496 37.504t37.504 90.496l0 597.333333q0 52.992-37.504 90.496t-90.496 37.504l-512 0q-52.992 0-90.496-37.504t-37.504-90.496l0-597.333333q0-52.992 37.504-90.496t90.496-37.504l50.005333 0q13.312-37.674667 46.336-61.482667t74.325333-23.850667zM768 213.333333l-50.005333 0q-13.312 37.674667-46.336 61.482667t-74.325333 23.850667l-170.666667 0q-41.344 0-74.325333-23.850667t-46.336-61.482667l-50.005333 0q-17.664 0-30.165333 12.501333t-12.501333 30.165333l0 597.333333q0 17.664 12.501333 30.165333t30.165333 12.501333l512 0q17.664 0 30.165333-12.501333t12.501333-30.165333l0-597.333333q0-17.664-12.501333-30.165333t-30.165333-12.501333zM597.333333 128l-170.666667 0q-17.664 0-30.165333 12.501333t-12.501333 30.165333 12.501333 30.165333 30.165333 12.501333l170.666667 0q17.664 0 30.165333-12.501333t12.501333-30.165333-12.501333-30.165333-30.165333-12.501333z"></path> </symbol> <symbol id="icon-check" viewBox="0 0 1024 1024"> <path d="M421.858 683.366l401.796-448.518c18.66-20.828 50.668-22.586 71.498-3.928 20.828 18.66 22.586 50.67 3.928 71.498L463.638 788.494c-18.606 20.768-50.5 22.586-71.344 4.066l-263.29-233.924c-20.906-18.572-22.796-50.576-4.222-71.48 18.574-20.906 50.576-22.796 71.48-4.222L421.86 683.366z"></path> </symbol> </svg> <div class="relative" id="article-area"> <article class="prose dark:prose-invert mx-auto w-full "> <div> 

<p>Ask Apple provides developers with an opportunity to directly communicate with Apple engineers outside of WWDC. This article summarizes some of the Q&amp;A related to Core Data from this event, and adds a bit of personal insight. This is Part 2 of the series.</p>
<blockquote>
<p><a href="/en/posts/core-data-of-ask-apple-2022/" target="_blank">Part One</a></p>
</blockquote>
<h2 id="qa">Q&amp;A</h2>
<h3 id="derived-attributes">Derived Attributes</h3>
<p>Q: Hi, could you share more examples of syntax for ‚ÄúDerived Attributes‚Äù besides <code>.@count</code>? Thank you in advance.</p>
<p>A: There are some explanations in the <a href="https://developer.apple.com/documentation/coredata/nsderivedattributedescription?utm_source=Fatbobman%20Blog&utm_medium=web" rel="noreferrer noopener">documentation</a> of NSDerivedAttributeDescription.</p>
<blockquote>
<p>The value of a derived attribute is derived from one or more other attribute values. In simple terms, this means that when a managed object instance is created or modified, Core Data automatically generates a value for the derived attribute. The value is calculated based on a pre-set derived expression and other attribute values. For more details, please refer to the article <a href="/en/posts/derivedandtransient/" target="_blank">How to Use Derived and Transient Attributes in Core Data</a>.</p>
</blockquote>
<h3 id="synchronization-of-main-app-and-extension-app-data">Synchronization of Main App and Extension App Data</h3>
<p>Q: I have a main application and an extension app, both of which read from the same Core Data database. However, when I make changes in the main app, my extension app does not see the changes until it is restarted. Should I simply solve this problem by calling <code>NSManagedObjectContext.refreshAllObjects</code>, or do I have to use the more difficult method of enabling history tracking, detecting remote changes, merging changes from transactions, and cleaning transaction history?</p>
<p>A: You should use the NSPersistentStoreRemoteChangeNotificationOptionKey option on the NSPersistentStore to enable remote change notifications. The Persistent History section of this method helps ensure that you do not repeatedly retrieve data from the database and only refresh when the data you need has changed.</p>
<blockquote>
<p>This is another question about persistent history tracking. Apple should really provide clearer documentation for this feature. The <a href="https://github.com/fatbobman/PersistentHistoryTrackingKit/blob/main/README.md?utm_source=Fatbobman%20Blog&utm_medium=web" rel="noreferrer noopener">Persistent History Tracking Kit</a> can reduce your development workload.</p>
</blockquote>
<h3 id="how-to-update-the-spotlight-index-of-core-data-that-has-been-deleted-through-the-file-system">How to update the Spotlight index of Core Data that has been deleted through the file system</h3>
<p>Q: Is it possible to specify the storage location of the Spotlight index when indexing the content of Core Data? I have a document-based application, where some files and the sqlite file created by Core Data are packaged together. If a user deletes a document outside of the application, for example in Finder, I want the Spotlight index to be deleted with it. So, if the index can be stored in the package folder, it can solve this problem. Is there any way to handle this properly?</p>
<p>A: It sounds like a valuable feature suggestion, and we encourage you to submit a feedback request! Currently, calling APIs from the application is the only way to remove items from the index.</p>
<blockquote>
<p>Currently, Spotlight cannot handle this situation. If a user deletes these documents through the file system (without going through the application), the only way to remove the corresponding index is for the application to know which document was deleted and then delete the index belonging to that document through CSSearchableIndex.default().deleteSearchableItems(withDomainIdentifiers:). Otherwise, the indexes can only disappear from Spotlight automatically after they expire. Refer to <a href="/en/posts/spotlight/" target="_blank">howcasing Core Data in Applications with Spotlight</a> for more information.</p>
</blockquote>
<h3 id="how-is-the-performance-of-fetchrequest">How is the performance of @FetchRequest?</h3>
<p>Q: Is @FetchRequest more performant than fetching data in the ViewModel‚Äôs initializer through a fetchRequest?</p>
<p>A: The cost of @FetchRequest depends on how much the results change after the initial data fetch, while the cost of manually refetching depends on the total number of results. @FetchRequest wraps an NSFetchedResultsController, which has no special logic of its own.</p>
<h3 id="ways-to-retrieve-data">Ways to Retrieve Data</h3>
<p>Q: I want to know which way is a better approach?</p>
<ol>
<li>Load CoreData data all at once in the application and save it in a local variable</li>
<li>Use multiple FetchRequests</li>
</ol>
<p>Currently, I am using UICalendarView in SwiftUI and retrieving data from CoreData. Can I load data for each date in the calendar through a fetchRequest in the <code>calendarView(_:decorationFor:)</code> method (referring to the second approach)? Or should I just use one fetchRequest and save the data locally, then access it through the above method (referring to the first approach)? I want to know what the best practice is here. Thank you!</p>
<p>A: Generally, different views frequently use different retrieval requests. For content such as date ranges, you may want to retrieve them in batches. Lengthy I/O will cause your view‚Äôs drawing to freeze. Short I/O will cause you to issue too many separate requests, which greatly reduces efficiency. The Core Data Performance tool in Instruments can help investigate what is the best solution for you.</p>
<blockquote>
<p>UICalendarView is a control added in iOS 16. MultiDatePicker only implements part of its functionality. UICalendarView allows developers to add decoration for specific dates, and the usage can be found in the article <a href="http://chriswu.com/posts/swiftui/uicalendarview/?utm_source=Fatbobman%20Blog&utm_medium=web" rel="noreferrer noopener">Getting UIKit‚Äôs UICalendarView from iOS 16 fully functioning in a SwiftUI app</a>.</p>
</blockquote>
<h3 id="retrieving-nsattributedstring">Retrieving NSAttributedString</h3>
<p>Q: I need to store NSAttributedString in a database and be able to search for any text within the attributed string. Is creating two separate attributes, one containing the plain text string and the other containing the attributed string as a Transformable data, the best method? Is there another way to reduce the amount of data stored without using two attributes?</p>
<p>A: You are using the currently recommended approach. Additionally, plain text attributes can be indexed by Spotlight, making them searchable by the system.</p>
<blockquote>
<p>Generating plain text corresponding to the data for searching is a common approach. In some cases, even if the original content of the attribute is plain text, its search efficiency can be improved by generating a normalized version (a version that ignores case and diacritics).</p>
</blockquote>
<h3 id="private-context">Private Context</h3>
<p>Q: How to configure the Core Data Stack so that users can continue to use the application while changes are being saved in the background?</p>
<p>A: NSPersistentContainer can meet your needs. You can use the viewContext to drive the UI interaction with users, and create a private context through the newBackgroundContext method to complete data saving on it. Please make sure to enable automatic merging changes on the viewContext so that changes on the backgroundContext can be automatically updated in the viewContext.</p>
<blockquote>
<p>Whether you explicitly create a private context through newBackgroundContext or operate in a temporary private context through performBackgroundTask, you cannot use managed objects obtained from the viewContext in the private context. Managed objects are thread-bound. Even if they come from private contexts but belong to different contexts, they can only be used in their corresponding contexts. For more information, please refer to the article <a href="/en/posts/concurrencyofcoredata/" target="_blank">Several Tips on Core Data Concurrency Programming</a>.</p>
</blockquote>
<h3 id="how-to-transition-from-userdefaults-to-core-data">How to transition from UserDefaults to Core Data</h3>
<p>Q: Currently, my app uses @AppStorage for data persistence. I have three main model objects that are stored on the current device. I want to switch to Core Data + CloudKit. How can I ensure that existing local @AppStorage data is safely transitioned to Core Data + CloudKit when existing users open the new app?</p>
<p>A: Upon launch, check if UserDefaults is not empty, then import into Core Data and delete local UserDefaults.</p>
<h3 id="asynchronous-saving">Asynchronous Saving</h3>
<p>Q: Hi, is it necessary to use asynchronous when saving photo data to Core Data? Thanks!</p>
<p>A: Are you asking whether to use perform or performAndWait? I think it depends on your requirements and the desired UX experience.</p>
<blockquote>
<p>perform and performAndWait correspond to asynchronous/synchronous operations within the context. For private contexts, even using performAndWait usually does not affect the UI.</p>
</blockquote>
<h3 id="data-model-source-files-classcategorymanual">Data Model Source Files (Class/Category/Manual)</h3>
<p>Q: I would like some guidance on using Core Data model entity generation (Codegen). For example, when should I use Manual? I‚Äôm also unsure of the role of Category/Extension and how to choose between it and Class?</p>
<p>A: Most people use Class and add any custom methods they need in their own managed object extensions. However, in rare cases, such as when you need to add properties that must be declared in the class definition, you should use Category/Extension to give you control over the required class declaration.</p>
<blockquote>
<p>In earlier versions of Xcode, using Class mode would generate two files, xxx+CoreDataClass.swift and xxx+CoreDataProperties.swift. xxx+CoreDataProperties.swift created the declarations for the entity‚Äôs properties through extensions, while xxx+CoreDataClass.swift was the class‚Äôs definition. Category/Extension mode only generated xxx+CoreDataProperties.swift, which means the user had to write the class definition themselves. However, in newer versions of Xcode (at least from version 13), there is no longer any difference between the two. Both will generate two files, and if the user adds custom properties to the class definition, Xcode will not overwrite them in the generated code. After generating the files, the Entity needs to be switched to Manual/None mode, otherwise Xcode will show a duplicate type declaration error (there is another Entity definition saved in the project), and if it still cannot be compiled, the build cache should be cleared.</p>
</blockquote>
<h3 id="deleting-data-through-cloudkit-dashboard">Deleting Data Through CloudKit Dashboard</h3>
<p>Q: I have a question related to syncing with Core Data and CloudKit. I noticed that when I delete a record from the CloudKit database using Safari client (through CloudKit Dashboard), the object still remains in the Core Data data store on the device. Is this intentional? How can I sync these changes between CloudKit manager and the device? Thank you!</p>
<p>A: It is not yet clear whether this workflow generates push notifications to NSPersistentCloudKitContainer. You should see the changes if you restart the application.</p>
<h3 id="how-to-determine-if-synchronization-is-complete">How to determine if synchronization is complete</h3>
<p>Q: I am using NSPersistentCloudKitContainer and want to improve the user experience when downloading data from iCloud for the first time. Is there a way to tell the user when the data has finished syncing? I know about NSPersistentCloudKitContainer.eventChangedNotification, but it seems there is no real way to tell the app when syncing has completed.</p>
<p>A: Other devices can always make an infinite stream of new changes. The best you can do is to see which imports have been initiated and their completion status. You can file a feedback for an enhancement for an approximate answer.</p>
<blockquote>
<p>Apple engineers did not give a positive answer to this question. The issue of sync progress has been raised multiple times at WWDC, developer forums, and this Ask Apple, but as of yet, there is no good solution. My suggestion is to give users a prompt in the app (especially during first launch) when syncing is in the import state (obtained through eventChangedNotification) by using dynamic elements such as ProgressView. The synchronization mechanism of Core Data with CloudKit is divided into multiple stages. That is to say, for the first synchronization, the import status is likely to appear multiple times (it is impossible to determine the end of the import by changes in import status). By providing import status prompts, you can alleviate user confusion to some extent. Additionally, you can consider using CloudKit API to query the number of data records in the cloud and compare them with the number of records already synced to the local device to obtain an approximate sync progress (this method is only applicable to simple data models with less complex relationships).</p>
</blockquote>
<h3 id="optional-nature-of-entity-properties">Optional nature of entity properties</h3>
<p>Q: The optional nature of entity properties in Core Data behaves unexpectedly. If I mark a property as optional, it should not have a default value, and the managed property should always be an optional property. If I mark it as non-optional, it should require a default value, and the managed property should always be non-optional. Can we expect such a correction in the future (at least in new projects)?</p>
<p>A: The optional nature of Core Data predates the existence of Swift, allowing properties to be temporarily invalid. For example, when you create a new object with a string property, the initial value (without a default value) is nil, which is fine until the object is validated (usually at save time). In the case of optional scalars, Core Data is limited by the type restrictions expressible in Objective-C (for example, there is no type like Int64, and optional types can only be expressed as NSNumber). Submitting a feedback report on this idea may be your best option.</p>
<blockquote>
<p>The optional nature of entity properties can be a confusing area for beginners in Core Data. Even if you mark an attribute (such as a string) as non-optional (with a default value set) in the model editor, the return value when retrieving the property value from the managed object will still be of type <code>Optional&lt;String&gt;</code>. For the above problem, the following solutions can be considered: 1. For some types of attributes, you can manually define (or modify the Xcode generated subclass source file) to change the type String? in the generated code to String; 2. Declare a computed property of a non-optional value, and process the optional value attribute value in it; 3. Convert the managed object instance as a whole to a value type that is more friendly to SwiftUI views.</p>
</blockquote>
<h3 id="manually-sorting-data">Manually Sorting Data</h3>
<p>Q: In my application, users can rearrange items in a table view by dragging and dropping. My data model has a userOrder attribute of type Int16. What is a good way to save the new order of the data after the table view rows have been reordered?</p>
<p>A: Instead of storing the first object with userOrder == 0, the second object with userOrder == 1, and the third object with userOrder == 2, perhaps modeling it as an ordered relationship is a better choice. Let Core Data do the work for you. To manage an ordered relationship, Core Data calculates an object‚Äôs index in UInt16 space, exactly halfway between the previous and next objects. When the integer space is exhausted, it jumps over an object in either direction and evenly redistributes those objects.</p>
<blockquote>
<p>Unfortunately, ordered relationships cannot be used when Core Data cloud sync is enabled. In this case, the approach the asker is currently using is the correct choice.</p>
</blockquote>
<h3 id="filtering-relationship-data">Filtering Relationship Data</h3>
<p>Q: I found that using @FetchRequest in SwiftUI is a great way to bind the user interface with Core Data. However, when trying to achieve the same seamless binding using relationships, I encountered a small issue. Since NSManagedObjects represent a one-to-many relationship in the form of an NSSet, I have to retrieve the ‚Äúchildren‚Äù (data of the many side) in its own @FetchRequest, losing the benefits of Core Data relationship properties. What am I doing wrong?</p>
<p>A: This sounds similar to another issue where I suggested using predicates to filter objects that only have a certain relationship. I think the same approach should work for you? Let Core Data do the filtering work by building a predicate, like <code>NSPredicate(format: &quot;country = %@&quot;, country)</code>.</p>
<blockquote>
<p>NSManagedObject conforms to the ObservableObject protocol, which means it will notify subscribers through Publishers when its property values change. Unfortunately, property value changes in relationship objects are not included in the monitored changes. Retrieving the relationship object list through predicates may be the best way for now. Additionally, Antoine van der Lee wrote an article on extending NSFetchedResultsController to observe relationship changes: <a href="https://www.avanderlee.com/swift/nsfetchedresultscontroller-observe-relationship-changes/?utm_source=Fatbobman%20Blog&utm_medium=web" rel="noreferrer noopener">NSFetchedResultsController extension to observe relationship changes</a>.</p>
</blockquote>
<h3 id="how-to-reflect-the-change-of-ordered-objects-in-persistent-history-tracking">How to reflect the change of ordered objects in persistent history tracking</h3>
<p>Q: How does persistent history reflect the change of the order of objects in the ‚Äúordered‚Äù relationship? Does NSPersistentHistoryChange include the parent entity or child entity? What properties are included in updatedProperties?</p>
<p>A: For sorting changes, both sides of the relationship will be displayed as NSPersistentHistoryChange, and the relationship will be listed in updatedProperties.</p>
<h3 id="passing-managed-objects-via-navigationdestination">Passing Managed Objects via navigationDestination</h3>
<p>Q: I have a question related to SwiftUI‚Äôs navigationDestination(for: myCoreDataClass) that requires my NSManagedObjects to conform to the Codable protocol (presumably to persist the Path). I hand-coded the NSManagedObject code and implemented the Codable protocol to achieve this goal. Is there a better way to handle this? Thank you.</p>
<p>A: Codable cannot accurately encode objects in an object graph individually. Instead, you should create an encodable transform that suits the subset of data needed here. Perhaps URIRepresentation could be used.</p>
<blockquote>
<p>When NSManagedObject includes relationships, encoding it is extremely difficult. The only requirement for incoming data in navigationDestination is to conform to the Hashable protocol, so passing in the URL corresponding to the managed object ID is likely the best choice (through objectID.uriRepresentation, the URL conforms to the Codable protocol, satisfying the requirement to persist the Path).</p>
</blockquote>
<h2 id="summary">Summary:</h2>
<p>In the summary of the two Q&amp;A compilations, I neglected the questions that did not have a conclusion.</p> </div> <div class="mt-12 grid grid-cols-1 sm:grid-cols-2 gap-4"><a href="https://www.buymeacoffee.com/fatbobman" target="_blank" rel="noopener" class="block p-5 bg-orange-50/80 dark:bg-blue-900/30 border-2 border-orange-200 dark:border-blue-700 rounded-xl hover:shadow-lg hover:scale-[1.02] transition-all group"><div class="flex items-start gap-3"><div class="text-3xl">‚òïÔ∏è</div><div class="flex-1"><div class="text-base font-bold text-heading mb-1 group-hover:text-orange-700 dark:group-hover:text-blue-200 transition-colors">
Buy Me a Coffee
</div><div class="text-sm text-default">
Support my work with a coffee
</div></div><svg class="w-5 h-5 text-orange-600 dark:text-blue-400 opacity-0 group-hover:opacity-100 transition-opacity" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 7l5 5m0 0l-5 5m5-5H6"></path></svg></div></a><a href="/en/sponsorship/" class="block p-5 bg-orange-50/80 dark:bg-blue-900/30 border-2 border-orange-200 dark:border-blue-700 rounded-xl hover:shadow-lg hover:scale-[1.02] transition-all group"><div class="flex items-start gap-3"><div class="text-3xl">üì¢</div><div class="flex-1"><div class="text-base font-bold text-heading mb-1 group-hover:text-orange-700 dark:group-hover:text-blue-200 transition-colors">
Sponsorship
</div><div class="text-sm text-default">
Reach 50,000+ Swift developers
</div></div><svg class="w-5 h-5 text-orange-600 dark:text-blue-400 opacity-0 group-hover:opacity-100 transition-opacity" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 7l5 5m0 0l-5 5m5-5H6"></path></svg></div></a></div> </article> <section class="pt-10 pb-10" id="related-posts"><div class="grid grid-cols-1 gap-2 md:grid-cols-2 lg:grid-cols-3 md:gap-4" id="more-tips"><a class="group rounded-md py-3 px-4 bg-gray-100 dark:bg-gray-800 border border-gray-200 dark:border-gray-700 
            hover:bg-gray-200 dark:hover:bg-gray-700 active:bg-gray-300 dark:active:bg-gray-600 flex items-stretch gap-2
            " href="/en/posts/in-depth-guide-to-icloud-documents/" id="relatedPosts-In-Depth Guide to iCloud Documents: Fundamental Setup and File Operations"><span class="font-medium text-sm text-heading  group-hover:dark:text-white group-hover:text-black">In-Depth Guide to iCloud Documents: Fundamental Setup and File Operations</span></a><a class="group rounded-md py-3 px-4 bg-gray-100 dark:bg-gray-800 border border-gray-200 dark:border-gray-700 
            hover:bg-gray-200 dark:hover:bg-gray-700 active:bg-gray-300 dark:active:bg-gray-600 flex items-stretch gap-2
            " href="/en/posts/impressions-of-wwdc23/" id="relatedPosts-WWDC 23, First Impressions of SwiftUI 5 and SwiftData"><span class="font-medium text-sm text-heading  group-hover:dark:text-white group-hover:text-black">WWDC 23, First Impressions of SwiftUI 5 and SwiftData</span></a><a class="group rounded-md py-3 px-4 bg-gray-100 dark:bg-gray-800 border border-gray-200 dark:border-gray-700 
            hover:bg-gray-200 dark:hover:bg-gray-700 active:bg-gray-300 dark:active:bg-gray-600 flex items-stretch gap-2
            " href="/en/posts/coredatawithcloudkit-1/" id="relatedPosts-Core Data with CloudKit: The Basics"><span class="font-medium text-sm text-heading  group-hover:dark:text-white group-hover:text-black">Core Data with CloudKit: The Basics</span></a><a class="group rounded-md py-3 px-4 bg-gray-100 dark:bg-gray-800 border border-gray-200 dark:border-gray-700 
            hover:bg-gray-200 dark:hover:bg-gray-700 active:bg-gray-300 dark:active:bg-gray-600 flex items-stretch gap-2
            " href="/en/posts/swiftui-of-ask-apple-2022-2/" id="relatedPosts-Ask Apple 2022 Q&#38;A Related to SwiftUI (Part 2)"><span class="font-medium text-sm text-heading  group-hover:dark:text-white group-hover:text-black">Ask Apple 2022 Q&amp;A Related to SwiftUI (Part 2)</span></a><a class="group rounded-md py-3 px-4 bg-gray-100 dark:bg-gray-800 border border-gray-200 dark:border-gray-700 
            hover:bg-gray-200 dark:hover:bg-gray-700 active:bg-gray-300 dark:active:bg-gray-600 flex items-stretch gap-2
            hidden lg:flex" href="/en/posts/swiftui-of-ask-apple-2022-1/" id="relatedPosts-Ask Apple 2022 Q&#38;A Related to SwiftUI (Part 1)"><span class="font-medium text-sm text-heading  group-hover:dark:text-white group-hover:text-black">Ask Apple 2022 Q&amp;A Related to SwiftUI (Part 1)</span></a></div></section> <div class="w-full mx-auto text-center pb-0 sm:pb-6 pt-8"> <div id="custom-substack-embed" data-subscribeText="Subscribe" data-placeholder="Enter email" data-anchor="related-posts" style="opacity: 0; transition: opacity 0.3s;"></div> <iframe class="sm:w-80 w-[480px] mx-auto dark:opacity-80 dark:rounded-lg dark:shadow-2xl dark:border-gray-600" src="https://weekly.fatbobman.com/embed" height="320" style="border:1px solid #EEE; background:white; width: 100%; max-width: 480px;"></iframe> <div class="text-xs font-medium text-heading p-4 ">Weekly Swift &amp; SwiftUI highlights!</div> </div> <!-- <Author lang={lang} /> --> <div id="copy-alert" class="hidden fixed bottom-28 right-5"> <div id="alert-1" class="flex items-center p-4 mb-4 text-blue-800 rounded-lg bg-blue-50/90 dark:bg-gray-800/90 dark:text-blue-400" role="alert"> <div class="text-sm font-medium">Link copied</div> </div> </div> <style>
  .copy-icon {
    position: absolute;
    left: -30px; /* Ê†πÊçÆÊÇ®ÁöÑÂ∏ÉÂ±ÄË∞ÉÊï¥‰ΩçÁΩÆ */
    top: 50%; /* Â∞ÜÂõæÊ†áÂÆö‰ΩçÂà∞Ê†áÈ¢òÁöÑ‰∏≠Èó¥È´òÂ∫¶ */
    transform: translateY(-50%); /* ÂûÇÁõ¥Â±Ö‰∏≠ÂØπÈΩêÂõæÊ†á */
    cursor: pointer;
    transition: opacity 0.6s ease;
    pointer-events: all; /* ÂßãÁªàÂìçÂ∫îÈº†Ê†á‰∫ã‰ª∂ */
  }

  article h2,
  article h3,
  article h4,
  article h5 {
    position: relative;
  }

  #copy-alert {
    position: fixed;
    bottom: -100px; /* ÂàùÂßãÂú®ËßÜÁ™ó‰∏ãÊñπ */
    right: 20px;
    transition: bottom 0.5s ease-in-out;
  }

  /* ËøõÂÖ•Âä®Áîª */
  @keyframes slideIn {
    from {
      bottom: -100px;
    }
    to {
      bottom: 0px;
    }
  }

  /* Ê∂àÂ§±Âä®Áîª */
  @keyframes slideOut {
    from {
      bottom: 20px;
    }
    to {
      bottom: -100px;
    }
  }
</style> <script defer>
  var hideTimeout; // Áî®‰∫é‰øùÂ≠òËá™Âä®ÈöêËóèÂÆöÊó∂Âô®ÁöÑÂºïÁî®
  document.querySelectorAll('article h2, article h3, article h4, article h5').forEach(function (header) {
    var copyIcon = document.createElement('span');
    copyIcon.innerHTML =
      '<svg fill="currentColor" aria-hidden="true" stroke="currentColor" class="w-5 h-5 hidden md:block hover:text-secondary" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg"><path d="M861.866667 164.266667c-87.466667-87.466667-230.4-89.6-320-2.133334l-68.266667 68.266667c-12.8 12.8-12.8 32 0 44.8s32 12.8 44.8 0l68.266667-68.266667c64-61.866667 166.4-61.866667 230.4 2.133334 64 64 64 168.533333 2.133333 232.533333l-117.333333 119.466667c-34.133333 34.133333-81.066667 51.2-128 49.066666-46.933333-4.266667-91.733333-27.733333-119.466667-66.133333-10.666667-14.933333-29.866667-17.066667-44.8-6.4-14.933333 10.666667-17.066667 29.866667-6.4 44.8 40.533333 53.333333 100.266667 87.466667 166.4 91.733333h17.066667c59.733333 0 119.466667-23.466667 162.133333-68.266666l117.333333-119.466667c83.2-89.6 83.2-234.666667-4.266666-322.133333z"></path><path d="M505.6 750.933333l-66.133333 68.266667c-64 61.866667-166.4 61.866667-230.4-2.133333-64-64-64-168.533333-2.133334-232.533334l117.333334-119.466666c34.133333-34.133333 81.066667-51.2 128-49.066667 46.933333 4.266667 91.733333 27.733333 119.466666 66.133333 10.666667 14.933333 29.866667 17.066667 44.8 6.4 14.933333-10.666667 17.066667-29.866667 6.4-44.8-40.533333-53.333333-100.266667-87.466667-166.4-91.733333-66.133333-4.266667-130.133333 19.2-177.066666 66.133333l-117.333334 119.466667c-85.333333 89.6-85.333333 234.666667 2.133334 322.133333 44.8 44.8 102.4 66.133333 162.133333 66.133334 57.6 0 115.2-21.333333 160-64l66.133333-68.266667c12.8-12.8 12.8-32 0-44.8-14.933333-10.666667-34.133333-10.666667-46.933333 2.133333z"></path></svg>'; // ‰ΩøÁî®ÊÇ®ÈÄâÊã©ÁöÑÂõæÊ†á
    copyIcon.className = 'copy-icon';
    copyIcon.style.opacity = '0'; // ÈªòËÆ§ÈÄèÊòé
    header.insertBefore(copyIcon, header.firstChild);

    header.addEventListener('mouseover', function () {
      copyIcon.style.opacity = '1';
    });
    header.addEventListener('mouseout', function () {
      copyIcon.style.opacity = '0';
    });

    copyIcon.addEventListener('click', function () {
        var url = window.location.href.split('#')[0] + '#' + header.id;
        navigator.clipboard.writeText(url).then(function () {
            var alertDiv = document.getElementById('copy-alert');
            if (alertDiv) {
                alertDiv.classList.remove('hidden'); // Á°Æ‰øùÊèêÁ§∫Ê°ÜÊòØÂèØËßÅÁöÑ
                alertDiv.style.display = 'block'; // ÊòæÁ§∫ÊèêÁ§∫Ê°Ü
                clearTimeout(hideTimeout); // Ê∏ÖÈô§‰πãÂâçÁöÑÂÆöÊó∂Âô®
                alertDiv.style.animation = 'none'; // ÂÖàÊ∏ÖÈô§‰πãÂâçÁöÑÂä®Áîª
                setTimeout(function () {
                    alertDiv.style.animation = 'slideIn 0.5s forwards'; // Â∫îÁî®Êñ∞Âä®Áîª
                }, 10);

                // ËÆæÁΩÆËá™Âä®ÈöêËóèÂÆöÊó∂Âô®
                hideTimeout = setTimeout(function () {
                    alertDiv.style.animation = 'slideOut 0.5s forwards'; // Â∫îÁî®Ê∂àÂ§±Âä®Áîª
                    setTimeout(function () {
                        alertDiv.style.display = 'none';
                    }, 500);
                }, 3000);
            }
        });
    });
  });
</script> <script>
function copyCode(button, event) {
  event.preventDefault();
  const codeBlock = button.parentNode.nextElementSibling.textContent; // Ëé∑Âèñ‰ª£Á†ÅÂÜÖÂÆπ
  navigator.clipboard.writeText(codeBlock).then(() => {
    // ÊòæÁ§∫ "Copied"
    button.querySelector('.copy-text').style.display = 'none';
    button.querySelector('.copied-text').style.display = 'inline';

    // 3ÁßíÂêéÊÅ¢Â§ç
    setTimeout(() => {
      button.querySelector('.copy-text').style.display = 'inline';
      button.querySelector('.copied-text').style.display = 'none';
    }, 3000);
  });
}
</script> <script>(function(){const url = "https://fatbobman.com/ads/en";

  // Ê†πÊçÆ‰∏≠Ëã±ÊñáÂØπÂ∫î‰∏çÂêåÁöÑ adCacheKey
  const adCacheKey = 'dynamicAdCache' + (window.location.pathname.includes('/zh/') ? 'ZH' : 'EN');

  // Â∞ùËØï‰ªéÁºìÂ≠ò‰∏≠Ëé∑ÂèñÂπøÂëä
  const cachedAd = JSON.parse(localStorage.getItem(adCacheKey));
  const now = Date.now();

  if (cachedAd && cachedAd.expiresAt > now) {
    console.log('Using cached ad');
    console.log(cachedAd.expiresAt - now);
    // Â¶ÇÊûúÁºìÂ≠òÊúâÊïàÔºåÁõ¥Êé•‰ΩøÁî®ÁºìÂ≠òÁöÑÂπøÂëä
    renderAd(cachedAd.content);
  } else {
    console.log('Fetching ad from the server');
    // Â¶ÇÊûúÁºìÂ≠òÊó†ÊïàÔºå‰ªéÊúçÂä°Âô®Ëé∑ÂèñÂπøÂëä
    fetch(url, {
      headers: {
        'Accept': 'text/html',
      },
      cache: 'default'
    })
      .then(response => {
        const maxAgeMatch = response.headers.get('Cache-Control')?.match(/max-age=(\d+)/);
        const maxAge = maxAgeMatch ? parseInt(maxAgeMatch[1], 10) : 0;

        if (!response.ok || maxAge <= 0) {
          throw new Error('Invalid response or missing Cache-Control');
        }

        return response.text().then(adContent => {
          // const expiresAt = now + maxAge * 1000; // ËÆ°ÁÆóÂ§±ÊïàÊó∂Èó¥
          // Ëß£Êûê max-age
          const cc = response.headers.get('Cache-Control') || '';
          const maxAge = parseInt((cc.match(/(?:^|,)\s*max-age=(\d+)/)?.[1] ?? '0'), 10);

          // ËØªÂèñ CDN Age ‰∏éÊúçÂä°Á´ØÊó∂Èó¥
          const age = parseInt(response.headers.get('Age') || '0', 10);
          // const serverDate = response.headers.get('Date');

          // ËÆ°ÁÆóÂâ©‰Ωô TTLÔºà‰ºòÂÖàÁî® Age ÊäµÊâ£Ôºâ
          const ttlLeftMs = Math.max(0, (maxAge - age) * 1000);

          // Â§±ÊïàÊó∂Èó¥Ôºö‰ª•ÂΩìÂâçÊú¨Âú∞Êó∂Èó¥Âä†Ââ©‰Ωô TTLÔºàËã•Ë¶ÅÂÆåÂÖ®ÊåâÊúçÂä°Á´ØÊó∂Èó¥ÔºåÂèØÁî® serverDate ÂÅöÂü∫Á∫øÔºâ
          const expiresAt = Date.now() + ttlLeftMs;

          // ÁºìÂ≠òÂπøÂëäÂÜÖÂÆπ
          localStorage.setItem(adCacheKey, JSON.stringify({ content: adContent, expiresAt }));
          // Ê∏≤ÊüìÂπøÂëä
          renderAd(adContent);
        });
      })
      .catch(error => console.error('Error loading the ad:', error));
  }

  // Ê∏≤ÊüìÂπøÂëäÂáΩÊï∞
  function renderAd(html) {
    const adSlots = document.querySelectorAll('.dynamic-ad-container');
    adSlots.forEach(slot => {
      slot.innerHTML = html;
    });
  }
})();</script> <script type="module">var c=document.querySelectorAll("article");c.forEach(function(r){var a=r.querySelectorAll("a");a.forEach(function(e){var t=e.getAttribute("href");t&&t.startsWith("http")&&!t.includes("fatbobman.com")&&!t.includes("fatbobman.github.com")&&!t.includes("localhost")&&e.setAttribute("target","_blank")})});</script> <!-- <LeaveFeedback lang={lang} /> --> <!-- <BottomWeeklySubscribe lang={lang} /> --> <div id="gitalk-container" data-comment-id="Ask Apple 2022 ‰∏≠‰∏é Core Data ÊúâÂÖ≥ÁöÑÈóÆÁ≠î (‰∏ãÔºâ" data-lang="en" data-repo="blogComments" data-createIssueManually="true" data-anchor="related-posts" class="pb-16"></div>

    <script defer>
      document.addEventListener('DOMContentLoaded', async function () {
      const container = document.getElementById('custom-substack-embed');
      let anchor = '';
      if (container) {
        anchor = container.getAttribute('data-anchor') || '';
      }
        // ÊèêÂâçÊ£ÄÊü•ÊòØÂê¶ÈúÄË¶ÅÂä†ËΩΩËØÑËÆ∫
        try {
          const response = await fetch('https://fatbobman.com/status/comment');
          const data = await response.text();
          console.log(data, "comment");

          if (data !== '1') {
            console.log('ËØÑËÆ∫ÂäüËÉΩÊú™ÂêØÁî®ÔºåË∑≥ËøáÁõëÊéßÂíåÂä†ËΩΩÊìç‰Ωú„ÄÇ');
            return; // ÊèêÂâçËøîÂõûÔºåË∑≥ËøáÂêéÁª≠ÈÄªËæë
          }
        } catch (error) {
          console.error('Ê£ÄÊü•ËØÑËÆ∫Áä∂ÊÄÅÊó∂Âá∫ÈîôÔºö', error);
          return; // Âá∫Áé∞ÈîôËØØÊó∂‰πüË∑≥ËøáÂêéÁª≠ÈÄªËæë
        }

        // Â¶ÇÊûúËøîÂõûÂÄº‰∏∫ "1"ÔºåÂàôÂêØÂä®ËßÇÂØüÂô®
        const observerTarget = document.getElementById(anchor);
        if (observerTarget) {
          const observer = new IntersectionObserver(async (entries, observer) => {
            const entry = entries[0];
            if (entry.isIntersecting) {
              console.log("load comment")
              // ÂÅúÊ≠¢ËßÇÂØüÔºåÈÅøÂÖçÈáçÂ§çËß¶Âèë
              observer.unobserve(observerTarget);

              // Âä®ÊÄÅÂä†ËΩΩËØÑËÆ∫Âå∫ËÑöÊú¨
              await loadGitalk();
            }
          }, {
            root: null, // Áõ∏ÂØπ‰∫éËßÜÂè£
            rootMargin: '20%', // ÊèêÂâç 20% ÁöÑ‰ΩçÁΩÆËß¶Âèë
            threshold: 0.1, // ÂÖÉÁ¥†ÊòæÁ§∫ 10% Âç≥Ëß¶Âèë
          });

          observer.observe(observerTarget);
        }

        // Âä®ÊÄÅÂä†ËΩΩ Gitalk ËÑöÊú¨Âπ∂ÂàùÂßãÂåñËØÑËÆ∫Âå∫
        async function loadGitalk() {
          const container = document.getElementById('gitalk-container');
          if (container) {
            const commentID = container.getAttribute('data-comment-id');
            const lang = container.getAttribute('data-lang');
            const repo = container.getAttribute('data-repo')
            const createIssueManually = container.getAttribute('data-createIssueManually')

            console.log(repo);
            console.log(createIssueManually)

            // Âä®ÊÄÅÂä†ËΩΩ Gitalk ËÑöÊú¨
            const script = document.createElement('script');
            script.src = 'https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.min.js';
            script.defer = true;
            script.onload = () => {
              const gitalk = new Gitalk({
                clientID: 'fcf61195c7f73253dc8b',
                clientSecret: '0ac2907be08248a1fcb5312e27480ad535c682e5',
                repo: repo,
                owner: 'fatbobman',
                admin: ['fatbobman'],
                id: commentID.split('/').pop().substring(0, 49),
                distractionFreeMode: true,
                createIssueManually: createIssueManually,
                language: lang,
              });

              gitalk.render('gitalk-container');
            };
            document.body.appendChild(script);
          }
        }
      });
    </script> <div class="hidden lg:block w-32 xl:w-44 lg:absolute" id="toc" style="left: -30px; top: 0px"> <div class="text-muted items-center justify-center opacity-0 transition-all duration-1000 delay-300 ease-out" id="toc-content"> <div class="w-full flex justify-end pb-2" id="toc-float-button"> <div class="opacity-50 text-heading hover:opacity-100 hover:text-secondary " style="width:20px; height:20px;">  <svg fill="currentColor" stroke="currentColor" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" id="toc-list-switcher"> <use href="/_astro/iconCollection.C9WNJL2e.svg#icon-toc"></use> </svg> <svg fill="currentColor" stroke="currentColor" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" id="toc-list-close" class="hidden"> <use href="/_astro/iconCollection.C9WNJL2e.svg#icon-toc-close"></use> </svg>  </div> </div> <div class="text-default text-xxs xl:text-xs hidden" id="toc-list"> <ul> <li class=" pb-1"> <div class="text-muted hover:text-secondary hover:font-black"> <a href="#qa" class="inline-block hover:text-secondary text-heading font-medium relative before:hidden xl:before:block before:content-[&#34;‚ñ™&#34;] before:absolute before:left-[-15px] before:text-heading before:w-0 py-1 break-words"> Q&amp;A </a> </div> </li><li class="xl:pl-4 pl-1 pb-1"> <div class="text-muted hover:text-secondary hover:font-black"> <a href="#derived-attributes" class="inline-block font-normal relative before:content-[&#34;-&#34;] before:hidden xl:before:block before:absolute before:left-[-10px] before:text-default before:w-0 break-words"> Derived Attributes </a> </div> </li><li class="xl:pl-4 pl-1 pb-1"> <div class="text-muted hover:text-secondary hover:font-black"> <a href="#synchronization-of-main-app-and-extension-app-data" class="inline-block font-normal relative before:content-[&#34;-&#34;] before:hidden xl:before:block before:absolute before:left-[-10px] before:text-default before:w-0 break-words"> Synchronization of Main App and Extension App Data </a> </div> </li><li class="xl:pl-4 pl-1 pb-1"> <div class="text-muted hover:text-secondary hover:font-black"> <a href="#how-to-update-the-spotlight-index-of-core-data-that-has-been-deleted-through-the-file-system" class="inline-block font-normal relative before:content-[&#34;-&#34;] before:hidden xl:before:block before:absolute before:left-[-10px] before:text-default before:w-0 break-words"> How to update the Spotlight index of Core Data that has been deleted through the file system </a> </div> </li><li class="xl:pl-4 pl-1 pb-1"> <div class="text-muted hover:text-secondary hover:font-black"> <a href="#how-is-the-performance-of-fetchrequest" class="inline-block font-normal relative before:content-[&#34;-&#34;] before:hidden xl:before:block before:absolute before:left-[-10px] before:text-default before:w-0 break-words"> How is the performance of @FetchRequest? </a> </div> </li><li class="xl:pl-4 pl-1 pb-1"> <div class="text-muted hover:text-secondary hover:font-black"> <a href="#ways-to-retrieve-data" class="inline-block font-normal relative before:content-[&#34;-&#34;] before:hidden xl:before:block before:absolute before:left-[-10px] before:text-default before:w-0 break-words"> Ways to Retrieve Data </a> </div> </li><li class="xl:pl-4 pl-1 pb-1"> <div class="text-muted hover:text-secondary hover:font-black"> <a href="#retrieving-nsattributedstring" class="inline-block font-normal relative before:content-[&#34;-&#34;] before:hidden xl:before:block before:absolute before:left-[-10px] before:text-default before:w-0 break-words"> Retrieving NSAttributedString </a> </div> </li><li class="xl:pl-4 pl-1 pb-1"> <div class="text-muted hover:text-secondary hover:font-black"> <a href="#private-context" class="inline-block font-normal relative before:content-[&#34;-&#34;] before:hidden xl:before:block before:absolute before:left-[-10px] before:text-default before:w-0 break-words"> Private Context </a> </div> </li><li class="xl:pl-4 pl-1 pb-1"> <div class="text-muted hover:text-secondary hover:font-black"> <a href="#how-to-transition-from-userdefaults-to-core-data" class="inline-block font-normal relative before:content-[&#34;-&#34;] before:hidden xl:before:block before:absolute before:left-[-10px] before:text-default before:w-0 break-words"> How to transition from UserDefaults to Core Data </a> </div> </li><li class="xl:pl-4 pl-1 pb-1"> <div class="text-muted hover:text-secondary hover:font-black"> <a href="#asynchronous-saving" class="inline-block font-normal relative before:content-[&#34;-&#34;] before:hidden xl:before:block before:absolute before:left-[-10px] before:text-default before:w-0 break-words"> Asynchronous Saving </a> </div> </li><li class="xl:pl-4 pl-1 pb-1"> <div class="text-muted hover:text-secondary hover:font-black"> <a href="#data-model-source-files-classcategorymanual" class="inline-block font-normal relative before:content-[&#34;-&#34;] before:hidden xl:before:block before:absolute before:left-[-10px] before:text-default before:w-0 break-words"> Data Model Source Files (Class/Category/Manual) </a> </div> </li><li class="xl:pl-4 pl-1 pb-1"> <div class="text-muted hover:text-secondary hover:font-black"> <a href="#deleting-data-through-cloudkit-dashboard" class="inline-block font-normal relative before:content-[&#34;-&#34;] before:hidden xl:before:block before:absolute before:left-[-10px] before:text-default before:w-0 break-words"> Deleting Data Through CloudKit Dashboard </a> </div> </li><li class="xl:pl-4 pl-1 pb-1"> <div class="text-muted hover:text-secondary hover:font-black"> <a href="#how-to-determine-if-synchronization-is-complete" class="inline-block font-normal relative before:content-[&#34;-&#34;] before:hidden xl:before:block before:absolute before:left-[-10px] before:text-default before:w-0 break-words"> How to determine if synchronization is complete </a> </div> </li><li class="xl:pl-4 pl-1 pb-1"> <div class="text-muted hover:text-secondary hover:font-black"> <a href="#optional-nature-of-entity-properties" class="inline-block font-normal relative before:content-[&#34;-&#34;] before:hidden xl:before:block before:absolute before:left-[-10px] before:text-default before:w-0 break-words"> Optional nature of entity properties </a> </div> </li><li class="xl:pl-4 pl-1 pb-1"> <div class="text-muted hover:text-secondary hover:font-black"> <a href="#manually-sorting-data" class="inline-block font-normal relative before:content-[&#34;-&#34;] before:hidden xl:before:block before:absolute before:left-[-10px] before:text-default before:w-0 break-words"> Manually Sorting Data </a> </div> </li><li class="xl:pl-4 pl-1 pb-1"> <div class="text-muted hover:text-secondary hover:font-black"> <a href="#filtering-relationship-data" class="inline-block font-normal relative before:content-[&#34;-&#34;] before:hidden xl:before:block before:absolute before:left-[-10px] before:text-default before:w-0 break-words"> Filtering Relationship Data </a> </div> </li><li class="xl:pl-4 pl-1 pb-1"> <div class="text-muted hover:text-secondary hover:font-black"> <a href="#how-to-reflect-the-change-of-ordered-objects-in-persistent-history-tracking" class="inline-block font-normal relative before:content-[&#34;-&#34;] before:hidden xl:before:block before:absolute before:left-[-10px] before:text-default before:w-0 break-words"> How to reflect the change of ordered objects in persistent history tracking </a> </div> </li><li class="xl:pl-4 pl-1 pb-1"> <div class="text-muted hover:text-secondary hover:font-black"> <a href="#passing-managed-objects-via-navigationdestination" class="inline-block font-normal relative before:content-[&#34;-&#34;] before:hidden xl:before:block before:absolute before:left-[-10px] before:text-default before:w-0 break-words"> Passing Managed Objects via navigationDestination </a> </div> </li><li class=" pb-1"> <div class="text-muted hover:text-secondary hover:font-black"> <a href="#summary" class="inline-block hover:text-secondary text-heading font-medium relative before:hidden xl:before:block before:content-[&#34;‚ñ™&#34;] before:absolute before:left-[-15px] before:text-heading before:w-0 py-1 break-words"> Summary: </a> </div> </li>  </ul> </div> </div> </div> <script type="module" src="/_astro/TOC.astro_astro_type_script_index_0_lang.ARhKvemZ.js"></script> <div class="hidden md:block md:absolute" id="sidebar" style="right: -50px; top: 0px"> <div class="invisible flex flex-col space-y-4 text-muted items-center justify-center opacity-0 transition-all duration-1000 delay-300 ease-out" id="sidebar-content"> <div class="opacity-50 text-heading hover:opacity-100 hover:text-secondary " style="width:20px; height:20px;">  <button type="button" onclick="
      try {
        if ('/en/posts/core-data-of-ask-apple-2022/' !== '#') {
          window.location.href = '/en/posts/core-data-of-ask-apple-2022/';
        }
      } catch (e) {
        console.log('Navigation failed:', e);
      }
    " data-tooltip-target="tooltip-next-post" data-tooltip-placement="left" id="sidebar-next-post" class="cursor-pointer" aria-label="Next post"> <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" fill="currentColor" stroke-linecap="round" stroke-linejoin="round"> <use href="/_astro/iconCollection.C9WNJL2e.svg#icon-previous"></use> </svg> </button>  </div> <div id="tooltip-next-post" role="tooltip" class="absolute z-10 invisible inline-block px-3 py-2 w-44 text-sm font-medium text-gray-200 bg-gray-600/90 rounded-lg shadow-sm transition-opacity duration-300 tooltip dark:bg-gray-700/90"> <div> <div>Ask Apple 2022 Q&amp;A Related on Core Data (Part 1)</div> <div class="text-xs text-yellow-200 font-extrabold pt-2">‚å• + ‚Üê</div> </div> </div> <script>(function(){const url = "/en/posts/core-data-of-ask-apple-2022/";
const isHidden = false;

  document.addEventListener('keydown', (e) => {
    // Check if Alt+RightArrow or just RightArrow was pressed
    if (e.altKey && e.key === 'ArrowLeft') {
      // Only navigate if there's a URL and the button isn't hidden
      if (url && !isHidden) {
        e.preventDefault(); // Prevent default browser behavior
        window.location.href = url;
      }
    }
  });
})();</script> <div class="opacity-50 text-heading hover:opacity-100 hover:text-secondary " style="width:20px; height:20px;">  <button type="button" onclick="
      try {
        if ('/en/posts/swiftui-of-ask-apple-2022-1/' !== '#') {
          window.location.href = '/en/posts/swiftui-of-ask-apple-2022-1/';
        }
      } catch (e) {
        console.log('Navigation failed:', e);
      }
    " data-tooltip-target="tooltip-previous-post" data-tooltip-placement="left" id="sidebar-previous-post" class="cursor-pointer" aria-label="Previous post"> <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" fill="currentColor" stroke-linecap="round" stroke-linejoin="round"> <use href="/_astro/iconCollection.C9WNJL2e.svg#icon-next"></use> </svg> </button>  </div> <div id="tooltip-previous-post" role="tooltip" class="absolute z-10 invisible inline-block px-3 py-2 w-44 text-sm font-medium text-gray-200 bg-gray-600/90 rounded-lg shadow-sm transition-opacity duration-300 tooltip dark:bg-gray-700/90"> <div> <div>Ask Apple 2022 Q&amp;A Related to SwiftUI (Part 1)</div> <div class="text-xs text-yellow-200 font-extrabold pt-2">‚å• + ‚Üí</div> </div> <div class="tooltip-arrow" data-popper-arrow></div> </div> <script>(function(){const url = "/en/posts/swiftui-of-ask-apple-2022-1/";
const isHidden = false;

  document.addEventListener('keydown', (e) => {
    // Check if Alt+RightArrow or just RightArrow was pressed
    if (e.altKey && e.key === 'ArrowRight') {
      // Only navigate if there's a URL and the button isn't hidden
      if (url && !isHidden) {
        e.preventDefault(); // Prevent default browser behavior
        window.location.href = url;
      }
    }
  });
})();</script> <!-- <DictButton lang={lang} post = {post}/> --> <div class="opacity-50 text-heading hover:opacity-100 hover:text-secondary " style="width:20px; height:20px;">  <a href="https://x.com/intent/tweet?text=Ask%20Apple%202022%20Q%26A%20Related%20on%20Core%20Data%20(Part%202)&url=https%3A%2F%2Ffatbobman.com%2Fen%2Fposts%2Fcore-data-of-ask-apple-2022-2%2F&hashtags=ios%2Cswiftlang&via=fatbobman" target="_blank" id="sidebar-share-with-twitter" data-tooltip-target="tooltip-share-with-twitter" data-tooltip-placement="left"> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"> <use href="/_astro/iconCollection.C9WNJL2e.svg#icon-twitter"></use> </svg> </a>  </div> <div id="tooltip-share-with-twitter" role="tooltip" class="absolute z-10 invisible inline-block px-3 py-2 w-32 text-sm font-medium text-gray-200 bg-gray-600/90 rounded-lg shadow-sm transition-opacity duration-300 tooltip dark:bg-gray-700/90"> <div> <div>Share on X</div> </div> <div class="tooltip-arrow" data-popper-arrow></div> </div> <div class="opacity-50 text-heading hover:opacity-100 hover:text-secondary " style="width:20px; height:20px;">  <button type="button" onclick="
      try {
        window.open('https://bsky.app/intent/compose?text=Ask%20Apple%202022%20Q%26A%20Related%20on%20Core%20Data%20(Part%202)%0A by %40fatbobman.com %0Ahttps%3A%2F%2Ffatbobman.com%2Fen%2Fposts%2Fcore-data-of-ask-apple-2022-2%2F%0A #ios #swift', '_blank');
      } catch (e) {
        console.log('Failed to open BlueSky share');
      }
    " id="sidebar-share-with-bluesky" data-tooltip-target="tooltip-share-with-bluesky" data-tooltip-placement="left" class="cursor-pointer" aria-label="Share on BlueSky"> <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" stroke-width="0.4" stroke="currentColor" fill="currentColor" stroke-linecap="round" stroke-linejoin="round"> <use href="/_astro/iconCollection.C9WNJL2e.svg#icon-bluesky"></use> </svg> </button>  </div> <div id="tooltip-share-with-bluesky" role="tooltip" class="absolute z-10 invisible inline-block px-3 py-2 w-40 text-sm font-medium text-gray-200 bg-gray-600/90 rounded-lg shadow-sm transition-opacity duration-300 tooltip dark:bg-gray-700/90"> <div> <div>Share on BlueSky</div> </div> <div class="tooltip-arrow" data-popper-arrow></div> </div> <div class="opacity-50 text-heading hover:opacity-100 hover:text-secondary " style="width:20px; height:20px;">  <a href="https://www.facebook.com/sharer/sharer.php?u=https%253A%252F%252Ffatbobman.com%252Fen%252Fposts%252Fcore-data-of-ask-apple-2022-2%252F" target="_blank" id="sidebar-share-with-facebook" data-tooltip-target="tooltip-share-with-facebook" data-tooltip-placement="left"> <svg stroke="currentColor" fill="currentColor" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg"> <use href="/_astro/iconCollection.C9WNJL2e.svg#icon-facebook"></use> </svg> </a>  </div> <div id="tooltip-share-with-facebook" role="tooltip" class="absolute z-10 invisible inline-block px-3 py-2 w-44 text-sm font-medium text-gray-200 bg-gray-600/90 rounded-lg shadow-sm transition-opacity duration-300 tooltip dark:bg-gray-700/90"> <div> <div>Share on Facebook</div> </div> <div class="tooltip-arrow" data-popper-arrow></div> </div>  <div class="opacity-50 text-heading hover:opacity-100 hover:text-secondary " style="width:16px; height:16px;">  <a href="https://www.linkedin.com/sharing/share-offsite/?url=https%3A%2F%2Ffatbobman.com%2Fen%2Fposts%2Fcore-data-of-ask-apple-2022-2%2F" target="_blank" id="sidebar-share-with-linkedin" data-tooltip-target="tooltip-share-with-linkedin" data-tooltip-placement="left"> <svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" stroke="currentColor" stroke-width="0.1" viewBox="0 0 15 15"> <use href="/_astro/iconCollection.C9WNJL2e.svg#icon-linkedin"></use> </svg> </a>  </div> <div id="tooltip-share-with-linkedin" role="tooltip" class="absolute z-10 invisible inline-block px-3 py-2 w-40 text-sm font-medium text-gray-200 bg-gray-600/90 rounded-lg shadow-sm transition-opacity duration-300 tooltip dark:bg-gray-700/90"> <div> <div>Share on Linkedin</div> </div> <div class="tooltip-arrow" data-popper-arrow></div> </div> <div class="opacity-50 text-heading hover:opacity-100 hover:text-secondary " style="width:20px; height:20px;">  <a href="mailto:?subject=Article%3A%E3%80%90Ask%20Apple%202022%20Q%26A%20Related%20on%20Core%20Data%20(Part%202)%E3%80%91&#38;body=Here's%20an%20article%20you%20may%20find%20interesting%3A%0A%0AAsk%20Apple%202022%20Q%26A%20Related%20on%20Core%20Data%20(Part%202)%0A%0ALink%3A%20https%3A%2F%2Ffatbobman.com%2Fen%2Fposts%2Fcore-data-of-ask-apple-2022-2%2F" target="_blank" id="sidebar-share-with-email" data-tooltip-target="tooltip-share-with-email" data-tooltip-placement="left"> <svg fill="currentColor" stroke="currentColor" stroke-width="20" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg"> <use href="/_astro/iconCollection.C9WNJL2e.svg#icon-email"></use> </svg> </a>  </div> <div id="tooltip-share-with-email" role="tooltip" class="absolute z-10 invisible inline-block px-3 py-2 w-40 text-sm font-medium text-gray-200 bg-gray-600/90 rounded-lg shadow-sm transition-opacity duration-300 tooltip dark:bg-gray-700/90"> <div> <div>Share via Email</div> </div> <div class="tooltip-arrow" data-popper-arrow></div> </div> <div class="opacity-50 text-heading hover:opacity-100 hover:text-secondary " style="width:20px; height:20px;">  <svg fill="currentColor" stroke="currentColor" stroke-width="20" id="comment-button" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" data-tooltip-target="tooltip-share-with-comment" data-tooltip-placement="left"> <use href="/_astro/iconCollection.C9WNJL2e.svg#icon-comment"></use> </svg>  </div> <div id="tooltip-share-with-comment" role="tooltip" class="absolute z-10 invisible inline-block px-3 py-2 w-44 text-sm font-medium text-gray-200 bg-gray-600/90 rounded-lg shadow-sm transition-opacity duration-300 tooltip dark:bg-gray-700/90"> <div> <div>Share Your Thoughts</div> </div> <div class="tooltip-arrow" data-popper-arrow></div> </div> <script>
  const SCROLL_OFFSET = 80;
  
  document.addEventListener('DOMContentLoaded', function() {
    const commentButton = document.getElementById('comment-button');
    if (commentButton) {
      commentButton.addEventListener('click', function() {
        const gitalkContainer = document.getElementById('gitalk-container');
        if (gitalkContainer) {
          const topPosition = gitalkContainer.getBoundingClientRect().top + window.scrollY - SCROLL_OFFSET;
          window.scrollTo({ top: topPosition, behavior: 'smooth' });
        }
      });
    }
  });
</script> <div class="opacity-50 text-heading hover:opacity-100 hover:text-secondary " style="width:20px; height:20px;">  <svg fill="currentColor" stroke="currentColor" onclick="window.scrollTo({top:0,behavior:'smooth'})" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" data-tooltip-target="tooltip-back-to-top" data-tooltip-placement="left"> <use href="/_astro/iconCollection.C9WNJL2e.svg#icon-top"></use> </svg>  </div> <div id="tooltip-back-to-top" role="tooltip" class="absolute z-10 invisible inline-block px-3 py-2 w-28 text-sm font-medium text-gray-200 bg-gray-600/90 rounded-lg shadow-sm transition-opacity duration-300 tooltip dark:bg-gray-700/90"> <div> <div>Back to Top</div> </div> <div class="tooltip-arrow" data-popper-arrow></div> </div> </div> </div> <script type="module" src="/_astro/SideBar.astro_astro_type_script_index_0_lang.DVW0R156.js"></script> </div>   </div> </main> </div> <footer> <footer class="bg-block "> <div class="mx-auto w-full max-w-3xl px-4 md:px-6"> <div class="container flex flex-col items-center pt-10"> <div class="flex flex-row justify-around w-full space-x-3"> <div class="flex flex-col space-y-4"> <h2 class="font-bold text-heading">Explore</h2> <div class="flex flex-col space-y-2 text-sm text-default font-medium"> <a href="/en/snippet/" class="hover:text-secondary">Quick Tips</a> <a href="/en/posts/" class="hover:text-secondary">Posts</a> <a href="/en/tags/" class="hover:text-secondary">Tags</a> <a href="/en/collections/" class="hover:text-secondary">Collections</a> </div> </div> <div class="flex flex-col space-y-4"> <h2 class="font-bold text-heading">Subscribe</h2> <div class="flex flex-col space-y-2 text-sm text-default font-medium"> <a href="https://weekly.fatbobman.com/welcome" class="hover:text-secondary" target="_blank">Newsletter</a> <a href="/rss.xml" class="hover:text-secondary hover:font-medium" target="_blank">RSS</a> </div> </div> <div class="flex flex-col space-y-4"> <h2 class="font-bold text-heading">Connect &amp; Support</h2> <div class="flex flex-col space-y-2 text-sm text-default font-medium"> <a href="/en/sponsorship/" class="hover:text-secondary" rel="sponsored"> Promote on Blog </a> <a href="/en/about/#contact" class="hover:text-secondary">Contact Me</a> <a href="https://www.buymeacoffee.com/fatbobman" class="hover:text-secondary" target="_blank">Buy Me a Coffee ‚òïÔ∏è</a> </div> </div> </div> <div class="pb-0"> <div class="flex items-center justify-center w-full px-6 pt-12 text-sm"> <span class="text-muted text-xs tracking-normal">Copyright ¬©  2025
Fatbobman Digital Limited. All Rights
            Reserved.</span> </div> <div class="flex items-center justify-center w-full px-6 pt-2 text-sm pb-10"> <button type="button" onclick="
        try {
          window.open('https://beian.miit.gov.cn/#/Integrated/index', '_blank');
        } catch (e) {
          console.log('Failed to open ICP link:', e);
        }
      " class="text-xxs hover:underline text-muted tracking-wide" aria-label="ICP Registration Information">
ËæΩICPÂ§á20006550Âè∑-1
</button> </div> </div> </div> </div> </footer> </footer> </div> <section> <div id="weekly-modal" data-subscribeText="Join Now" data-placeholder="Subscribe with your email"> <div id="popup-modal" tabindex="-1" class="hidden overflow-y-auto overflow-x-hidden fixed top-0 right-0 left-0 z-50 justify-center items-center w-full md:inset-0 h-[calc(100%-1rem)] max-h-full"> <!-- Modal content --> <div class="relative bg-gradient-to-br from-white to-gray-50 dark:from-gray-800 dark:to-gray-900 rounded-lg shadow-2xl border-gray-200 border dark:border-gray-600"> <!-- Modal header --> <div class="flex items-center justify-between px-4 md:px-5 pt-4 pb-0 rounded-t dark:border-gray-600"> <button id="popup-modal-close-button" type="button" class="text-gray-400 bg-transparent hover:bg-gray-200 hover:text-gray-900 rounded-lg text-sm w-8 h-8 ms-auto inline-flex justify-center items-center dark:hover:bg-gray-600 dark:hover:text-white"> <svg class="w-3 h-3" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 14 14"> <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m1 1 6 6m0 0 6 6M7 7l6-6M7 7l-6 6"></path> </svg> <span class="sr-only">Close modal</span> </button> </div> <!-- Modal body --> <div class="px-4 md:px-5 pb-4 md:w-[480px] sm:w-80 mx-auto"> <div class="sm:hidden md:block text-base text-center font-bold text-gray-900 dark:text-blue-100 pt-4 pb-2 ">Weekly Swift &amp; SwiftUI Highlights - Every Monday</div> <iframe class="mx-auto sm:w-[320px] md:w-[480px] sm:h-[200px] md:h-[320px] dark:opacity-80 dark:rounded-lg dark:shadow-2xl dark:border-gray-600" src="https://weekly.fatbobman.com/embed" style="border:0px solid #EEE; background:white; width: 100%; max-width: 480px;"></iframe> </div> </div> </div> </div> </section> <script type="module" src="/_astro/WeeklyModalLoader.astro_astro_type_script_index_0_lang.CmhzHyOM.js"></script>  <script src="https://cdn.jsdelivr.net/npm/flowbite@2.5.2/dist/flowbite.min.js" async></script> <script src="https://analytics.ahrefs.com/analytics.js" data-key="KF0NNRpbcfyJPzijzZEiOw" async></script> <script>
  // ‰∏∫ÊØè‰∏™ÈúÄË¶ÅÊ∏ÖÈô§ focus Áä∂ÊÄÅÁöÑÊåâÈíÆÈÉΩÊ∑ªÂä†‰∏Ä‰∏™ clear-focus Á±ª, ‰∏ãÈù¢ÁöÑ‰ª£Á†ÅÂ∞ÜÂú®ÁÇπÂáªÂêéËá™Âä®ÁßªÈô§ focus Áä∂ÊÄÅ
  document.addEventListener('DOMContentLoaded', () => {
    // Ëé∑ÂèñÊâÄÊúâÂÖ∑Êúâ 'clear-focus' Á±ªÁöÑÊåâÈíÆ
    const buttons = document.querySelectorAll('.clear-focus');

    buttons.forEach((button) => {
      button.addEventListener('click', () => {
        setTimeout(() => {
          button.blur();
        }, 0);
      });
    });
  });

  window.onpageshow = function () {
    document.documentElement.classList.add('motion-safe:scroll-smooth');
  };
</script> <div id="docsearch-container-data" data-lang="en" data-searchtext="Search..."></div> <script src="https://cdn.jsdelivr.net/npm/@docsearch/js@3.8.3" defer></script> <script type="module">function r(e,t){const a={button:{buttonText:"ÊêúÁ¥¢",buttonAriaLabel:"ÊêúÁ¥¢"},modal:{searchBox:{resetButtonTitle:"Ê∏ÖÈô§ÊêúÁ¥¢ÂÖ≥ÈîÆÂ≠ó",resetButtonAriaLabel:"Ê∏ÖÈô§ÊêúÁ¥¢ÂÖ≥ÈîÆÂ≠ó",cancelButtonText:"ÂèñÊ∂à",cancelButtonAriaLabel:"ÂèñÊ∂à"},startScreen:{recentSearchesTitle:"ÊúÄËøëÊêúÁ¥¢",noRecentSearchesText:"ÂΩìÂâçÊ≤°ÊúâÊêúÁ¥¢ÂéÜÂè≤ËÆ∞ÂΩï",saveRecentSearchButtonTitle:"‰øùÂ≠òÊú¨Ê¨°ÊêúÁ¥¢",removeRecentSearchButtonTitle:"‰ªéÊêúÁ¥¢ÂéÜÂè≤‰∏≠ÁßªÈô§",favoriteSearchesTitle:"Êî∂ËóèÂ§π",removeFavoriteSearchButtonTitle:"‰ªéÊî∂ËóèÂ§πÁßªÈô§"},errorScreen:{titleText:"Êó†Ê≥ïËé∑ÂèñÁªìÊûú",helpText:"ËØ∑Ê£ÄÊü•ÁΩëÁªúËøûÊé•"},footer:{selectText:"ÈÄâÊã©",selectKeyAriaLabel:"ÈÄâÊã©",navigateText:"ÂàáÊç¢",navigateUpKeyAriaLabel:"Arrow up",navigateDownKeyAriaLabel:"Arrow down",closeText:"ÈÄÄÂá∫",closeKeyAriaLabel:"Escape key",searchByText:"ÂºïÊìéÊîØÊåÅ"},noResultsScreen:{noResultsText:"Êó†Ê≥ïÊâæÂà∞ÂØπÂ∫îÁªìÊûú",suggestedQueryText:"ÂèØ‰ª•Â∞ùËØïÊêúÁ¥¢Â¶Ç‰∏ãÂÜÖÂÆπ",reportMissingResultsText:"Á°ÆËÆ§Êú¨Ê¨°ÊêúÁ¥¢Â∫îËØ•ËøîÂõûÂÜÖÂÆπÔºü",reportMissingResultsLinkText:"ËØ∑ÂëäÁü•Êàë‰ª¨"}}};if(typeof window<"u"){const n=window.docsearch;n({appId:"MVXKD4F4BR",apiKey:"a1b4111c3de8b9f60eeca6da001711da",indexName:"fatbobman",container:"#docsearch",insights:!0,placeholder:t,maxResultsPerGroup:50,translations:e==="zh"?a:void 0,searchParameters:{facetFilters:[`lang:${e}`],hitsPerPage:50}})}}function o(){const e=document.getElementById("docsearch-container-data");if(!e){console.error("Search container not found");return}const t=e.dataset.lang,a=e.dataset.searchtext;r(t,a)}window.addEventListener("load",()=>{document.querySelector('script[src*="docsearch"]')&&o()});</script> <!-- Google Tag Manager (noscript) --><noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-5C7N4MF5" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript><!-- End Google Tag Manager (noscript) --> <!--Magic Fix Ëß£ÂÜ≥Âú® Safari ‰∏ãÊêúÁ¥¢Ê°ÜÂèñÊ∂àÂêé‰ºöÊªöÂä®Âà∞È°µÈù¢Â∫ïÈÉ®--> <div class="fixed"> <input type="text"> </div> </body></html>