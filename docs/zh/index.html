<!DOCTYPE html><html lang="zh"> <head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="sitemap" href="/sitemap-index.xml"><!-- <link rel="shortcut icon" href={iconSVG.src} /> --><link rel="icon" type="image/png" sizes="16x16" href="/_astro/favicon-16x16.2312221518-2.4YWPtmqG.png"><link rel="icon" type="image/png" sizes="32x32" href="/_astro/favicon-32x32.2312221518-2.W1M1HUWf.png"><link rel="mask-icon" href="/_astro/faviconSVG-32x32.2312221518-2.JZf4E4CU.svg"><link rel="apple-touch-icon" sizes="180x180" href="/_astro/apple-touch-icon.2312227635.RNVrzb6f.png"><link rel="stylesheet" href="/style/global-new.css"><title>首页 | 肘子的 Swift 记事本</title>
<meta name="description" content="肘子的 Swift 记事本｜Fatbobman&#39;s Blog，分享与 Swift、SwiftUI、Core Data、Swift Data 有关的内容，也会涉及开发工具、AI 等其他内容。全部文章均为原创，转载需联系本人">
<meta name="robots" content="index,follow">
<link rel="canonical" href="https://fatbobman.com/zh/">
<meta property="og:title" content="首页 | 肘子的 Swift 记事本">
<meta property="og:description" content="肘子的 Swift 记事本｜Fatbobman&#39;s Blog，分享与 Swift、SwiftUI、Core Data、Swift Data 有关的内容，也会涉及开发工具、AI 等其他内容。全部文章均为原创，转载需联系本人">
<meta property="og:url" content="https://fatbobman.com/zh/">
<meta property="og:type" content="website">
<meta property="og:image" content="https://fatbobman.com/images/blog-card.png">

<meta property="og:locale" content="zh">
<meta property="og:site_name" content="fatbobman.com">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:site" content="@fatbobman">
<meta name="twitter:creator" content="@fatbobman"><link rel="alternate" type="application/rss+xml" title="RSS Feed for My Website" href="https://fatbobman.com/zh/rss.xml"><link rel="sitemap" href="/sitemap-index.xml"><meta name="keywords" content="Swift 编程,Swift Programming,SwiftUI 教程,SwiftUI Tutorials,Core Data 实践,Core Data Practices,SwiftData 应用,SwiftData Applications,iOS 开发,iOS Development,Swift UI 设计,Swift UI Design,Swift 性能优化,Swift Performance Optimization,Swift 编码技巧,Swift Coding Techniques,iOS 应用开发,iOS App Development,Swift 数据管理,Swift Data Management,SwiftUI 布局,SwiftUI Layout,SwiftUI 动画,SwiftUI Animation"><meta name="apple-mobile-web-app-title" content="肘子的博客"><link rel="alternate" hreflang="zh" href="https://fatbobman.com/zh/"><link rel="alternate" hreflang="en" href="https://fatbobman.com/en/"><!-- <BasicScripts /> --><!-- <script is:inline>
  var _hmt = _hmt || [];
  (function() {
    var hm = document.createElement("script");
    hm.src = "https://hm.baidu.com/hm.js?14e5d60a3ea6276655f9d14c58b1fcd0";
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(hm, s);
  })();
</script> --><!-- Google Tag Manager --><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
  new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
  j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
  'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
  })(window,document,'script','dataLayer','GTM-5C7N4MF5');</script> <!-- End Google Tag Manager --><link rel="stylesheet" href="/_astro/about.ef6e_bru.css" />
<link rel="stylesheet" href="/_astro/about.Y66QztvF.css" />
<style>.sticky[data-astro-cid-4wsjtibl]{position:fixed;top:0;left:50%;transform:translate(-50%);width:100%;max-width:100%}
</style><script type="module" src="/_astro/hoisted.TbP5Y2Ug.js"></script></head> <body class="antialiased text-default tracking-tight bg-page">  <div class="flex flex-col min-h-screen justify-between "> <div> <header> <div class="bg-block" id="wholeHeader" data-astro-cid-4wsjtibl> <div id="blogTitle"> <a href="/zh/"> <div class="flex space-x-4 mx-auto text-center pt-16 sm:pt-12 font-black w-[240px] sm:w-[300px] pb-6 sm:pb-1"> <svg class="text-heading" width="337" height="63"> <use href="/images/title-fatbobman.svg#main"></use> </svg> <svg class="text-primary mt-[-6px] sm:mt-[-5px]" width="130" height="91"> <use href="/images/title-blog.svg#main"></use> </svg> </div> </a> </div> <div class="bg-block z-50 shadow-custom-light dark:shadow-custom-dark" id="stickyHeader" data-astro-cid-4wsjtibl> <div class="max-w-5xl flex flex-wrap items-center justify-between mx-auto p-2 sm:p-0" data-astro-cid-4wsjtibl> <div class="flex space-x-2" data-astro-cid-4wsjtibl> <div id="lang-data" data-lang="zh" style="display: none;"></div> <button id="language-dropdown-button" data-dropdown-toggle="language-dropdown-menu" type="button" class="p-2 w-10 h-10 font-medium text-default hover:text-secondary hover:bg-gray-100 dark:hover:bg-page focus:outline-none focus:ring-2 focus:ring-gray-200 dark:hover:bg-gray-700 dark:focus:ring-gray-600 rounded-lg"> ZH </button> <!-- Dropdown --> <div class="z-50 hidden my-4 text-base list-none bg-page divide-y divide-gray-100 rounded-lg shadow dark:bg-gray-700" id="language-dropdown-menu"> <ul class="py-2 font-medium text-sm" role="none"> <li> <a href="/en/" class="block px-4 py-2 text-default hover:bg-gray-100 dark:hover:bg-gray-600 dark:hover:text-white" role="menuitem"> <div class="inline-flex items-center">
English
<svg xmlns="http://www.w3.org/2000/svg" class="w-3.5 h-3.5 ml-2 hidden text-primary" id="EN-check" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M6.979 3.074a6 6 0 0 1 4.988 1.425l.037 .033l.034 -.03a6 6 0 0 1 4.733 -1.44l.246 .036a6 6 0 0 1 3.364 10.008l-.18 .185l-.048 .041l-7.45 7.379a1 1 0 0 1 -1.313 .082l-.094 -.082l-7.493 -7.422a6 6 0 0 1 3.176 -10.215z" stroke-width="0" fill="currentColor"></path></svg> </div> </a> </li> <li> <a href="" class="block px-4 py-2 text-default hover:bg-gray-100 dark:hover:bg-gray-600 dark:hover:text-white" role="menuitem"> <div class="inline-flex items-center">
中文
<svg xmlns="http://www.w3.org/2000/svg" class="w-3.5 h-3.5 ml-2 hidden text-primary" id="ZH-check" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M6.979 3.074a6 6 0 0 1 4.988 1.425l.037 .033l.034 -.03a6 6 0 0 1 4.733 -1.44l.246 .036a6 6 0 0 1 3.364 10.008l-.18 .185l-.048 .041l-7.45 7.379a1 1 0 0 1 -1.313 .082l-.094 -.082l-7.493 -7.422a6 6 0 0 1 3.176 -10.215z" stroke-width="0" fill="currentColor"></path></svg> </div> </a> </li> <li> <div class="border-t border-gray-200 dark:border-gray-800 w-4/5 mx-auto my-2"></div> <button class="block px-4 py-2 text-default hover:bg-gray-100 dark:hover:bg-gray-600 dark:hover:text-white" role="menuitem" id="set-default-lang"> <div class="inline-flex items-center"> 将中文设置为默认 </div> </button> </li> </ul> </div>  <button id="theme-dropdown-button" data-dropdown-toggle="theme-dropdown-menu" type="button" class="group p-2 w-10 h-10 text-default hover:bg-gray-100 dark:hover:bg-page focus:outline-none focus:ring-2 focus:ring-gray-200 dark:text-gray-400 dark:hover:bg-gray-700 dark:focus:ring-gray-600 rounded-lg flex items-center justify-center"> <svg viewBox="0 0 24 24" id="theme_icon_system" class="w-5 h-5 text-default fill-current group-hover:text-secondary hidden" astro-icon="tabler:device-laptop"><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" class="icon-tabler"><path d="M3 19h18"/><rect width="14" height="10" x="5" y="6" rx="1"/></g></svg> <svg viewBox="0 0 24 24" id="theme_icon_dark" class="w-5 h-5 text-default fill-current group-hover:text-secondary hidden" astro-icon="tabler:moon"><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 3h.393a7.5 7.5 0 0 0 7.92 12.446A9 9 0 1 1 12 2.992z"/></svg> <svg viewBox="0 0 24 24" id="theme_icon_light" class="w-5 h-5 text-default fill-current group-hover:text-secondary hidden" astro-icon="tabler:sun"><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" class="icon-tabler"><circle cx="12" cy="12" r="4"/><path d="M3 12h1m8-9v1m8 8h1m-9 8v1M5.6 5.6l.7.7m12.1-.7-.7.7m0 11.4.7.7m-12.1-.7-.7.7"/></g></svg> </button> <!-- Dropdown --> <div class="z-50 hidden my-4 text-base list-none bg-white divide-y divide-gray-100 rounded-lg shadow dark:bg-gray-700" id="theme-dropdown-menu"> <ul class="py-2 font-medium" role="none"> <li class="hover:bg-gray-100 dark:hover:bg-gray-600"> <button class="flex px-4 py-2 text-sm align-text-center dark:hover:text-white text-default" id="theme_button_light"> <svg viewBox="0 0 24 24" class="w-5 h-5 fill-current" astro-icon="tabler:sun"><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" class="icon-tabler"><circle cx="12" cy="12" r="4"/><path d="M3 12h1m8-9v1m8 8h1m-9 8v1M5.6 5.6l.7.7m12.1-.7-.7.7m0 11.4.7.7m-12.1-.7-.7.7"/></g></svg> <span class="ml-2 dark:hover:text-white">Light</span> </button> </li> <li class="hover:bg-gray-100 dark:hover:bg-gray-600"> <button class="flex px-4 py-2 text-sm align-text-center dark:hover:text-white text-default" id="theme_button_dark"> <svg viewBox="0 0 24 24" class="w-5 h-5" astro-icon="tabler:moon"><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 3h.393a7.5 7.5 0 0 0 7.92 12.446A9 9 0 1 1 12 2.992z"/></svg> <span class="ml-2 text-default dark:hover:text-white">Dark</span> </button> </li> <li class="hover:bg-gray-100 dark:hover:bg-gray-600"> <button class="flex px-4 py-2 text-sm align-text-center dark:hover:text-white text-default" id="theme_button_system"> <svg viewBox="0 0 24 24" class="w-5 h-5" astro-icon="tabler:device-laptop"><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" class="icon-tabler"><path d="M3 19h18"/><rect width="14" height="10" x="5" y="6" rx="1"/></g></svg> <span class="ml-2 dark:hover:text-white">System</span> </button> </li> </ul> </div> <script>
  (async () => {
    const { setTheme } = await import('/js/theme.js');
    // Use setTheme here
    // Change the icons inside the button based on previous settings
    // 如果 localStorage 里面有设置过 color-theme 的值, 则 themeToggleSystemIcon.classList.remove('hidden')
    function setThemeButton() {
      let theme = localStorage.getItem('color-theme');
      if (theme === 'dark') {
        themeToggleDarkIcon.classList.remove('hidden');
        themeToggleLightIcon.classList.add('hidden');
        themeToggleSystemIcon.classList.add('hidden');
      } else if (theme === 'light') {
        themeToggleDarkIcon.classList.add('hidden');
        themeToggleLightIcon.classList.remove('hidden');
        themeToggleSystemIcon.classList.add('hidden');
      } else {
        themeToggleDarkIcon.classList.add('hidden');
        themeToggleLightIcon.classList.add('hidden');
        themeToggleSystemIcon.classList.remove('hidden');
      }
    }

    // 监听暗黑模式的变化
    window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', (event) => {
      setThemeButton();
    });

    // 保证其他的页面也能够监听到 localStorage 的变化
    window.addEventListener('storage', function (event) {
      if (event.key === 'color-theme') {
        setThemeButton();
      }
    });

    function resetTheme() {
      setTheme();
      setThemeButton();
    }

    // 获取按钮
    var themeButtonLight = document.getElementById('theme_button_light');
    var themeButtonDark = document.getElementById('theme_button_dark');
    var themeButtonSystem = document.getElementById('theme_button_system');
    // 获取图标
    var themeToggleDarkIcon = document.getElementById('theme_icon_dark');
    var themeToggleLightIcon = document.getElementById('theme_icon_light');
    var themeToggleSystemIcon = document.getElementById('theme_icon_system');

    // Listen for clicks on the button themeToggleDarkIcon
    themeButtonDark.addEventListener('click', function () {
      localStorage.setItem('color-theme', 'dark');
      resetTheme();
    });

    // // Listen for clicks on the button themeToggleLightIcon
    themeButtonLight.addEventListener('click', function () {
      localStorage.setItem('color-theme', 'light');
      resetTheme();
    });

    // // Listen for clicks on the button themeToggleSystemIcon
    themeButtonSystem.addEventListener('click', function () {
      localStorage.removeItem('color-theme');
      resetTheme();
    });

    resetTheme();
  })();
</script> <link rel="stylesheet" href="/style/docsearch.css"><div id="docsearch" class="group w-10 h-10 text-default hover:bg-gray-100 dark:hover:bg-page focus:outline-none focus:ring-2 focus:ring-gray-200 dark:text-gray-400 dark:hover:bg-gray-700 dark:focus:ring-gray-600 rounded-lg flex items-center justify-center"></div> </div> <button data-collapse-toggle="navbar-solid-bg" type="button" class="inline-flex items-center p-2 mx-2 w-10 h-10 justify-center text-sm text-gray-500 rounded-lg md:hidden hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-gray-200 dark:text-gray-400 dark:hover:bg-gray-700 dark:focus:ring-gray-600" aria-controls="navbar-solid-bg" aria-expanded="false" id="navbar-toggle-button"> <span class="sr-only">Open main menu</span> <svg class="w-5 h-5 text-default" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 17 14"> <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M1 1h15M1 7h15M1 13h15"></path> </svg> </button> <nav class="hidden w-full md:block md:w-auto px-4 z-40" id="navbar-solid-bg"> <ul class="flex flex-col font-bold mt-4 rounded-lg bg-gray-50 md:space-x-8 rtl:space-x-reverse md:flex-row md:mt-0 md:border-0 md:bg-transparent dark:bg-gray-800 md:dark:bg-transparent dark:border-gray-700"> <a href="/zh/" class="block py-2 px-3 md:p-0 rounded text-invert bg-secondary md:bg-transparent md:text-secondary md:dark:bg-transparent" aria-current="page"> 首页 </a><a href="/zh/posts/" class="block py-2 px-3 md:p-0 rounded  text-heading md:hover:text-secondary hover:bg-gray-100 dark:hover:bg-gray-700 md:hover:bg-transparent md:dark:hover:bg-transparent"> 文章 </a><a href="/zh/weekly/" class="block py-2 px-3 md:p-0 rounded  text-heading md:hover:text-secondary hover:bg-gray-100 dark:hover:bg-gray-700 md:hover:bg-transparent md:dark:hover:bg-transparent"> 周报 </a><a href="/zh/snippet/" class="block py-2 px-3 md:p-0 rounded  text-heading md:hover:text-secondary hover:bg-gray-100 dark:hover:bg-gray-700 md:hover:bg-transparent md:dark:hover:bg-transparent"> 小贴士 </a><a href="/zh/about/" class="block py-2 px-3 md:p-0 rounded  text-heading md:hover:text-secondary hover:bg-gray-100 dark:hover:bg-gray-700 md:hover:bg-transparent md:dark:hover:bg-transparent"> 关于 </a> </ul> </nav>  </div> </div> <div id="placeholder" class="hidden" data-astro-cid-4wsjtibl></div> </div> <script>(function(){const enableSticky = true;
const enableStickyInMobile = true;

  window.onload = function () {
    checkStickyHeader();
    stickySetup();
  };

  window.addEventListener('resize', stickySetup);

  function checkStickyHeader() {
    const title = document.getElementById('blogTitle');
    const stickyHeader = document.getElementById('stickyHeader');
    const placeholder = document.getElementById('placeholder');

    if (title && stickyHeader && placeholder) {
      const offset = title.offsetTop + title.offsetHeight;

      if (shouldStick() && window.scrollY >= offset) {
        stickyHeader.classList.add('sticky');
        placeholder.style.display = 'block';
        placeholder.style.height = `${stickyHeader.offsetHeight}px`;
      } else {
        stickyHeader.classList.remove('sticky');
        placeholder.style.display = 'none';
      }
    }
  }

  function shouldStick() {
    if (!enableSticky) return false;

    let isMobile = window.matchMedia('(max-width: 640px)').matches;
    if (isMobile && !enableStickyInMobile) return false;

    return true;
  }

  function stickySetup() {
    window.onscroll = checkStickyHeader;
  }
})();</script>  </header> <main class="w-full mx-auto max-w-3xl p-4 md:p-6 "> <div class="container mx-auto space-y-6 sm:space-y-12">   <div class="space-y-6"> <section class="relative px-2 sm:px-0 sm:bg-block sm:mt-2 md:mt-0 sm:rounded-lg overflow-hidden sm:border-[1px] dark:border-0 sm:border-gray-200/70 sm:hover:shadow-lg sm:hover:scale-105 sm:transition-transform sm:duration-200 group"> <span class="absolute hidden md:block top-0 right-0 px-8 py-1 text-xs font-bold tracking-wider text-center uppercase whitespace-no-wrap origin-bottom-left transform rotate-45 -translate-y-full translate-x-1/3 bg-violet-600 text-gray-100 dark:text-heading">New</span> <a rel="noopener noreferrer" href="/zh/weekly/issue-066/" class="block max-w-3xl gap-3 mx-auto sm:max-w-full group hover:no-underline focus:no-underline md:grid md:grid-cols-12"> <picture class="critical-content object-cover w-full h-64 sm:h-96 md:col-span-5"> <!-- 为不同屏幕尺寸提供响应式图片 --> <source media="(max-width: 479px)" srcset="https://cdn.fatbobman.com/weekly/issue66.webp?imageView2/0/w/300"> <source media="(max-width: 767px)" srcset="https://cdn.fatbobman.com/weekly/issue66.webp?imageView2/0/w/400"> <source media="(max-width: 1024px)" srcset="https://cdn.fatbobman.com/weekly/issue66.webp?imageView2/0/w/600"> <!-- 默认图片 --> <img src="https://cdn.fatbobman.com/weekly/issue66.webp?imageView2/1/w/800" alt="将 AI 整合至日常工具链" class="critical-image object-cover w-full h-64 sm:h-96 md:col-span-5" decoding="async" fetchpriority="high" width="800" height="500"> </picture> <div class="sm:px-4 md:px-6 py-6 space-y-2 md:col-span-7"> <h3 class="text-2xl font-semibold sm:text-3xl text-heading group-hover:text-secondary"> 将 AI 整合至日常工具链 </h3> <h4 class="text-default font-medium text-lg"> 肘子的 Swift 周报 #066 </h4> <span class="text-xs text-muted">2025 年 1 月 13 日</span> <p class="text-default"> 大语言模型已然成为我日常工作和生活中不可或缺的得力助手。目前，我主要通过对话方式与它互动。虽然随着模型能力的提升，这种交流方式越发流畅自然，但当各类需求混杂在同一会话中时，效率往往难以达到理想状态。为此，我在过去几周开始尝试运用提示词来定制... </p> <div class="hidden md:inline-flex items-center pt-2 pb-6 space-x-2 text-sm text-secondary font-medium uppercase"> 完整阅读 </div> </div> </a> </section> <!-- <WeeklySubscribe lang={lang} top={6} bottom={0}/> --> <section class=""> <div> <div class="max-w-4xl px-2 sm:px-4 py-6 mx-auto rounded-lg cursor-pointer sm:hover:bg-block group" id="zh/why-certain-view-modifiers-in-swift-6-cannot-usethe-state-property"> <div class="flex items-center justify-between"> <span class="text-sm text-muted">2024 年 12 月 24 日</span> <div class="flex"> <a class="text-xs font-medium mx-2 text-secondary hover:text-heading pointer-events-auto" href="/zh/tags/SwiftUI/">
#SwiftUI </a><a class="text-xs font-medium mx-2 text-secondary hover:text-heading pointer-events-auto" href="/zh/tags/Swift/">
#Swift </a> </div> </div> <div class="mt-3"> <div class="text-xl font-bold text-heading group-hover:text-secondary">为何 Swift 6 中某些视图修饰器无法使用 @State 属性</div>  <p class="mt-2 text-default">在 Xcode 16 中，为了改善 SwiftUI 在 Swift 6 模式下的表现，苹果对 SwiftUI 框架的 API 进行了多项调整，以满足更严格的并发检查要求。其中最显著的变化是将 View 协议全面标注为 @MainActor。这些优化虽然总体上改善了开发者在 Swift 6 模式下的编程体验，但也在某些特定场景中引发了一些看似反常的编译错误。本文将详细探讨为什么某些视图修饰器中无法直接使用 @State 属性值，并提供相应的解决方案。</p> </div> </div>  </div><div> <div class="max-w-4xl px-2 sm:px-4 py-6 mx-auto rounded-lg cursor-pointer sm:hover:bg-block group" id="zh/traps-and-countermeasures-for-abnormal-onappear-calls-in-swiftui"> <div class="flex items-center justify-between"> <span class="text-sm text-muted">2024 年 12 月 18 日</span> <div class="flex"> <a class="text-xs font-medium mx-2 text-secondary hover:text-heading pointer-events-auto" href="/zh/tags/SwiftUI/">
#SwiftUI </a> </div> </div> <div class="mt-3"> <div class="text-xl font-bold text-heading group-hover:text-secondary">SwiftUI onAppear 异常调用的陷阱与应对策略</div>  <p class="mt-2 text-default">onAppear 是 SwiftUI 中极其关键的生命周期方法，用于在视图呈现时注入关键逻辑。由于视图实例可能会频繁地被创建和重建，开发者通常会选择在这些方法中准备数据、执行初始化操作。理论上，这些生命周期方法的调用时机应当是可预测和一致的。然而，在某些特定场景下，onAppear 可能会出现非预期的、不必要的调用，这不仅可能导致性能开销，更可能引发应用状态的不可控变化。本文将揭示这一容易被忽视的 SwiftUI 行为陷阱，并提供临时的应对策略。</p> </div> </div> <div class="dynamic-ad-container py-4"></div> </div><div> <div class="max-w-4xl px-2 sm:px-4 py-6 mx-auto rounded-lg cursor-pointer sm:hover:bg-block group" id="zh/model-inheritance-in-core-data"> <div class="flex items-center justify-between"> <span class="text-sm text-muted">2024 年 12 月 11 日</span> <div class="flex"> <a class="text-xs font-medium mx-2 text-secondary hover:text-heading pointer-events-auto" href="/zh/tags/SwiftData/">
#SwiftData </a><a class="text-xs font-medium mx-2 text-secondary hover:text-heading pointer-events-auto" href="/zh/tags/Core Data/">
#Core Data </a> </div> </div> <div class="mt-3"> <div class="text-xl font-bold text-heading group-hover:text-secondary">Core Data 的模型继承</div>  <p class="mt-2 text-default">Core Data 的一个卓越特点是让开发者能够以更加接近面向对象编程的方式声明数据模型，同时无需关心底层的存储实现细节。在这个框架中，模型继承是一个尤为重要的机制。本文将深入探讨模型继承的核心概念，包括父实体（Parent Entity）、子实体（Sub Entity）和抽象实体（Abstract Entity）；我们将分析它们的优缺点，并探讨在不直接使用这些功能时如何实现类似的效果。</p> </div> </div>  </div><div> <div class="max-w-4xl px-2 sm:px-4 py-6 mx-auto rounded-lg cursor-pointer sm:hover:bg-block group" id="zh/typefully-say-goodbye-to-the-hassles-of-social-media-posting"> <div class="flex items-center justify-between"> <span class="text-sm text-muted">2024 年 12 月 4 日</span> <div class="flex"> <a class="text-xs font-medium mx-2 text-secondary hover:text-heading pointer-events-auto" href="/zh/tags/Tools/">
#Tools </a><a class="text-xs font-medium mx-2 text-secondary hover:text-heading pointer-events-auto" href="/zh/tags/Life/">
#Life </a> </div> </div> <div class="mt-3"> <div class="text-xl font-bold text-heading group-hover:text-secondary">Typefully：轻松告别繁琐的社交媒体发布</div>  <p class="mt-2 text-default">随着社交媒体渠道的日益丰富，一个网络用户不知不觉间已拥有多个不同的社交账号。对于内容创作者和企业账号管理者而言，在各个社交平台上发布内容所需的准备工作正变得愈发繁琐。在过去的一个月里，我开始尝试使用 Typefully 来统一管理和发布多个社交平台的内容，本文中我将分享我的使用心得。</p> </div> </div>  </div><div> <div class="max-w-4xl px-2 sm:px-4 py-6 mx-auto rounded-lg cursor-pointer sm:hover:bg-block group" id="zh/the-anomaly-of-onchange-in-swiftui-multi-layer-navigation"> <div class="flex items-center justify-between"> <span class="text-sm text-muted">2024 年 11 月 27 日</span> <div class="flex"> <a class="text-xs font-medium mx-2 text-secondary hover:text-heading pointer-events-auto" href="/zh/tags/SwiftUI/">
#SwiftUI </a> </div> </div> <div class="mt-3"> <div class="text-xl font-bold text-heading group-hover:text-secondary">有意为之还是技术缺陷？SwiftUI 多层导航中的 onChange 异常</div>  <p class="mt-2 text-default">SwiftUI 提供的 onChange 修饰器，使开发者能够在视图中监听特定值的变化，并在值发生改变时执行相应的操作。直觉上，只要某个视图位于当前可见的视图树分支中（ 活动中 ），在观察的值发生变化时，对应的闭包就应该被触发。但在某些特定的导航场景下，onChange 修饰器似乎会“选择性失聪”，明明观察的值发生了变化，却诡异地保持沉默。这究竟是苹果精心设计的特性，还是一个隐藏已久的代码缺陷？本文将揭示这一现象并对开发者给予必要的提醒。</p> </div> </div>  </div><div> <div class="max-w-4xl px-2 sm:px-4 py-6 mx-auto rounded-lg cursor-pointer sm:hover:bg-block group" id="zh/using-transactions-instead-of-save-in-swiftdata-and-core-data"> <div class="flex items-center justify-between"> <span class="text-sm text-muted">2024 年 11 月 20 日</span> <div class="flex"> <a class="text-xs font-medium mx-2 text-secondary hover:text-heading pointer-events-auto" href="/zh/tags/SwiftData/">
#SwiftData </a><a class="text-xs font-medium mx-2 text-secondary hover:text-heading pointer-events-auto" href="/zh/tags/Core Data/">
#Core Data </a> </div> </div> <div class="mt-3"> <div class="text-xl font-bold text-heading group-hover:text-secondary">在 SwiftData 和 Core Data 中用 Transaction 代替 Save</div>  <p class="mt-2 text-default">在数据持久化操作中，确保数据的一致性和完整性至关重要。SwiftData 框架通过在 ModelContext 中引入 transaction 方法，为开发者提供了一种更优雅的方式来组织和管理数据操作。本文将探讨如何运用事务（Transaction）的概念来构建更可靠、高效的持久化操作。</p> </div> </div>  </div><div> <div class="max-w-4xl px-2 sm:px-4 py-6 mx-auto rounded-lg cursor-pointer sm:hover:bg-block group" id="zh/understanding-swiftui-view-update-mechanism"> <div class="flex items-center justify-between"> <span class="text-sm text-muted">2024 年 11 月 13 日</span> <div class="flex"> <a class="text-xs font-medium mx-2 text-secondary hover:text-heading pointer-events-auto" href="/zh/tags/SwiftUI/">
#SwiftUI </a> </div> </div> <div class="mt-3"> <div class="text-xl font-bold text-heading group-hover:text-secondary">理解 SwiftUI 的视图刷新机制：从 TimelineView 刷新问题谈起</div>  <p class="mt-2 text-default">SwiftUI 中，视图的自动刷新机制让我们能够轻松构建响应式的用户界面。但有时，视图可能并不会按照我们的预期进行更新。本文将通过一个看似简单但颇具代表性的 TimelineView 刷新问题，探讨 SwiftUI 的视图刷新机制。</p> </div> </div>  </div><div> <div class="max-w-4xl px-2 sm:px-4 py-6 mx-auto rounded-lg cursor-pointer sm:hover:bg-block group" id="zh/mastering-data-tracking-and-notifications-in-core-data-and-swiftdata"> <div class="flex items-center justify-between"> <span class="text-sm text-muted">2024 年 11 月 6 日</span> <div class="flex"> <a class="text-xs font-medium mx-2 text-secondary hover:text-heading pointer-events-auto" href="/zh/tags/SwiftData/">
#SwiftData </a><a class="text-xs font-medium mx-2 text-secondary hover:text-heading pointer-events-auto" href="/zh/tags/Core Data/">
#Core Data </a> </div> </div> <div class="mt-3"> <div class="text-xl font-bold text-heading group-hover:text-secondary">掌握 Core Data 和 SwiftData 中的数据追踪与通知</div>  <p class="mt-2 text-default">Core Data 和 SwiftData 作为 Apple 生态系统中强大的持久化框架，不仅提供了 @FetchRequest 和 @Query 这样的声明式数据监听工具，更内置了一套完整的数据追踪与通知机制。了解和掌握这些机制对于构建健壮的数据驱动型应用至关重要。本文将带你探索从简单的自定义通知，到强大的持久化历史追踪（Persistent History Tracking 和 SwiftData History）等多层次的解决方案，助你应对各种复杂的数据同步场景。</p> </div> </div>  </div> <div class="text-right py-2"> <a class="text-secondary font-medium px-2 sm:px-4 pb-2 uppercase hover:text-heading" href="/zh/posts/"> 全部文章 <span class="text-xl">&gt;</span> </a> </div> </section> <script>(function(){const idAndURLs = [{"id":"zh/why-certain-view-modifiers-in-swift-6-cannot-usethe-state-property","path":"/zh/posts/why-certain-view-modifiers-in-swift-6-cannot-usethe-state-property/"},{"id":"zh/traps-and-countermeasures-for-abnormal-onappear-calls-in-swiftui","path":"/zh/posts/traps-and-countermeasures-for-abnormal-onappear-calls-in-swiftui/"},{"id":"zh/model-inheritance-in-core-data","path":"/zh/posts/model-inheritance-in-core-data/"},{"id":"zh/typefully-say-goodbye-to-the-hassles-of-social-media-posting","path":"/zh/posts/typefully-say-goodbye-to-the-hassles-of-social-media-posting/"},{"id":"zh/the-anomaly-of-onchange-in-swiftui-multi-layer-navigation","path":"/zh/posts/the-anomaly-of-onchange-in-swiftui-multi-layer-navigation/"},{"id":"zh/using-transactions-instead-of-save-in-swiftdata-and-core-data","path":"/zh/posts/using-transactions-instead-of-save-in-swiftdata-and-core-data/"},{"id":"zh/understanding-swiftui-view-update-mechanism","path":"/zh/posts/understanding-swiftui-view-update-mechanism/"},{"id":"zh/mastering-data-tracking-and-notifications-in-core-data-and-swiftdata","path":"/zh/posts/mastering-data-tracking-and-notifications-in-core-data-and-swiftdata/"}];

  document.addEventListener('DOMContentLoaded', () => {
    idAndURLs.map((idAndURL) => {
      setPostClickURL(idAndURL.id, idAndURL.path);
    });
  });

  function setPostClickURL(postId, path) {
    const div = document.getElementById(postId);
    if (div) {
      div.addEventListener('click', function (e) {
        // 使用类型断言
        const target = e.target;
        if (target && !target.closest('a')) {
          window.location.href = path;
        }
      });
    }
  }
})();</script> <script>(function(){const url = "https://fatbobman.com/ads/zh";

  const adCacheKey = 'dynamicAdCache';

  // 尝试从缓存中获取广告
  const cachedAd = JSON.parse(localStorage.getItem(adCacheKey));
  const now = Date.now();

  if (cachedAd && cachedAd.expiresAt > now) {
    console.log('Using cached ad');
    console.log(cachedAd.expiresAt - now);
    // 如果缓存有效，直接使用缓存的广告
    renderAd(cachedAd.content);
  } else {
    console.log('Fetching ad from the server');
    // 如果缓存无效，从服务器获取广告
    fetch(url, {
      headers: {
        'Accept': 'text/html',
      },
      cache: 'default'
    })
      .then(response => {
        const maxAgeMatch = response.headers.get('Cache-Control')?.match(/max-age=(\d+)/);
        const maxAge = maxAgeMatch ? parseInt(maxAgeMatch[1], 10) : 0;

        if (!response.ok || maxAge <= 0) {
          throw new Error('Invalid response or missing Cache-Control');
        }

        return response.text().then(adContent => {
          const expiresAt = now + maxAge * 1000; // 计算失效时间
          // 缓存广告内容
          localStorage.setItem(adCacheKey, JSON.stringify({ content: adContent, expiresAt }));
          // 渲染广告
          renderAd(adContent);
        });
      })
      .catch(error => console.error('Error loading the ad:', error));
  }

  // 渲染广告函数
  function renderAd(html) {
    const adSlots = document.querySelectorAll('.dynamic-ad-container');
    adSlots.forEach(slot => {
      slot.innerHTML = html;
    });
  }
})();</script> <section> <div class="container p-2 sm:p-4 mx-auto space-y-8"> <div class="space-y-2 text-center"> <a href="/zh/collections/"> <h2 class="font-sans text-3xl font-bold text-default hover:text-secondary">精选合集</h2> </a> </div> <div class="grid grid-cols-1 gap-x-6 gap-y-6 md:grid-cols-2"> <div class="flex flex-col bg-block rounded overflow-hidden border-[1px] dark:border-0 sm:border-gray-200/70 sm:hover:shadow-lg sm:hover:scale-105 sm:transition-transform sm:duration-200 group"> <a rel="noopener noreferrer" href="/zh/collections/layout-animation/" aria-label="布局与动画"> <picture class="object-cover w-full h-52"> <!-- 为不同屏幕尺寸提供多种图片版本 --> <source media="(max-width: 479px)" srcset="https://cdn.fatbobman.com/card/collection-layout-animation.webp?imageView2/0/w/300 1x, https://cdn.fatbobman.com/card/collection-layout-animation.webp?imageView2/0/w/400 2x"> <source media="(max-width: 767px)" srcset="https://cdn.fatbobman.com/card/collection-layout-animation.webp?imageView2/0/w/400 1x, https://cdn.fatbobman.com/card/collection-layout-animation.webp?imageView2/0/w/500 2x"> <source media="(max-width: 1024px)" srcset="https://cdn.fatbobman.com/card/collection-layout-animation.webp?imageView2/0/w/600 1x, https://cdn.fatbobman.com/card/collection-layout-animation.webp?imageView2/0/w/700 2x"> <img src="https://cdn.fatbobman.com/card/collection-layout-animation.webp?imageView2/0/w/700" alt="布局与动画" class="object-cover w-full h-52" loading="lazy" decoding="async" width="700" height="300"> </picture> <div class="flex flex-col flex-1 p-6"> <p class="text-xs font-medium text-secondary">SwiftUI</p> <h3 class="flex-1 py-2 text-lg font-semibold leadi text-heading group-hover:text-secondary"> 布局与动画 </h3> </div> </a> </div><div class="flex flex-col bg-block rounded overflow-hidden border-[1px] dark:border-0 sm:border-gray-200/70 sm:hover:shadow-lg sm:hover:scale-105 sm:transition-transform sm:duration-200 group"> <a rel="noopener noreferrer" href="/zh/collections/cloudkit-sync/" aria-label="同步与共享"> <picture class="object-cover w-full h-52"> <!-- 为不同屏幕尺寸提供多种图片版本 --> <source media="(max-width: 479px)" srcset="https://cdn.fatbobman.com/card/collection-cloudkit-sync.webp?imageView2/0/w/300 1x, https://cdn.fatbobman.com/card/collection-cloudkit-sync.webp?imageView2/0/w/400 2x"> <source media="(max-width: 767px)" srcset="https://cdn.fatbobman.com/card/collection-cloudkit-sync.webp?imageView2/0/w/400 1x, https://cdn.fatbobman.com/card/collection-cloudkit-sync.webp?imageView2/0/w/500 2x"> <source media="(max-width: 1024px)" srcset="https://cdn.fatbobman.com/card/collection-cloudkit-sync.webp?imageView2/0/w/600 1x, https://cdn.fatbobman.com/card/collection-cloudkit-sync.webp?imageView2/0/w/700 2x"> <img src="https://cdn.fatbobman.com/card/collection-cloudkit-sync.webp?imageView2/0/w/700" alt="同步与共享" class="object-cover w-full h-52" loading="lazy" decoding="async" width="700" height="300"> </picture> <div class="flex flex-col flex-1 p-6"> <p class="text-xs font-medium text-secondary">CloudKit Service</p> <h3 class="flex-1 py-2 text-lg font-semibold leadi text-heading group-hover:text-secondary"> 同步与共享 </h3> </div> </a> </div><div class="flex flex-col bg-block rounded overflow-hidden border-[1px] dark:border-0 sm:border-gray-200/70 sm:hover:shadow-lg sm:hover:scale-105 sm:transition-transform sm:duration-200 group"> <a rel="noopener noreferrer" href="/zh/collections/data-flow/" aria-label="数据流与状态管理"> <picture class="object-cover w-full h-52"> <!-- 为不同屏幕尺寸提供多种图片版本 --> <source media="(max-width: 479px)" srcset="https://cdn.fatbobman.com/card/collection-data-flow.webp?imageView2/0/w/300 1x, https://cdn.fatbobman.com/card/collection-data-flow.webp?imageView2/0/w/400 2x"> <source media="(max-width: 767px)" srcset="https://cdn.fatbobman.com/card/collection-data-flow.webp?imageView2/0/w/400 1x, https://cdn.fatbobman.com/card/collection-data-flow.webp?imageView2/0/w/500 2x"> <source media="(max-width: 1024px)" srcset="https://cdn.fatbobman.com/card/collection-data-flow.webp?imageView2/0/w/600 1x, https://cdn.fatbobman.com/card/collection-data-flow.webp?imageView2/0/w/700 2x"> <img src="https://cdn.fatbobman.com/card/collection-data-flow.webp?imageView2/0/w/700" alt="数据流与状态管理" class="object-cover w-full h-52" loading="lazy" decoding="async" width="700" height="300"> </picture> <div class="flex flex-col flex-1 p-6"> <p class="text-xs font-medium text-secondary">SwiftUI</p> <h3 class="flex-1 py-2 text-lg font-semibold leadi text-heading group-hover:text-secondary"> 数据流与状态管理 </h3> </div> </a> </div><div class="flex flex-col bg-block rounded overflow-hidden border-[1px] dark:border-0 sm:border-gray-200/70 sm:hover:shadow-lg sm:hover:scale-105 sm:transition-transform sm:duration-200 group"> <a rel="noopener noreferrer" href="/zh/collections/optimization-debugging/" aria-label="优化与调试"> <picture class="object-cover w-full h-52"> <!-- 为不同屏幕尺寸提供多种图片版本 --> <source media="(max-width: 479px)" srcset="https://cdn.fatbobman.com/card/collection-optimization-debugging.webp?imageView2/0/w/300 1x, https://cdn.fatbobman.com/card/collection-optimization-debugging.webp?imageView2/0/w/400 2x"> <source media="(max-width: 767px)" srcset="https://cdn.fatbobman.com/card/collection-optimization-debugging.webp?imageView2/0/w/400 1x, https://cdn.fatbobman.com/card/collection-optimization-debugging.webp?imageView2/0/w/500 2x"> <source media="(max-width: 1024px)" srcset="https://cdn.fatbobman.com/card/collection-optimization-debugging.webp?imageView2/0/w/600 1x, https://cdn.fatbobman.com/card/collection-optimization-debugging.webp?imageView2/0/w/700 2x"> <img src="https://cdn.fatbobman.com/card/collection-optimization-debugging.webp?imageView2/0/w/700" alt="优化与调试" class="object-cover w-full h-52" loading="lazy" decoding="async" width="700" height="300"> </picture> <div class="flex flex-col flex-1 p-6"> <p class="text-xs font-medium text-secondary">SwiftUI</p> <h3 class="flex-1 py-2 text-lg font-semibold leadi text-heading group-hover:text-secondary"> 优化与调试 </h3> </div> </a> </div><div class="flex flex-col bg-block rounded overflow-hidden border-[1px] dark:border-0 sm:border-gray-200/70 sm:hover:shadow-lg sm:hover:scale-105 sm:transition-transform sm:duration-200 group"> <a rel="noopener noreferrer" href="/zh/collections/persistent-framework/" aria-label="深入持久性框架"> <picture class="object-cover w-full h-52"> <!-- 为不同屏幕尺寸提供多种图片版本 --> <source media="(max-width: 479px)" srcset="https://cdn.fatbobman.com/card/collection-persistent-framework.webp?imageView2/0/w/300 1x, https://cdn.fatbobman.com/card/collection-persistent-framework.webp?imageView2/0/w/400 2x"> <source media="(max-width: 767px)" srcset="https://cdn.fatbobman.com/card/collection-persistent-framework.webp?imageView2/0/w/400 1x, https://cdn.fatbobman.com/card/collection-persistent-framework.webp?imageView2/0/w/500 2x"> <source media="(max-width: 1024px)" srcset="https://cdn.fatbobman.com/card/collection-persistent-framework.webp?imageView2/0/w/600 1x, https://cdn.fatbobman.com/card/collection-persistent-framework.webp?imageView2/0/w/700 2x"> <img src="https://cdn.fatbobman.com/card/collection-persistent-framework.webp?imageView2/0/w/700" alt="深入持久性框架" class="object-cover w-full h-52" loading="lazy" decoding="async" width="700" height="300"> </picture> <div class="flex flex-col flex-1 p-6"> <p class="text-xs font-medium text-secondary">SwiftData &amp; Core Data</p> <h3 class="flex-1 py-2 text-lg font-semibold leadi text-heading group-hover:text-secondary"> 深入持久性框架 </h3> </div> </a> </div> </div> </div> </section> <script src="/js/modalsubscribecontroller.js" defer></script> <!-- Modal toggle --><button data-modal-target="default-modal" data-modal-toggle="default-modal" class="hidden text-white bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800" type="button">
Toggle modal
</button> <!-- Main modal --> <div id="modal-backdrop" class="hidden fixed inset-0 bg-black bg-opacity-50 z-40"> <div id="default-modal" tabindex="-1" aria-hidden="true" class="hidden w-full h-full justify-center items-center"> <div class="relative p-4 w-full max-w-2xl"> <!-- Modal content --> <div class="relative bg-white rounded-lg shadow-2xl dark:bg-gray-800 border-gray-200 border dark:border-gray-600"> <!-- Modal header --> <div class="flex items-center justify-between px-4 md:px-5 pt-4 pb-0 rounded-t dark:border-gray-600"> <button type="button" class="text-gray-400 bg-transparent hover:bg-gray-200 hover:text-gray-900 rounded-lg text-sm w-8 h-8 ms-auto inline-flex justify-center items-center dark:hover:bg-gray-600 dark:hover:text-white" data-modal-hide="default-modal"> <svg class="w-3 h-3" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 14 14"> <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m1 1 6 6m0 0 6 6M7 7l6-6M7 7l-6 6"></path> </svg> <span class="sr-only">Close modal</span> </button> </div> <!-- Modal body --> <div class="px-4 md:px-5 pb-4"> <div class="w-full mx-auto text-center px-6 pb-6"> <div class="text-lg font-semibold text-gray-900 dark:text-blue-100 pt-4 pb-8">每周一，与您分享精心筛选的 Swift 与 SwiftUI 开发精华</div> <div id="custom-substack-embed1"></div> <!-- <div class="text-gray-700 dark:text-blue-200 text-xs font-medium pt-4">{bottomTip}</div> --> <script>(function(){const subscribeText = "立刻订阅";
const placeholder = "输入邮箱订阅周报";

    window.CustomSubstackWidget = {
      substackUrl: 'weekly.fatbobman.com',
      placeholder: placeholder,
      buttonText: subscribeText,
      theme: 'custom',
      colors: {
        primary: '#F50000',
        input: '#000000',
        email: '#777777',
        text: '#000000',
      },
    };

    // 创建一个新的 MutationObserver 实例
    const observer = new MutationObserver((mutationsList, observer) => {
      // 遍历所有的 mutations
      for (let mutation of mutationsList) {
        // 如果这个 mutation 是一个子节点的添加或删除
        if (mutation.type === 'childList') {
          // 查找订阅框
          const widget = document.querySelector('.custom-substack-widget1');
          if (widget) {
            // 查找 input 元素
            const input = widget.querySelector('input');
            const button = widget.querySelector('button');
            // 根据当前的颜色方案修改订阅框的样式
            if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) {
              // 暗黑模式
              widget.style.border = 'var(--subscribe-widget-border)';
              widget.style.padding = '0.3rem';
              widget.style.borderRadius = '0.7rem 0.7rem 0.7rem 0.7rem';
              widget.style.backgroundColor = 'var(--subscribe-input-background)';
              input.style.border = '0px solid #000';
              input.style.backgroundColor = 'var(--subscribe-input-background)';
              input.style.padding = '0.5rem';
              // input.style.border = '1px solid #E2E8F0';
              input.style.outline = 'none';
              button.style.backgroundColor = 'var(--subscribe-button-background)';
              button.style.color = 'var(--subscribe-button-text)';
              button.style.fontWeight = 'bold';
              button.style.padding = '0.5rem 1rem';
              button.style.borderRadius = '0.5rem 0.5rem 0.5rem 0.5rem';
              button.style.maxWidth = '100px';
            } else {
              // 正常模式
              widget.style.border = 'var(--subscribe-widget-border)';
              widget.style.padding = '0.3rem';
              widget.style.borderRadius = '0.7rem 0.7rem 0.7rem 0.7rem';
              widget.style.backgroundColor = 'var(--subscribe-input-background)';
              input.style.border = '0px solid #000';
              input.style.backgroundColor = 'var(--subscribe-input-background)';
              input.style.padding = '0.5rem';
              // input.style.border = '1px solid #E2E8F0';
              input.style.outline = 'none';
              button.style.backgroundColor = 'var(--subscribe-button-background)';
              button.style.color = 'var(--subscribe-button-text)';
              button.style.fontWeight = 'bold';
              button.style.padding = '0.5rem 1rem';
              button.style.borderRadius = '0.5rem 0.5rem 0.5rem 0.5rem';
              button.style.maxWidth = '100px';
            }

            if (window.matchMedia('(max-width: 640px)').matches) {
              // 屏幕尺寸小于 640px
              widget.style.maxWidth = '325px';
            } else {
              // 屏幕尺寸大于或等于 640px
              widget.style.maxWidth = '600px';
            }
            // 停止观察
            observer.disconnect();
          }
        }
      }
    });

    // 开始观察 #custom-substack-embed 元素的子节点的变化
    observer.observe(document.getElementById('custom-substack-embed1'), { childList: true });
  })();</script> <script src="/js/subscriber.js" async></script> </div> <div class="flex justify-center pb-6"> <button data-modal-hide="default-modal" type="button" class="text-gray-600 dark:text-gray-400 bg-transparent hover:text-gray-800 dark:hover:text-gray-200 font-medium rounded-lg text-sm px-8 py-2.5 text-center transition-colors">继续阅读</button> </div> </div> </div> </div> </div> </div> </div>   </div> </main> </div> <footer> <footer class="bg-block"> <div class="mx-auto w-full max-w-3xl px-4 md:px-6"> <div class="container flex flex-col items-center pt-10"> <div class="flex flex-row justify-around w-full space-x-3"> <div class="flex flex-col space-y-4"> <h2 class="font-bold text-heading">网站</h2> <div class="flex flex-col space-y-2 text-sm text-default font-medium"> <a href="https://apps.apple.com/us/app/id1534513553" class="hover:text-secondary" target="_blank">健康笔记</a> <a href="https://discord.gg/zhou-zi-de-swiftji-shi-ben-967978112509935657" class="hover:text-secondary" target="_blank">Discord</a> <a href="/zh/posts/" class="hover:text-secondary">文章</a> <a href="/zh/tags/" class="hover:text-secondary">标签</a> <a href="/zh/collections/" class="hover:text-secondary">合集</a> <a href="/zh/snippet/" class="hover:text-secondary">小贴士</a> </div> </div> <div class="flex flex-col space-y-4"> <h2 class="font-bold text-heading">关注</h2> <div class="flex flex-col space-y-2 text-sm text-default font-medium"> <a href="https://weekly.fatbobman.com" class="hover:text-secondary">周报</a> <a href="https://x.com/intent/follow?screen_name=fatbobman" class="hover:text-secondary" target="_blank">Twitter</a> <a href="https://mastodon.social/@fatbobman" class="hover:text-secondary" target="_blank">Mastodon</a> <a href="https://www.linkedin.com/in/fatbobman/" class="hover:text-secondary" target="_blank">Linkedin</a> <a href="https://bsky.app/profile/fatbobman.bsky.social" class="hover:text-secondary" target="_blank">Blue Sky</a> <a href="https://web.okjike.com/u/e32947ef-7751-4363-9456-b340eef2efd3" class="hover:text-secondary" target="_blank">
即刻
</a> <a href="https://github.com/fatbobman" class="hover:text-secondary" target="_blank">GitHub</a> <a href="/zh/rss.xml" class="hover:text-secondary hover:font-medium" target="_blank">RSS</a> </div> </div> <div class="flex flex-col space-y-4"> <h2 class="font-bold text-heading">信息</h2> <div class="flex flex-col space-y-2 text-sm text-default font-medium"> <a href="/zh/about/" class="hover:text-secondary">关于</a>  </div> </div> </div> <div class="pb-0"> <div class="flex items-center justify-center w-full px-6 pt-12 text-sm"> <span class="text-muted text-xs">Copyright © <span>2020-</span> 2025 <a href="https://x.com/fatbobman" class="border-b-secondary border-b-[1px]">Fatbobman Digital Limited</a>. All Rights
            Reserved.</span> </div> <div class="flex items-center justify-center w-full px-6 pt-2 text-sm pb-10"> <span> <a href="https://beian.miit.gov.cn/#/Integrated/index" target="_blank" class="block text-xs text-muted">
辽ICP备20006550号-1
</a> </span> </div> </div> </div> </div> </footer> </footer> </div>   <!-- <script is:inline src="https://cdnjs.cloudflare.com/ajax/libs/flowbite/1.8.0/flowbite.min.js"></script> --><script type="module" src="/js/theme.js" defer></script> <script>(function(){const currentLang = "zh";

  function attachEvent(selector, event, fn) {
    const matches = typeof selector === 'string' ? document.querySelectorAll(selector) : selector;
    if (matches && matches.length) {
      matches.forEach((elem) => {
        elem.addEventListener(event, (e) => fn(e, elem), false);
      });
    }
  }

  // 为每个需要清除 focus 状态的按钮都添加一个 clear-focus 类, 下面的代码将在点击后自动移除 focus 状态
  document.addEventListener('DOMContentLoaded', (event) => {
    // 获取所有具有 'clear-focus' 类的按钮
    const buttons = document.querySelectorAll('.clear-focus');

    buttons.forEach((button) => {
      button.addEventListener('click', () => {
        setTimeout(() => {
          button.blur();
        }, 0);
      });
    });
  });

  window.onpageshow = function () {
    document.documentElement.classList.add('motion-safe:scroll-smooth');
  };
})();</script> <div id="docsearch-container-data" data-lang="zh" data-searchtext="搜索..."></div> <script src="https://cdn.jsdelivr.net/npm/@docsearch/js@3"></script> <script src="/js/runsearch.js"></script> <!-- Google Tag Manager (noscript) --><noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-5C7N4MF5" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript><!-- End Google Tag Manager (noscript) --> </body></html>