<!DOCTYPE html><html lang="zh"> <head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="sitemap" href="/sitemap-index.xml"><!-- <link rel="shortcut icon" href={iconSVG.src} /> --><link rel="icon" type="image/png" sizes="16x16" href="/_astro/favicon-16x16.2312221518-2.4YWPtmqG.png"><link rel="icon" type="image/png" sizes="32x32" href="/_astro/favicon-32x32.2312221518-2.W1M1HUWf.png"><link rel="mask-icon" href="/_astro/faviconSVG-32x32.2312221518-2.JZf4E4CU.svg"><link rel="apple-touch-icon" sizes="180x180" href="/_astro/apple-touch-icon.2312227635.RNVrzb6f.png"><link rel="stylesheet" href="/style/global-new.css"><title>掌握 TipKit：基础 | 肘子的 Swift 记事本</title>
<meta name="description" content="探索苹果 TipKit 框架的基础用法，学习如何在 SwiftUI 应用中展示提示，包括内联和弹出窗口样式，以及如何定义规则、事件，控制 Tip 的显示时机和频率。">
<meta name="robots" content="index,follow">
<link rel="canonical" href="https://fatbobman.com/zh/posts/mastering-tipkit-basic/">
<meta property="og:title" content="掌握 TipKit：基础 | 肘子的 Swift 记事本">
<meta property="og:description" content="探索苹果 TipKit 框架的基础用法，学习如何在 SwiftUI 应用中展示提示，包括内联和弹出窗口样式，以及如何定义规则、事件，控制 Tip 的显示时机和频率。">
<meta property="og:url" content="https://fatbobman.com/zh/posts/mastering-tipkit-basic/">
<meta property="og:type" content="article">
<meta property="og:image" content="https://cdn.fatbobman.com/card/mastering-tipkit-basic-zh.png">

<meta property="og:locale" content="zh">
<meta property="og:site_name" content="fatbobman.com">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:site" content="@fatbobman">
<meta name="twitter:creator" content="@fatbobman"><link rel="alternate" type="application/rss+xml" title="RSS Feed for My Website" href="https://fatbobman.com/zh/rss.xml"><link rel="sitemap" href="/sitemap-index.xml"><meta name="keywords" content="Swift 编程,Swift Programming,SwiftUI 教程,SwiftUI Tutorials,Core Data 实践,Core Data Practices,SwiftData 应用,SwiftData Applications,iOS 开发,iOS Development,Swift UI 设计,Swift UI Design,Swift 性能优化,Swift Performance Optimization,Swift 编码技巧,Swift Coding Techniques,iOS 应用开发,iOS App Development,Swift 数据管理,Swift Data Management,SwiftUI 布局,SwiftUI Layout,SwiftUI 动画,SwiftUI Animation"><meta name="apple-mobile-web-app-title" content="肘子的博客"><link rel="alternate" hreflang="zh" href="https://fatbobman.com/zh/posts/mastering-tipkit-basic/"><link rel="alternate" hreflang="en" href="https://fatbobman.com/en/posts/mastering-tipkit-basic/"><!-- <BasicScripts /> --><!-- <script is:inline>
  var _hmt = _hmt || [];
  (function() {
    var hm = document.createElement("script");
    hm.src = "https://hm.baidu.com/hm.js?14e5d60a3ea6276655f9d14c58b1fcd0";
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(hm, s);
  })();
</script> --><!-- Google Tag Manager --><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
  new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
  j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
  'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
  })(window,document,'script','dataLayer','GTM-5C7N4MF5');</script> <!-- End Google Tag Manager --><link rel="stylesheet" href="/_astro/about.ahVyszCC.css" />
<link rel="stylesheet" href="/_astro/about.1Vwsz8o8.css" />
<link rel="stylesheet" href="/_astro/_slug_.KE54EPLE.css" />
<style>.sticky[data-astro-cid-4wsjtibl]{position:fixed;top:0;left:50%;transform:translate(-50%);width:100%;max-width:100%}
@keyframes rotate360{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.rotate[data-astro-cid-qwm5cfxr]{animation:rotate360 1s linear}
</style><script type="module" src="/_astro/hoisted.Ri_ptc1X.js"></script></head> <body class="antialiased text-default tracking-tight bg-page">  <div class="flex flex-col min-h-screen justify-between "> <div> <header> <div class="bg-block" id="wholeHeader" data-astro-cid-4wsjtibl> <div id="blogTitle"> <a href="/zh/"> <div class="flex space-x-4 mx-auto text-center pt-16 sm:pt-12 font-black w-[240px] sm:w-[300px] pb-6 sm:pb-1"> <svg class="text-heading" width="337" height="63"> <use href="/images/title-fatbobman.svg#main"></use> </svg> <svg class="text-primary mt-[-6px] sm:mt-[-5px]" width="130" height="91"> <use href="/images/title-blog.svg#main"></use> </svg> </div> </a> </div> <div class="bg-block z-50 shadow-custom-light dark:shadow-custom-dark" id="stickyHeader" data-astro-cid-4wsjtibl> <div class="max-w-5xl flex flex-wrap items-center justify-between mx-auto p-2 sm:p-0" data-astro-cid-4wsjtibl> <div class="flex space-x-2" data-astro-cid-4wsjtibl> <div id="lang-data" data-lang="zh" style="display: none;"></div> <button id="language-dropdown-button" data-dropdown-toggle="language-dropdown-menu" type="button" class="p-2 w-10 h-10 font-medium text-default hover:text-secondary hover:bg-gray-100 dark:hover:bg-page focus:outline-none focus:ring-2 focus:ring-gray-200 dark:hover:bg-gray-700 dark:focus:ring-gray-600 rounded-lg"> ZH </button> <!-- Dropdown --> <div class="z-50 hidden my-4 text-base list-none bg-page divide-y divide-gray-100 rounded-lg shadow dark:bg-gray-700" id="language-dropdown-menu"> <ul class="py-2 font-medium text-sm" role="none"> <li> <a href="/en/posts/mastering-tipkit-basic/" class="block px-4 py-2 text-default hover:bg-gray-100 dark:hover:bg-gray-600 dark:hover:text-white" role="menuitem"> <div class="inline-flex items-center">
English
<svg xmlns="http://www.w3.org/2000/svg" class="w-3.5 h-3.5 ml-2 hidden text-primary" id="EN-check" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M6.979 3.074a6 6 0 0 1 4.988 1.425l.037 .033l.034 -.03a6 6 0 0 1 4.733 -1.44l.246 .036a6 6 0 0 1 3.364 10.008l-.18 .185l-.048 .041l-7.45 7.379a1 1 0 0 1 -1.313 .082l-.094 -.082l-7.493 -7.422a6 6 0 0 1 3.176 -10.215z" stroke-width="0" fill="currentColor"></path></svg> </div> </a> </li> <li> <a href="" class="block px-4 py-2 text-default hover:bg-gray-100 dark:hover:bg-gray-600 dark:hover:text-white" role="menuitem"> <div class="inline-flex items-center">
中文
<svg xmlns="http://www.w3.org/2000/svg" class="w-3.5 h-3.5 ml-2 hidden text-primary" id="ZH-check" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M6.979 3.074a6 6 0 0 1 4.988 1.425l.037 .033l.034 -.03a6 6 0 0 1 4.733 -1.44l.246 .036a6 6 0 0 1 3.364 10.008l-.18 .185l-.048 .041l-7.45 7.379a1 1 0 0 1 -1.313 .082l-.094 -.082l-7.493 -7.422a6 6 0 0 1 3.176 -10.215z" stroke-width="0" fill="currentColor"></path></svg> </div> </a> </li> <li> <div class="border-t border-gray-200 dark:border-gray-800 w-4/5 mx-auto my-2"></div> <button class="block px-4 py-2 text-default hover:bg-gray-100 dark:hover:bg-gray-600 dark:hover:text-white" role="menuitem" id="set-default-lang"> <div class="inline-flex items-center"> 将中文设置为默认 </div> </button> </li> </ul> </div>  <button id="theme-dropdown-button" data-dropdown-toggle="theme-dropdown-menu" type="button" class="group p-2 w-10 h-10 text-default hover:bg-gray-100 dark:hover:bg-page focus:outline-none focus:ring-2 focus:ring-gray-200 dark:text-gray-400 dark:hover:bg-gray-700 dark:focus:ring-gray-600 rounded-lg flex items-center justify-center"> <svg viewBox="0 0 24 24" id="theme_icon_system" class="w-5 h-5 text-default fill-current group-hover:text-secondary hidden" astro-icon="tabler:device-laptop"><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" class="icon-tabler"><path d="M3 19h18"/><rect width="14" height="10" x="5" y="6" rx="1"/></g></svg> <svg viewBox="0 0 24 24" id="theme_icon_dark" class="w-5 h-5 text-default fill-current group-hover:text-secondary hidden" astro-icon="tabler:moon"><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 3h.393a7.5 7.5 0 0 0 7.92 12.446A9 9 0 1 1 12 2.992z"/></svg> <svg viewBox="0 0 24 24" id="theme_icon_light" class="w-5 h-5 text-default fill-current group-hover:text-secondary hidden" astro-icon="tabler:sun"><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" class="icon-tabler"><circle cx="12" cy="12" r="4"/><path d="M3 12h1m8-9v1m8 8h1m-9 8v1M5.6 5.6l.7.7m12.1-.7-.7.7m0 11.4.7.7m-12.1-.7-.7.7"/></g></svg> </button> <!-- Dropdown --> <div class="z-50 hidden my-4 text-base list-none bg-white divide-y divide-gray-100 rounded-lg shadow dark:bg-gray-700" id="theme-dropdown-menu"> <ul class="py-2 font-medium" role="none"> <li class="hover:bg-gray-100 dark:hover:bg-gray-600"> <button class="flex px-4 py-2 text-sm align-text-center dark:hover:text-white text-default" id="theme_button_light"> <svg viewBox="0 0 24 24" class="w-5 h-5 fill-current" astro-icon="tabler:sun"><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" class="icon-tabler"><circle cx="12" cy="12" r="4"/><path d="M3 12h1m8-9v1m8 8h1m-9 8v1M5.6 5.6l.7.7m12.1-.7-.7.7m0 11.4.7.7m-12.1-.7-.7.7"/></g></svg> <span class="ml-2 dark:hover:text-white">Light</span> </button> </li> <li class="hover:bg-gray-100 dark:hover:bg-gray-600"> <button class="flex px-4 py-2 text-sm align-text-center dark:hover:text-white text-default" id="theme_button_dark"> <svg viewBox="0 0 24 24" class="w-5 h-5" astro-icon="tabler:moon"><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 3h.393a7.5 7.5 0 0 0 7.92 12.446A9 9 0 1 1 12 2.992z"/></svg> <span class="ml-2 text-default dark:hover:text-white">Dark</span> </button> </li> <li class="hover:bg-gray-100 dark:hover:bg-gray-600"> <button class="flex px-4 py-2 text-sm align-text-center dark:hover:text-white text-default" id="theme_button_system"> <svg viewBox="0 0 24 24" class="w-5 h-5" astro-icon="tabler:device-laptop"><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" class="icon-tabler"><path d="M3 19h18"/><rect width="14" height="10" x="5" y="6" rx="1"/></g></svg> <span class="ml-2 dark:hover:text-white">System</span> </button> </li> </ul> </div> <script>
  (async () => {
    const { setTheme } = await import('/js/theme.js');
    // Use setTheme here
    // Change the icons inside the button based on previous settings
    // 如果 localStorage 里面有设置过 color-theme 的值, 则 themeToggleSystemIcon.classList.remove('hidden')
    function setThemeButton() {
      let theme = localStorage.getItem('color-theme');
      if (theme === 'dark') {
        themeToggleDarkIcon.classList.remove('hidden');
        themeToggleLightIcon.classList.add('hidden');
        themeToggleSystemIcon.classList.add('hidden');
      } else if (theme === 'light') {
        themeToggleDarkIcon.classList.add('hidden');
        themeToggleLightIcon.classList.remove('hidden');
        themeToggleSystemIcon.classList.add('hidden');
      } else {
        themeToggleDarkIcon.classList.add('hidden');
        themeToggleLightIcon.classList.add('hidden');
        themeToggleSystemIcon.classList.remove('hidden');
      }
    }

    // 监听暗黑模式的变化
    window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', (event) => {
      setThemeButton();
    });

    // 保证其他的页面也能够监听到 localStorage 的变化
    window.addEventListener('storage', function (event) {
      if (event.key === 'color-theme') {
        setThemeButton();
      }
    });

    function resetTheme() {
      setTheme();
      setThemeButton();
    }

    // 获取按钮
    var themeButtonLight = document.getElementById('theme_button_light');
    var themeButtonDark = document.getElementById('theme_button_dark');
    var themeButtonSystem = document.getElementById('theme_button_system');
    // 获取图标
    var themeToggleDarkIcon = document.getElementById('theme_icon_dark');
    var themeToggleLightIcon = document.getElementById('theme_icon_light');
    var themeToggleSystemIcon = document.getElementById('theme_icon_system');

    // Listen for clicks on the button themeToggleDarkIcon
    themeButtonDark.addEventListener('click', function () {
      localStorage.setItem('color-theme', 'dark');
      resetTheme();
    });

    // // Listen for clicks on the button themeToggleLightIcon
    themeButtonLight.addEventListener('click', function () {
      localStorage.setItem('color-theme', 'light');
      resetTheme();
    });

    // // Listen for clicks on the button themeToggleSystemIcon
    themeButtonSystem.addEventListener('click', function () {
      localStorage.removeItem('color-theme');
      resetTheme();
    });

    resetTheme();
  })();
</script> <link rel="stylesheet" href="/style/docsearch.css"><div id="docsearch" class="group w-10 h-10 text-default hover:bg-gray-100 dark:hover:bg-page focus:outline-none focus:ring-2 focus:ring-gray-200 dark:text-gray-400 dark:hover:bg-gray-700 dark:focus:ring-gray-600 rounded-lg flex items-center justify-center"></div> </div> <button data-collapse-toggle="navbar-solid-bg" type="button" class="inline-flex items-center p-2 mx-2 w-10 h-10 justify-center text-sm text-gray-500 rounded-lg md:hidden hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-gray-200 dark:text-gray-400 dark:hover:bg-gray-700 dark:focus:ring-gray-600" aria-controls="navbar-solid-bg" aria-expanded="false" id="navbar-toggle-button"> <span class="sr-only">Open main menu</span> <svg class="w-5 h-5 text-default" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 17 14"> <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M1 1h15M1 7h15M1 13h15"></path> </svg> </button> <nav class="hidden w-full md:block md:w-auto px-4 z-40" id="navbar-solid-bg"> <ul class="flex flex-col font-bold mt-4 rounded-lg bg-gray-50 md:space-x-8 rtl:space-x-reverse md:flex-row md:mt-0 md:border-0 md:bg-transparent dark:bg-gray-800 md:dark:bg-transparent dark:border-gray-700"> <a href="/zh/" class="block py-2 px-3 md:p-0 rounded  text-heading md:hover:text-secondary hover:bg-gray-100 dark:hover:bg-gray-700 md:hover:bg-transparent md:dark:hover:bg-transparent"> 首页 </a><a href="/zh/posts/" class="block py-2 px-3 md:p-0 rounded text-invert bg-secondary md:bg-transparent md:text-secondary md:dark:bg-transparent" aria-current="page"> 文章 </a><a href="/zh/weekly/" class="block py-2 px-3 md:p-0 rounded  text-heading md:hover:text-secondary hover:bg-gray-100 dark:hover:bg-gray-700 md:hover:bg-transparent md:dark:hover:bg-transparent"> 周报 </a><a href="/zh/snippet/" class="block py-2 px-3 md:p-0 rounded  text-heading md:hover:text-secondary hover:bg-gray-100 dark:hover:bg-gray-700 md:hover:bg-transparent md:dark:hover:bg-transparent"> 小贴士 </a><a href="/zh/about/" class="block py-2 px-3 md:p-0 rounded  text-heading md:hover:text-secondary hover:bg-gray-100 dark:hover:bg-gray-700 md:hover:bg-transparent md:dark:hover:bg-transparent"> 关于 </a> </ul> </nav>  </div> </div> <div id="placeholder" class="hidden" data-astro-cid-4wsjtibl></div> </div> <script>(function(){const enableSticky = true;
const enableStickyInMobile = true;

  window.onload = function () {
    checkStickyHeader();
    stickySetup();
  };

  window.addEventListener('resize', stickySetup);

  function checkStickyHeader() {
    const title = document.getElementById('blogTitle');
    const stickyHeader = document.getElementById('stickyHeader');
    const placeholder = document.getElementById('placeholder');

    if (title && stickyHeader && placeholder) {
      const offset = title.offsetTop + title.offsetHeight;

      if (shouldStick() && window.scrollY >= offset) {
        stickyHeader.classList.add('sticky');
        placeholder.style.display = 'block';
        placeholder.style.height = `${stickyHeader.offsetHeight}px`;
      } else {
        stickyHeader.classList.remove('sticky');
        placeholder.style.display = 'none';
      }
    }
  }

  function shouldStick() {
    if (!enableSticky) return false;

    let isMobile = window.matchMedia('(max-width: 640px)').matches;
    if (isMobile && !enableStickyInMobile) return false;

    return true;
  }

  function stickySetup() {
    window.onscroll = checkStickyHeader;
  }
})();</script>  </header> <main class="w-full mx-auto max-w-3xl p-4 md:p-6 "> <div class="container mx-auto space-y-6 sm:space-y-12">   <div class="mx-auto space-y-4 text-center py-10" style="width:80%"> <div class="flex mx-auto justify-center"> <div class="flex mx-auto justify-center"> <a class="text-xs font-medium sm:font-semibold mx-2 text-muted hover:text-secondary" href="/zh/tags/SwiftUI/">
#SwiftUI </a><a class="text-xs font-medium sm:font-semibold mx-2 text-muted hover:text-secondary" href="/zh/tags/Frameworks/">
#Frameworks </a> <a class="text-xs font-medium sm:font-semibold mx-2 text-muted hover:text-secondary" href="/en/posts/mastering-tipkit-basic/" id="language-switcher-for-topic"> #English </a> </div> </div> <h1 class="text-2xl font-bold leadi md:text-3xl text-heading">掌握 TipKit：基础</h1> <p class="text-sm text-default"> <a itemprop="author" href="https://twitter.com/fatbobman" class="hover:text-secondary font-medium">东坡肘子</a> <!-- <time datetime={`${post.data.publishDate.toISOString()}`}>{date}</time> --> </p> <p class="text-xs text-muted"> 发表于 <time datetime="2023-10-18T00:12:00.000Z">2023 年 10 月 18 日</time>  <span> 更新于  </span> <time datetime="2024-09-01T00:12:00.000Z"> 2024 年 9 月 1 日 </time>  </p> </div> <svg style="display: none;"> <symbol id="icon-clipboard" viewBox="0 0 1024 1024"> <path d="M426.666667 42.666667l170.666667 0q41.344 0 74.325333 23.850667t46.336 61.482667l50.005333 0q52.992 0 90.496 37.504t37.504 90.496l0 597.333333q0 52.992-37.504 90.496t-90.496 37.504l-512 0q-52.992 0-90.496-37.504t-37.504-90.496l0-597.333333q0-52.992 37.504-90.496t90.496-37.504l50.005333 0q13.312-37.674667 46.336-61.482667t74.325333-23.850667zM768 213.333333l-50.005333 0q-13.312 37.674667-46.336 61.482667t-74.325333 23.850667l-170.666667 0q-41.344 0-74.325333-23.850667t-46.336-61.482667l-50.005333 0q-17.664 0-30.165333 12.501333t-12.501333 30.165333l0 597.333333q0 17.664 12.501333 30.165333t30.165333 12.501333l512 0q17.664 0 30.165333-12.501333t12.501333-30.165333l0-597.333333q0-17.664-12.501333-30.165333t-30.165333-12.501333zM597.333333 128l-170.666667 0q-17.664 0-30.165333 12.501333t-12.501333 30.165333 12.501333 30.165333 30.165333 12.501333l170.666667 0q17.664 0 30.165333-12.501333t12.501333-30.165333-12.501333-30.165333-30.165333-12.501333z"></path> </symbol> <symbol id="icon-check" viewBox="0 0 1024 1024"> <path d="M421.858 683.366l401.796-448.518c18.66-20.828 50.668-22.586 71.498-3.928 20.828 18.66 22.586 50.67 3.928 71.498L463.638 788.494c-18.606 20.768-50.5 22.586-71.344 4.066l-263.29-233.924c-20.906-18.572-22.796-50.576-4.222-71.48 18.574-20.906 50.576-22.796 71.48-4.222L421.86 683.366z"></path> </symbol> </svg> <div class="relative" id="article-area"> <article class="prose dark:prose-invert mx-auto w-full"> <div> 
<p>TipKit 是苹果在 WWDC 2023 上新推出的一个框架，可轻松在你的应用程序中显示提示。它可用于向用户介绍新功能，帮助他们发现隐藏的选项或展示完成任务更快的途径等场景。TipKit 可以运行在苹果生态系统的不同硬件环境和操作系统上，包括 iPhone、iPad、Mac、Apple Watch 和 Apple TV。</p>
<p>开发者不仅可以通过设定规则、显示频次策略等方式控制 Tip 显示的时机和频率，还可以通过 API 获取 Tip 的状态以及与 Tip 绑定的事件等信息。尽管 TipKit 是以展示提示为主要目的而创建的框架，但其功能不限于此。</p>
<p>我将用两篇文章探讨 TipKit 框架。在本文中，我们首先学习 TipKit 的用法；在 <a href="/zh/posts/mastering-tipkit-advance/" target="_blank">下篇</a> 中，我们将讨论更多使用技巧、注意事项、实现原理，以及在其他场景中使用 TipKit 等扩展话题。</p>
<blockquote>
<p><strong>2024 年 9 月更新</strong>：在 WWDC 2024 上，TipKit 框架的功能得到了显著扩展。本系列文章已针对最新更新进行了修订。</p>
</blockquote>
<div class="dynamic-ad-container pt-4"></div>
<h2 id="如何定义一个-tip">如何定义一个 Tip</h2>
<p>在 TipKit 中，定义一个 Tip 就是声明一个遵循 <code>Tip</code> 协议的结构体。<code>Tip</code> 协议定义了用于 Tip 显示的标题、图像、信息以及用于判断是否满足出现条件的规则。</p>
<div>
        <div class="flex justify-between items-center h-8 font-medium bg-[#96744d] dark:bg-[#002565] text-gray-200 text-xs rounded-tl-md rounded-tr-md">
          <span class="px-4 py-1">Swift</span>
          <button class="copy-button py-1 px-4" onclick="copyCode(this, event)">
          <div class="copy-text">
            <span class="flex items-center justify-center sm:hover:text-white sm:hover:font-bold">
              <svg class="w-3 h-3 mr-1" fill="currentColor" stroke="currentColor">
                <use xlink:href="#icon-clipboard"></use>
              </svg>
            Copy code
            </span>
          </div>
          <div class="copied-text hidden">
            <span class="flex items-center justify-center">
              <svg class="w-3 h-3 mr-1" fill="currentColor" stroke="currentColor">
                  <use xlink:href="#icon-check"></use>
             </svg>
              Copied!
            </span>
          </div>
        </button>
        </div>
      <pre class="astro-code dracula" style="background-color:#282A36;color:#F8F8F2;overflow-x:auto" tabindex="0"><code><span class="line"><span style="color:#FF79C6">struct</span><span style="color:#8BE9FD;font-style:italic"> InlineTip</span><span style="color:#F8F8F2">: Tip {</span></span>
<span class="line"><span style="color:#FF79C6">    var</span><span style="color:#F8F8F2"> title: Text {</span></span>
<span class="line"><span style="color:#8BE9FD">        Text</span><span style="color:#F8F8F2">(</span><span style="color:#E9F284">&quot;</span><span style="color:#F1FA8C">Save as a Favorite</span><span style="color:#E9F284">&quot;</span><span style="color:#F8F8F2">)</span></span>
<span class="line"><span style="color:#F8F8F2">    }</span></span>
<span class="line"><span style="color:#FF79C6">    var</span><span style="color:#F8F8F2"> message: Text</span><span style="color:#FF79C6">?</span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#8BE9FD">        Text</span><span style="color:#F8F8F2">(</span><span style="color:#E9F284">&quot;</span><span style="color:#F1FA8C">Your favorite backyards always appear at the top of the list.</span><span style="color:#E9F284">&quot;</span><span style="color:#F8F8F2">)</span></span>
<span class="line"><span style="color:#F8F8F2">    }</span></span>
<span class="line"><span style="color:#FF79C6">    var</span><span style="color:#F8F8F2"> image: Image</span><span style="color:#FF79C6">?</span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#8BE9FD">        Image</span><span style="color:#F8F8F2">(</span><span style="color:#8BE9FD">systemName</span><span style="color:#F8F8F2">: </span><span style="color:#E9F284">&quot;</span><span style="color:#F1FA8C">star</span><span style="color:#E9F284">&quot;</span><span style="color:#F8F8F2">)</span></span>
<span class="line"><span style="color:#F8F8F2">    }</span></span>
<span class="line"><span style="color:#F8F8F2">}</span></span></code></pre></div>
<p><picture>
                    <source media="(max-width: 479px)" srcset="https://cdn.fatbobman.com/image-20231015144407862.png?imageView2/0/w/500"/>
                    <source media="(max-width: 767px)" srcset="https://cdn.fatbobman.com/image-20231015144407862.png?imageView2/0/w/768"/>
                    <source media="(max-width: 1024px)" srcset="https://cdn.fatbobman.com/image-20231015144407862.png?imageView2/0/w/1024"/>
                    <img src="https://cdn.fatbobman.com/image-20231015144407862.png" alt="https://cdn.fatbobman.com/image-20231015144407862.png" loading="lazy" decoding="async"/>
                  </picture></p>
<h2 id="让-tip-达到应有的效果">让 Tip 达到应有的效果</h2>
<p>下图中的提示具备可操作性、有指导性并且易于记忆的特点，因此是推荐的提示展示方式。</p>
<p><picture>
                    <source media="(max-width: 479px)" srcset="https://cdn.fatbobman.com/image-20231015120758303.png?imageView2/0/w/500"/>
                    <source media="(max-width: 767px)" srcset="https://cdn.fatbobman.com/image-20231015120758303.png?imageView2/0/w/768"/>
                    <source media="(max-width: 1024px)" srcset="https://cdn.fatbobman.com/image-20231015120758303.png?imageView2/0/w/1024"/>
                    <img src="https://cdn.fatbobman.com/image-20231015120758303.png" alt="https://cdn.fatbobman.com/image-20231015120758303.png" loading="lazy" decoding="async"/>
                  </picture></p>
<p>以下是不适合使用 Tip 展示的信息：</p>
<ul>
<li>促销信息</li>
<li>错误信息</li>
<li>没有操作性的信息</li>
<li>内容过于复杂，无法立即阅读的信息</li>
</ul>
<p><picture>
                    <source media="(max-width: 479px)" srcset="https://cdn.fatbobman.com/image-20231015120911856.png?imageView2/0/w/500"/>
                    <source media="(max-width: 767px)" srcset="https://cdn.fatbobman.com/image-20231015120911856.png?imageView2/0/w/768"/>
                    <source media="(max-width: 1024px)" srcset="https://cdn.fatbobman.com/image-20231015120911856.png?imageView2/0/w/1024"/>
                    <img src="https://cdn.fatbobman.com/image-20231015120911856.png" alt="https://cdn.fatbobman.com/image-20231015120911856.png" loading="lazy" decoding="async"/>
                  </picture></p>
<h2 id="初始化-tip-容器">初始化 Tip 容器</h2>
<p>要让 TipKit 框架在应用中发挥作用，需要在第一个 Tip 出现的场景之前执行一次 Tip 容器的配置指令，通常会在应用的初始阶段进行。例如：</p>
<div>
        <div class="flex justify-between items-center h-8 font-medium bg-[#96744d] dark:bg-[#002565] text-gray-200 text-xs rounded-tl-md rounded-tr-md">
          <span class="px-4 py-1">Swift</span>
          <button class="copy-button py-1 px-4" onclick="copyCode(this, event)">
          <div class="copy-text">
            <span class="flex items-center justify-center sm:hover:text-white sm:hover:font-bold">
              <svg class="w-3 h-3 mr-1" fill="currentColor" stroke="currentColor">
                <use xlink:href="#icon-clipboard"></use>
              </svg>
            Copy code
            </span>
          </div>
          <div class="copied-text hidden">
            <span class="flex items-center justify-center">
              <svg class="w-3 h-3 mr-1" fill="currentColor" stroke="currentColor">
                  <use xlink:href="#icon-check"></use>
             </svg>
              Copied!
            </span>
          </div>
        </button>
        </div>
      <pre class="astro-code dracula" style="background-color:#282A36;color:#F8F8F2;overflow-x:auto" tabindex="0"><code><span class="line"><span style="color:#FF79C6">import</span><span style="color:#8BE9FD;font-style:italic"> TipKit</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FF79C6">@main</span></span>
<span class="line"><span style="color:#FF79C6">struct</span><span style="color:#8BE9FD;font-style:italic"> TipKitExamplesApp</span><span style="color:#F8F8F2">: App {</span></span>
<span class="line"><span style="color:#FF79C6">    init</span><span style="color:#F8F8F2">() {</span></span>
<span class="line"><span style="color:#6272A4">      // Configure Tip&#39;s data container</span></span>
<span class="line"><span style="color:#FF79C6">      try?</span><span style="color:#F8F8F2"> Tips.</span><span style="color:#8BE9FD">configure</span><span style="color:#F8F8F2">()</span></span>
<span class="line"><span style="color:#F8F8F2">    }</span></span>
<span class="line"><span style="color:#FF79C6">    var</span><span style="color:#F8F8F2"> body: </span><span style="color:#FF79C6">some</span><span style="color:#F8F8F2"> Scene {</span></span>
<span class="line"><span style="color:#F8F8F2">        WindowGroup {</span></span>
<span class="line"><span style="color:#8BE9FD">            ContentView</span><span style="color:#F8F8F2">()</span></span>
<span class="line"><span style="color:#F8F8F2">        }</span></span>
<span class="line"><span style="color:#F8F8F2">    }</span></span>
<span class="line"><span style="color:#F8F8F2">}</span></span>
<span class="line"></span></code></pre></div>
<p><code>Tips.configure</code> 用于初始化数据容器，在其中，TipKit 保存了 Tip 和与之相关的事件信息。并支持通过参数对 Tip 的全局显示频次策略进行调整（下文中详述）。</p>
<h2 id="在-swiftui-视图中添加-tip">在 SwiftUI 视图中添加 Tip</h2>
<p>TipKit 提供了两种 Tip 的显示方式：内联（<code>TipView</code>）和弹出窗口（<code>popoverTip</code>）。</p>
<blockquote>
<p>苹果官方提供了展示 Tip 各种功能的 <a href="https://developer.apple.com/documentation/tipkit/highlightingappfeatureswithtipkit?&#38;utm_source=Fatbobman%20Blog&#38;utm_medium=web&#38;utm_campaign=Fatbobman%20Blog" rel="noreferrer noopener">Demo</a>，本文采用了该 Demo 提供的部分代码。</p>
</blockquote>
<h3 id="內联">內联</h3>
<p>通过 TipKit 提供的 <code>TipView</code> 视图，可以在视图中使用内联方式添加 Tip。苹果建议尽量采用这种风格来显示 Tip，以避免覆盖人们可能想要查看的内容，以及要与之交互的 UI 元素。</p>
<div>
        <div class="flex justify-between items-center h-8 font-medium bg-[#96744d] dark:bg-[#002565] text-gray-200 text-xs rounded-tl-md rounded-tr-md">
          <span class="px-4 py-1">Swift</span>
          <button class="copy-button py-1 px-4" onclick="copyCode(this, event)">
          <div class="copy-text">
            <span class="flex items-center justify-center sm:hover:text-white sm:hover:font-bold">
              <svg class="w-3 h-3 mr-1" fill="currentColor" stroke="currentColor">
                <use xlink:href="#icon-clipboard"></use>
              </svg>
            Copy code
            </span>
          </div>
          <div class="copied-text hidden">
            <span class="flex items-center justify-center">
              <svg class="w-3 h-3 mr-1" fill="currentColor" stroke="currentColor">
                  <use xlink:href="#icon-check"></use>
             </svg>
              Copied!
            </span>
          </div>
        </button>
        </div>
      <pre class="astro-code dracula" style="background-color:#282A36;color:#F8F8F2;overflow-x:auto" tabindex="0"><code><span class="line"><span style="color:#FF79C6">struct</span><span style="color:#8BE9FD;font-style:italic"> InlineView</span><span style="color:#F8F8F2">: View {</span></span>
<span class="line"><span style="color:#6272A4">    // Create an instance of your tip content.</span></span>
<span class="line"><span style="color:#FF79C6">    var</span><span style="color:#F8F8F2"> tip </span><span style="color:#FF79C6">=</span><span style="color:#8BE9FD"> InlineTip</span><span style="color:#F8F8F2">()</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FF79C6">    var</span><span style="color:#F8F8F2"> body: </span><span style="color:#FF79C6">some</span><span style="color:#F8F8F2"> View {</span></span>
<span class="line"><span style="color:#8BE9FD">        VStack</span><span style="color:#F8F8F2">(</span><span style="color:#8BE9FD">spacing</span><span style="color:#F8F8F2">: </span><span style="color:#BD93F9">20</span><span style="color:#F8F8F2">) {</span></span>
<span class="line"><span style="color:#8BE9FD">            Text</span><span style="color:#F8F8F2">(</span><span style="color:#E9F284">&quot;</span><span style="color:#F1FA8C">A TipView embeds itself directly in the view. Make this style of tip your first choice as it doesn&#39;t obscure or hide any underlying UI elements.</span><span style="color:#E9F284">&quot;</span><span style="color:#F8F8F2">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6272A4">            // Place your tip near the feature you want to highlight.</span></span>
<span class="line"><span style="color:#8BE9FD">            TipView</span><span style="color:#F8F8F2">(tip, </span><span style="color:#8BE9FD">arrowEdge</span><span style="color:#F8F8F2">: .bottom)</span></span>
<span class="line"><span style="color:#F8F8F2">            Button {</span></span>
<span class="line"><span style="color:#6272A4">                // Invalidate the tip when someone uses the feature.</span></span>
<span class="line"><span style="color:#F8F8F2">                tip.</span><span style="color:#8BE9FD">invalidate</span><span style="color:#F8F8F2">(</span><span style="color:#8BE9FD">reason</span><span style="color:#F8F8F2">: .actionPerformed)</span></span>
<span class="line"><span style="color:#F8F8F2">            } label</span><span style="color:#FF79C6">:</span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#8BE9FD">                Label</span><span style="color:#F8F8F2">(</span><span style="color:#E9F284">&quot;</span><span style="color:#F1FA8C">Favorite</span><span style="color:#E9F284">&quot;</span><span style="color:#F8F8F2">, </span><span style="color:#8BE9FD">systemImage</span><span style="color:#F8F8F2">: </span><span style="color:#E9F284">&quot;</span><span style="color:#F1FA8C">star</span><span style="color:#E9F284">&quot;</span><span style="color:#F8F8F2">)</span></span>
<span class="line"><span style="color:#F8F8F2">            }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#8BE9FD">            Text</span><span style="color:#F8F8F2">(</span><span style="color:#E9F284">&quot;</span><span style="color:#F1FA8C">To dismiss the tip, tap the close button in the upper right-hand corner of the tip or tap the Favorite button to use the feature, which then invalidates the tip programmatically.</span><span style="color:#E9F284">&quot;</span><span style="color:#F8F8F2">)</span></span>
<span class="line"><span style="color:#8BE9FD">            Spacer</span><span style="color:#F8F8F2">()</span></span>
<span class="line"><span style="color:#F8F8F2">        }</span></span>
<span class="line"><span style="color:#F8F8F2">        .</span><span style="color:#8BE9FD">padding</span><span style="color:#F8F8F2">()</span></span>
<span class="line"><span style="color:#F8F8F2">        .</span><span style="color:#8BE9FD">navigationTitle</span><span style="color:#F8F8F2">(</span><span style="color:#E9F284">&quot;</span><span style="color:#F1FA8C">TipView</span><span style="color:#E9F284">&quot;</span><span style="color:#F8F8F2">)</span></span>
<span class="line"><span style="color:#F8F8F2">    }</span></span>
<span class="line"><span style="color:#F8F8F2">}</span></span></code></pre></div>
<p><picture>
                    <source media="(max-width: 479px)" srcset="https://cdn.fatbobman.com/image-20231015150453850.png?imageView2/0/w/500"/>
                    <source media="(max-width: 767px)" srcset="https://cdn.fatbobman.com/image-20231015150453850.png?imageView2/0/w/768"/>
                    <source media="(max-width: 1024px)" srcset="https://cdn.fatbobman.com/image-20231015150453850.png?imageView2/0/w/1024"/>
                    <img src="https://cdn.fatbobman.com/image-20231015150453850.png" alt="https://cdn.fatbobman.com/image-20231015150453850.png" loading="lazy" decoding="async"/>
                  </picture></p>
<p>在上面的代码中，我们首先在视图中创建一个 <code>InlineTip</code> 实例，然后将 <code>TipView</code> 放置在希望出现 Tip 的位置。开发者可以通过 <code>arrowEdge</code> 参数来设置箭头的指示方向，当设置为 <code>nil</code> 时，箭头将不显示。</p>
<p><code>TipView</code> 与其他的 SwiftUI 视图没有什么不同，它以标准的 SwiftUI 视图的方式参与布局，并在显示时对原有的布局产生影响。换句话说，开发者可以将其放入任何布局容器中，并且可以对其应用各种视图修饰器。</p>
<div>
        <div class="flex justify-between items-center h-8 font-medium bg-[#96744d] dark:bg-[#002565] text-gray-200 text-xs rounded-tl-md rounded-tr-md">
          <span class="px-4 py-1">Swift</span>
          <button class="copy-button py-1 px-4" onclick="copyCode(this, event)">
          <div class="copy-text">
            <span class="flex items-center justify-center sm:hover:text-white sm:hover:font-bold">
              <svg class="w-3 h-3 mr-1" fill="currentColor" stroke="currentColor">
                <use xlink:href="#icon-clipboard"></use>
              </svg>
            Copy code
            </span>
          </div>
          <div class="copied-text hidden">
            <span class="flex items-center justify-center">
              <svg class="w-3 h-3 mr-1" fill="currentColor" stroke="currentColor">
                  <use xlink:href="#icon-check"></use>
             </svg>
              Copied!
            </span>
          </div>
        </button>
        </div>
      <pre class="astro-code dracula" style="background-color:#282A36;color:#F8F8F2;overflow-x:auto" tabindex="0"><code><span class="line"><span style="color:#8BE9FD">TipView</span><span style="color:#F8F8F2">(tip)</span></span>
<span class="line"><span style="color:#F8F8F2">    .</span><span style="color:#8BE9FD">frame</span><span style="color:#F8F8F2">(</span><span style="color:#8BE9FD">width</span><span style="color:#F8F8F2">:</span><span style="color:#BD93F9">250</span><span style="color:#F8F8F2">)</span></span>
<span class="line"><span style="color:#F8F8F2">    .</span><span style="color:#8BE9FD">symbolRenderingMode</span><span style="color:#F8F8F2">(.multicolor)</span></span></code></pre></div>
<p><picture>
                    <source media="(max-width: 479px)" srcset="https://cdn.fatbobman.com/image-20231015153758052.png?imageView2/0/w/500"/>
                    <source media="(max-width: 767px)" srcset="https://cdn.fatbobman.com/image-20231015153758052.png?imageView2/0/w/768"/>
                    <source media="(max-width: 1024px)" srcset="https://cdn.fatbobman.com/image-20231015153758052.png?imageView2/0/w/1024"/>
                    <img src="https://cdn.fatbobman.com/image-20231015153758052.png" alt="https://cdn.fatbobman.com/image-20231015153758052.png" loading="lazy" decoding="async"/>
                  </picture></p>
<h3 id="弹出窗口">弹出窗口</h3>
<p>使用 <code>popoverTip</code> 视图修饰器，在视图中以顶层视图的方式来展示 Tip。</p>
<p><picture>
                    <source media="(max-width: 479px)" srcset="https://cdn.fatbobman.com/tipkit-popoverTip-demo-7341202.png?imageView2/0/w/500"/>
                    <source media="(max-width: 767px)" srcset="https://cdn.fatbobman.com/tipkit-popoverTip-demo-7341202.png?imageView2/0/w/768"/>
                    <source media="(max-width: 1024px)" srcset="https://cdn.fatbobman.com/tipkit-popoverTip-demo-7341202.png?imageView2/0/w/1024"/>
                    <img src="https://cdn.fatbobman.com/tipkit-popoverTip-demo-7341202.png" alt="https://cdn.fatbobman.com/tipkit-popoverTip-demo-7341202.png" loading="lazy" decoding="async"/>
                  </picture></p>
<div>
        <div class="flex justify-between items-center h-8 font-medium bg-[#96744d] dark:bg-[#002565] text-gray-200 text-xs rounded-tl-md rounded-tr-md">
          <span class="px-4 py-1">Swift</span>
          <button class="copy-button py-1 px-4" onclick="copyCode(this, event)">
          <div class="copy-text">
            <span class="flex items-center justify-center sm:hover:text-white sm:hover:font-bold">
              <svg class="w-3 h-3 mr-1" fill="currentColor" stroke="currentColor">
                <use xlink:href="#icon-clipboard"></use>
              </svg>
            Copy code
            </span>
          </div>
          <div class="copied-text hidden">
            <span class="flex items-center justify-center">
              <svg class="w-3 h-3 mr-1" fill="currentColor" stroke="currentColor">
                  <use xlink:href="#icon-check"></use>
             </svg>
              Copied!
            </span>
          </div>
        </button>
        </div>
      <pre class="astro-code dracula" style="background-color:#282A36;color:#F8F8F2;overflow-x:auto" tabindex="0"><code><span class="line"><span style="color:#FF79C6">struct</span><span style="color:#8BE9FD;font-style:italic"> PopoverTip</span><span style="color:#F8F8F2">: Tip {</span></span>
<span class="line"><span style="color:#FF79C6">    var</span><span style="color:#F8F8F2"> title: Text {</span></span>
<span class="line"><span style="color:#8BE9FD">        Text</span><span style="color:#F8F8F2">(</span><span style="color:#E9F284">&quot;</span><span style="color:#F1FA8C">Add an Effect</span><span style="color:#E9F284">&quot;</span><span style="color:#F8F8F2">)</span></span>
<span class="line"><span style="color:#F8F8F2">            .</span><span style="color:#8BE9FD">foregroundStyle</span><span style="color:#F8F8F2">(.indigo)</span></span>
<span class="line"><span style="color:#F8F8F2">    }</span></span>
<span class="line"><span style="color:#FF79C6">    var</span><span style="color:#F8F8F2"> message: Text</span><span style="color:#FF79C6">?</span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#8BE9FD">        Text</span><span style="color:#F8F8F2">(</span><span style="color:#E9F284">&quot;</span><span style="color:#F1FA8C">Touch and hold </span><span style="color:#FF79C6">\(</span><span style="color:#8BE9FD">Image</span><span style="color:#F8F8F2">(</span><span style="color:#8BE9FD">systemName</span><span style="color:#F8F8F2">:</span><span style="color:#E9F284"> &quot;</span><span style="color:#F1FA8C">wand.and.stars</span><span style="color:#E9F284">&quot;</span><span style="color:#F8F8F2">)</span><span style="color:#FF79C6">)</span><span style="color:#F1FA8C"> to add an effect to your favorite image.</span><span style="color:#E9F284">&quot;</span><span style="color:#F8F8F2">)</span></span>
<span class="line"><span style="color:#F8F8F2">    }</span></span>
<span class="line"><span style="color:#F8F8F2">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FF79C6">struct</span><span style="color:#8BE9FD;font-style:italic"> PopoverView</span><span style="color:#F8F8F2">: View {</span></span>
<span class="line"><span style="color:#6272A4">    // Create an instance of your tip content.</span></span>
<span class="line"><span style="color:#FF79C6">    var</span><span style="color:#F8F8F2"> tip </span><span style="color:#FF79C6">=</span><span style="color:#8BE9FD"> PopoverTip</span><span style="color:#F8F8F2">()</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FF79C6">    var</span><span style="color:#F8F8F2"> body: </span><span style="color:#FF79C6">some</span><span style="color:#F8F8F2"> View {</span></span>
<span class="line"><span style="color:#8BE9FD">        VStack</span><span style="color:#F8F8F2">(</span><span style="color:#8BE9FD">spacing</span><span style="color:#F8F8F2">: </span><span style="color:#BD93F9">20</span><span style="color:#F8F8F2">) {</span></span>
<span class="line"><span style="color:#FF79C6">            ....</span></span>
<span class="line"><span style="color:#8BE9FD">            Image</span><span style="color:#F8F8F2">(</span><span style="color:#8BE9FD">systemName</span><span style="color:#F8F8F2">: </span><span style="color:#E9F284">&quot;</span><span style="color:#F1FA8C">wand.and.stars</span><span style="color:#E9F284">&quot;</span><span style="color:#F8F8F2">)</span></span>
<span class="line"><span style="color:#F8F8F2">                .</span><span style="color:#8BE9FD">imageScale</span><span style="color:#F8F8F2">(.large)</span></span>
<span class="line"><span style="color:#6272A4">                // Add the popover to the feature you want to highlight.</span></span>
<span class="line"><span style="color:#F8F8F2">                .</span><span style="color:#8BE9FD">popoverTip</span><span style="color:#F8F8F2">(tip)</span></span>
<span class="line"><span style="color:#F8F8F2">                .onTapGesture {</span></span>
<span class="line"><span style="color:#6272A4">                    // Invalidate the tip when someone uses the feature.</span></span>
<span class="line"><span style="color:#F8F8F2">                    tip.</span><span style="color:#8BE9FD">invalidate</span><span style="color:#F8F8F2">(</span><span style="color:#8BE9FD">reason</span><span style="color:#F8F8F2">: .actionPerformed)</span></span>
<span class="line"><span style="color:#F8F8F2">                }</span></span>
<span class="line"><span style="color:#FF79C6">            ....</span></span>
<span class="line"><span style="color:#F8F8F2">        }</span></span>
<span class="line"><span style="color:#F8F8F2">    }</span></span>
<span class="line"><span style="color:#F8F8F2">}</span></span></code></pre></div>
<p><picture>
                    <source media="(max-width: 479px)" srcset="https://cdn.fatbobman.com/image-20231015154038009.png?imageView2/0/w/500"/>
                    <source media="(max-width: 767px)" srcset="https://cdn.fatbobman.com/image-20231015154038009.png?imageView2/0/w/768"/>
                    <source media="(max-width: 1024px)" srcset="https://cdn.fatbobman.com/image-20231015154038009.png?imageView2/0/w/1024"/>
                    <img src="https://cdn.fatbobman.com/image-20231015154038009.png" alt="https://cdn.fatbobman.com/image-20231015154038009.png" loading="lazy" decoding="async"/>
                  </picture></p>
<p>可以通过 <code>arrowEdge</code> 调整 Tip 相对于其所应用的视图的摆放位置，不能将其设置为 <code>nil</code>：</p>
<div>
        <div class="flex justify-between items-center h-8 font-medium bg-[#96744d] dark:bg-[#002565] text-gray-200 text-xs rounded-tl-md rounded-tr-md">
          <span class="px-4 py-1">Swift</span>
          <button class="copy-button py-1 px-4" onclick="copyCode(this, event)">
          <div class="copy-text">
            <span class="flex items-center justify-center sm:hover:text-white sm:hover:font-bold">
              <svg class="w-3 h-3 mr-1" fill="currentColor" stroke="currentColor">
                <use xlink:href="#icon-clipboard"></use>
              </svg>
            Copy code
            </span>
          </div>
          <div class="copied-text hidden">
            <span class="flex items-center justify-center">
              <svg class="w-3 h-3 mr-1" fill="currentColor" stroke="currentColor">
                  <use xlink:href="#icon-check"></use>
             </svg>
              Copied!
            </span>
          </div>
        </button>
        </div>
      <pre class="astro-code dracula" style="background-color:#282A36;color:#F8F8F2;overflow-x:auto" tabindex="0"><code><span class="line"><span style="color:#F8F8F2">.</span><span style="color:#8BE9FD">popoverTip</span><span style="color:#F8F8F2">(tip,</span><span style="color:#8BE9FD">arrowEdge</span><span style="color:#F8F8F2">: .leading)</span></span></code></pre></div>
<p><picture>
                    <source media="(max-width: 479px)" srcset="https://cdn.fatbobman.com/image-20231015154758785.png?imageView2/0/w/500"/>
                    <source media="(max-width: 767px)" srcset="https://cdn.fatbobman.com/image-20231015154758785.png?imageView2/0/w/768"/>
                    <source media="(max-width: 1024px)" srcset="https://cdn.fatbobman.com/image-20231015154758785.png?imageView2/0/w/1024"/>
                    <img src="https://cdn.fatbobman.com/image-20231015154758785.png" alt="https://cdn.fatbobman.com/image-20231015154758785.png" loading="lazy" decoding="async"/>
                  </picture></p>
<p>在 iOS 下，弹出窗口将以模态视图的方式呈现，只有在关闭或隐藏 Tip 后才能与其他元素进行交互。另外，开发者无法对通过 <code>popoverTip</code> 弹出的 Tip 视图应用视图修饰器。</p>
<h2 id="如何调整-tip-外观">如何调整 Tip 外观</h2>
<p>对于 TipKit 提供的 <code>TipView</code> 和 <code>popoverTip</code> ，我们可以通过以下方式来调整它的显示效果：</p>
<h3 id="为-text-和-image-应用不改变其类型的修饰器">为 Text 和 Image 应用不改变其类型的修饰器</h3>
<p>在不破坏 Text 和 Image 类型的前提下，我们可以采用适当的修饰器来改善文字和图片的显示效果。例如：</p>
<div>
        <div class="flex justify-between items-center h-8 font-medium bg-[#96744d] dark:bg-[#002565] text-gray-200 text-xs rounded-tl-md rounded-tr-md">
          <span class="px-4 py-1">Swift</span>
          <button class="copy-button py-1 px-4" onclick="copyCode(this, event)">
          <div class="copy-text">
            <span class="flex items-center justify-center sm:hover:text-white sm:hover:font-bold">
              <svg class="w-3 h-3 mr-1" fill="currentColor" stroke="currentColor">
                <use xlink:href="#icon-clipboard"></use>
              </svg>
            Copy code
            </span>
          </div>
          <div class="copied-text hidden">
            <span class="flex items-center justify-center">
              <svg class="w-3 h-3 mr-1" fill="currentColor" stroke="currentColor">
                  <use xlink:href="#icon-check"></use>
             </svg>
              Copied!
            </span>
          </div>
        </button>
        </div>
      <pre class="astro-code dracula" style="background-color:#282A36;color:#F8F8F2;overflow-x:auto" tabindex="0"><code><span class="line"><span style="color:#FF79C6">struct</span><span style="color:#8BE9FD;font-style:italic"> InlineTip</span><span style="color:#F8F8F2">: Tip {</span></span>
<span class="line"><span style="color:#FF79C6">    var</span><span style="color:#F8F8F2"> title: Text {</span></span>
<span class="line"><span style="color:#8BE9FD">        Text</span><span style="color:#F8F8F2">(</span><span style="color:#E9F284">&quot;</span><span style="color:#F1FA8C">Save </span><span style="color:#FF79C6">\(</span><span style="color:#8BE9FD">Image</span><span style="color:#F8F8F2">(</span><span style="color:#8BE9FD">systemName</span><span style="color:#F8F8F2">:</span><span style="color:#E9F284"> &quot;</span><span style="color:#F1FA8C">book.closed.fill</span><span style="color:#E9F284">&quot;</span><span style="color:#F8F8F2">)</span><span style="color:#FF79C6">)</span><span style="color:#F1FA8C"> as a Favorite</span><span style="color:#E9F284">&quot;</span><span style="color:#F8F8F2">)</span></span>
<span class="line"><span style="color:#F8F8F2">    }</span></span>
<span class="line"><span style="color:#FF79C6">    var</span><span style="color:#F8F8F2"> message: Text</span><span style="color:#FF79C6">?</span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#8BE9FD">        Text</span><span style="color:#F8F8F2">(</span><span style="color:#E9F284">&quot;</span><span style="color:#F1FA8C">Your </span><span style="color:#E9F284">&quot;</span><span style="color:#F8F8F2">) </span><span style="color:#FF79C6">+</span></span>
<span class="line"><span style="color:#8BE9FD">        Text</span><span style="color:#F8F8F2">(</span><span style="color:#E9F284">&quot;</span><span style="color:#F1FA8C">favorite</span><span style="color:#E9F284">&quot;</span><span style="color:#F8F8F2">)</span></span>
<span class="line"><span style="color:#F8F8F2">            .</span><span style="color:#8BE9FD">bold</span><span style="color:#F8F8F2">()</span></span>
<span class="line"><span style="color:#F8F8F2">            .</span><span style="color:#8BE9FD">foregroundStyle</span><span style="color:#F8F8F2">(.red) </span><span style="color:#FF79C6">+</span></span>
<span class="line"><span style="color:#8BE9FD">        Text</span><span style="color:#F8F8F2">(</span><span style="color:#E9F284">&quot;</span><span style="color:#F1FA8C"> backyards always appear at the </span><span style="color:#FF79C6">\(</span><span style="color:#8BE9FD">Text</span><span style="color:#F8F8F2">(</span><span style="color:#E9F284">&quot;</span><span style="color:#F1FA8C">top</span><span style="color:#E9F284">&quot;</span><span style="color:#F8F8F2">)</span><span style="color:#F1FA8C">.</span><span style="color:#8BE9FD">textScale</span><span style="color:#F8F8F2">(</span><span style="color:#F1FA8C">.</span><span style="color:#F8F8F2">secondary)</span><span style="color:#FF79C6">)</span><span style="color:#F1FA8C"> of the list.</span><span style="color:#E9F284">&quot;</span><span style="color:#F8F8F2">)</span></span>
<span class="line"><span style="color:#F8F8F2">    }</span></span>
<span class="line"><span style="color:#FF79C6">    var</span><span style="color:#F8F8F2"> image: Image</span><span style="color:#FF79C6">?</span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#8BE9FD">        Image</span><span style="color:#F8F8F2">(</span><span style="color:#8BE9FD">systemName</span><span style="color:#F8F8F2">: </span><span style="color:#E9F284">&quot;</span><span style="color:#F1FA8C">externaldrive.fill.badge.icloud</span><span style="color:#E9F284">&quot;</span><span style="color:#F8F8F2">)</span></span>
<span class="line"><span style="color:#F8F8F2">            .</span><span style="color:#8BE9FD">symbolRenderingMode</span><span style="color:#F8F8F2">(.multicolor)</span></span>
<span class="line"><span style="color:#F8F8F2">    }</span></span>
<span class="line"><span style="color:#F8F8F2">}</span></span></code></pre></div>
<p><picture>
                    <source media="(max-width: 479px)" srcset="https://cdn.fatbobman.com/image-20231015164840908.png?imageView2/0/w/500"/>
                    <source media="(max-width: 767px)" srcset="https://cdn.fatbobman.com/image-20231015164840908.png?imageView2/0/w/768"/>
                    <source media="(max-width: 1024px)" srcset="https://cdn.fatbobman.com/image-20231015164840908.png?imageView2/0/w/1024"/>
                    <img src="https://cdn.fatbobman.com/image-20231015164840908.png" alt="https://cdn.fatbobman.com/image-20231015164840908.png" loading="lazy" decoding="async"/>
                  </picture></p>
<p>这种方法对于<code>TipView</code>和<code>popoverTip</code>两种展示视图都有效。</p>
<h3 id="使用-tipview-特有的修饰器">使用 TipView 特有的修饰器</h3>
<div>
        <div class="flex justify-between items-center h-8 font-medium bg-[#96744d] dark:bg-[#002565] text-gray-200 text-xs rounded-tl-md rounded-tr-md">
          <span class="px-4 py-1">Swift</span>
          <button class="copy-button py-1 px-4" onclick="copyCode(this, event)">
          <div class="copy-text">
            <span class="flex items-center justify-center sm:hover:text-white sm:hover:font-bold">
              <svg class="w-3 h-3 mr-1" fill="currentColor" stroke="currentColor">
                <use xlink:href="#icon-clipboard"></use>
              </svg>
            Copy code
            </span>
          </div>
          <div class="copied-text hidden">
            <span class="flex items-center justify-center">
              <svg class="w-3 h-3 mr-1" fill="currentColor" stroke="currentColor">
                  <use xlink:href="#icon-check"></use>
             </svg>
              Copied!
            </span>
          </div>
        </button>
        </div>
      <pre class="astro-code dracula" style="background-color:#282A36;color:#F8F8F2;overflow-x:auto" tabindex="0"><code><span class="line"><span style="color:#8BE9FD">TipView</span><span style="color:#F8F8F2">(tip,</span><span style="color:#8BE9FD">arrowEdge</span><span style="color:#F8F8F2">: .bottom)</span></span>
<span class="line"><span style="color:#F8F8F2">    .</span><span style="color:#8BE9FD">tipImageSize</span><span style="color:#F8F8F2">(.</span><span style="color:#FF79C6">init</span><span style="color:#F8F8F2">(</span><span style="color:#8BE9FD">width</span><span style="color:#F8F8F2">: </span><span style="color:#BD93F9">30</span><span style="color:#F8F8F2">, </span><span style="color:#8BE9FD">height</span><span style="color:#F8F8F2">: </span><span style="color:#BD93F9">30</span><span style="color:#F8F8F2">))</span></span>
<span class="line"><span style="color:#F8F8F2">    .</span><span style="color:#8BE9FD">tipCornerRadius</span><span style="color:#F8F8F2">(</span><span style="color:#BD93F9">0</span><span style="color:#F8F8F2">)</span></span>
<span class="line"><span style="color:#F8F8F2">    .</span><span style="color:#8BE9FD">tipBackground</span><span style="color:#F8F8F2">(.red)</span></span></code></pre></div>
<p><picture>
                    <source media="(max-width: 479px)" srcset="https://cdn.fatbobman.com/image-20231015165115831.png?imageView2/0/w/500"/>
                    <source media="(max-width: 767px)" srcset="https://cdn.fatbobman.com/image-20231015165115831.png?imageView2/0/w/768"/>
                    <source media="(max-width: 1024px)" srcset="https://cdn.fatbobman.com/image-20231015165115831.png?imageView2/0/w/1024"/>
                    <img src="https://cdn.fatbobman.com/image-20231015165115831.png" alt="https://cdn.fatbobman.com/image-20231015165115831.png" loading="lazy" decoding="async"/>
                  </picture></p>
<p>这种方式仅对 <code>TipView</code> 有效。</p>
<p>可以将特有修饰器、标准视图修饰器，以及包含更多信息的 Text 和 Image 结合在一起使用。</p>
<h3 id="使用-tipviewstyle-自定义-tipview-的外观">使用 TipViewStyle 自定义 TipView 的外观</h3>
<p>与许多 SwiftUI 组件一样，TipKit 同样为 <code>TipView</code> 提供了通过风格来自定义外观的功能。</p>
<div>
        <div class="flex justify-between items-center h-8 font-medium bg-[#96744d] dark:bg-[#002565] text-gray-200 text-xs rounded-tl-md rounded-tr-md">
          <span class="px-4 py-1">Swift</span>
          <button class="copy-button py-1 px-4" onclick="copyCode(this, event)">
          <div class="copy-text">
            <span class="flex items-center justify-center sm:hover:text-white sm:hover:font-bold">
              <svg class="w-3 h-3 mr-1" fill="currentColor" stroke="currentColor">
                <use xlink:href="#icon-clipboard"></use>
              </svg>
            Copy code
            </span>
          </div>
          <div class="copied-text hidden">
            <span class="flex items-center justify-center">
              <svg class="w-3 h-3 mr-1" fill="currentColor" stroke="currentColor">
                  <use xlink:href="#icon-check"></use>
             </svg>
              Copied!
            </span>
          </div>
        </button>
        </div>
      <pre class="astro-code dracula" style="background-color:#282A36;color:#F8F8F2;overflow-x:auto" tabindex="0"><code><span class="line"><span style="color:#FF79C6">struct</span><span style="color:#8BE9FD;font-style:italic"> MyTipStyle</span><span style="color:#F8F8F2">: TipViewStyle {</span></span>
<span class="line"><span style="color:#FF79C6">    func</span><span style="color:#50FA7B"> makeBody</span><span style="color:#F8F8F2">(</span><span style="color:#50FA7B;font-style:italic">configuration</span><span style="color:#F8F8F2">: Configuration) </span><span style="color:#FF79C6">-&gt;</span><span style="color:#FF79C6"> some</span><span style="color:#F8F8F2"> View {</span></span>
<span class="line"><span style="color:#F8F8F2">        VStack {</span></span>
<span class="line"><span style="color:#FF79C6">            if</span><span style="color:#FF79C6"> let</span><span style="color:#F8F8F2"> image </span><span style="color:#FF79C6">=</span><span style="color:#F8F8F2"> configuration.</span><span style="color:#BD93F9">image</span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#F8F8F2">                image</span></span>
<span class="line"><span style="color:#F8F8F2">                    .</span><span style="color:#8BE9FD">font</span><span style="color:#F8F8F2">(.title2)</span></span>
<span class="line"><span style="color:#F8F8F2">                    .</span><span style="color:#8BE9FD">foregroundStyle</span><span style="color:#F8F8F2">(.green)</span></span>
<span class="line"><span style="color:#F8F8F2">            }</span></span>
<span class="line"><span style="color:#FF79C6">            if</span><span style="color:#FF79C6"> let</span><span style="color:#F8F8F2"> title </span><span style="color:#FF79C6">=</span><span style="color:#F8F8F2"> configuration.title {</span></span>
<span class="line"><span style="color:#F8F8F2">                title</span></span>
<span class="line"><span style="color:#F8F8F2">                    .</span><span style="color:#8BE9FD">bold</span><span style="color:#F8F8F2">()</span></span>
<span class="line"><span style="color:#F8F8F2">                    .</span><span style="color:#8BE9FD">font</span><span style="color:#F8F8F2">(.headline)</span></span>
<span class="line"><span style="color:#F8F8F2">                    .</span><span style="color:#8BE9FD">textCase</span><span style="color:#F8F8F2">(.uppercase)</span></span>
<span class="line"><span style="color:#F8F8F2">            }</span></span>
<span class="line"><span style="color:#FF79C6">            if</span><span style="color:#FF79C6"> let</span><span style="color:#F8F8F2"> message </span><span style="color:#FF79C6">=</span><span style="color:#F8F8F2"> configuration.message {</span></span>
<span class="line"><span style="color:#F8F8F2">                message</span></span>
<span class="line"><span style="color:#F8F8F2">                    .</span><span style="color:#8BE9FD">foregroundStyle</span><span style="color:#F8F8F2">(.secondary)</span></span>
<span class="line"><span style="color:#F8F8F2">            }</span></span>
<span class="line"><span style="color:#F8F8F2">        }</span></span>
<span class="line"><span style="color:#F8F8F2">        .</span><span style="color:#8BE9FD">frame</span><span style="color:#F8F8F2">(</span><span style="color:#8BE9FD">maxWidth</span><span style="color:#F8F8F2">: .</span><span style="color:#BD93F9">infinity</span><span style="color:#F8F8F2">)</span></span>
<span class="line"><span style="color:#F8F8F2">        .</span><span style="color:#8BE9FD">backgroundStyle</span><span style="color:#F8F8F2">(.thinMaterial)</span></span>
<span class="line"><span style="color:#F8F8F2">        .</span><span style="color:#8BE9FD">overlay</span><span style="color:#F8F8F2">(</span><span style="color:#8BE9FD">alignment</span><span style="color:#F8F8F2">: .topTrailing) {</span></span>
<span class="line"><span style="color:#6272A4">            // Close Button</span></span>
<span class="line"><span style="color:#8BE9FD">            Image</span><span style="color:#F8F8F2">(</span><span style="color:#8BE9FD">systemName</span><span style="color:#F8F8F2">: </span><span style="color:#E9F284">&quot;</span><span style="color:#F1FA8C">multiply</span><span style="color:#E9F284">&quot;</span><span style="color:#F8F8F2">)</span></span>
<span class="line"><span style="color:#F8F8F2">                .</span><span style="color:#8BE9FD">font</span><span style="color:#F8F8F2">(.title2)</span></span>
<span class="line"><span style="color:#F8F8F2">                .</span><span style="color:#8BE9FD">alignmentGuide</span><span style="color:#F8F8F2">(.top) { </span><span style="color:#BD93F9;font-style:italic">$0</span><span style="color:#F8F8F2">[.top] </span><span style="color:#FF79C6">-</span><span style="color:#BD93F9"> 5</span><span style="color:#F8F8F2"> }</span></span>
<span class="line"><span style="color:#F8F8F2">                .</span><span style="color:#8BE9FD">alignmentGuide</span><span style="color:#F8F8F2">(.trailing) { </span><span style="color:#BD93F9;font-style:italic">$0</span><span style="color:#F8F8F2">[.trailing] </span><span style="color:#FF79C6">+</span><span style="color:#BD93F9"> 5</span><span style="color:#F8F8F2"> }</span></span>
<span class="line"><span style="color:#F8F8F2">                .</span><span style="color:#8BE9FD">foregroundStyle</span><span style="color:#F8F8F2">(.secondary)</span></span>
<span class="line"><span style="color:#F8F8F2">                .onTapGesture {</span></span>
<span class="line"><span style="color:#6272A4">                    // Invalidate Reason</span></span>
<span class="line"><span style="color:#F8F8F2">                    configuration.tip.</span><span style="color:#8BE9FD">invalidate</span><span style="color:#F8F8F2">(</span><span style="color:#8BE9FD">reason</span><span style="color:#F8F8F2">: .tipClosed)</span></span>
<span class="line"><span style="color:#F8F8F2">                }</span></span>
<span class="line"><span style="color:#F8F8F2">        }</span></span>
<span class="line"><span style="color:#F8F8F2">        .</span><span style="color:#8BE9FD">padding</span><span style="color:#F8F8F2">()</span></span>
<span class="line"><span style="color:#F8F8F2">    }</span></span>
<span class="line"><span style="color:#F8F8F2">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#8BE9FD">TipView</span><span style="color:#F8F8F2">(tip, </span><span style="color:#8BE9FD">arrowEdge</span><span style="color:#F8F8F2">: .bottom)</span></span>
<span class="line"><span style="color:#F8F8F2">    .</span><span style="color:#8BE9FD">tipViewStyle</span><span style="color:#F8F8F2">(</span><span style="color:#8BE9FD">MyTipStyle</span><span style="color:#F8F8F2">())</span></span></code></pre></div>
<p><picture>
                    <source media="(max-width: 479px)" srcset="https://cdn.fatbobman.com/image-20231015180721474.png?imageView2/0/w/500"/>
                    <source media="(max-width: 767px)" srcset="https://cdn.fatbobman.com/image-20231015180721474.png?imageView2/0/w/768"/>
                    <source media="(max-width: 1024px)" srcset="https://cdn.fatbobman.com/image-20231015180721474.png?imageView2/0/w/1024"/>
                    <img src="https://cdn.fatbobman.com/image-20231015180721474.png" alt="https://cdn.fatbobman.com/image-20231015180721474.png" loading="lazy" decoding="async"/>
                  </picture></p>
<p>开发者可以选择不在自定义样式中添加关闭按钮，以阻止使用者通过该途径使提示失效。</p>
<blockquote>
<p>此外，开发者还可以完全舍弃 <em><code>TipView</code> 和 <code>popoverTip</code></em> ，通过响应 Tip 状态的方式实现对 Tip 展示方式的完全掌控（下篇文章中会详细介绍）。</p>
</blockquote>
<h2 id="为-tip-添加-action-button">为 Tip 添加 Action Button</h2>
<p>到目前为止，我们创建的 Tip 都是纯展示性的。通过添加 actions，我们可以让 Tip 具备更强的可操作性，实现更多的交互功能。</p>
<div>
        <div class="flex justify-between items-center h-8 font-medium bg-[#96744d] dark:bg-[#002565] text-gray-200 text-xs rounded-tl-md rounded-tr-md">
          <span class="px-4 py-1">Swift</span>
          <button class="copy-button py-1 px-4" onclick="copyCode(this, event)">
          <div class="copy-text">
            <span class="flex items-center justify-center sm:hover:text-white sm:hover:font-bold">
              <svg class="w-3 h-3 mr-1" fill="currentColor" stroke="currentColor">
                <use xlink:href="#icon-clipboard"></use>
              </svg>
            Copy code
            </span>
          </div>
          <div class="copied-text hidden">
            <span class="flex items-center justify-center">
              <svg class="w-3 h-3 mr-1" fill="currentColor" stroke="currentColor">
                  <use xlink:href="#icon-check"></use>
             </svg>
              Copied!
            </span>
          </div>
        </button>
        </div>
      <pre class="astro-code dracula" style="background-color:#282A36;color:#F8F8F2;overflow-x:auto" tabindex="0"><code><span class="line"><span style="color:#FF79C6">struct</span><span style="color:#8BE9FD;font-style:italic"> PasswordTip</span><span style="color:#F8F8F2">: Tip {</span></span>
<span class="line"><span style="color:#FF79C6">    var</span><span style="color:#F8F8F2"> title: Text {</span></span>
<span class="line"><span style="color:#8BE9FD">        Text</span><span style="color:#F8F8F2">(</span><span style="color:#E9F284">&quot;</span><span style="color:#F1FA8C">Need Help?</span><span style="color:#E9F284">&quot;</span><span style="color:#F8F8F2">)</span></span>
<span class="line"><span style="color:#F8F8F2">    }</span></span>
<span class="line"><span style="color:#FF79C6">    var</span><span style="color:#F8F8F2"> message: Text</span><span style="color:#FF79C6">?</span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#8BE9FD">        Text</span><span style="color:#F8F8F2">(</span><span style="color:#E9F284">&quot;</span><span style="color:#F1FA8C">Do you need help logging in to your account?</span><span style="color:#E9F284">&quot;</span><span style="color:#F8F8F2">)</span></span>
<span class="line"><span style="color:#F8F8F2">    }</span></span>
<span class="line"><span style="color:#FF79C6">    var</span><span style="color:#F8F8F2"> image: Image</span><span style="color:#FF79C6">?</span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#8BE9FD">        Image</span><span style="color:#F8F8F2">(</span><span style="color:#8BE9FD">systemName</span><span style="color:#F8F8F2">: </span><span style="color:#E9F284">&quot;</span><span style="color:#F1FA8C">lock.shield</span><span style="color:#E9F284">&quot;</span><span style="color:#F8F8F2">)</span></span>
<span class="line"><span style="color:#F8F8F2">    }</span></span>
<span class="line"><span style="color:#FF79C6">    var</span><span style="color:#F8F8F2"> actions: [Action] {</span></span>
<span class="line"><span style="color:#6272A4">        // Define a reset password button.</span></span>
<span class="line"><span style="color:#8BE9FD">        Action</span><span style="color:#F8F8F2">(</span><span style="color:#8BE9FD">id</span><span style="color:#F8F8F2">: </span><span style="color:#E9F284">&quot;</span><span style="color:#F1FA8C">reset-password</span><span style="color:#E9F284">&quot;</span><span style="color:#F8F8F2">, </span><span style="color:#8BE9FD">title</span><span style="color:#F8F8F2">: </span><span style="color:#E9F284">&quot;</span><span style="color:#F1FA8C">Reset Password</span><span style="color:#E9F284">&quot;</span><span style="color:#F8F8F2">)</span></span>
<span class="line"><span style="color:#6272A4">        // Define a FAQ button.</span></span>
<span class="line"><span style="color:#8BE9FD">        Action</span><span style="color:#F8F8F2">(</span><span style="color:#8BE9FD">id</span><span style="color:#F8F8F2">: </span><span style="color:#E9F284">&quot;</span><span style="color:#F1FA8C">faq</span><span style="color:#E9F284">&quot;</span><span style="color:#F8F8F2">, </span><span style="color:#8BE9FD">title</span><span style="color:#F8F8F2">: </span><span style="color:#E9F284">&quot;</span><span style="color:#F1FA8C">View our FAQ</span><span style="color:#E9F284">&quot;</span><span style="color:#F8F8F2">)</span></span>
<span class="line"><span style="color:#F8F8F2">    }</span></span>
<span class="line"><span style="color:#F8F8F2">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6272A4">// In View</span></span>
<span class="line"><span style="color:#FF79C6">struct</span><span style="color:#8BE9FD;font-style:italic"> PasswordResetView</span><span style="color:#F8F8F2">: View {</span></span>
<span class="line"><span style="color:#FF79C6">    @Environment</span><span style="color:#F8F8F2">(\.openURL) </span><span style="color:#FF79C6">private</span><span style="color:#FF79C6"> var</span><span style="color:#F8F8F2"> openURL</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6272A4">    // Create an instance of your tip content.</span></span>
<span class="line"><span style="color:#FF79C6">    private</span><span style="color:#FF79C6"> var</span><span style="color:#F8F8F2"> tip </span><span style="color:#FF79C6">=</span><span style="color:#8BE9FD"> PasswordTip</span><span style="color:#F8F8F2">()</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FF79C6">    var</span><span style="color:#F8F8F2"> body: </span><span style="color:#FF79C6">some</span><span style="color:#F8F8F2"> View {</span></span>
<span class="line"><span style="color:#8BE9FD">        VStack</span><span style="color:#F8F8F2">(</span><span style="color:#8BE9FD">spacing</span><span style="color:#F8F8F2">: </span><span style="color:#BD93F9">20</span><span style="color:#F8F8F2">) {</span></span>
<span class="line"><span style="color:#8BE9FD">            Text</span><span style="color:#F8F8F2">(</span><span style="color:#E9F284">&quot;</span><span style="color:#F1FA8C">Use action buttons to link to more options. In this example, two actions buttons are provided. One takes the user to the Reset Password feature. The other sends them to an FAQ page.</span><span style="color:#E9F284">&quot;</span><span style="color:#F8F8F2">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6272A4">            // Place your tip near the feature you want to highlight.</span></span>
<span class="line"><span style="color:#8BE9FD">            TipView</span><span style="color:#F8F8F2">(tip, </span><span style="color:#8BE9FD">arrowEdge</span><span style="color:#F8F8F2">: .bottom) { action </span><span style="color:#FF79C6">in</span></span>
<span class="line"><span style="color:#6272A4">                // Define the closure that executes when someone presses the reset button.</span></span>
<span class="line"><span style="color:#FF79C6">                if</span><span style="color:#F8F8F2"> action.id </span><span style="color:#FF79C6">==</span><span style="color:#E9F284"> &quot;</span><span style="color:#F1FA8C">reset-password</span><span style="color:#E9F284">&quot;</span><span style="color:#F8F8F2">, </span><span style="color:#FF79C6">let</span><span style="color:#F8F8F2"> url </span><span style="color:#FF79C6">=</span><span style="color:#8BE9FD"> URL</span><span style="color:#F8F8F2">(</span><span style="color:#8BE9FD">string</span><span style="color:#F8F8F2">: </span><span style="color:#E9F284">&quot;</span><span style="color:#F1FA8C">https://iforgot.apple.com</span><span style="color:#E9F284">&quot;</span><span style="color:#F8F8F2">) {</span></span>
<span class="line"><span style="color:#8BE9FD">                    openURL</span><span style="color:#F8F8F2">(url) { accepted </span><span style="color:#FF79C6">in</span></span>
<span class="line"><span style="color:#8BE9FD">                        print</span><span style="color:#F8F8F2">(accepted </span><span style="color:#FF79C6">?</span><span style="color:#E9F284"> &quot;</span><span style="color:#F1FA8C">Success Reset</span><span style="color:#E9F284">&quot;</span><span style="color:#FF79C6"> :</span><span style="color:#E9F284"> &quot;</span><span style="color:#F1FA8C">Failure</span><span style="color:#E9F284">&quot;</span><span style="color:#F8F8F2">)</span></span>
<span class="line"><span style="color:#F8F8F2">                    }</span></span>
<span class="line"><span style="color:#F8F8F2">                }</span></span>
<span class="line"><span style="color:#6272A4">                // Define the closure that executes when someone presses the FAQ button.</span></span>
<span class="line"><span style="color:#FF79C6">                if</span><span style="color:#F8F8F2"> action.id </span><span style="color:#FF79C6">==</span><span style="color:#E9F284"> &quot;</span><span style="color:#F1FA8C">faq</span><span style="color:#E9F284">&quot;</span><span style="color:#F8F8F2">, </span><span style="color:#FF79C6">let</span><span style="color:#F8F8F2"> url </span><span style="color:#FF79C6">=</span><span style="color:#8BE9FD"> URL</span><span style="color:#F8F8F2">(</span><span style="color:#8BE9FD">string</span><span style="color:#F8F8F2">: </span><span style="color:#E9F284">&quot;</span><span style="color:#F1FA8C">https://appleid.apple.com/faq</span><span style="color:#E9F284">&quot;</span><span style="color:#F8F8F2">) {</span></span>
<span class="line"><span style="color:#8BE9FD">                    openURL</span><span style="color:#F8F8F2">(url) { accepted </span><span style="color:#FF79C6">in</span></span>
<span class="line"><span style="color:#8BE9FD">                        print</span><span style="color:#F8F8F2">(accepted </span><span style="color:#FF79C6">?</span><span style="color:#E9F284"> &quot;</span><span style="color:#F1FA8C">Success FAQ</span><span style="color:#E9F284">&quot;</span><span style="color:#FF79C6"> :</span><span style="color:#E9F284"> &quot;</span><span style="color:#F1FA8C">Failure</span><span style="color:#E9F284">&quot;</span><span style="color:#F8F8F2">)</span></span>
<span class="line"><span style="color:#F8F8F2">                    }</span></span>
<span class="line"><span style="color:#F8F8F2">                }</span></span>
<span class="line"><span style="color:#F8F8F2">            }</span></span>
<span class="line"><span style="color:#8BE9FD">            Button</span><span style="color:#F8F8F2">(</span><span style="color:#E9F284">&quot;</span><span style="color:#F1FA8C">Login</span><span style="color:#E9F284">&quot;</span><span style="color:#F8F8F2">) {}</span></span>
<span class="line"><span style="color:#8BE9FD">            Spacer</span><span style="color:#F8F8F2">()</span></span>
<span class="line"><span style="color:#F8F8F2">        }</span></span>
<span class="line"><span style="color:#F8F8F2">        .</span><span style="color:#8BE9FD">padding</span><span style="color:#F8F8F2">()</span></span>
<span class="line"><span style="color:#F8F8F2">        .</span><span style="color:#8BE9FD">navigationTitle</span><span style="color:#F8F8F2">(</span><span style="color:#E9F284">&quot;</span><span style="color:#F1FA8C">Password reset</span><span style="color:#E9F284">&quot;</span><span style="color:#F8F8F2">)</span></span>
<span class="line"><span style="color:#F8F8F2">    }</span></span>
<span class="line"><span style="color:#F8F8F2">}</span></span></code></pre></div>
<p><img src="https://cdn.fatbobman.com/tipkit-tip-with-action-demo_2023-10-15_18.17.09.2023-10-15%2018_17_49.gif" alt="https://cdn.fatbobman.com/tipkit-tip-with-action-demo_2023-10-15_18.17.09.2023-10-15%2018_17_49.gif"/></p>
<p>在上面的代码中，我们首先在 PasswordTip 中添加 Action 数据。其中，id 用于在回调闭包中识别不同的 Action 来源。</p>
<div>
        <div class="flex justify-between items-center h-8 font-medium bg-[#96744d] dark:bg-[#002565] text-gray-200 text-xs rounded-tl-md rounded-tr-md">
          <span class="px-4 py-1">Swift</span>
          <button class="copy-button py-1 px-4" onclick="copyCode(this, event)">
          <div class="copy-text">
            <span class="flex items-center justify-center sm:hover:text-white sm:hover:font-bold">
              <svg class="w-3 h-3 mr-1" fill="currentColor" stroke="currentColor">
                <use xlink:href="#icon-clipboard"></use>
              </svg>
            Copy code
            </span>
          </div>
          <div class="copied-text hidden">
            <span class="flex items-center justify-center">
              <svg class="w-3 h-3 mr-1" fill="currentColor" stroke="currentColor">
                  <use xlink:href="#icon-check"></use>
             </svg>
              Copied!
            </span>
          </div>
        </button>
        </div>
      <pre class="astro-code dracula" style="background-color:#282A36;color:#F8F8F2;overflow-x:auto" tabindex="0"><code><span class="line"><span style="color:#FF79C6">var</span><span style="color:#F8F8F2"> actions: [Action] {</span></span>
<span class="line"><span style="color:#8BE9FD">    Action</span><span style="color:#F8F8F2">(</span><span style="color:#8BE9FD">id</span><span style="color:#F8F8F2">: </span><span style="color:#E9F284">&quot;</span><span style="color:#F1FA8C">reset-password</span><span style="color:#E9F284">&quot;</span><span style="color:#F8F8F2">, </span><span style="color:#8BE9FD">title</span><span style="color:#F8F8F2">: </span><span style="color:#E9F284">&quot;</span><span style="color:#F1FA8C">Reset Password</span><span style="color:#E9F284">&quot;</span><span style="color:#F8F8F2">)</span></span>
<span class="line"><span style="color:#8BE9FD">    Action</span><span style="color:#F8F8F2">(</span><span style="color:#8BE9FD">id</span><span style="color:#F8F8F2">: </span><span style="color:#E9F284">&quot;</span><span style="color:#F1FA8C">faq</span><span style="color:#E9F284">&quot;</span><span style="color:#F8F8F2">, </span><span style="color:#8BE9FD">title</span><span style="color:#F8F8F2">: </span><span style="color:#E9F284">&quot;</span><span style="color:#F1FA8C">View our FAQ</span><span style="color:#E9F284">&quot;</span><span style="color:#F8F8F2">)</span></span>
<span class="line"><span style="color:#F8F8F2">}</span></span></code></pre></div>
<p>在 Tip 协议中，actions 的定义为 <code>@Tips.OptionsBuilder var options: [TipOption] { get }</code>，它是一个 Result builders，因此可以用上述方式合成并返回 Action 数组。</p>
<p>在视图中，通过在 <code>TipView</code> 后面添加闭包来判断 Action 的来源，并实现相应的操作。</p>
<div>
        <div class="flex justify-between items-center h-8 font-medium bg-[#96744d] dark:bg-[#002565] text-gray-200 text-xs rounded-tl-md rounded-tr-md">
          <span class="px-4 py-1">Swift</span>
          <button class="copy-button py-1 px-4" onclick="copyCode(this, event)">
          <div class="copy-text">
            <span class="flex items-center justify-center sm:hover:text-white sm:hover:font-bold">
              <svg class="w-3 h-3 mr-1" fill="currentColor" stroke="currentColor">
                <use xlink:href="#icon-clipboard"></use>
              </svg>
            Copy code
            </span>
          </div>
          <div class="copied-text hidden">
            <span class="flex items-center justify-center">
              <svg class="w-3 h-3 mr-1" fill="currentColor" stroke="currentColor">
                  <use xlink:href="#icon-check"></use>
             </svg>
              Copied!
            </span>
          </div>
        </button>
        </div>
      <pre class="astro-code dracula" style="background-color:#282A36;color:#F8F8F2;overflow-x:auto" tabindex="0"><code><span class="line"><span style="color:#8BE9FD">TipView</span><span style="color:#F8F8F2">(tip, </span><span style="color:#8BE9FD">arrowEdge</span><span style="color:#F8F8F2">: .bottom) { action </span><span style="color:#FF79C6">in</span></span>
<span class="line"><span style="color:#FF79C6">    if</span><span style="color:#F8F8F2"> action.id </span><span style="color:#FF79C6">==</span><span style="color:#E9F284"> &quot;</span><span style="color:#F1FA8C">reset-password</span><span style="color:#E9F284">&quot;</span><span style="color:#F8F8F2">, </span><span style="color:#FF79C6">let</span><span style="color:#F8F8F2"> url </span><span style="color:#FF79C6">=</span><span style="color:#8BE9FD"> URL</span><span style="color:#F8F8F2">(</span><span style="color:#8BE9FD">string</span><span style="color:#F8F8F2">: </span><span style="color:#E9F284">&quot;</span><span style="color:#F1FA8C">https://iforgot.apple.com</span><span style="color:#E9F284">&quot;</span><span style="color:#F8F8F2">) {</span></span>
<span class="line"><span style="color:#8BE9FD">        openURL</span><span style="color:#F8F8F2">(url) { accepted </span><span style="color:#FF79C6">in</span></span>
<span class="line"><span style="color:#8BE9FD">            print</span><span style="color:#F8F8F2">(accepted </span><span style="color:#FF79C6">?</span><span style="color:#E9F284"> &quot;</span><span style="color:#F1FA8C">Success Reset</span><span style="color:#E9F284">&quot;</span><span style="color:#FF79C6"> :</span><span style="color:#E9F284"> &quot;</span><span style="color:#F1FA8C">Failure</span><span style="color:#E9F284">&quot;</span><span style="color:#F8F8F2">)</span></span>
<span class="line"><span style="color:#F8F8F2">        }</span></span>
<span class="line"><span style="color:#F8F8F2">    }</span></span>
<span class="line"><span style="color:#FF79C6">    if</span><span style="color:#F8F8F2"> action.id </span><span style="color:#FF79C6">==</span><span style="color:#E9F284"> &quot;</span><span style="color:#F1FA8C">faq</span><span style="color:#E9F284">&quot;</span><span style="color:#F8F8F2">, </span><span style="color:#FF79C6">let</span><span style="color:#F8F8F2"> url </span><span style="color:#FF79C6">=</span><span style="color:#8BE9FD"> URL</span><span style="color:#F8F8F2">(</span><span style="color:#8BE9FD">string</span><span style="color:#F8F8F2">: </span><span style="color:#E9F284">&quot;</span><span style="color:#F1FA8C">https://appleid.apple.com/faq</span><span style="color:#E9F284">&quot;</span><span style="color:#F8F8F2">) {</span></span>
<span class="line"><span style="color:#8BE9FD">        openURL</span><span style="color:#F8F8F2">(url) { accepted </span><span style="color:#FF79C6">in</span></span>
<span class="line"><span style="color:#8BE9FD">            print</span><span style="color:#F8F8F2">(accepted </span><span style="color:#FF79C6">?</span><span style="color:#E9F284"> &quot;</span><span style="color:#F1FA8C">Success FAQ</span><span style="color:#E9F284">&quot;</span><span style="color:#FF79C6"> :</span><span style="color:#E9F284"> &quot;</span><span style="color:#F1FA8C">Failure</span><span style="color:#E9F284">&quot;</span><span style="color:#F8F8F2">)</span></span>
<span class="line"><span style="color:#F8F8F2">        }</span></span>
<span class="line"><span style="color:#F8F8F2">    }</span></span>
<span class="line"><span style="color:#F8F8F2">}</span></span></code></pre></div>
<p><code>popoverTip</code> 也提供了支持 Action 的版本。</p>
<div>
        <div class="flex justify-between items-center h-8 font-medium bg-[#96744d] dark:bg-[#002565] text-gray-200 text-xs rounded-tl-md rounded-tr-md">
          <span class="px-4 py-1">Swift</span>
          <button class="copy-button py-1 px-4" onclick="copyCode(this, event)">
          <div class="copy-text">
            <span class="flex items-center justify-center sm:hover:text-white sm:hover:font-bold">
              <svg class="w-3 h-3 mr-1" fill="currentColor" stroke="currentColor">
                <use xlink:href="#icon-clipboard"></use>
              </svg>
            Copy code
            </span>
          </div>
          <div class="copied-text hidden">
            <span class="flex items-center justify-center">
              <svg class="w-3 h-3 mr-1" fill="currentColor" stroke="currentColor">
                  <use xlink:href="#icon-check"></use>
             </svg>
              Copied!
            </span>
          </div>
        </button>
        </div>
      <pre class="astro-code dracula" style="background-color:#282A36;color:#F8F8F2;overflow-x:auto" tabindex="0"><code><span class="line"><span style="color:#F8F8F2">.</span><span style="color:#8BE9FD">popoverTip</span><span style="color:#F8F8F2">(tip){ action </span><span style="color:#FF79C6">in</span></span>
<span class="line"><span style="color:#6272A4">   // ....</span></span>
<span class="line"><span style="color:#F8F8F2">}</span></span></code></pre></div>
<p>在本例中，由于需要使用视图环境值提供的 <code>openURL</code> ，因此对 Action 的操作实现是在视图中进行的。如果不需要使用视图中的信息，可以直接在 Action 的定义中添加对应的操作代码。</p>
<div>
        <div class="flex justify-between items-center h-8 font-medium bg-[#96744d] dark:bg-[#002565] text-gray-200 text-xs rounded-tl-md rounded-tr-md">
          <span class="px-4 py-1">Swift</span>
          <button class="copy-button py-1 px-4" onclick="copyCode(this, event)">
          <div class="copy-text">
            <span class="flex items-center justify-center sm:hover:text-white sm:hover:font-bold">
              <svg class="w-3 h-3 mr-1" fill="currentColor" stroke="currentColor">
                <use xlink:href="#icon-clipboard"></use>
              </svg>
            Copy code
            </span>
          </div>
          <div class="copied-text hidden">
            <span class="flex items-center justify-center">
              <svg class="w-3 h-3 mr-1" fill="currentColor" stroke="currentColor">
                  <use xlink:href="#icon-check"></use>
             </svg>
              Copied!
            </span>
          </div>
        </button>
        </div>
      <pre class="astro-code dracula" style="background-color:#282A36;color:#F8F8F2;overflow-x:auto" tabindex="0"><code><span class="line"><span style="color:#8BE9FD">Action</span><span style="color:#F8F8F2">(</span><span style="color:#8BE9FD">id</span><span style="color:#F8F8F2">: </span><span style="color:#E9F284">&quot;</span><span style="color:#F1FA8C">faq</span><span style="color:#E9F284">&quot;</span><span style="color:#F8F8F2">, </span><span style="color:#8BE9FD">title</span><span style="color:#F8F8F2">: </span><span style="color:#E9F284">&quot;</span><span style="color:#F1FA8C">View our FAQ</span><span style="color:#E9F284">&quot;</span><span style="color:#F8F8F2">, </span><span style="color:#8BE9FD">perform</span><span style="color:#F8F8F2">: {</span></span>
<span class="line"><span style="color:#FF79C6">    if</span><span style="color:#FF79C6"> let</span><span style="color:#F8F8F2"> url </span><span style="color:#FF79C6">=</span><span style="color:#8BE9FD"> URL</span><span style="color:#F8F8F2">(</span><span style="color:#8BE9FD">string</span><span style="color:#F8F8F2">: </span><span style="color:#E9F284">&quot;</span><span style="color:#F1FA8C">https://appleid.apple.com/faq</span><span style="color:#E9F284">&quot;</span><span style="color:#F8F8F2">) {</span></span>
<span class="line"><span style="color:#F8F8F2">        UIApplication.shared.</span><span style="color:#8BE9FD">open</span><span style="color:#F8F8F2">(url)</span></span>
<span class="line"><span style="color:#F8F8F2">    }</span></span>
<span class="line"><span style="color:#F8F8F2">})</span></span>
<span class="line"></span>
<span class="line"><span style="color:#8BE9FD">TipView</span><span style="color:#F8F8F2">(tip, </span><span style="color:#8BE9FD">arrowEdge</span><span style="color:#F8F8F2">: .bottom)</span></span></code></pre></div>
<h2 id="为-tip-制定显示规则">为 Tip 制定显示规则</h2>
<p>如果只是为了提供上文中提到的 Tip 视图模板，那么苹果就完全没有创建 TipKit 框架的必要。TipKit 框架的强大之处在于，开发者可以为每个 Tip 创建独立的规则，并应用该规则来决定是否显示 Tip。</p>
<p>规则用来判断显示与否的依据来源于某些状态（ 参数 ）或用户事件，因此我们首先需要在 Tip 类型中定义所需的参数和事件。</p>
<h3 id="为-tip-定义参数-parameter">为 Tip 定义参数（ Parameter）</h3>
<p>我们可以通过 <code>@Parameter</code> 宏，定义一个变量，用来表示要跟踪的应用程序状态。</p>
<div>
        <div class="flex justify-between items-center h-8 font-medium bg-[#96744d] dark:bg-[#002565] text-gray-200 text-xs rounded-tl-md rounded-tr-md">
          <span class="px-4 py-1">Swift</span>
          <button class="copy-button py-1 px-4" onclick="copyCode(this, event)">
          <div class="copy-text">
            <span class="flex items-center justify-center sm:hover:text-white sm:hover:font-bold">
              <svg class="w-3 h-3 mr-1" fill="currentColor" stroke="currentColor">
                <use xlink:href="#icon-clipboard"></use>
              </svg>
            Copy code
            </span>
          </div>
          <div class="copied-text hidden">
            <span class="flex items-center justify-center">
              <svg class="w-3 h-3 mr-1" fill="currentColor" stroke="currentColor">
                  <use xlink:href="#icon-check"></use>
             </svg>
              Copied!
            </span>
          </div>
        </button>
        </div>
      <pre class="astro-code dracula" style="background-color:#282A36;color:#F8F8F2;overflow-x:auto" tabindex="0"><code><span class="line"><span style="color:#FF79C6">struct</span><span style="color:#8BE9FD;font-style:italic"> ParameterRuleTip</span><span style="color:#F8F8F2">: Tip {</span></span>
<span class="line"><span style="color:#6272A4">    // Define the app state you want to track.</span></span>
<span class="line"><span style="color:#FF79C6">    @Parameter</span></span>
<span class="line"><span style="color:#FF79C6">    static</span><span style="color:#FF79C6"> var</span><span style="color:#F8F8F2"> isLoggedIn: </span><span style="color:#8BE9FD;font-style:italic">Bool</span><span style="color:#FF79C6"> =</span><span style="color:#BD93F9"> false</span></span>
<span class="line"><span style="color:#F8F8F2">}</span></span></code></pre></div>
<p>通过展开宏，我们可以看到 <code>@Parameter</code> 生成的完整代码：</p>
<div>
        <div class="flex justify-between items-center h-8 font-medium bg-[#96744d] dark:bg-[#002565] text-gray-200 text-xs rounded-tl-md rounded-tr-md">
          <span class="px-4 py-1">Swift</span>
          <button class="copy-button py-1 px-4" onclick="copyCode(this, event)">
          <div class="copy-text">
            <span class="flex items-center justify-center sm:hover:text-white sm:hover:font-bold">
              <svg class="w-3 h-3 mr-1" fill="currentColor" stroke="currentColor">
                <use xlink:href="#icon-clipboard"></use>
              </svg>
            Copy code
            </span>
          </div>
          <div class="copied-text hidden">
            <span class="flex items-center justify-center">
              <svg class="w-3 h-3 mr-1" fill="currentColor" stroke="currentColor">
                  <use xlink:href="#icon-check"></use>
             </svg>
              Copied!
            </span>
          </div>
        </button>
        </div>
      <pre class="astro-code dracula" style="background-color:#282A36;color:#F8F8F2;overflow-x:auto" tabindex="0"><code><span class="line"><span style="color:#FF79C6">static</span><span style="color:#FF79C6"> var</span><span style="color:#F8F8F2"> $isLoggedIn</span><span style="color:#FF79C6">:</span><span style="color:#F8F8F2"> Tips.Parameter</span><span style="color:#FF79C6">&lt;</span><span style="color:#8BE9FD;font-style:italic">Bool</span><span style="color:#FF79C6">&gt;</span><span style="color:#FF79C6"> =</span><span style="color:#F8F8F2"> Tips.</span><span style="color:#8BE9FD">Parameter</span><span style="color:#F8F8F2">(</span><span style="color:#BD93F9;font-style:italic">Self</span><span style="color:#F8F8F2">.</span><span style="color:#FF79C6">self</span><span style="color:#F8F8F2">, </span><span style="color:#E9F284">&quot;</span><span style="color:#F1FA8C">isLoggedIn</span><span style="color:#E9F284">&quot;</span><span style="color:#F8F8F2">, </span><span style="color:#BD93F9">false</span><span style="color:#F8F8F2">)</span></span>
<span class="line"><span style="color:#FF79C6">static</span><span style="color:#FF79C6"> var</span><span style="color:#F8F8F2"> isLoggedIn: </span><span style="color:#8BE9FD;font-style:italic">Bool</span><span style="color:#FF79C6"> =</span><span style="color:#BD93F9"> false</span></span>
<span class="line"><span style="color:#F8F8F2">{</span></span>
<span class="line"><span style="color:#FF79C6">    get</span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#F8F8F2">        $isLoggedIn.wrappedValue</span></span>
<span class="line"><span style="color:#F8F8F2">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FF79C6">    set</span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#F8F8F2">        $isLoggedIn.wrappedValue </span><span style="color:#FF79C6">=</span><span style="color:#F8F8F2"> newValue</span></span>
<span class="line"><span style="color:#F8F8F2">    }</span></span>
<span class="line"><span style="color:#F8F8F2">}</span></span></code></pre></div>
<p><code>$isLoggedIn</code> 的类型是 <code>Tips.Parameter&lt;Bool&gt;</code>，它提供了对 ParameterRuleTip.isLoggedIn 的值进行持续化的能力。</p>
<blockquote>
<p>TipKit 为 @Parameter 提供了一个 <code>@Parameter(.transient)</code> 选项。在开启后，TipKit 将在应用重启时，使用 Tip 定义中提供的默认值而不使用持久化的值。与 Core Data 或 SwiftData 中的 <code>transient</code> 选项性质略有不同，在 TipKit 中，即使开启 <code>transient</code> 选项，数据仍会被持久化。这主要是为了方便在使用同一个 TipKit 数据源的不同应用和组件之间保持该参数的动态同步。</p>
</blockquote>
<p>参数的定义不必局限于 Tip 的声明中。实际上，参数可以在任何类型中声明，例如：</p>
<div>
        <div class="flex justify-between items-center h-8 font-medium bg-[#96744d] dark:bg-[#002565] text-gray-200 text-xs rounded-tl-md rounded-tr-md">
          <span class="px-4 py-1">Swift</span>
          <button class="copy-button py-1 px-4" onclick="copyCode(this, event)">
          <div class="copy-text">
            <span class="flex items-center justify-center sm:hover:text-white sm:hover:font-bold">
              <svg class="w-3 h-3 mr-1" fill="currentColor" stroke="currentColor">
                <use xlink:href="#icon-clipboard"></use>
              </svg>
            Copy code
            </span>
          </div>
          <div class="copied-text hidden">
            <span class="flex items-center justify-center">
              <svg class="w-3 h-3 mr-1" fill="currentColor" stroke="currentColor">
                  <use xlink:href="#icon-check"></use>
             </svg>
              Copied!
            </span>
          </div>
        </button>
        </div>
      <pre class="astro-code dracula" style="background-color:#282A36;color:#F8F8F2;overflow-x:auto" tabindex="0"><code><span class="line"><span style="color:#FF79C6">struct</span><span style="color:#8BE9FD;font-style:italic"> ContentView</span><span style="color:#F8F8F2">: View {</span></span>
<span class="line"><span style="color:#FF79C6">  @Parameter</span><span style="color:#FF79C6"> static</span><span style="color:#FF79C6"> var</span><span style="color:#F8F8F2"> isLoggedIn: </span><span style="color:#8BE9FD;font-style:italic">Bool</span><span style="color:#FF79C6"> =</span><span style="color:#BD93F9"> false</span></span>
<span class="line"><span style="color:#F8F8F2">}</span></span></code></pre></div>
<p>将参数声明在 Tip 外部，可以有效提升 Tip 的可复用性。</p>
<h3 id="创建规则rule根据状态决定是否显示提示tip">创建规则（Rule），根据状态决定是否显示提示（Tip）</h3>
<p>现在，我们可以利用之前定义的 <code>isLoggedIn</code> 属性来创建规则，以判断是否满足显示 ParameterRuleTip 的条件。</p>
<div>
        <div class="flex justify-between items-center h-8 font-medium bg-[#96744d] dark:bg-[#002565] text-gray-200 text-xs rounded-tl-md rounded-tr-md">
          <span class="px-4 py-1">Swift</span>
          <button class="copy-button py-1 px-4" onclick="copyCode(this, event)">
          <div class="copy-text">
            <span class="flex items-center justify-center sm:hover:text-white sm:hover:font-bold">
              <svg class="w-3 h-3 mr-1" fill="currentColor" stroke="currentColor">
                <use xlink:href="#icon-clipboard"></use>
              </svg>
            Copy code
            </span>
          </div>
          <div class="copied-text hidden">
            <span class="flex items-center justify-center">
              <svg class="w-3 h-3 mr-1" fill="currentColor" stroke="currentColor">
                  <use xlink:href="#icon-check"></use>
             </svg>
              Copied!
            </span>
          </div>
        </button>
        </div>
      <pre class="astro-code dracula" style="background-color:#282A36;color:#F8F8F2;overflow-x:auto" tabindex="0"><code><span class="line"><span style="color:#FF79C6">struct</span><span style="color:#8BE9FD;font-style:italic"> ParameterRuleTip</span><span style="color:#F8F8F2">: Tip {</span></span>
<span class="line"><span style="color:#6272A4">    // Define the app state you want to track.</span></span>
<span class="line"><span style="color:#FF79C6">    @Parameter</span></span>
<span class="line"><span style="color:#FF79C6">    static</span><span style="color:#FF79C6"> var</span><span style="color:#F8F8F2"> isLoggedIn: </span><span style="color:#8BE9FD;font-style:italic">Bool</span><span style="color:#FF79C6"> =</span><span style="color:#BD93F9"> false</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FF79C6">    var</span><span style="color:#F8F8F2"> rules: [Rule] {</span></span>
<span class="line"><span style="color:#F8F8F2">        [</span></span>
<span class="line"><span style="color:#6272A4">            // Define a rule based on the app state.</span></span>
<span class="line"><span style="color:#F8F8F2">            #</span><span style="color:#8BE9FD">Rule</span><span style="color:#F8F8F2">(</span><span style="color:#BD93F9;font-style:italic">Self</span><span style="color:#F8F8F2">.$isLoggedIn) {</span></span>
<span class="line"><span style="color:#6272A4">                // Set the conditions for when the tip displays.</span></span>
<span class="line"><span style="color:#BD93F9;font-style:italic">                $0</span><span style="color:#FF79C6"> ==</span><span style="color:#BD93F9"> true</span></span>
<span class="line"><span style="color:#F8F8F2">            }</span></span>
<span class="line"><span style="color:#F8F8F2">        ]</span></span>
<span class="line"><span style="color:#F8F8F2">    }</span></span>
<span class="line"><span style="color:#6272A4">    // ...</span></span>
<span class="line"><span style="color:#F8F8F2">}</span></span></code></pre></div>
<p>对于在其他类型中声明的参数，编写规则时需要明确指定参数的位置，例如：</p>
<div>
        <div class="flex justify-between items-center h-8 font-medium bg-[#96744d] dark:bg-[#002565] text-gray-200 text-xs rounded-tl-md rounded-tr-md">
          <span class="px-4 py-1">Swift</span>
          <button class="copy-button py-1 px-4" onclick="copyCode(this, event)">
          <div class="copy-text">
            <span class="flex items-center justify-center sm:hover:text-white sm:hover:font-bold">
              <svg class="w-3 h-3 mr-1" fill="currentColor" stroke="currentColor">
                <use xlink:href="#icon-clipboard"></use>
              </svg>
            Copy code
            </span>
          </div>
          <div class="copied-text hidden">
            <span class="flex items-center justify-center">
              <svg class="w-3 h-3 mr-1" fill="currentColor" stroke="currentColor">
                  <use xlink:href="#icon-check"></use>
             </svg>
              Copied!
            </span>
          </div>
        </button>
        </div>
      <pre class="astro-code dracula" style="background-color:#282A36;color:#F8F8F2;overflow-x:auto" tabindex="0"><code><span class="line"><span style="color:#F8F8F2">#</span><span style="color:#8BE9FD">Rule</span><span style="color:#F8F8F2">(ContentView.$isLoggedIn) {</span></span></code></pre></div>
<p><code>#Rule(Self.$isLoggedIn)</code> 表示该条规则将观察 <code>ParameterRuleTip.isLoggedIn</code> 属性，并将 <code>isLoggedIn</code> 作为参数传递到闭包中。</p>
<p><code>#Rule</code>也是一个宏，展开后会发现 TipKit 的规则是基于 Predicate 构建的。</p>
<div>
        <div class="flex justify-between items-center h-8 font-medium bg-[#96744d] dark:bg-[#002565] text-gray-200 text-xs rounded-tl-md rounded-tr-md">
          <span class="px-4 py-1">Swift</span>
          <button class="copy-button py-1 px-4" onclick="copyCode(this, event)">
          <div class="copy-text">
            <span class="flex items-center justify-center sm:hover:text-white sm:hover:font-bold">
              <svg class="w-3 h-3 mr-1" fill="currentColor" stroke="currentColor">
                <use xlink:href="#icon-clipboard"></use>
              </svg>
            Copy code
            </span>
          </div>
          <div class="copied-text hidden">
            <span class="flex items-center justify-center">
              <svg class="w-3 h-3 mr-1" fill="currentColor" stroke="currentColor">
                  <use xlink:href="#icon-check"></use>
             </svg>
              Copied!
            </span>
          </div>
        </button>
        </div>
      <pre class="astro-code dracula" style="background-color:#282A36;color:#F8F8F2;overflow-x:auto" tabindex="0"><code><span class="line"><span style="color:#F8F8F2">Tip.</span><span style="color:#8BE9FD">Rule</span><span style="color:#F8F8F2">(</span><span style="color:#BD93F9;font-style:italic">Self</span><span style="color:#F8F8F2">.$isLoggedIn) {</span></span>
<span class="line"><span style="color:#F8F8F2">    PredicateExpressions.</span><span style="color:#8BE9FD">build_Equal</span><span style="color:#F8F8F2">(</span></span>
<span class="line"><span style="color:#8BE9FD">        lhs</span><span style="color:#F8F8F2">: PredicateExpressions.</span><span style="color:#8BE9FD">build_Arg</span><span style="color:#F8F8F2">(</span><span style="color:#BD93F9;font-style:italic">$0</span><span style="color:#F8F8F2">),</span></span>
<span class="line"><span style="color:#8BE9FD">        rhs</span><span style="color:#F8F8F2">: PredicateExpressions.</span><span style="color:#8BE9FD">build_Arg</span><span style="color:#F8F8F2">(</span><span style="color:#BD93F9">true</span><span style="color:#F8F8F2">)</span></span>
<span class="line"><span style="color:#F8F8F2">    )</span></span>
<span class="line"><span style="color:#F8F8F2">}</span></span></code></pre></div>
<p>在视图中，我们可以通过修改 <code>isLoggedIn</code> 的值来显示或隐藏 Tip：</p>
<div>
        <div class="flex justify-between items-center h-8 font-medium bg-[#96744d] dark:bg-[#002565] text-gray-200 text-xs rounded-tl-md rounded-tr-md">
          <span class="px-4 py-1">Swift</span>
          <button class="copy-button py-1 px-4" onclick="copyCode(this, event)">
          <div class="copy-text">
            <span class="flex items-center justify-center sm:hover:text-white sm:hover:font-bold">
              <svg class="w-3 h-3 mr-1" fill="currentColor" stroke="currentColor">
                <use xlink:href="#icon-clipboard"></use>
              </svg>
            Copy code
            </span>
          </div>
          <div class="copied-text hidden">
            <span class="flex items-center justify-center">
              <svg class="w-3 h-3 mr-1" fill="currentColor" stroke="currentColor">
                  <use xlink:href="#icon-check"></use>
             </svg>
              Copied!
            </span>
          </div>
        </button>
        </div>
      <pre class="astro-code dracula" style="background-color:#282A36;color:#F8F8F2;overflow-x:auto" tabindex="0"><code><span class="line"><span style="color:#FF79C6">struct</span><span style="color:#8BE9FD;font-style:italic"> ParameterView</span><span style="color:#F8F8F2">: View {</span></span>
<span class="line"><span style="color:#6272A4">    // Create an instance of your tip content.</span></span>
<span class="line"><span style="color:#FF79C6">    private</span><span style="color:#FF79C6"> var</span><span style="color:#F8F8F2"> tip </span><span style="color:#FF79C6">=</span><span style="color:#8BE9FD"> ParameterRuleTip</span><span style="color:#F8F8F2">()</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FF79C6">    var</span><span style="color:#F8F8F2"> body: </span><span style="color:#FF79C6">some</span><span style="color:#F8F8F2"> View {</span></span>
<span class="line"><span style="color:#8BE9FD">        VStack</span><span style="color:#F8F8F2">(</span><span style="color:#8BE9FD">spacing</span><span style="color:#F8F8F2">: </span><span style="color:#BD93F9">20</span><span style="color:#F8F8F2">) {</span></span>
<span class="line"><span style="color:#8BE9FD">            Text</span><span style="color:#F8F8F2">(</span><span style="color:#E9F284">&quot;</span><span style="color:#F1FA8C">Use the parameter property wrapper and rules to track app state and control where and when your tip appears.</span><span style="color:#E9F284">&quot;</span><span style="color:#F8F8F2">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6272A4">            // Place your tip near the feature you want to highlight.</span></span>
<span class="line"><span style="color:#8BE9FD">            TipView</span><span style="color:#F8F8F2">(tip, </span><span style="color:#8BE9FD">arrowEdge</span><span style="color:#F8F8F2">: .bottom)</span></span>
<span class="line"><span style="color:#8BE9FD">            Image</span><span style="color:#F8F8F2">(</span><span style="color:#8BE9FD">systemName</span><span style="color:#F8F8F2">: </span><span style="color:#E9F284">&quot;</span><span style="color:#F1FA8C">photo.on.rectangle</span><span style="color:#E9F284">&quot;</span><span style="color:#F8F8F2">)</span></span>
<span class="line"><span style="color:#F8F8F2">                .</span><span style="color:#8BE9FD">imageScale</span><span style="color:#F8F8F2">(.large)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#8BE9FD">            Button</span><span style="color:#F8F8F2">(</span><span style="color:#E9F284">&quot;</span><span style="color:#F1FA8C">Tap</span><span style="color:#E9F284">&quot;</span><span style="color:#F8F8F2">) {</span></span>
<span class="line"><span style="color:#6272A4">                // Trigger a change in app state to make the tip appear or disappear.</span></span>
<span class="line"><span style="color:#F8F8F2">                ParameterRuleTip.isLoggedIn.</span><span style="color:#8BE9FD">toggle</span><span style="color:#F8F8F2">()</span></span>
<span class="line"><span style="color:#F8F8F2">            }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#8BE9FD">            Text</span><span style="color:#F8F8F2">(</span><span style="color:#E9F284">&quot;</span><span style="color:#F1FA8C">Tap the button to toggle the app state and display the tip accordingly.</span><span style="color:#E9F284">&quot;</span><span style="color:#F8F8F2">)</span></span>
<span class="line"><span style="color:#8BE9FD">            Spacer</span><span style="color:#F8F8F2">()</span></span>
<span class="line"><span style="color:#F8F8F2">        }</span></span>
<span class="line"><span style="color:#F8F8F2">        .</span><span style="color:#8BE9FD">padding</span><span style="color:#F8F8F2">()</span></span>
<span class="line"><span style="color:#F8F8F2">        .</span><span style="color:#8BE9FD">navigationTitle</span><span style="color:#F8F8F2">(</span><span style="color:#E9F284">&quot;</span><span style="color:#F1FA8C">Parameters</span><span style="color:#E9F284">&quot;</span><span style="color:#F8F8F2">)</span></span>
<span class="line"><span style="color:#F8F8F2">    }</span></span>
<span class="line"><span style="color:#F8F8F2">}</span></span></code></pre></div>
<p><img src="https://cdn.fatbobman.com/tipkit-parameters-rule-demo_2023-10-15_19.16.25.2023-10-15%2019_17_01.gif" alt="https://cdn.fatbobman.com/tipkit-parameters-rule-demo_2023-10-15_19.16.25.2023-10-15%2019_17_01.gif"/></p>
<p>在上面的代码中，为了便于演示，我们通过点击按钮的方式来修改 <code>isLoggedIn</code> 的值。当然，我们也可以通过构造方法来传递值的变化，比如：</p>
<div>
        <div class="flex justify-between items-center h-8 font-medium bg-[#96744d] dark:bg-[#002565] text-gray-200 text-xs rounded-tl-md rounded-tr-md">
          <span class="px-4 py-1">Swift</span>
          <button class="copy-button py-1 px-4" onclick="copyCode(this, event)">
          <div class="copy-text">
            <span class="flex items-center justify-center sm:hover:text-white sm:hover:font-bold">
              <svg class="w-3 h-3 mr-1" fill="currentColor" stroke="currentColor">
                <use xlink:href="#icon-clipboard"></use>
              </svg>
            Copy code
            </span>
          </div>
          <div class="copied-text hidden">
            <span class="flex items-center justify-center">
              <svg class="w-3 h-3 mr-1" fill="currentColor" stroke="currentColor">
                  <use xlink:href="#icon-check"></use>
             </svg>
              Copied!
            </span>
          </div>
        </button>
        </div>
      <pre class="astro-code dracula" style="background-color:#282A36;color:#F8F8F2;overflow-x:auto" tabindex="0"><code><span class="line"><span style="color:#FF79C6">struct</span><span style="color:#8BE9FD;font-style:italic"> ParameterRuleTip</span><span style="color:#F8F8F2">: Tip {</span></span>
<span class="line"><span style="color:#FF79C6">    init</span><span style="color:#F8F8F2">(</span><span style="color:#50FA7B;font-style:italic">isLoggedIn</span><span style="color:#F8F8F2">:</span><span style="color:#8BE9FD;font-style:italic">Bool</span><span style="color:#F8F8F2">){</span></span>
<span class="line"><span style="color:#BD93F9;font-style:italic">        Self</span><span style="color:#F8F8F2">.isLoggedIn </span><span style="color:#FF79C6">=</span><span style="color:#F8F8F2"> isLoggedIn</span></span>
<span class="line"><span style="color:#F8F8F2">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FF79C6">    ....</span></span>
<span class="line"><span style="color:#F8F8F2">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FF79C6">struct</span><span style="color:#8BE9FD;font-style:italic"> ParameterView</span><span style="color:#F8F8F2">: View {</span></span>
<span class="line"><span style="color:#FF79C6">    private</span><span style="color:#FF79C6"> var</span><span style="color:#F8F8F2"> tip: ParameterRuleTip</span></span>
<span class="line"><span style="color:#FF79C6">    init</span><span style="color:#F8F8F2">(</span><span style="color:#50FA7B;font-style:italic">isLoggedIn</span><span style="color:#F8F8F2">: </span><span style="color:#8BE9FD;font-style:italic">Bool</span><span style="color:#F8F8F2">) {</span></span>
<span class="line"><span style="color:#F8F8F2">        tip </span><span style="color:#FF79C6">=</span><span style="color:#8BE9FD"> ParameterRuleTip</span><span style="color:#F8F8F2">(</span><span style="color:#8BE9FD">isLoggedIn</span><span style="color:#F8F8F2">: isLoggedIn)</span></span>
<span class="line"><span style="color:#F8F8F2">    }</span></span>
<span class="line"><span style="color:#FF79C6">    ....</span></span>
<span class="line"><span style="color:#F8F8F2">}</span></span></code></pre></div>
<p>实际上，开发者可以在应用程序的任何位置通过 <code>ParameterRuleTip.isLoggedIn</code> 来读取或设置 <code>ParameterRuleTip.$isLoggedIn</code> 的值，无论是否在视图中。TipKit 将观察该值的变化，以决定是否显示 ParameterRuleTip。</p>
<p><code>ParameterRuleTip.isLoggedIn</code> 的状态只能被 TipKit 实时观察，不能作为 SwiftUI 视图的数据源。</p>
<h3 id="为-tip-定义事件-event">为 Tip 定义事件（ Event ）</h3>
<p>除了通过观察某个特定状态来判断是否显示 Tip 的途径外，TipKit 还提供了另外一种利用统计分析的方式制定规则的方法。</p>
<p>首先，我们需要为 Tip 定义一个事件，然后根据该事件发生的数量和频率来决定是否显示 Tip。</p>
<div>
        <div class="flex justify-between items-center h-8 font-medium bg-[#96744d] dark:bg-[#002565] text-gray-200 text-xs rounded-tl-md rounded-tr-md">
          <span class="px-4 py-1">Swift</span>
          <button class="copy-button py-1 px-4" onclick="copyCode(this, event)">
          <div class="copy-text">
            <span class="flex items-center justify-center sm:hover:text-white sm:hover:font-bold">
              <svg class="w-3 h-3 mr-1" fill="currentColor" stroke="currentColor">
                <use xlink:href="#icon-clipboard"></use>
              </svg>
            Copy code
            </span>
          </div>
          <div class="copied-text hidden">
            <span class="flex items-center justify-center">
              <svg class="w-3 h-3 mr-1" fill="currentColor" stroke="currentColor">
                  <use xlink:href="#icon-check"></use>
             </svg>
              Copied!
            </span>
          </div>
        </button>
        </div>
      <pre class="astro-code dracula" style="background-color:#282A36;color:#F8F8F2;overflow-x:auto" tabindex="0"><code><span class="line"><span style="color:#FF79C6">struct</span><span style="color:#8BE9FD;font-style:italic"> EventRuleTip</span><span style="color:#F8F8F2">: Tip {</span></span>
<span class="line"><span style="color:#6272A4">    // Define the user interaction you want to track.</span></span>
<span class="line"><span style="color:#FF79C6">    static</span><span style="color:#FF79C6"> let</span><span style="color:#F8F8F2"> didTriggerControlEvent </span><span style="color:#FF79C6">=</span><span style="color:#8BE9FD"> Event</span><span style="color:#F8F8F2">(</span><span style="color:#8BE9FD">id</span><span style="color:#F8F8F2">: </span><span style="color:#E9F284">&quot;</span><span style="color:#F1FA8C">didTriggerControlEvent</span><span style="color:#E9F284">&quot;</span><span style="color:#F8F8F2">)</span></span>
<span class="line"><span style="color:#FF79C6">    ....</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FF79C6">    var</span><span style="color:#F8F8F2"> rules: [Rule] {</span></span>
<span class="line"><span style="color:#F8F8F2">        [</span></span>
<span class="line"><span style="color:#6272A4">            // Define a rule based on the user-interaction state.</span></span>
<span class="line"><span style="color:#F8F8F2">            #</span><span style="color:#8BE9FD">Rule</span><span style="color:#F8F8F2">(</span><span style="color:#BD93F9;font-style:italic">Self</span><span style="color:#F8F8F2">.didTriggerControlEvent) {</span></span>
<span class="line"><span style="color:#6272A4">                // Set the conditions for when the tip displays.</span></span>
<span class="line"><span style="color:#BD93F9;font-style:italic">                $0</span><span style="color:#F8F8F2">.donations.</span><span style="color:#BD93F9">count</span><span style="color:#FF79C6"> &gt;=</span><span style="color:#BD93F9"> 3</span></span>
<span class="line"><span style="color:#F8F8F2">            }</span></span>
<span class="line"><span style="color:#F8F8F2">        ]</span></span>
<span class="line"><span style="color:#F8F8F2">    }</span></span>
<span class="line"><span style="color:#F8F8F2">}</span></span></code></pre></div>
<p>与参数一样，事件也是一个静态属性。<code>id</code> 是事件的标识。</p>
<p>下面规则的含义是，只有在 <code>didTriggerControlEvent</code> 这个事件触发了至少三次后才显示 EventRuleTip。</p>
<div>
        <div class="flex justify-between items-center h-8 font-medium bg-[#96744d] dark:bg-[#002565] text-gray-200 text-xs rounded-tl-md rounded-tr-md">
          <span class="px-4 py-1">Swift</span>
          <button class="copy-button py-1 px-4" onclick="copyCode(this, event)">
          <div class="copy-text">
            <span class="flex items-center justify-center sm:hover:text-white sm:hover:font-bold">
              <svg class="w-3 h-3 mr-1" fill="currentColor" stroke="currentColor">
                <use xlink:href="#icon-clipboard"></use>
              </svg>
            Copy code
            </span>
          </div>
          <div class="copied-text hidden">
            <span class="flex items-center justify-center">
              <svg class="w-3 h-3 mr-1" fill="currentColor" stroke="currentColor">
                  <use xlink:href="#icon-check"></use>
             </svg>
              Copied!
            </span>
          </div>
        </button>
        </div>
      <pre class="astro-code dracula" style="background-color:#282A36;color:#F8F8F2;overflow-x:auto" tabindex="0"><code><span class="line"><span style="color:#F8F8F2">#</span><span style="color:#8BE9FD">Rule</span><span style="color:#F8F8F2">(</span><span style="color:#BD93F9;font-style:italic">Self</span><span style="color:#F8F8F2">.didTriggerControlEvent) {</span></span>
<span class="line"><span style="color:#6272A4">    // Set the conditions for when the tip displays.</span></span>
<span class="line"><span style="color:#BD93F9;font-style:italic">    $0</span><span style="color:#F8F8F2">.donations.</span><span style="color:#BD93F9">count</span><span style="color:#FF79C6"> &gt;=</span><span style="color:#BD93F9"> 3</span></span>
<span class="line"><span style="color:#F8F8F2">}</span></span></code></pre></div>
<p>我们可以在应用程序的任何地方通过 <code>事件属性.donate()</code> 的方式生成事件。TipKit 将记录每次事件生成的时间，并以此作为判断和筛选的依据。</p>
<div>
        <div class="flex justify-between items-center h-8 font-medium bg-[#96744d] dark:bg-[#002565] text-gray-200 text-xs rounded-tl-md rounded-tr-md">
          <span class="px-4 py-1">Swift</span>
          <button class="copy-button py-1 px-4" onclick="copyCode(this, event)">
          <div class="copy-text">
            <span class="flex items-center justify-center sm:hover:text-white sm:hover:font-bold">
              <svg class="w-3 h-3 mr-1" fill="currentColor" stroke="currentColor">
                <use xlink:href="#icon-clipboard"></use>
              </svg>
            Copy code
            </span>
          </div>
          <div class="copied-text hidden">
            <span class="flex items-center justify-center">
              <svg class="w-3 h-3 mr-1" fill="currentColor" stroke="currentColor">
                  <use xlink:href="#icon-check"></use>
             </svg>
              Copied!
            </span>
          </div>
        </button>
        </div>
      <pre class="astro-code dracula" style="background-color:#282A36;color:#F8F8F2;overflow-x:auto" tabindex="0"><code><span class="line"><span style="color:#FF79C6">struct</span><span style="color:#8BE9FD;font-style:italic"> EventView</span><span style="color:#F8F8F2">: View {</span></span>
<span class="line"><span style="color:#6272A4">    // Create an instance of your tip content.</span></span>
<span class="line"><span style="color:#FF79C6">    private</span><span style="color:#FF79C6"> var</span><span style="color:#F8F8F2"> tip </span><span style="color:#FF79C6">=</span><span style="color:#8BE9FD"> EventRuleTip</span><span style="color:#F8F8F2">()</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FF79C6">    var</span><span style="color:#F8F8F2"> body: </span><span style="color:#FF79C6">some</span><span style="color:#F8F8F2"> View {</span></span>
<span class="line"><span style="color:#8BE9FD">        VStack</span><span style="color:#F8F8F2">(</span><span style="color:#8BE9FD">spacing</span><span style="color:#F8F8F2">: </span><span style="color:#BD93F9">20</span><span style="color:#F8F8F2">) {</span></span>
<span class="line"><span style="color:#8BE9FD">            Text</span><span style="color:#F8F8F2">(</span><span style="color:#E9F284">&quot;</span><span style="color:#F1FA8C">Use events to track user interactions in your app. Then define rules based on those interactions to control when your tips appear.</span><span style="color:#E9F284">&quot;</span><span style="color:#F8F8F2">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6272A4">            // Place your tip near the feature you want to highlight.</span></span>
<span class="line"><span style="color:#8BE9FD">            TipView</span><span style="color:#F8F8F2">(tip)</span></span>
<span class="line"><span style="color:#8BE9FD">            Button</span><span style="color:#F8F8F2">(</span><span style="color:#8BE9FD">action</span><span style="color:#F8F8F2">: {</span></span>
<span class="line"><span style="color:#6272A4">                // Donate to the event when the user action occurs.</span></span>
<span class="line"><span style="color:#F8F8F2">                Task { </span><span style="color:#FF79C6">await</span><span style="color:#F8F8F2"> EventRuleTip.didTriggerControlEvent.</span><span style="color:#8BE9FD">donate</span><span style="color:#F8F8F2">() }</span></span>
<span class="line"><span style="color:#F8F8F2">            }, </span><span style="color:#8BE9FD">label</span><span style="color:#F8F8F2">: {</span></span>
<span class="line"><span style="color:#8BE9FD">                Label</span><span style="color:#F8F8F2">(</span><span style="color:#E9F284">&quot;</span><span style="color:#F1FA8C">Tap three times</span><span style="color:#E9F284">&quot;</span><span style="color:#F8F8F2">, </span><span style="color:#8BE9FD">systemImage</span><span style="color:#F8F8F2">: </span><span style="color:#E9F284">&quot;</span><span style="color:#F1FA8C">lock</span><span style="color:#E9F284">&quot;</span><span style="color:#F8F8F2">)</span></span>
<span class="line"><span style="color:#F8F8F2">            })</span></span>
<span class="line"></span>
<span class="line"><span style="color:#8BE9FD">            Text</span><span style="color:#F8F8F2">(</span><span style="color:#E9F284">&quot;</span><span style="color:#F1FA8C">Tap the button above three times to make the tip appear.</span><span style="color:#E9F284">&quot;</span><span style="color:#F8F8F2">)</span></span>
<span class="line"><span style="color:#8BE9FD">            Spacer</span><span style="color:#F8F8F2">()</span></span>
<span class="line"><span style="color:#F8F8F2">        }</span></span>
<span class="line"><span style="color:#F8F8F2">        .</span><span style="color:#8BE9FD">padding</span><span style="color:#F8F8F2">()</span></span>
<span class="line"><span style="color:#F8F8F2">        .</span><span style="color:#8BE9FD">navigationTitle</span><span style="color:#F8F8F2">(</span><span style="color:#E9F284">&quot;</span><span style="color:#F1FA8C">Events</span><span style="color:#E9F284">&quot;</span><span style="color:#F8F8F2">)</span></span>
<span class="line"><span style="color:#F8F8F2">    }</span></span>
<span class="line"><span style="color:#F8F8F2">}</span></span></code></pre></div>
<p><img src="https://cdn.fatbobman.com/tipkit-event-rule-demo_2023-10-15_20.04.07.2023-10-15%2020_05_19.gif" alt="https://cdn.fatbobman.com/tipkit-event-rule-demo_2023-10-15_20.04.07.2023-10-15%2020_05_19.gif"/></p>
<p>在上面的演示中，我们通过单击按钮生成了相应的事件。当事件数量达到三条时，满足规则的条件，EventRuleTip 被显示出来。</p>
<div>
        <div class="flex justify-between items-center h-8 font-medium bg-[#96744d] dark:bg-[#002565] text-gray-200 text-xs rounded-tl-md rounded-tr-md">
          <span class="px-4 py-1">Swift</span>
          <button class="copy-button py-1 px-4" onclick="copyCode(this, event)">
          <div class="copy-text">
            <span class="flex items-center justify-center sm:hover:text-white sm:hover:font-bold">
              <svg class="w-3 h-3 mr-1" fill="currentColor" stroke="currentColor">
                <use xlink:href="#icon-clipboard"></use>
              </svg>
            Copy code
            </span>
          </div>
          <div class="copied-text hidden">
            <span class="flex items-center justify-center">
              <svg class="w-3 h-3 mr-1" fill="currentColor" stroke="currentColor">
                  <use xlink:href="#icon-check"></use>
             </svg>
              Copied!
            </span>
          </div>
        </button>
        </div>
      <pre class="astro-code dracula" style="background-color:#282A36;color:#F8F8F2;overflow-x:auto" tabindex="0"><code><span class="line"><span style="color:#8BE9FD">Button</span><span style="color:#F8F8F2">(</span><span style="color:#8BE9FD">action</span><span style="color:#F8F8F2">: {</span></span>
<span class="line"><span style="color:#6272A4">    // Donate to the event when the user action occurs.</span></span>
<span class="line"><span style="color:#F8F8F2">    Task { </span><span style="color:#FF79C6">await</span><span style="color:#F8F8F2"> EventRuleTip.didTriggerControlEvent.</span><span style="color:#8BE9FD">donate</span><span style="color:#F8F8F2">() }</span></span>
<span class="line"><span style="color:#F8F8F2">}, </span><span style="color:#8BE9FD">label</span><span style="color:#F8F8F2">: {</span></span>
<span class="line"><span style="color:#8BE9FD">    Label</span><span style="color:#F8F8F2">(</span><span style="color:#E9F284">&quot;</span><span style="color:#F1FA8C">Tap three times</span><span style="color:#E9F284">&quot;</span><span style="color:#F8F8F2">, </span><span style="color:#8BE9FD">systemImage</span><span style="color:#F8F8F2">: </span><span style="color:#E9F284">&quot;</span><span style="color:#F1FA8C">lock</span><span style="color:#E9F284">&quot;</span><span style="color:#F8F8F2">)</span></span>
<span class="line"><span style="color:#F8F8F2">})</span></span></code></pre></div>
<p>TipKit 还提供了一个包含回调函数的同步版本的事件产生方法（ <code>sendDonation</code> ）。</p>
<div>
        <div class="flex justify-between items-center h-8 font-medium bg-[#96744d] dark:bg-[#002565] text-gray-200 text-xs rounded-tl-md rounded-tr-md">
          <span class="px-4 py-1">Swift</span>
          <button class="copy-button py-1 px-4" onclick="copyCode(this, event)">
          <div class="copy-text">
            <span class="flex items-center justify-center sm:hover:text-white sm:hover:font-bold">
              <svg class="w-3 h-3 mr-1" fill="currentColor" stroke="currentColor">
                <use xlink:href="#icon-clipboard"></use>
              </svg>
            Copy code
            </span>
          </div>
          <div class="copied-text hidden">
            <span class="flex items-center justify-center">
              <svg class="w-3 h-3 mr-1" fill="currentColor" stroke="currentColor">
                  <use xlink:href="#icon-check"></use>
             </svg>
              Copied!
            </span>
          </div>
        </button>
        </div>
      <pre class="astro-code dracula" style="background-color:#282A36;color:#F8F8F2;overflow-x:auto" tabindex="0"><code><span class="line"><span style="color:#8BE9FD">Button</span><span style="color:#F8F8F2">(</span><span style="color:#8BE9FD">action</span><span style="color:#F8F8F2">: {</span></span>
<span class="line"><span style="color:#6272A4">    // Donate to the event when the user action occurs.</span></span>
<span class="line"><span style="color:#F8F8F2">    EventRuleTip.didTriggerControlEvent.sendDonation{</span></span>
<span class="line"><span style="color:#8BE9FD">        print</span><span style="color:#F8F8F2">(</span><span style="color:#E9F284">&quot;</span><span style="color:#F1FA8C">donate a didTriggerControlEvent</span><span style="color:#E9F284">&quot;</span><span style="color:#F8F8F2">)</span></span>
<span class="line"><span style="color:#F8F8F2">    }</span></span>
<span class="line"><span style="color:#F8F8F2">}, </span><span style="color:#8BE9FD">label</span><span style="color:#F8F8F2">: {</span></span>
<span class="line"><span style="color:#8BE9FD">    Label</span><span style="color:#F8F8F2">(</span><span style="color:#E9F284">&quot;</span><span style="color:#F1FA8C">Tap three times</span><span style="color:#E9F284">&quot;</span><span style="color:#F8F8F2">, </span><span style="color:#8BE9FD">systemImage</span><span style="color:#F8F8F2">: </span><span style="color:#E9F284">&quot;</span><span style="color:#F1FA8C">lock</span><span style="color:#E9F284">&quot;</span><span style="color:#F8F8F2">)</span></span>
<span class="line"><span style="color:#F8F8F2">})</span></span>
<span class="line"></span></code></pre></div>
<p>我们可以从多个维度依据事件进行判断：</p>
<div>
        <div class="flex justify-between items-center h-8 font-medium bg-[#96744d] dark:bg-[#002565] text-gray-200 text-xs rounded-tl-md rounded-tr-md">
          <span class="px-4 py-1">Swift</span>
          <button class="copy-button py-1 px-4" onclick="copyCode(this, event)">
          <div class="copy-text">
            <span class="flex items-center justify-center sm:hover:text-white sm:hover:font-bold">
              <svg class="w-3 h-3 mr-1" fill="currentColor" stroke="currentColor">
                <use xlink:href="#icon-clipboard"></use>
              </svg>
            Copy code
            </span>
          </div>
          <div class="copied-text hidden">
            <span class="flex items-center justify-center">
              <svg class="w-3 h-3 mr-1" fill="currentColor" stroke="currentColor">
                  <use xlink:href="#icon-check"></use>
             </svg>
              Copied!
            </span>
          </div>
        </button>
        </div>
      <pre class="astro-code dracula" style="background-color:#282A36;color:#F8F8F2;overflow-x:auto" tabindex="0"><code><span class="line"><span style="color:#6272A4">// 事件总数 &gt;= 3</span></span>
<span class="line"><span style="color:#BD93F9;font-style:italic">$0</span><span style="color:#F8F8F2">.donations.</span><span style="color:#BD93F9">count</span><span style="color:#FF79C6"> &gt;=</span><span style="color:#BD93F9"> 3</span></span>
<span class="line"><span style="color:#6272A4">// 在一周内事件次数 &lt; 3</span></span>
<span class="line"><span style="color:#BD93F9;font-style:italic">$0</span><span style="color:#F8F8F2">.donations.</span><span style="color:#8BE9FD">donatedWithin</span><span style="color:#F8F8F2">(.week).</span><span style="color:#BD93F9">count</span><span style="color:#FF79C6"> &lt;</span><span style="color:#BD93F9"> 3</span></span>
<span class="line"><span style="color:#6272A4">// 在三天内事件次数 &gt; 3</span></span>
<span class="line"><span style="color:#BD93F9;font-style:italic">$0</span><span style="color:#F8F8F2">.donations.</span><span style="color:#8BE9FD">donatedWithin</span><span style="color:#F8F8F2">(.</span><span style="color:#8BE9FD">days</span><span style="color:#F8F8F2">(</span><span style="color:#BD93F9">3</span><span style="color:#F8F8F2">)).</span><span style="color:#BD93F9">count</span><span style="color:#FF79C6"> &gt;</span><span style="color:#BD93F9"> 3</span></span></code></pre></div>
<p>目前在每次产生的 Event 中，TipKit 只记录了事件创建的时间，尚未开放自定义 DonationInfo。如果开放了自定义 DonationInfo，我们便可以在创建事件时添加更多的附加信息，从而进行一些更有针对性的规则设定。</p>
<div>
        <div class="flex justify-between items-center h-8 font-medium bg-[#96744d] dark:bg-[#002565] text-gray-200 text-xs rounded-tl-md rounded-tr-md">
          <span class="px-4 py-1">Swift</span>
          <button class="copy-button py-1 px-4" onclick="copyCode(this, event)">
          <div class="copy-text">
            <span class="flex items-center justify-center sm:hover:text-white sm:hover:font-bold">
              <svg class="w-3 h-3 mr-1" fill="currentColor" stroke="currentColor">
                <use xlink:href="#icon-clipboard"></use>
              </svg>
            Copy code
            </span>
          </div>
          <div class="copied-text hidden">
            <span class="flex items-center justify-center">
              <svg class="w-3 h-3 mr-1" fill="currentColor" stroke="currentColor">
                  <use xlink:href="#icon-check"></use>
             </svg>
              Copied!
            </span>
          </div>
        </button>
        </div>
      <pre class="astro-code dracula" style="background-color:#282A36;color:#F8F8F2;overflow-x:auto" tabindex="0"><code><span class="line"><span style="color:#FF79C6">public</span><span style="color:#FF79C6"> func</span><span style="color:#50FA7B"> donate</span><span style="color:#F8F8F2">(</span><span style="color:#50FA7B">_</span><span style="color:#FFB86C;font-style:italic"> donation</span><span style="color:#F8F8F2">: DonationInfo) </span><span style="color:#FF79C6">async</span></span></code></pre></div>
<p>我们可以定义各种事件，例如进入特定视图、点击按钮、应用接收到网络数据等等。将 TipKit 的事件作为记录和筛选的一种手段，并应用于其他场景中。</p>
<p><strong>与参数的定义类似，事件的定义亦无需局限于 Tip 的声明中。TipKit 通过事件的 <code>id</code> 进行区分，而不关注其声明的具体位置。这意味着，尽管以下代码中的事件在两个不同的位置声明，但 <code>donate</code> 操作触发的是同一事件</strong>：</p>
<div>
        <div class="flex justify-between items-center h-8 font-medium bg-[#96744d] dark:bg-[#002565] text-gray-200 text-xs rounded-tl-md rounded-tr-md">
          <span class="px-4 py-1">Swift</span>
          <button class="copy-button py-1 px-4" onclick="copyCode(this, event)">
          <div class="copy-text">
            <span class="flex items-center justify-center sm:hover:text-white sm:hover:font-bold">
              <svg class="w-3 h-3 mr-1" fill="currentColor" stroke="currentColor">
                <use xlink:href="#icon-clipboard"></use>
              </svg>
            Copy code
            </span>
          </div>
          <div class="copied-text hidden">
            <span class="flex items-center justify-center">
              <svg class="w-3 h-3 mr-1" fill="currentColor" stroke="currentColor">
                  <use xlink:href="#icon-check"></use>
             </svg>
              Copied!
            </span>
          </div>
        </button>
        </div>
      <pre class="astro-code dracula" style="background-color:#282A36;color:#F8F8F2;overflow-x:auto" tabindex="0"><code><span class="line"><span style="color:#FF79C6">struct</span><span style="color:#8BE9FD;font-style:italic"> ContentView</span><span style="color:#F8F8F2">: View {</span></span>
<span class="line"><span style="color:#FF79C6">  static</span><span style="color:#FF79C6"> let</span><span style="color:#F8F8F2"> didTriggerControlEvent </span><span style="color:#FF79C6">=</span><span style="color:#F8F8F2"> Tips.</span><span style="color:#8BE9FD">Event</span><span style="color:#F8F8F2">(</span><span style="color:#8BE9FD">id</span><span style="color:#F8F8F2">: </span><span style="color:#E9F284">&quot;</span><span style="color:#F1FA8C">didTriggerControlEvent</span><span style="color:#E9F284">&quot;</span><span style="color:#F8F8F2">)</span></span>
<span class="line"><span style="color:#F8F8F2">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FF79C6">struct</span><span style="color:#8BE9FD;font-style:italic"> EventRuleTip</span><span style="color:#F8F8F2">: Tip {</span></span>
<span class="line"><span style="color:#FF79C6">    static</span><span style="color:#FF79C6"> let</span><span style="color:#F8F8F2"> didTriggerControlEvent </span><span style="color:#FF79C6">=</span><span style="color:#8BE9FD"> Event</span><span style="color:#F8F8F2">(</span><span style="color:#8BE9FD">id</span><span style="color:#F8F8F2">: </span><span style="color:#E9F284">&quot;</span><span style="color:#F1FA8C">didTriggerControlEvent</span><span style="color:#E9F284">&quot;</span><span style="color:#F8F8F2">)</span></span>
<span class="line"><span style="color:#F8F8F2">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FF79C6">await</span><span style="color:#F8F8F2"> EventRuleTip.didTriggerControlEvent.</span><span style="color:#8BE9FD">donate</span><span style="color:#F8F8F2">()</span></span>
<span class="line"><span style="color:#FF79C6">await</span><span style="color:#F8F8F2"> ContentView.didTriggerControlEvent.</span><span style="color:#8BE9FD">donate</span><span style="color:#F8F8F2">()</span></span></code></pre></div>
<p>关于事件与其 <code>id</code> 的关系，我们将在 <a href="/zh/posts/mastering-tipkit-advance/" target="_blank">进阶篇</a> 中进行更深入的讨论。</p>
<h3 id="规则适用">规则适用</h3>
<p>如果我们没有为某个 Tip 设定规则，可以将其视为拥有一个默认规则，该规则永远为真。</p>
<p>我们还可以在一个 Tip 中创建多个规则。在 Tip 协议中，rules 的定义为 <code>@Tips.RuleBuilder var rules: [Self.Rule] { get }</code>，同样是一个 Result Builder。多条规则之间使用 <code>AND</code> 的关系，必须全部满足才会显示。例如，我们可以将上文中的两条规则用以下方式进行合并。</p>
<div>
        <div class="flex justify-between items-center h-8 font-medium bg-[#96744d] dark:bg-[#002565] text-gray-200 text-xs rounded-tl-md rounded-tr-md">
          <span class="px-4 py-1">Swift</span>
          <button class="copy-button py-1 px-4" onclick="copyCode(this, event)">
          <div class="copy-text">
            <span class="flex items-center justify-center sm:hover:text-white sm:hover:font-bold">
              <svg class="w-3 h-3 mr-1" fill="currentColor" stroke="currentColor">
                <use xlink:href="#icon-clipboard"></use>
              </svg>
            Copy code
            </span>
          </div>
          <div class="copied-text hidden">
            <span class="flex items-center justify-center">
              <svg class="w-3 h-3 mr-1" fill="currentColor" stroke="currentColor">
                  <use xlink:href="#icon-check"></use>
             </svg>
              Copied!
            </span>
          </div>
        </button>
        </div>
      <pre class="astro-code dracula" style="background-color:#282A36;color:#F8F8F2;overflow-x:auto" tabindex="0"><code><span class="line"><span style="color:#FF79C6">var</span><span style="color:#F8F8F2"> rules: [Rule] {</span></span>
<span class="line"><span style="color:#F8F8F2">    #</span><span style="color:#8BE9FD">Rule</span><span style="color:#F8F8F2">(</span><span style="color:#BD93F9;font-style:italic">Self</span><span style="color:#F8F8F2">.didTriggerControlEvent) {</span></span>
<span class="line"><span style="color:#BD93F9;font-style:italic">        $0</span><span style="color:#F8F8F2">.donations.</span><span style="color:#BD93F9">count</span><span style="color:#FF79C6"> &gt;</span><span style="color:#BD93F9"> 3</span></span>
<span class="line"><span style="color:#F8F8F2">    }</span></span>
<span class="line"><span style="color:#F8F8F2">    #</span><span style="color:#8BE9FD">Rule</span><span style="color:#F8F8F2">(</span><span style="color:#BD93F9;font-style:italic">Self</span><span style="color:#F8F8F2">.$isLoggedIn) {</span></span>
<span class="line"><span style="color:#BD93F9;font-style:italic">        $0</span><span style="color:#FF79C6"> ==</span><span style="color:#BD93F9"> true</span></span>
<span class="line"><span style="color:#F8F8F2">    }</span></span>
<span class="line"><span style="color:#F8F8F2">}</span></span></code></pre></div>
<p>只有当 <code>isLoggedIn</code> 为真且 <code>didTriggerControlEvent</code> 事件数量超过三个时，才显示 Tip。</p>
<h2 id="让-tip-失效-invalidate-的方法">让 Tip 失效（ invalidate ）的方法</h2>
<p>在上文的代码中，出现了两次以下的代码：</p>
<div>
        <div class="flex justify-between items-center h-8 font-medium bg-[#96744d] dark:bg-[#002565] text-gray-200 text-xs rounded-tl-md rounded-tr-md">
          <span class="px-4 py-1">Swift</span>
          <button class="copy-button py-1 px-4" onclick="copyCode(this, event)">
          <div class="copy-text">
            <span class="flex items-center justify-center sm:hover:text-white sm:hover:font-bold">
              <svg class="w-3 h-3 mr-1" fill="currentColor" stroke="currentColor">
                <use xlink:href="#icon-clipboard"></use>
              </svg>
            Copy code
            </span>
          </div>
          <div class="copied-text hidden">
            <span class="flex items-center justify-center">
              <svg class="w-3 h-3 mr-1" fill="currentColor" stroke="currentColor">
                  <use xlink:href="#icon-check"></use>
             </svg>
              Copied!
            </span>
          </div>
        </button>
        </div>
      <pre class="astro-code dracula" style="background-color:#282A36;color:#F8F8F2;overflow-x:auto" tabindex="0"><code><span class="line"><span style="color:#F8F8F2">tip.</span><span style="color:#8BE9FD">invalidate</span><span style="color:#F8F8F2">(</span><span style="color:#8BE9FD">reason</span><span style="color:#F8F8F2">: .actionPerformed)</span></span>
<span class="line"><span style="color:#F8F8F2">configuration.tip.</span><span style="color:#8BE9FD">invalidate</span><span style="color:#F8F8F2">(</span><span style="color:#8BE9FD">reason</span><span style="color:#F8F8F2">: .tipClosed)</span></span></code></pre></div>
<p>这两行代码的作用相同，都是使某个 Tip 失效并记录原因。</p>
<p>目前 TipKit 提供了三种 Tip 失效原因：</p>
<ul>
<li><code>actionPerformed</code>：主要用于开发者在代码中主动产生的失效操作。</li>
<li><code>tipClosed</code>：点击 Tip 视图的关闭按钮（ <code>x</code> ）时会记录该原因。</li>
<li><code>displayCountExceeded</code>：当 Tip 显示的次数超过设定的阈值时，TipKit 会自动让该 Tip 失效，并记录该原因（下文详解）。</li>
</ul>
<p>请特别注意，让 Tip 失效和不让 Tip 显示是两个不同的概念。</p>
<p><strong>我们通过规则来决定一个 Tip 是否满足了显示条件，但有一个前提是该 Tip 不能已经失效。否则即使满足了显示规则，如果 Tip 已经失效，TipKit 也不会显示该 Tip。</strong></p>
<h2 id="通过-option-设置-tip-的最大显示次数">通过 Option 设置 Tip 的最大显示次数</h2>
<p>在上文中，我们提到了另一种导致 Tip 失效的原因：<code>displayCountExceeded</code>。通过在 Tip 中定义选项，我们可以控制其最大显示次数。</p>
<div>
        <div class="flex justify-between items-center h-8 font-medium bg-[#96744d] dark:bg-[#002565] text-gray-200 text-xs rounded-tl-md rounded-tr-md">
          <span class="px-4 py-1">Swift</span>
          <button class="copy-button py-1 px-4" onclick="copyCode(this, event)">
          <div class="copy-text">
            <span class="flex items-center justify-center sm:hover:text-white sm:hover:font-bold">
              <svg class="w-3 h-3 mr-1" fill="currentColor" stroke="currentColor">
                <use xlink:href="#icon-clipboard"></use>
              </svg>
            Copy code
            </span>
          </div>
          <div class="copied-text hidden">
            <span class="flex items-center justify-center">
              <svg class="w-3 h-3 mr-1" fill="currentColor" stroke="currentColor">
                  <use xlink:href="#icon-check"></use>
             </svg>
              Copied!
            </span>
          </div>
        </button>
        </div>
      <pre class="astro-code dracula" style="background-color:#282A36;color:#F8F8F2;overflow-x:auto" tabindex="0"><code><span class="line"><span style="color:#FF79C6">struct</span><span style="color:#8BE9FD;font-style:italic"> OptionTip</span><span style="color:#F8F8F2">: Tip {</span></span>
<span class="line"><span style="color:#FF79C6">    var</span><span style="color:#F8F8F2"> title: Text {</span></span>
<span class="line"><span style="color:#8BE9FD">        Text</span><span style="color:#F8F8F2">(</span><span style="color:#E9F284">&quot;</span><span style="color:#F1FA8C">Edit Actions in One Place</span><span style="color:#E9F284">&quot;</span><span style="color:#F8F8F2">)</span></span>
<span class="line"><span style="color:#F8F8F2">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FF79C6">    var</span><span style="color:#F8F8F2"> options: [Option] {</span></span>
<span class="line"><span style="color:#6272A4">        // Show this tip once.</span></span>
<span class="line"><span style="color:#F8F8F2">        Tips.</span><span style="color:#8BE9FD">MaxDisplayCount</span><span style="color:#F8F8F2">(</span><span style="color:#BD93F9">1</span><span style="color:#F8F8F2">)</span></span>
<span class="line"><span style="color:#F8F8F2">    }</span></span>
<span class="line"><span style="color:#F8F8F2">}</span></span></code></pre></div>
<p>在上面的代码中，我们通过 <code>Tips.MaxDisplayCount(1)</code> 的设置，使得该 Tip 的视图（无论是 <code>TipView</code> 还是 <code>popoverTip</code>）只能被显示一次。一旦显示过后，TipKit 会将该 Tip 设置为失效状态。</p>
<p>TipKit 还提供了另一个选项，用于忽略全局的显示频次策略（见下文）：</p>
<div>
        <div class="flex justify-between items-center h-8 font-medium bg-[#96744d] dark:bg-[#002565] text-gray-200 text-xs rounded-tl-md rounded-tr-md">
          <span class="px-4 py-1">Swift</span>
          <button class="copy-button py-1 px-4" onclick="copyCode(this, event)">
          <div class="copy-text">
            <span class="flex items-center justify-center sm:hover:text-white sm:hover:font-bold">
              <svg class="w-3 h-3 mr-1" fill="currentColor" stroke="currentColor">
                <use xlink:href="#icon-clipboard"></use>
              </svg>
            Copy code
            </span>
          </div>
          <div class="copied-text hidden">
            <span class="flex items-center justify-center">
              <svg class="w-3 h-3 mr-1" fill="currentColor" stroke="currentColor">
                  <use xlink:href="#icon-check"></use>
             </svg>
              Copied!
            </span>
          </div>
        </button>
        </div>
      <pre class="astro-code dracula" style="background-color:#282A36;color:#F8F8F2;overflow-x:auto" tabindex="0"><code><span class="line"><span style="color:#F8F8F2">Tips.</span><span style="color:#8BE9FD">IgnoresDisplayFrequency</span><span style="color:#F8F8F2">(</span><span style="color:#BD93F9">true</span><span style="color:#F8F8F2">)</span></span></code></pre></div>
<h2 id="设置-tip-的最大显示时长">设置 Tip 的最大显示时长</h2>
<p>在 iOS 18+ 版本中，TipKit 引入了一个新的 TipOption：<code>MaxDisplayDuration</code>。此选项允许在 Tip 的显示时间累积到预设的时长后，自动使其失效。</p>
<p>该时长为累积计算。例如，若设置 Tip 的最大显示时长为 300 秒，当该 Tip 在多个不同时间点显示，累积时长超过 300 秒后，将不再显示。</p>
<p>Tip 的最短持续显示时间设定为 60 秒，以防止 Tip 显示后过快消失。默认情况下，Tip 没有设置最大显示时长限制。</p>
<div>
        <div class="flex justify-between items-center h-8 font-medium bg-[#96744d] dark:bg-[#002565] text-gray-200 text-xs rounded-tl-md rounded-tr-md">
          <span class="px-4 py-1">Swift</span>
          <button class="copy-button py-1 px-4" onclick="copyCode(this, event)">
          <div class="copy-text">
            <span class="flex items-center justify-center sm:hover:text-white sm:hover:font-bold">
              <svg class="w-3 h-3 mr-1" fill="currentColor" stroke="currentColor">
                <use xlink:href="#icon-clipboard"></use>
              </svg>
            Copy code
            </span>
          </div>
          <div class="copied-text hidden">
            <span class="flex items-center justify-center">
              <svg class="w-3 h-3 mr-1" fill="currentColor" stroke="currentColor">
                  <use xlink:href="#icon-check"></use>
             </svg>
              Copied!
            </span>
          </div>
        </button>
        </div>
      <pre class="astro-code dracula" style="background-color:#282A36;color:#F8F8F2;overflow-x:auto" tabindex="0"><code><span class="line"><span style="color:#FF79C6">struct</span><span style="color:#8BE9FD;font-style:italic"> FavoriteBackyardTip</span><span style="color:#F8F8F2">: Tip {</span></span>
<span class="line"><span style="color:#FF79C6">    var</span><span style="color:#F8F8F2"> options: [</span><span style="color:#FF79C6">any</span><span style="color:#F8F8F2"> Option] {</span></span>
<span class="line"><span style="color:#6272A4">        // Tip will automatically be invalidated </span></span>
<span class="line"><span style="color:#6272A4">        // after it has been displayed for 5 minutes.</span></span>
<span class="line"><span style="color:#8BE9FD">        MaxDisplayDuration</span><span style="color:#F8F8F2">(</span><span style="color:#BD93F9">300.0</span><span style="color:#F8F8F2">)</span></span>
<span class="line"><span style="color:#F8F8F2">    }</span></span>
<span class="line"><span style="color:#F8F8F2">}</span></span></code></pre></div>
<h2 id="通过-configuration-设置-tip-的全局显示频次策略">通过 Configuration 设置 Tip 的全局显示频次策略</h2>
<p>也许有人会奇怪，如果一个 Tip 的规则判断结果为真，在其未失效的情况下，难道会一直显示吗？这样不会引起用户的反感吗？</p>
<p>TipKit 已经提前考虑到了这一点，因此它允许开发者通过 Configuration 设置全局的 Tip 显示频率策略。</p>
<div>
        <div class="flex justify-between items-center h-8 font-medium bg-[#96744d] dark:bg-[#002565] text-gray-200 text-xs rounded-tl-md rounded-tr-md">
          <span class="px-4 py-1">Swift</span>
          <button class="copy-button py-1 px-4" onclick="copyCode(this, event)">
          <div class="copy-text">
            <span class="flex items-center justify-center sm:hover:text-white sm:hover:font-bold">
              <svg class="w-3 h-3 mr-1" fill="currentColor" stroke="currentColor">
                <use xlink:href="#icon-clipboard"></use>
              </svg>
            Copy code
            </span>
          </div>
          <div class="copied-text hidden">
            <span class="flex items-center justify-center">
              <svg class="w-3 h-3 mr-1" fill="currentColor" stroke="currentColor">
                  <use xlink:href="#icon-check"></use>
             </svg>
              Copied!
            </span>
          </div>
        </button>
        </div>
      <pre class="astro-code dracula" style="background-color:#282A36;color:#F8F8F2;overflow-x:auto" tabindex="0"><code><span class="line"><span style="color:#FF79C6">struct</span><span style="color:#8BE9FD;font-style:italic"> TipKitExamplesApp</span><span style="color:#F8F8F2">: App {</span></span>
<span class="line"><span style="color:#FF79C6">    init</span><span style="color:#F8F8F2">() {</span></span>
<span class="line"><span style="color:#FF79C6">        try?</span><span style="color:#F8F8F2"> Tips.</span><span style="color:#8BE9FD">configure</span><span style="color:#F8F8F2">([</span></span>
<span class="line"><span style="color:#6272A4">            // The system shows no more than one tip per day.</span></span>
<span class="line"><span style="color:#F8F8F2">            .</span><span style="color:#8BE9FD">displayFrequency</span><span style="color:#F8F8F2">(.daily)</span></span>
<span class="line"><span style="color:#F8F8F2">        ])</span></span>
<span class="line"><span style="color:#F8F8F2">    }</span></span>
<span class="line"><span style="color:#FF79C6">    var</span><span style="color:#F8F8F2"> body: </span><span style="color:#FF79C6">some</span><span style="color:#F8F8F2"> Scene {</span></span>
<span class="line"><span style="color:#F8F8F2">        WindowGroup {</span></span>
<span class="line"><span style="color:#8BE9FD">            ContentView</span><span style="color:#F8F8F2">()</span></span>
<span class="line"><span style="color:#F8F8F2">        }</span></span>
<span class="line"><span style="color:#F8F8F2">    }</span></span>
<span class="line"><span style="color:#F8F8F2">}</span></span></code></pre></div>
<p>通过为 configure 设置 <code>.displayFrequency(.daily)</code> ，我们可以让尚未失效的 Tip 在规则为真的情况下，每天只显示一次。其他设置还有：hourly、weekly、monthly、immediate（不限制显示频次）。</p>
<p>当某个 Tip 的 options 设置为 <code>Tips.IgnoresDisplayFrequency(true)</code> 后，将会忽略全局的显示频次设定。</p>
<h2 id="重置-tipkit-的所有数据">重置 TipKit 的所有数据</h2>
<p>我们可以使用下面的代码重置当前应用已保存的所有 Tip 数据，包括事件、失效状态、显示次数等。通常在进行测试或对应用进行重大改动时使用该命令。</p>
<div>
        <div class="flex justify-between items-center h-8 font-medium bg-[#96744d] dark:bg-[#002565] text-gray-200 text-xs rounded-tl-md rounded-tr-md">
          <span class="px-4 py-1">Swift</span>
          <button class="copy-button py-1 px-4" onclick="copyCode(this, event)">
          <div class="copy-text">
            <span class="flex items-center justify-center sm:hover:text-white sm:hover:font-bold">
              <svg class="w-3 h-3 mr-1" fill="currentColor" stroke="currentColor">
                <use xlink:href="#icon-clipboard"></use>
              </svg>
            Copy code
            </span>
          </div>
          <div class="copied-text hidden">
            <span class="flex items-center justify-center">
              <svg class="w-3 h-3 mr-1" fill="currentColor" stroke="currentColor">
                  <use xlink:href="#icon-check"></use>
             </svg>
              Copied!
            </span>
          </div>
        </button>
        </div>
      <pre class="astro-code dracula" style="background-color:#282A36;color:#F8F8F2;overflow-x:auto" tabindex="0"><code><span class="line"><span style="color:#FF79C6">try</span><span style="color:#F8F8F2"> Tips.</span><span style="color:#8BE9FD">resetDatastore</span><span style="color:#F8F8F2">()</span></span></code></pre></div>
<blockquote>
<p>此方法应运行在 <code>try? Tips.configure()</code> 之前。</p>
</blockquote>
<h2 id="用于测试的配置指令">用于测试的配置指令</h2>
<p>为了方便测试，您可以使用以下 API 强制显示或隐藏 Tip：</p>
<div>
        <div class="flex justify-between items-center h-8 font-medium bg-[#96744d] dark:bg-[#002565] text-gray-200 text-xs rounded-tl-md rounded-tr-md">
          <span class="px-4 py-1">Swift</span>
          <button class="copy-button py-1 px-4" onclick="copyCode(this, event)">
          <div class="copy-text">
            <span class="flex items-center justify-center sm:hover:text-white sm:hover:font-bold">
              <svg class="w-3 h-3 mr-1" fill="currentColor" stroke="currentColor">
                <use xlink:href="#icon-clipboard"></use>
              </svg>
            Copy code
            </span>
          </div>
          <div class="copied-text hidden">
            <span class="flex items-center justify-center">
              <svg class="w-3 h-3 mr-1" fill="currentColor" stroke="currentColor">
                  <use xlink:href="#icon-check"></use>
             </svg>
              Copied!
            </span>
          </div>
        </button>
        </div>
      <pre class="astro-code dracula" style="background-color:#282A36;color:#F8F8F2;overflow-x:auto" tabindex="0"><code><span class="line"><span style="color:#6272A4">// 显示所有的 Tip，无论其是否失效或规则是否为真</span></span>
<span class="line"><span style="color:#FF79C6">try?</span><span style="color:#F8F8F2"> Tips.</span><span style="color:#8BE9FD">showAllTipsForTesting</span><span style="color:#F8F8F2">()</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6272A4">// 显示特定的 Tip，无论其是否失效或规则是否为真</span></span>
<span class="line"><span style="color:#FF79C6">try?</span><span style="color:#F8F8F2"> Tips.</span><span style="color:#8BE9FD">showTipsForTesting</span><span style="color:#F8F8F2">([EventRuleTip.</span><span style="color:#FF79C6">self</span><span style="color:#F8F8F2">, ParameterRuleTip.</span><span style="color:#FF79C6">self</span><span style="color:#F8F8F2">])</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6272A4">// 隐藏所有的 Tip，即使其尚未失效且规则为真</span></span>
<span class="line"><span style="color:#FF79C6">try?</span><span style="color:#F8F8F2"> Tips.</span><span style="color:#8BE9FD">hideAllTipsForTesting</span><span style="color:#F8F8F2">()</span></span></code></pre></div>
<h2 id="设置-tipkit-数据保存的位置">设置 TipKit 数据保存的位置</h2>
<p>我们还可以修改 TipKit 保存数据的位置。使用 App Group 时，可以让多个应用或组件共享同一个 TipKit 数据源。例如，在 A 应用中让某个 Tip 失效了，失效状态同样也会在应用 B 中反映出来。</p>
<div>
        <div class="flex justify-between items-center h-8 font-medium bg-[#96744d] dark:bg-[#002565] text-gray-200 text-xs rounded-tl-md rounded-tr-md">
          <span class="px-4 py-1">Swift</span>
          <button class="copy-button py-1 px-4" onclick="copyCode(this, event)">
          <div class="copy-text">
            <span class="flex items-center justify-center sm:hover:text-white sm:hover:font-bold">
              <svg class="w-3 h-3 mr-1" fill="currentColor" stroke="currentColor">
                <use xlink:href="#icon-clipboard"></use>
              </svg>
            Copy code
            </span>
          </div>
          <div class="copied-text hidden">
            <span class="flex items-center justify-center">
              <svg class="w-3 h-3 mr-1" fill="currentColor" stroke="currentColor">
                  <use xlink:href="#icon-check"></use>
             </svg>
              Copied!
            </span>
          </div>
        </button>
        </div>
      <pre class="astro-code dracula" style="background-color:#282A36;color:#F8F8F2;overflow-x:auto" tabindex="0"><code><span class="line"><span style="color:#FF79C6">try?</span><span style="color:#F8F8F2"> Tips.</span><span style="color:#8BE9FD">configure</span><span style="color:#F8F8F2">([</span></span>
<span class="line"><span style="color:#F8F8F2">    .</span><span style="color:#8BE9FD">datastoreLocation</span><span style="color:#F8F8F2">(.</span><span style="color:#8BE9FD">groupContainer</span><span style="color:#F8F8F2">(</span><span style="color:#8BE9FD">identifier</span><span style="color:#F8F8F2">: </span><span style="color:#E9F284">&quot;</span><span style="color:#F1FA8C">appGroup-id</span><span style="color:#E9F284">&quot;</span><span style="color:#F8F8F2">))</span></span>
<span class="line"><span style="color:#F8F8F2">])</span></span></code></pre></div>
<p>或者将数据保存到指定目录中。</p>
<div>
        <div class="flex justify-between items-center h-8 font-medium bg-[#96744d] dark:bg-[#002565] text-gray-200 text-xs rounded-tl-md rounded-tr-md">
          <span class="px-4 py-1">Swift</span>
          <button class="copy-button py-1 px-4" onclick="copyCode(this, event)">
          <div class="copy-text">
            <span class="flex items-center justify-center sm:hover:text-white sm:hover:font-bold">
              <svg class="w-3 h-3 mr-1" fill="currentColor" stroke="currentColor">
                <use xlink:href="#icon-clipboard"></use>
              </svg>
            Copy code
            </span>
          </div>
          <div class="copied-text hidden">
            <span class="flex items-center justify-center">
              <svg class="w-3 h-3 mr-1" fill="currentColor" stroke="currentColor">
                  <use xlink:href="#icon-check"></use>
             </svg>
              Copied!
            </span>
          </div>
        </button>
        </div>
      <pre class="astro-code dracula" style="background-color:#282A36;color:#F8F8F2;overflow-x:auto" tabindex="0"><code><span class="line"><span style="color:#FF79C6">try?</span><span style="color:#F8F8F2"> Tips.</span><span style="color:#8BE9FD">configure</span><span style="color:#F8F8F2">([</span></span>
<span class="line"><span style="color:#F8F8F2">    .</span><span style="color:#8BE9FD">datastoreLocation</span><span style="color:#F8F8F2">(.</span><span style="color:#BD93F9">url</span><span style="color:#F8F8F2">(URL.documentsDirectory))</span></span>
<span class="line"><span style="color:#F8F8F2">])</span></span></code></pre></div>
<blockquote>
<p>默认情况下，TipKit 的数据保存在 <code>Application Support</code> 目录中。</p>
</blockquote>
<h2 id="跨设备共享-tip-数据">跨设备共享 Tip 数据</h2>
<p>在 iOS 18+ 版本中，TipKit 提供了在多个设备间同步 Tip 的状态数据的功能。例如，如果为某个 Tip 设置了最多显示三次的规则，那么当用户在不同的设备上（使用同一 iCloud 账户）查看该 Tip 三次后，该 Tip 将自动失效。</p>
<p>启用此同步功能需类似于配置 Core Data 与 CloudKit 的过程，包括添加 CloudKit 容器和开启接受远程通知的权限。详细信息请参见<a href="/zh/posts/coredatawithcloudkit-2/" target="_blank">Core Data 与 CloudKit（二）——同步本地数据库至 iCloud 私有数据库</a>。</p>
<p>为了避免数据冲突，TipKit 建议为其事件配置专用的 CloudKit 容器，容器名建议以 <code>.tips</code> 为后缀，例如：<code>iCloud.com.apple.TipKitTrails.tips</code>。</p>
<p>开发者需在 <code>Tips.configure</code> 中指定所使用的 CloudKit 容器：</p>
<div>
        <div class="flex justify-between items-center h-8 font-medium bg-[#96744d] dark:bg-[#002565] text-gray-200 text-xs rounded-tl-md rounded-tr-md">
          <span class="px-4 py-1">Swift</span>
          <button class="copy-button py-1 px-4" onclick="copyCode(this, event)">
          <div class="copy-text">
            <span class="flex items-center justify-center sm:hover:text-white sm:hover:font-bold">
              <svg class="w-3 h-3 mr-1" fill="currentColor" stroke="currentColor">
                <use xlink:href="#icon-clipboard"></use>
              </svg>
            Copy code
            </span>
          </div>
          <div class="copied-text hidden">
            <span class="flex items-center justify-center">
              <svg class="w-3 h-3 mr-1" fill="currentColor" stroke="currentColor">
                  <use xlink:href="#icon-check"></use>
             </svg>
              Copied!
            </span>
          </div>
        </button>
        </div>
      <pre class="astro-code dracula" style="background-color:#282A36;color:#F8F8F2;overflow-x:auto" tabindex="0"><code><span class="line"><span style="color:#FF79C6">@main</span></span>
<span class="line"><span style="color:#FF79C6">struct</span><span style="color:#8BE9FD;font-style:italic"> TipKitTrails</span><span style="color:#F8F8F2">: App {</span></span>
<span class="line"><span style="color:#FF79C6">    init</span><span style="color:#F8F8F2">() {</span></span>
<span class="line"><span style="color:#FF79C6">        do</span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#6272A4">            // Sync the TipKit datastore using CloudKit.</span></span>
<span class="line"><span style="color:#FF79C6">            try</span><span style="color:#F8F8F2"> Tips.</span><span style="color:#8BE9FD">configure</span><span style="color:#F8F8F2">([</span></span>
<span class="line"><span style="color:#F8F8F2">                .</span><span style="color:#8BE9FD">cloudKitContainer</span><span style="color:#F8F8F2">(.</span><span style="color:#8BE9FD">named</span><span style="color:#F8F8F2">(</span><span style="color:#E9F284">&quot;</span><span style="color:#F1FA8C">iCloud.com.apple.TipKitTrails.tips</span><span style="color:#E9F284">&quot;</span><span style="color:#F8F8F2">))</span></span>
<span class="line"><span style="color:#F8F8F2">            ])</span></span>
<span class="line"><span style="color:#F8F8F2">        }</span></span>
<span class="line"><span style="color:#FF79C6">        catch</span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#6272A4">            // Handle TipKit errors</span></span>
<span class="line"><span style="color:#8BE9FD">            print</span><span style="color:#F8F8F2">(</span><span style="color:#E9F284">&quot;</span><span style="color:#F1FA8C">Error initializing TipKit </span><span style="color:#FF79C6">\(</span><span style="color:#F1FA8C">error.</span><span style="color:#F8F8F2">localizedDescription</span><span style="color:#FF79C6">)</span><span style="color:#E9F284">&quot;</span><span style="color:#F8F8F2">)</span></span>
<span class="line"><span style="color:#F8F8F2">        }</span></span>
<span class="line"><span style="color:#F8F8F2">    }</span></span>
<span class="line"><span style="color:#F8F8F2">}</span></span></code></pre></div>
<p>若使用 <code>automatic</code> 选项，TipKit 将搜索项目中第一个带 <code>.tips</code> 后缀的容器，若无此类容器则使用主容器：</p>
<div>
        <div class="flex justify-between items-center h-8 font-medium bg-[#96744d] dark:bg-[#002565] text-gray-200 text-xs rounded-tl-md rounded-tr-md">
          <span class="px-4 py-1">Swift</span>
          <button class="copy-button py-1 px-4" onclick="copyCode(this, event)">
          <div class="copy-text">
            <span class="flex items-center justify-center sm:hover:text-white sm:hover:font-bold">
              <svg class="w-3 h-3 mr-1" fill="currentColor" stroke="currentColor">
                <use xlink:href="#icon-clipboard"></use>
              </svg>
            Copy code
            </span>
          </div>
          <div class="copied-text hidden">
            <span class="flex items-center justify-center">
              <svg class="w-3 h-3 mr-1" fill="currentColor" stroke="currentColor">
                  <use xlink:href="#icon-check"></use>
             </svg>
              Copied!
            </span>
          </div>
        </button>
        </div>
      <pre class="astro-code dracula" style="background-color:#282A36;color:#F8F8F2;overflow-x:auto" tabindex="0"><code><span class="line"><span style="color:#F8F8F2">.</span><span style="color:#8BE9FD">cloudKitContainer</span><span style="color:#F8F8F2">(.automatic)</span></span></code></pre></div>
<h2 id="使用-tipgroup-管理并逐步展示多个提示">使用 TipGroup 管理并逐步展示多个提示</h2>
<p>从之前的描述中可以看出，虽然每个 Tip 在 TipKit 中都有详尽的定义，但在一个视图中同时存在多个 Tip 时，开发者很难有效控制这些提示的显示顺序和关系，使得提示难以按既定规则逐个展示。</p>
<p>在 iOS 18+ 版本中，TipKit 引入了 TipGroup 概念。通过 TipGroup，开发者现在可以将多个 Tip 组合在一起，确保只有符合条件的 Tip 被展示。</p>
<div>
        <div class="flex justify-between items-center h-8 font-medium bg-[#96744d] dark:bg-[#002565] text-gray-200 text-xs rounded-tl-md rounded-tr-md">
          <span class="px-4 py-1">Swift</span>
          <button class="copy-button py-1 px-4" onclick="copyCode(this, event)">
          <div class="copy-text">
            <span class="flex items-center justify-center sm:hover:text-white sm:hover:font-bold">
              <svg class="w-3 h-3 mr-1" fill="currentColor" stroke="currentColor">
                <use xlink:href="#icon-clipboard"></use>
              </svg>
            Copy code
            </span>
          </div>
          <div class="copied-text hidden">
            <span class="flex items-center justify-center">
              <svg class="w-3 h-3 mr-1" fill="currentColor" stroke="currentColor">
                  <use xlink:href="#icon-check"></use>
             </svg>
              Copied!
            </span>
          </div>
        </button>
        </div>
      <pre class="astro-code dracula" style="background-color:#282A36;color:#F8F8F2;overflow-x:auto" tabindex="0"><code><span class="line"><span style="color:#FF79C6">struct</span><span style="color:#8BE9FD;font-style:italic"> Tip1</span><span style="color:#F8F8F2">: Tip {</span></span>
<span class="line"><span style="color:#FF79C6">  @Parameter</span><span style="color:#FF79C6"> static</span><span style="color:#FF79C6"> var</span><span style="color:#F8F8F2"> show: </span><span style="color:#8BE9FD;font-style:italic">Bool</span><span style="color:#FF79C6"> =</span><span style="color:#BD93F9"> false</span></span>
<span class="line"><span style="color:#FF79C6">  var</span><span style="color:#F8F8F2"> title: Text {</span></span>
<span class="line"><span style="color:#8BE9FD">    Text</span><span style="color:#F8F8F2">(</span><span style="color:#E9F284">&quot;</span><span style="color:#F1FA8C">Tip1</span><span style="color:#E9F284">&quot;</span><span style="color:#F8F8F2">)</span></span>
<span class="line"><span style="color:#F8F8F2">  }</span></span>
<span class="line"><span style="color:#F8F8F2">  </span></span>
<span class="line"><span style="color:#FF79C6">  var</span><span style="color:#F8F8F2"> rules: [Rule] {</span></span>
<span class="line"><span style="color:#F8F8F2">    #</span><span style="color:#8BE9FD">Rule</span><span style="color:#F8F8F2">(</span><span style="color:#BD93F9;font-style:italic">Self</span><span style="color:#F8F8F2">.$show){</span></span>
<span class="line"><span style="color:#BD93F9;font-style:italic">      $0</span></span>
<span class="line"><span style="color:#F8F8F2">    }</span></span>
<span class="line"><span style="color:#F8F8F2">  }</span></span>
<span class="line"><span style="color:#F8F8F2">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FF79C6">struct</span><span style="color:#8BE9FD;font-style:italic"> Tip2</span><span style="color:#F8F8F2">: Tip {</span></span>
<span class="line"><span style="color:#FF79C6">  var</span><span style="color:#F8F8F2"> title: Text {</span></span>
<span class="line"><span style="color:#8BE9FD">    Text</span><span style="color:#F8F8F2">(</span><span style="color:#E9F284">&quot;</span><span style="color:#F1FA8C">Tip2</span><span style="color:#E9F284">&quot;</span><span style="color:#F8F8F2">)</span></span>
<span class="line"><span style="color:#F8F8F2">  }</span></span>
<span class="line"><span style="color:#F8F8F2">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FF79C6">struct</span><span style="color:#8BE9FD;font-style:italic"> TipGroupDemo</span><span style="color:#F8F8F2">: View {</span></span>
<span class="line"><span style="color:#FF79C6">  @State</span><span style="color:#FF79C6"> var</span><span style="color:#F8F8F2"> tips </span><span style="color:#FF79C6">=</span><span style="color:#8BE9FD"> TipGroup</span><span style="color:#F8F8F2">(.ordered) { </span><span style="color:#6272A4">// 声明 TipGroup，类型为按顺序显示</span></span>
<span class="line"><span style="color:#8BE9FD">    Tip1</span><span style="color:#F8F8F2">()</span></span>
<span class="line"><span style="color:#8BE9FD">    Tip2</span><span style="color:#F8F8F2">()</span></span>
<span class="line"><span style="color:#F8F8F2">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FF79C6">  var</span><span style="color:#F8F8F2"> body: </span><span style="color:#FF79C6">some</span><span style="color:#F8F8F2"> View {</span></span>
<span class="line"><span style="color:#F8F8F2">    VStack {</span></span>
<span class="line"><span style="color:#8BE9FD">      Text</span><span style="color:#F8F8F2">(</span><span style="color:#E9F284">&quot;</span><span style="color:#F1FA8C">Hello World</span><span style="color:#E9F284">&quot;</span><span style="color:#F8F8F2">)</span></span>
<span class="line"><span style="color:#F8F8F2">        .</span><span style="color:#8BE9FD">popoverTip</span><span style="color:#F8F8F2">(tips.currentTip) </span><span style="color:#6272A4">// 显示满足条件的 Tip</span></span>
<span class="line"><span style="color:#F8F8F2">      </span></span>
<span class="line"><span style="color:#8BE9FD">      Button</span><span style="color:#F8F8F2">(</span><span style="color:#E9F284">&quot;</span><span style="color:#F1FA8C">Start Show Tips</span><span style="color:#E9F284">&quot;</span><span style="color:#F8F8F2">){</span></span>
<span class="line"><span style="color:#F8F8F2">        Tip1.show </span><span style="color:#FF79C6">=</span><span style="color:#BD93F9"> true</span><span style="color:#6272A4"> // 激活 Tip1</span></span>
<span class="line"><span style="color:#F8F8F2">      }</span></span>
<span class="line"><span style="color:#F8F8F2">      .</span><span style="color:#8BE9FD">buttonStyle</span><span style="color:#F8F8F2">(.bordered)</span></span>
<span class="line"><span style="color:#F8F8F2">    }</span></span>
<span class="line"><span style="color:#F8F8F2">  }</span></span>
<span class="line"><span style="color:#F8F8F2">}</span></span>
<span class="line"></span></code></pre></div>
<video src="https://cdn.fatbobman.com/tipgroup-demo1-iShot_2024-09-02_08.25.22-1.mp4" autoplay="true" loop="true" muted="true" playsInline="true" loading="lazy" controls="true"></video>
<p>此外，开发者也可以在多个组件中使用同一个 TipGroup，这样只有满足条件的组件才能显示相应的 Tip：</p>
<div>
        <div class="flex justify-between items-center h-8 font-medium bg-[#96744d] dark:bg-[#002565] text-gray-200 text-xs rounded-tl-md rounded-tr-md">
          <span class="px-4 py-1">Swift</span>
          <button class="copy-button py-1 px-4" onclick="copyCode(this, event)">
          <div class="copy-text">
            <span class="flex items-center justify-center sm:hover:text-white sm:hover:font-bold">
              <svg class="w-3 h-3 mr-1" fill="currentColor" stroke="currentColor">
                <use xlink:href="#icon-clipboard"></use>
              </svg>
            Copy code
            </span>
          </div>
          <div class="copied-text hidden">
            <span class="flex items-center justify-center">
              <svg class="w-3 h-3 mr-1" fill="currentColor" stroke="currentColor">
                  <use xlink:href="#icon-check"></use>
             </svg>
              Copied!
            </span>
          </div>
        </button>
        </div>
      <pre class="astro-code dracula" style="background-color:#282A36;color:#F8F8F2;overflow-x:auto" tabindex="0"><code><span class="line"><span style="color:#FF79C6">var</span><span style="color:#F8F8F2"> body: </span><span style="color:#FF79C6">some</span><span style="color:#F8F8F2"> View {</span></span>
<span class="line"><span style="color:#8BE9FD">  VStack</span><span style="color:#F8F8F2">(</span><span style="color:#8BE9FD">spacing</span><span style="color:#F8F8F2">:</span><span style="color:#BD93F9">80</span><span style="color:#F8F8F2">) {</span></span>
<span class="line"><span style="color:#8BE9FD">    Text</span><span style="color:#F8F8F2">(</span><span style="color:#E9F284">&quot;</span><span style="color:#F1FA8C">Hello World</span><span style="color:#E9F284">&quot;</span><span style="color:#F8F8F2">)</span></span>
<span class="line"><span style="color:#F8F8F2">      .</span><span style="color:#8BE9FD">popoverTip</span><span style="color:#F8F8F2">(tips.currentTip </span><span style="color:#FF79C6">as?</span><span style="color:#F8F8F2"> Tip1) </span><span style="color:#6272A4">// 仅对应 Tip1</span></span>
<span class="line"><span style="color:#F8F8F2">    </span></span>
<span class="line"><span style="color:#8BE9FD">    Text</span><span style="color:#F8F8F2">(</span><span style="color:#E9F284">&quot;</span><span style="color:#F1FA8C">Fatbobman&#39;s Blog</span><span style="color:#E9F284">&quot;</span><span style="color:#F8F8F2">)</span></span>
<span class="line"><span style="color:#F8F8F2">      .</span><span style="color:#8BE9FD">popoverTip</span><span style="color:#F8F8F2">(tips.currentTip </span><span style="color:#FF79C6">as?</span><span style="color:#F8F8F2"> Tip2) </span><span style="color:#6272A4">// 仅对应 Tip2</span></span>
<span class="line"><span style="color:#F8F8F2">    </span></span>
<span class="line"><span style="color:#8BE9FD">    Button</span><span style="color:#F8F8F2">(</span><span style="color:#E9F284">&quot;</span><span style="color:#F1FA8C">Start Show Tips</span><span style="color:#E9F284">&quot;</span><span style="color:#F8F8F2">){</span></span>
<span class="line"><span style="color:#F8F8F2">      Tip1.show </span><span style="color:#FF79C6">=</span><span style="color:#BD93F9"> true</span></span>
<span class="line"><span style="color:#F8F8F2">    }</span></span>
<span class="line"><span style="color:#F8F8F2">    .</span><span style="color:#8BE9FD">buttonStyle</span><span style="color:#F8F8F2">(.bordered)</span></span>
<span class="line"><span style="color:#F8F8F2">  }</span></span>
<span class="line"><span style="color:#F8F8F2">}</span></span></code></pre></div>
<video src="https://cdn.fatbobman.com/tipgroup-demo2-iShot_2024-09-02_08.32.09-1.mp4" autoplay="true" loop="true" muted="true" playsInline="true" loading="lazy" controls="true"></video>
<p>在使用有序优先级的 TipGroup 中，只有在所有前置的提示被无效化后，后续的提示才会显示。</p>
<p><code>firstAvailable</code> 优先级会展示第一个满足显示规则的提示，这在视图中包含多个不相关的提示时非常有用，但你只想一次显示一个提示。</p>
<div>
        <div class="flex justify-between items-center h-8 font-medium bg-[#96744d] dark:bg-[#002565] text-gray-200 text-xs rounded-tl-md rounded-tr-md">
          <span class="px-4 py-1">Swift</span>
          <button class="copy-button py-1 px-4" onclick="copyCode(this, event)">
          <div class="copy-text">
            <span class="flex items-center justify-center sm:hover:text-white sm:hover:font-bold">
              <svg class="w-3 h-3 mr-1" fill="currentColor" stroke="currentColor">
                <use xlink:href="#icon-clipboard"></use>
              </svg>
            Copy code
            </span>
          </div>
          <div class="copied-text hidden">
            <span class="flex items-center justify-center">
              <svg class="w-3 h-3 mr-1" fill="currentColor" stroke="currentColor">
                  <use xlink:href="#icon-check"></use>
             </svg>
              Copied!
            </span>
          </div>
        </button>
        </div>
      <pre class="astro-code dracula" style="background-color:#282A36;color:#F8F8F2;overflow-x:auto" tabindex="0"><code><span class="line"><span style="color:#FF79C6">struct</span><span style="color:#8BE9FD;font-style:italic"> Tip1</span><span style="color:#F8F8F2">: Tip {</span></span>
<span class="line"><span style="color:#FF79C6">  @Parameter</span><span style="color:#FF79C6"> static</span><span style="color:#FF79C6"> var</span><span style="color:#F8F8F2"> show: </span><span style="color:#8BE9FD;font-style:italic">Bool</span><span style="color:#FF79C6"> =</span><span style="color:#BD93F9"> false</span></span>
<span class="line"><span style="color:#FF79C6">  var</span><span style="color:#F8F8F2"> title: Text {</span></span>
<span class="line"><span style="color:#8BE9FD">    Text</span><span style="color:#F8F8F2">(</span><span style="color:#E9F284">&quot;</span><span style="color:#F1FA8C">Tip1</span><span style="color:#E9F284">&quot;</span><span style="color:#F8F8F2">)</span></span>
<span class="line"><span style="color:#F8F8F2">  }</span></span>
<span class="line"><span style="color:#F8F8F2">  </span></span>
<span class="line"><span style="color:#FF79C6">  var</span><span style="color:#F8F8F2"> rules: [Rule] {</span></span>
<span class="line"><span style="color:#F8F8F2">    #</span><span style="color:#8BE9FD">Rule</span><span style="color:#F8F8F2">(</span><span style="color:#BD93F9;font-style:italic">Self</span><span style="color:#F8F8F2">.$show){</span></span>
<span class="line"><span style="color:#BD93F9;font-style:italic">      $0</span></span>
<span class="line"><span style="color:#F8F8F2">    }</span></span>
<span class="line"><span style="color:#F8F8F2">  }</span></span>
<span class="line"><span style="color:#F8F8F2">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FF79C6">struct</span><span style="color:#8BE9FD;font-style:italic"> Tip2</span><span style="color:#F8F8F2">: Tip {</span></span>
<span class="line"><span style="color:#FF79C6">  @Parameter</span><span style="color:#FF79C6"> static</span><span style="color:#FF79C6"> var</span><span style="color:#F8F8F2"> show: </span><span style="color:#8BE9FD;font-style:italic">Bool</span><span style="color:#FF79C6"> =</span><span style="color:#BD93F9"> false</span></span>
<span class="line"><span style="color:#FF79C6">  var</span><span style="color:#F8F8F2"> title: Text {</span></span>
<span class="line"><span style="color:#8BE9FD">    Text</span><span style="color:#F8F8F2">(</span><span style="color:#E9F284">&quot;</span><span style="color:#F1FA8C">Tip2</span><span style="color:#E9F284">&quot;</span><span style="color:#F8F8F2">)</span></span>
<span class="line"><span style="color:#F8F8F2">  }</span></span>
<span class="line"><span style="color:#F8F8F2">  </span></span>
<span class="line"><span style="color:#FF79C6">  var</span><span style="color:#F8F8F2"> rules: [Rule] {</span></span>
<span class="line"><span style="color:#F8F8F2">    #</span><span style="color:#8BE9FD">Rule</span><span style="color:#F8F8F2">(</span><span style="color:#BD93F9;font-style:italic">Self</span><span style="color:#F8F8F2">.$show){</span></span>
<span class="line"><span style="color:#BD93F9;font-style:italic">      $0</span></span>
<span class="line"><span style="color:#F8F8F2">    }</span></span>
<span class="line"><span style="color:#F8F8F2">  }</span></span>
<span class="line"><span style="color:#F8F8F2">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FF79C6">struct</span><span style="color:#8BE9FD;font-style:italic"> TipGroupDemo</span><span style="color:#F8F8F2">: View {</span></span>
<span class="line"><span style="color:#FF79C6">  @State</span><span style="color:#FF79C6"> var</span><span style="color:#F8F8F2"> tips </span><span style="color:#FF79C6">=</span><span style="color:#8BE9FD"> TipGroup</span><span style="color:#F8F8F2">(.firstAvailable) { </span><span style="color:#6272A4">// 显示第一个满足其显示规则的提示</span></span>
<span class="line"><span style="color:#8BE9FD">    Tip1</span><span style="color:#F8F8F2">()</span></span>
<span class="line"><span style="color:#8BE9FD">    Tip2</span><span style="color:#F8F8F2">()</span></span>
<span class="line"><span style="color:#F8F8F2">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FF79C6">  var</span><span style="color:#F8F8F2"> body: </span><span style="color:#FF79C6">some</span><span style="color:#F8F8F2"> View {</span></span>
<span class="line"><span style="color:#8BE9FD">    VStack</span><span style="color:#F8F8F2">(</span><span style="color:#8BE9FD">spacing</span><span style="color:#F8F8F2">:</span><span style="color:#BD93F9">80</span><span style="color:#F8F8F2">) {</span></span>
<span class="line"><span style="color:#8BE9FD">      Text</span><span style="color:#F8F8F2">(</span><span style="color:#E9F284">&quot;</span><span style="color:#F1FA8C">Hello World</span><span style="color:#E9F284">&quot;</span><span style="color:#F8F8F2">)</span></span>
<span class="line"><span style="color:#F8F8F2">        .</span><span style="color:#8BE9FD">popoverTip</span><span style="color:#F8F8F2">(tips.currentTip) </span><span style="color:#6272A4">// 显示第一个满足其显示规则的提示</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F8F8F2">      </span></span>
<span class="line"><span style="color:#8BE9FD">      Button</span><span style="color:#F8F8F2">(</span><span style="color:#E9F284">&quot;</span><span style="color:#F1FA8C">Show Tip1</span><span style="color:#E9F284">&quot;</span><span style="color:#F8F8F2">){</span></span>
<span class="line"><span style="color:#F8F8F2">        Tip1.show </span><span style="color:#FF79C6">=</span><span style="color:#BD93F9"> true</span></span>
<span class="line"><span style="color:#F8F8F2">      }</span></span>
<span class="line"><span style="color:#F8F8F2">      .</span><span style="color:#8BE9FD">buttonStyle</span><span style="color:#F8F8F2">(.bordered)</span></span>
<span class="line"><span style="color:#F8F8F2">      </span></span>
<span class="line"><span style="color:#8BE9FD">      Button</span><span style="color:#F8F8F2">(</span><span style="color:#E9F284">&quot;</span><span style="color:#F1FA8C">Show Tip2</span><span style="color:#E9F284">&quot;</span><span style="color:#F8F8F2">){</span></span>
<span class="line"><span style="color:#F8F8F2">        Tip2.show </span><span style="color:#FF79C6">=</span><span style="color:#BD93F9"> true</span></span>
<span class="line"><span style="color:#F8F8F2">      }</span></span>
<span class="line"><span style="color:#F8F8F2">      .</span><span style="color:#8BE9FD">buttonStyle</span><span style="color:#F8F8F2">(.bordered)</span></span>
<span class="line"><span style="color:#F8F8F2">    }</span></span>
<span class="line"><span style="color:#F8F8F2">  }</span></span>
<span class="line"><span style="color:#F8F8F2">}</span></span></code></pre></div>
<video src="https://cdn.fatbobman.com/tipgroup-demo3-iShot_2024-09-02_08.40.33-1.mp4" autoplay="true" loop="true" muted="true" playsInline="true" loading="lazy" controls="true"></video>
<p>在这篇 <a href="https://x.com/fatbobman/status/1784378999088533743?&#38;utm_source=Fatbobman%20Blog&#38;utm_medium=web&#38;utm_campaign=Fatbobman%20Blog" rel="noreferrer noopener">推文</a> 中，我分享了一个在 iOS 17 中实现 Tip 按顺序展示的解决方案。</p>
<p>TipGroup 是一种强大的工具，通过与显示规则和显示频率结合使用，可以有效地引导用户逐步发现应用功能，而不会因提示过多而使应用负担过重。</p>
<div class="dynamic-ad-container pt-4"></div>
<h2 id="接下来">接下来</h2>
<p>在本文中，我们介绍了 TipKit 的基本用法。在<a href="/zh/posts/mastering-tipkit-advance/" target="_blank">下篇文章</a>中，我们将探讨更多关于 TipKit 的内容，包括 TipKit 的数据保存机制、在 UIKit 中使用 TipKit、将 TipKit 作为非提示领域的统计工具使用，以及如何实现完全的自定义视图（不使用 <code>TipView</code> 和 <code>popoverView</code>）等进阶话题。</p> </div> </article> <script src="/js/modalsubscribecontroller.js" defer></script> <!-- Modal toggle --><button data-modal-target="default-modal" data-modal-toggle="default-modal" class="hidden text-white bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800" type="button">
Toggle modal
</button> <!-- Main modal --> <div id="modal-backdrop" class="hidden fixed inset-0 bg-black bg-opacity-50 z-40"> <div id="default-modal" tabindex="-1" aria-hidden="true" class="hidden w-full h-full justify-center items-center"> <div class="relative p-4 w-full max-w-2xl"> <!-- Modal content --> <div class="relative bg-white rounded-lg shadow-2xl dark:bg-gray-800 border-gray-200 border dark:border-gray-600"> <!-- Modal header --> <div class="flex items-center justify-between px-4 md:px-5 pt-4 pb-0 rounded-t dark:border-gray-600"> <button type="button" class="text-gray-400 bg-transparent hover:bg-gray-200 hover:text-gray-900 rounded-lg text-sm w-8 h-8 ms-auto inline-flex justify-center items-center dark:hover:bg-gray-600 dark:hover:text-white" data-modal-hide="default-modal"> <svg class="w-3 h-3" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 14 14"> <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m1 1 6 6m0 0 6 6M7 7l6-6M7 7l-6 6"></path> </svg> <span class="sr-only">Close modal</span> </button> </div> <!-- Modal body --> <div class="px-4 md:px-5 pb-4"> <div class="w-full mx-auto text-center px-6 pb-6"> <div class="text-lg font-semibold text-gray-900 dark:text-blue-100 pt-4 pb-8">每周一，与您分享精心筛选的 Swift 与 SwiftUI 开发精华</div> <div id="custom-substack-embed1"></div> <!-- <div class="text-gray-700 dark:text-blue-200 text-xs font-medium pt-4">{bottomTip}</div> --> <script>(function(){const subscribeText = "立刻订阅";
const placeholder = "输入邮箱订阅周报";

    window.CustomSubstackWidget = {
      substackUrl: 'weekly.fatbobman.com',
      placeholder: placeholder,
      buttonText: subscribeText,
      theme: 'custom',
      colors: {
        primary: '#F50000',
        input: '#000000',
        email: '#777777',
        text: '#000000',
      },
    };

    // 创建一个新的 MutationObserver 实例
    const observer = new MutationObserver((mutationsList, observer) => {
      // 遍历所有的 mutations
      for (let mutation of mutationsList) {
        // 如果这个 mutation 是一个子节点的添加或删除
        if (mutation.type === 'childList') {
          // 查找订阅框
          const widget = document.querySelector('.custom-substack-widget1');
          if (widget) {
            // 查找 input 元素
            const input = widget.querySelector('input');
            const button = widget.querySelector('button');
            // 根据当前的颜色方案修改订阅框的样式
            if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) {
              // 暗黑模式
              widget.style.border = 'var(--subscribe-widget-border)';
              widget.style.padding = '0.3rem';
              widget.style.borderRadius = '0.7rem 0.7rem 0.7rem 0.7rem';
              widget.style.backgroundColor = 'var(--subscribe-input-background)';
              input.style.border = '0px solid #000';
              input.style.backgroundColor = 'var(--subscribe-input-background)';
              input.style.padding = '0.5rem';
              // input.style.border = '1px solid #E2E8F0';
              input.style.outline = 'none';
              button.style.backgroundColor = 'var(--subscribe-button-background)';
              button.style.color = 'var(--subscribe-button-text)';
              button.style.fontWeight = 'bold';
              button.style.padding = '0.5rem 1rem';
              button.style.borderRadius = '0.5rem 0.5rem 0.5rem 0.5rem';
              button.style.maxWidth = '100px';
            } else {
              // 正常模式
              widget.style.border = 'var(--subscribe-widget-border)';
              widget.style.padding = '0.3rem';
              widget.style.borderRadius = '0.7rem 0.7rem 0.7rem 0.7rem';
              widget.style.backgroundColor = 'var(--subscribe-input-background)';
              input.style.border = '0px solid #000';
              input.style.backgroundColor = 'var(--subscribe-input-background)';
              input.style.padding = '0.5rem';
              // input.style.border = '1px solid #E2E8F0';
              input.style.outline = 'none';
              button.style.backgroundColor = 'var(--subscribe-button-background)';
              button.style.color = 'var(--subscribe-button-text)';
              button.style.fontWeight = 'bold';
              button.style.padding = '0.5rem 1rem';
              button.style.borderRadius = '0.5rem 0.5rem 0.5rem 0.5rem';
              button.style.maxWidth = '100px';
            }

            if (window.matchMedia('(max-width: 640px)').matches) {
              // 屏幕尺寸小于 640px
              widget.style.maxWidth = '325px';
            } else {
              // 屏幕尺寸大于或等于 640px
              widget.style.maxWidth = '600px';
            }
            // 停止观察
            observer.disconnect();
          }
        }
      }
    });

    // 开始观察 #custom-substack-embed 元素的子节点的变化
    observer.observe(document.getElementById('custom-substack-embed1'), { childList: true });
  })();</script> <script src="/js/subscriber.js" async></script> </div> <div class="flex justify-center pb-6"> <button data-modal-hide="default-modal" type="button" class="text-gray-600 dark:text-gray-400 bg-transparent hover:text-gray-800 dark:hover:text-gray-200 font-medium rounded-lg text-sm px-8 py-2.5 text-center transition-colors">继续阅读</button> </div> </div> </div> </div> </div> </div> <script type="application/ld+json">{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "author": {
    "@type": "Person",
    "name": "Fatbobman",
    "url": "https://twitter.com/fatbobman"
  },
  "dateModified": "2023-10-18T00:12:00.000Z",
  "datePublished": "2023-10-18T00:12:00.000Z",
  "description": "探索苹果 TipKit 框架的基础用法，学习如何在 SwiftUI 应用中展示提示，包括内联和弹出窗口样式，以及如何定义规则、事件，控制 Tip 的显示时机和频率。",
  "headline": "掌握 TipKit：基础",
  "image": {
    "@type": "ImageObject",
    "url": [
      {
        "url": "https://cdn.fatbobman.com/card/mastering-tipkit-basic-zh.png"
      }
    ]
  },
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://fatbobman.com/zh/posts/mastering-tipkit-basic/"
  },
  "url": "https://fatbobman.com/zh/posts/mastering-tipkit-basic/",
  "publisher": {
    "@type": "Organization",
    "name": "Fatbobman's Blog",
    "logo": {
      "@type": "ImageObject",
      "url": "https://fatbobman.com/images/blog-card.png"
    }
  }
}</script> <div class="w-full mx-auto text-center pb-0 sm:pb-6 pt-8"> <div id="custom-substack-embed"></div> <div class="text-xs font-medium text-heading p-4">为您每周带来有关 Swift 和 SwiftUI 的精选资讯！</div> <script>(function(){const subscribeText = "立刻订阅";
const placeholder = "输入邮箱订阅周报";

    window.CustomSubstackWidget = {
      substackUrl: 'weekly.fatbobman.com',
      placeholder: placeholder,
      buttonText: subscribeText,
      theme: 'custom',
      colors: {
        primary: '#F50000',
        input: '#000000',
        email: '#777777',
        text: '#000000',
      },
    };
  
    const observer = new MutationObserver((mutationsList) => {
      const widget = document.querySelector('.custom-substack-widget');
      if (widget) {
        const input = widget.querySelector('input');
        const button = widget.querySelector('button');
  
        // 设置样式（合并暗黑模式与默认模式逻辑）
        const darkMode = window.matchMedia('(prefers-color-scheme: dark)').matches;
        widget.style.padding = '0.5rem';
        widget.style.borderRadius = '1.2rem';
        widget.style.border = '0.1px solid var(--aw-color-text-muted)';
        input.style.border = '0px solid #000';
        input.style.backgroundColor = 'var(--aw-background-color)';
        button.style.backgroundColor = 'var(--subscribe-button-background)';
        button.style.color = 'var(--subscribe-button-text)';
        button.style.borderRadius = '0.8rem';
        button.style.maxWidth = '100px';
        button.style.fontWeight = 'bold';
  
        // 响应式调整
        widget.style.maxWidth = window.matchMedia('(max-width: 640px)').matches
          ? '325px'
          : '400px';
  
        observer.disconnect(); // 停止观察
      }
    });
  
    // 开始观察
    observer.observe(document.getElementById('custom-substack-embed'), { childList: true });
  })();</script> <script src="https://substackapi.com/widget.js" defer></script> </div> <div class="pt-6 pb-6  dark:border-gray-700"> <!-- <p class="flex justify-center align-center text-sm font-medium text-heading">
    { lang === Lang.ZH && <SupportMeTextZH /> }
    { lang === Lang.EN && <SupportMeTextEN /> }
  </p> --> <div class="flex flex-col sm:flex-row justify-center items-center mx-auto sm:space-x-8 align-center pt-2"> <button type="button" class="text-gray-900 bg-yellow-200 hover:bg-yellow-300 border border-gray-200 focus:ring-4 focus:outline-none focus:ring-gray-100 font-medium rounded-lg text-sm px-8 py-4 text-center inline-flex items-center dark:focus:ring-gray-600 dark:border-gray-700 me-2 mb-2" onclick="window.open('https://www.buymeacoffee.com/fatbobman')"> <img src="/images/buymeacoffee.svg" alt="Buy me a coffee" class="w-5 h-5 me-2 -ms-1" decoding="async" loading="lazy"> <span class="text-black font-medium">Buy me a coffee</span> </button> <div class="pt-4 sm:pt-0"> <button type="button" class="text-red-500 bg-[#3270e1] hover:bg-blue-700 border border-gray-200 focus:ring-4 focus:outline-none focus:ring-gray-100 font-medium rounded-lg text-sm px-8 py-4 text-center inline-flex items-center dark:focus:ring-gray-600 dark:border-gray-700 me-2 mb-2" onclick="window.open('https://afdian.com/a/fatbobman')"> <img src="/images/aifadian.svg" alt="" width="18" height="18" loading="lazy" decoding="async" class="w-4 h-4 me-2 -ms-1" aria-hidden="true"> <span class="text-white font-medium">爱发电(微信/支付宝)</span> </button>  </div> </div> </div> <!-- <WeeklySubscribe1 lang={lang} top={0} bottom={4}/> --> <div id="copy-alert" class="hidden fixed bottom-28 right-5"> <div id="alert-1" class="flex items-center p-4 mb-4 text-blue-800 rounded-lg bg-blue-50/90 dark:bg-gray-800/90 dark:text-blue-400" role="alert"> <div class="text-sm font-medium">链接已复制</div> </div> </div> <style>
  .copy-icon {
    position: absolute;
    left: -30px; /* 根据您的布局调整位置 */
    top: 50%; /* 将图标定位到标题的中间高度 */
    transform: translateY(-50%); /* 垂直居中对齐图标 */
    cursor: pointer;
    transition: opacity 0.6s ease;
    pointer-events: all; /* 始终响应鼠标事件 */
  }

  article h2,
  article h3,
  article h4,
  article h5 {
    position: relative;
  }

  #copy-alert {
    position: fixed;
    bottom: -100px; /* 初始在视窗下方 */
    right: 20px;
    transition: bottom 0.5s ease-in-out;
  }

  /* 进入动画 */
  @keyframes slideIn {
    from {
      bottom: -100px;
    }
    to {
      bottom: 0px;
    }
  }

  /* 消失动画 */
  @keyframes slideOut {
    from {
      bottom: 20px;
    }
    to {
      bottom: -100px;
    }
  }
</style> <script>
  var hideTimeout; // 用于保存自动隐藏定时器的引用
  document.querySelectorAll('article h2, article h3, article h4, article h5').forEach(function (header) {
    var copyIcon = document.createElement('span');
    copyIcon.innerHTML =
      '<svg fill="currentColor" aria-hidden="true" stroke="currentColor" class="w-5 h-5 hidden md:block hover:text-secondary" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg"><path d="M861.866667 164.266667c-87.466667-87.466667-230.4-89.6-320-2.133334l-68.266667 68.266667c-12.8 12.8-12.8 32 0 44.8s32 12.8 44.8 0l68.266667-68.266667c64-61.866667 166.4-61.866667 230.4 2.133334 64 64 64 168.533333 2.133333 232.533333l-117.333333 119.466667c-34.133333 34.133333-81.066667 51.2-128 49.066666-46.933333-4.266667-91.733333-27.733333-119.466667-66.133333-10.666667-14.933333-29.866667-17.066667-44.8-6.4-14.933333 10.666667-17.066667 29.866667-6.4 44.8 40.533333 53.333333 100.266667 87.466667 166.4 91.733333h17.066667c59.733333 0 119.466667-23.466667 162.133333-68.266666l117.333333-119.466667c83.2-89.6 83.2-234.666667-4.266666-322.133333z"></path><path d="M505.6 750.933333l-66.133333 68.266667c-64 61.866667-166.4 61.866667-230.4-2.133333-64-64-64-168.533333-2.133334-232.533334l117.333334-119.466666c34.133333-34.133333 81.066667-51.2 128-49.066667 46.933333 4.266667 91.733333 27.733333 119.466666 66.133333 10.666667 14.933333 29.866667 17.066667 44.8 6.4 14.933333-10.666667 17.066667-29.866667 6.4-44.8-40.533333-53.333333-100.266667-87.466667-166.4-91.733333-66.133333-4.266667-130.133333 19.2-177.066666 66.133333l-117.333334 119.466667c-85.333333 89.6-85.333333 234.666667 2.133334 322.133333 44.8 44.8 102.4 66.133333 162.133333 66.133334 57.6 0 115.2-21.333333 160-64l66.133333-68.266667c12.8-12.8 12.8-32 0-44.8-14.933333-10.666667-34.133333-10.666667-46.933333 2.133333z"></path></svg>'; // 使用您选择的图标
    copyIcon.className = 'copy-icon';
    copyIcon.style.opacity = '0'; // 默认透明
    header.insertBefore(copyIcon, header.firstChild);

    header.addEventListener('mouseover', function () {
      copyIcon.style.opacity = '1';
    });
    header.addEventListener('mouseout', function () {
      copyIcon.style.opacity = '0';
    });

    copyIcon.addEventListener('click', function () {
        var url = window.location.href.split('#')[0] + '#' + header.id;
        navigator.clipboard.writeText(url).then(function () {
            var alertDiv = document.getElementById('copy-alert');
            if (alertDiv) {
                alertDiv.classList.remove('hidden'); // 确保提示框是可见的
                alertDiv.style.display = 'block'; // 显示提示框
                clearTimeout(hideTimeout); // 清除之前的定时器
                alertDiv.style.animation = 'none'; // 先清除之前的动画
                setTimeout(function () {
                    alertDiv.style.animation = 'slideIn 0.5s forwards'; // 应用新动画
                }, 10);

                // 设置自动隐藏定时器
                hideTimeout = setTimeout(function () {
                    alertDiv.style.animation = 'slideOut 0.5s forwards'; // 应用消失动画
                    setTimeout(function () {
                        alertDiv.style.display = 'none';
                    }, 500);
                }, 3000);
            }
        });
    });
  });
</script> <script>
function copyCode(button, event) {
  event.preventDefault();
  const codeBlock = button.parentNode.nextElementSibling.textContent; // 获取代码内容
  navigator.clipboard.writeText(codeBlock).then(() => {
    // 显示 "Copied"
    button.querySelector('.copy-text').style.display = 'none';
    button.querySelector('.copied-text').style.display = 'inline';

    // 3秒后恢复
    setTimeout(() => {
      button.querySelector('.copy-text').style.display = 'inline';
      button.querySelector('.copied-text').style.display = 'none';
    }, 3000);
  });
}
</script> <script>(function(){const url = "https://fatbobman.com/ads/zh";

  fetch(url)
    .then(response => response.text())
    .then(html => {
      // 获取所有的广告位元素
      const adSlots = document.querySelectorAll('.dynamic-ad-container');
      // 将广告内容填充到每一个广告位中
      adSlots.forEach(slot => {
        slot.innerHTML = html;
      });
    })
    .catch(error => console.error('Error loading the ad:', error));
})();</script>  <!-- <LeaveFeedback lang={lang} /> --> <section class="pt-10"><div class="max-w-5xl sm:px-4 py-2 mx-auto"><div class="grid gap-4 sm:gap-2 sm:mx-4 sm:grid-cols-12"><div class="col-span-12 sm:col-span-3 hidden sm:block"><div class="text-center sm:text-left mt-3 mb-14 before:block before:w-24 before:h-1 before:mb-3 before:rounded before:mx-auto sm:before:mx-0 before:bg-secondary"><h3 class="text-lg font-medium text-default">相关文章</h3></div></div><div class="sm:hidden text-lg font-medium text-heading col-span-12 text-left">相关文章</div><div class="relative col-span-12 sm:px-4 space-y-6 sm:col-span-9"><div class="col-span-12 space-y-2 relative sm:px-4 sm:col-span-8 sm:space-y-4 sm:before:absolute sm:before:top-2 sm:before:bottom-0 sm:before:w-0.5 sm:before:-left-3 before:bg-block"><a class="flex flex-col sm:relative sm:before:absolute sm:before:top-2 sm:before:w-2 sm:before:h-2 sm:before:rounded-full sm:before:left-[-31px] sm:before:z-[1] before:bg-secondary group cursor-pointer" href="/zh/posts/mastering-tipkit-advance/" id="relatedPosts-掌握 TipKit：进阶"><div class="flex items-start"><div class="w-[7px] h-[7px] bg-secondary ml-4 mr-2 flex-shrink-0 mt-2 sm:hidden" style="border-radius: 50%;"></div><h3 class="text-default group-hover:text-secondary">掌握 TipKit：进阶</h3></div></a><a class="flex flex-col sm:relative sm:before:absolute sm:before:top-2 sm:before:w-2 sm:before:h-2 sm:before:rounded-full sm:before:left-[-31px] sm:before:z-[1] before:bg-secondary group cursor-pointer" href="/zh/posts/new-features-of-scrollview-in-swiftui5/" id="relatedPosts-深入了解 SwiftUI 5 中 ScrollView 的新功能"><div class="flex items-start"><div class="w-[7px] h-[7px] bg-secondary ml-4 mr-2 flex-shrink-0 mt-2 sm:hidden" style="border-radius: 50%;"></div><h3 class="text-default group-hover:text-secondary">深入了解 SwiftUI 5 中 ScrollView 的新功能</h3></div></a><a class="flex flex-col sm:relative sm:before:absolute sm:before:top-2 sm:before:w-2 sm:before:h-2 sm:before:rounded-full sm:before:left-[-31px] sm:before:z-[1] before:bg-secondary group cursor-pointer" href="/zh/posts/mastering-observation/" id="relatedPosts-深度解读 Observation —— SwiftUI 性能提升的新途径"><div class="flex items-start"><div class="w-[7px] h-[7px] bg-secondary ml-4 mr-2 flex-shrink-0 mt-2 sm:hidden" style="border-radius: 50%;"></div><h3 class="text-default group-hover:text-secondary">深度解读 Observation —— SwiftUI 性能提升的新途径</h3></div></a><a class="flex flex-col sm:relative sm:before:absolute sm:before:top-2 sm:before:w-2 sm:before:h-2 sm:before:rounded-full sm:before:left-[-31px] sm:before:z-[1] before:bg-secondary group cursor-pointer" href="/zh/posts/textfield-1/" id="relatedPosts-SwiftUI TextField 进阶 —— 格式与校验"><div class="flex items-start"><div class="w-[7px] h-[7px] bg-secondary ml-4 mr-2 flex-shrink-0 mt-2 sm:hidden" style="border-radius: 50%;"></div><h3 class="text-default group-hover:text-secondary">SwiftUI TextField 进阶 —— 格式与校验</h3></div></a><a class="flex flex-col sm:relative sm:before:absolute sm:before:top-2 sm:before:w-2 sm:before:h-2 sm:before:rounded-full sm:before:left-[-31px] sm:before:z-[1] before:bg-secondary group cursor-pointer" href="/zh/weekly/issue-038" id="relatedPosts-Weekly #38 - 更好还是更便宜？"><div class="flex items-start"><div class="w-[7px] h-[7px] bg-secondary ml-4 mr-2 flex-shrink-0 mt-2 sm:hidden" style="border-radius: 50%;"></div><h3 class="text-default group-hover:text-secondary">Weekly #38 - 更好还是更便宜？</h3></div></a><a class="flex flex-col sm:relative sm:before:absolute sm:before:top-2 sm:before:w-2 sm:before:h-2 sm:before:rounded-full sm:before:left-[-31px] sm:before:z-[1] before:bg-secondary group cursor-pointer" href="/zh/posts/localizationapp-1/" id="relatedPosts-如何对 iOS 应用中的文本进行本地化"><div class="flex items-start"><div class="w-[7px] h-[7px] bg-secondary ml-4 mr-2 flex-shrink-0 mt-2 sm:hidden" style="border-radius: 50%;"></div><h3 class="text-default group-hover:text-secondary">如何对 iOS 应用中的文本进行本地化</h3></div></a></div></div></div></div></section> <!-- <BottomWeeklySubscribe lang={lang} /> --> <div><div id="gitalk-container" data-comment-id="掌握 TipKit：基础" data-lang="zh"></div><script src="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.min.js"></script></div><script>
  document.addEventListener('DOMContentLoaded', async function () {
    console.log('fetching comment is enable');
    const response = await fetch('https://fatbobman.com/status/comment');
    const data = await response.text();
    console.log(data);
    if (data === '1') {
      var container = document.getElementById('gitalk-container');
      if (container) {
        var commentID = container.getAttribute('data-comment-id');
        var lang = container.getAttribute('data-lang');

        var gitalk = new Gitalk({
          clientID: 'fcf61195c7f73253dc8b',
          clientSecret: '0ac2907be08248a1fcb5312e27480ad535c682e5',
          repo: 'blogComments',
          owner: 'fatbobman',
          admin: ['fatbobman'],
          id: commentID.split('/').pop().substring(0, 49),
          distractionFreeMode: true,
          createIssueManually: true,
          language: lang,
        });

        gitalk.render('gitalk-container');
      }
    }
  });
</script> <div class="hidden xl:block w-44 lg:absolute" id="toc" style="left: -30px; top: 0px"> <div class="text-muted items-center justify-center overflow-x-clip"> <div class="w-full flex justify-start pb-2" id="toc-button"> <div class=" opacity-50 hover:opacity-100 text-heading hover:text-secondary" style="width:20px; height:20px;">  <svg fill="currentColor" stroke="currentColor" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" id="toc-list-switcher"> <path d="M170.666667 277.333333a85.333333 85.333333 0 1 0 0-170.666666 85.333333 85.333333 0 0 0 0 170.666666zM405.333333 128a64 64 0 1 0 0 128h469.333334a64 64 0 0 0 0-128h-469.333334zM341.333333 490.666667A64 64 0 0 1 405.333333 426.666667h469.333334a64 64 0 0 1 0 128h-469.333334A64 64 0 0 1 341.333333 490.666667z m0 298.666666A64 64 0 0 1 405.333333 725.333333h469.333334a64 64 0 0 1 0 128h-469.333334A64 64 0 0 1 341.333333 789.333333z m-85.333333-298.666666a85.333333 85.333333 0 1 1-170.666667 0 85.333333 85.333333 0 0 1 170.666667 0z m-85.333333 384a85.333333 85.333333 0 1 0 0-170.666667 85.333333 85.333333 0 0 0 0 170.666667z"></path> </svg>  </div> </div> <div class="text-default text-xs hidden" id="toc-list"> <ul> <li class=" pb-1"> <div class="text-muted hover:text-secondary items-center justify-start"> <a href="#如何定义一个-tip" class=""> 如何定义一个 Tip </a> </div> </li><li class=" pb-1"> <div class="text-muted hover:text-secondary items-center justify-start"> <a href="#让-tip-达到应有的效果" class=""> 让 Tip 达到应有的效果 </a> </div> </li><li class=" pb-1"> <div class="text-muted hover:text-secondary items-center justify-start"> <a href="#初始化-tip-容器" class=""> 初始化 Tip 容器 </a> </div> </li><li class=" pb-1"> <div class="text-muted hover:text-secondary items-center justify-start"> <a href="#在-swiftui-视图中添加-tip" class=""> 在 SwiftUI 视图中添加 Tip </a> </div> </li><li class="pl-2 pb-1"> <div class="text-muted hover:text-secondary items-center justify-start"> <a href="#內联" class=""> 內联 </a> </div> </li><li class="pl-2 pb-1"> <div class="text-muted hover:text-secondary items-center justify-start"> <a href="#弹出窗口" class=""> 弹出窗口 </a> </div> </li><li class=" pb-1"> <div class="text-muted hover:text-secondary items-center justify-start"> <a href="#如何调整-tip-外观" class=""> 如何调整 Tip 外观 </a> </div> </li><li class="pl-2 pb-1"> <div class="text-muted hover:text-secondary items-center justify-start"> <a href="#为-text-和-image-应用不改变其类型的修饰器" class=""> 为 Text 和 Image 应用不改变其类型的修饰器 </a> </div> </li><li class="pl-2 pb-1"> <div class="text-muted hover:text-secondary items-center justify-start"> <a href="#使用-tipview-特有的修饰器" class=""> 使用 TipView 特有的修饰器 </a> </div> </li><li class="pl-2 pb-1"> <div class="text-muted hover:text-secondary items-center justify-start"> <a href="#使用-tipviewstyle-自定义-tipview-的外观" class=""> 使用 TipViewStyle 自定义 TipView 的外观 </a> </div> </li><li class=" pb-1"> <div class="text-muted hover:text-secondary items-center justify-start"> <a href="#为-tip-添加-action-button" class=""> 为 Tip 添加 Action Button </a> </div> </li><li class=" pb-1"> <div class="text-muted hover:text-secondary items-center justify-start"> <a href="#为-tip-制定显示规则" class=""> 为 Tip 制定显示规则 </a> </div> </li><li class="pl-2 pb-1"> <div class="text-muted hover:text-secondary items-center justify-start"> <a href="#为-tip-定义参数-parameter" class=""> 为 Tip 定义参数（ Parameter） </a> </div> </li><li class="pl-2 pb-1"> <div class="text-muted hover:text-secondary items-center justify-start"> <a href="#创建规则rule根据状态决定是否显示提示tip" class=""> 创建规则（Rule），根据状态决定是否显示提示（Tip） </a> </div> </li><li class="pl-2 pb-1"> <div class="text-muted hover:text-secondary items-center justify-start"> <a href="#为-tip-定义事件-event" class=""> 为 Tip 定义事件（ Event ） </a> </div> </li><li class="pl-2 pb-1"> <div class="text-muted hover:text-secondary items-center justify-start"> <a href="#规则适用" class=""> 规则适用 </a> </div> </li><li class=" pb-1"> <div class="text-muted hover:text-secondary items-center justify-start"> <a href="#让-tip-失效-invalidate-的方法" class=""> 让 Tip 失效（ invalidate ）的方法 </a> </div> </li><li class=" pb-1"> <div class="text-muted hover:text-secondary items-center justify-start"> <a href="#通过-option-设置-tip-的最大显示次数" class=""> 通过 Option 设置 Tip 的最大显示次数 </a> </div> </li><li class=" pb-1"> <div class="text-muted hover:text-secondary items-center justify-start"> <a href="#设置-tip-的最大显示时长" class=""> 设置 Tip 的最大显示时长 </a> </div> </li><li class=" pb-1"> <div class="text-muted hover:text-secondary items-center justify-start"> <a href="#通过-configuration-设置-tip-的全局显示频次策略" class=""> 通过 Configuration 设置 Tip 的全局显示频次策略 </a> </div> </li><li class=" pb-1"> <div class="text-muted hover:text-secondary items-center justify-start"> <a href="#重置-tipkit-的所有数据" class=""> 重置 TipKit 的所有数据 </a> </div> </li><li class=" pb-1"> <div class="text-muted hover:text-secondary items-center justify-start"> <a href="#用于测试的配置指令" class=""> 用于测试的配置指令 </a> </div> </li><li class=" pb-1"> <div class="text-muted hover:text-secondary items-center justify-start"> <a href="#设置-tipkit-数据保存的位置" class=""> 设置 TipKit 数据保存的位置 </a> </div> </li><li class=" pb-1"> <div class="text-muted hover:text-secondary items-center justify-start"> <a href="#跨设备共享-tip-数据" class=""> 跨设备共享 Tip 数据 </a> </div> </li><li class=" pb-1"> <div class="text-muted hover:text-secondary items-center justify-start"> <a href="#使用-tipgroup-管理并逐步展示多个提示" class=""> 使用 TipGroup 管理并逐步展示多个提示 </a> </div> </li><li class=" pb-1"> <div class="text-muted hover:text-secondary items-center justify-start"> <a href="#接下来" class=""> 接下来 </a> </div> </li> </ul> </div> </div> </div> <style>
  #toc-list {
    transition: all 0.9s ease-in-out;
  }

  #toc-button {
    transition: all 0.9s ease-in-out;
  }
</style> <script>
  function getOffsetTop(element) {
    var offsetTop = 0;
    while (element) {
      offsetTop += element.offsetTop;
      element = element.offsetParent;
    }
    return offsetTop;
  }

  var toc = document.querySelector('#toc');
  // 获取 sidebar 在浏览器中的初始 top 值
  var initialTop = getOffsetTop(toc);
  var positioningElement = document.querySelector('#article-area'); // 定位视图的选择器
  var stickyPoint = 150;
  var tocPadding = 30;
  var tocTopOffset = 4;
  var sidebarWidth = toc.offsetWidth;

  function adjustTocPosition() {
    var sidebarOffsetTop = toc.getBoundingClientRect().top;
    console.log(sidebarOffsetTop, window.scrollY, initialTop - stickyPoint);
    if (sidebarOffsetTop <= stickyPoint) {
      // 获取 positioningElement 的左侧侧与浏览器左侧之间的距离
      var positioningElementRight = (window.innerWidth - positioningElement.getBoundingClientRect().width) / 2;
      toc.style.position = 'fixed';
      toc.style.top = stickyPoint + 'px';
      toc.style.left = positioningElementRight - toc.getBoundingClientRect().width - tocPadding + 'px';
    }

    if (window.scrollY <= initialTop - stickyPoint) {
      toc.style.position = 'absolute';
      toc.style.top = tocTopOffset + 'px';
      toc.style.left = -(tocPadding + toc.getBoundingClientRect().width) + 'px';
    }
  }

  document.addEventListener('scroll', adjustTocPosition);
  window.addEventListener('resize', adjustTocPosition);
  // doc 加载完成后，调整 toc 的位置
  toc.style.left = -(tocPadding + toc.getBoundingClientRect().width) + 'px';

  document.addEventListener('DOMContentLoaded', function () {
    const tocList = document.getElementById('toc-list');
    const tocButton = document.getElementById('toc-button');

    // 更新toc-list和toc-button的显示状态
    function updateDisplay() {
      const showToc = localStorage.getItem('showToc') === 'true';
      if (showToc) {
        tocList.classList.remove('hidden');
        tocButton.classList.add('justify-start');
        tocButton.classList.remove('justify-end');
      } else {
        tocList.classList.add('hidden');
        tocButton.classList.remove('justify-start');
        tocButton.classList.add('justify-end');
      }
    }

    // 初始状态检查
    updateDisplay();

    // 点击事件监听器，用于切换toc-list的显示状态并更新按钮位置
    tocButton.addEventListener('click', function () {
      const isHidden = tocList.classList.contains('hidden');
      localStorage.setItem('showToc', isHidden);
      updateDisplay();
    });
  });
</script> <div class="hidden md:block md:absolute" id="sidebar" style="right: -50px; top: 0px"> <div class="flex flex-col space-y-4 text-muted items-center justify-center"> <div class=" opacity-50 hover:opacity-100 text-heading hover:text-secondary" style="width:20px; height:20px;">  <a href="/zh/posts/mastering-tipkit-advance/" data-tooltip-target="tooltip-previous-post" data-tooltip-placement="left" id="sidebar-previous-post"> <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="currentColor" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M12.089 3.634a2 2 0 0 0 -1.089 1.78l-.001 2.586h-6.999a2 2 0 0 0 -2 2v4l.005 .15a2 2 0 0 0 1.995 1.85l6.999 -.001l.001 2.587a2 2 0 0 0 3.414 1.414l6.586 -6.586a2 2 0 0 0 0 -2.828l-6.586 -6.586a2 2 0 0 0 -2.18 -.434l-.145 .068z" stroke-width="0" fill="currentColor"></path></svg> </a>  </div> <div id="tooltip-previous-post" role="tooltip" class="absolute z-10 invisible inline-block px-3 py-2 w-44 text-sm font-medium text-gray-200 bg-gray-600/90 rounded-lg shadow-sm transition-opacity duration-300 tooltip dark:bg-gray-700/90"> 掌握 TipKit：进阶 <div class="tooltip-arrow" data-popper-arrow></div> </div> <div class=" opacity-50 hover:opacity-100 text-heading hover:text-secondary" style="width:20px; height:20px;">  <a href="/zh/posts/concurret-programming-in-swiftdata/" data-tooltip-target="tooltip-next-post" data-tooltip-placement="left" id="sidebar-next-post"> <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="currentColor" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M9.586 4l-6.586 6.586a2 2 0 0 0 0 2.828l6.586 6.586a2 2 0 0 0 2.18 .434l.145 -.068a2 2 0 0 0 1.089 -1.78v-2.586h7a2 2 0 0 0 2 -2v-4l-.005 -.15a2 2 0 0 0 -1.995 -1.85l-7 -.001v-2.585a2 2 0 0 0 -3.414 -1.414z" stroke-width="0" fill="currentColor"></path></svg> </a>  </div> <div id="tooltip-next-post" role="tooltip" class="absolute z-10 invisible inline-block px-3 py-2 w-44 text-sm font-medium text-gray-200 bg-gray-600/90 rounded-lg shadow-sm transition-opacity duration-300 tooltip dark:bg-gray-700/90"> SwiftData 中的并发编程 <div class="tooltip-arrow" data-popper-arrow></div> </div> <div class="hidden" id="dict-randomURLS" data-randomurls="[&#34;/zh/posts/mastering-tipkit-advance/&#34;,&#34;/zh/posts/new-features-of-scrollview-in-swiftui5/&#34;,&#34;/zh/posts/mastering-observation/&#34;,&#34;/zh/posts/textfield-1/&#34;,&#34;/zh/posts/localizationapp-1/&#34;]" data-astro-cid-qwm5cfxr></div> <div class=" opacity-50 hover:opacity-100 text-heading hover:text-secondary" style="width:18px; height:18px;">  <svg fill="currentColor" stroke="currentColor" onclick="openRandomUrl()" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" id="sidebar-random-post" data-astro-cid-qwm5cfxr> <path d="M956.222464 226.56a28.8256 28.8256 0 0 0 18.5344-17.5104 26.368 26.368 0 0 0-3.5328-24.4224 46.9504 46.9504 0 0 0-20.1216-14.08A18601.6256 18601.6256 0 0 0 712.152064 74.5472L524.555264 0h-25.6l-17.0496 7.0144C359.384064 55.3472 237.528064 103.0144 115.672064 152.6272l-46.7456 18.8928a29.3888 29.3888 0 0 0-21.1456 27.1872 28.6208 28.6208 0 0 0 20.48 27.8528c1.6896 0 5.12 1.8944 6.8096 2.8672C214.027264 288 353.240064 346.2144 492.145664 405.0944a44.8 44.8 0 0 0 40.6016 0L887.972864 256c23.8592-9.9328 45.7216-20.1728 68.2496-29.44zM341.976064 224a121.4464 121.4464 0 0 1-126.2592 0 31.6928 31.6928 0 0 1-16.9984-27.648c0-11.4688 6.4512-22.016 16.9984-27.6992a98.9696 98.9696 0 0 1 54.272-17.6128c25.3952-1.9456 50.7904 4.2496 71.9872 17.6128a31.6928 31.6928 0 0 1 16.9984 27.648 31.6928 31.6928 0 0 1-16.9984 27.648z m233.0624 0c-38.4 24.2176-88.576 24.2176-126.976 0a31.6416 31.6416 0 0 1-16.384-27.392c0-11.1616 6.2464-21.504 16.384-27.3408 19.968-12.9024 44.032-19.0976 68.3008-17.6128 19.9168 0.1024 39.3216 5.9392 55.6032 16.64 11.0592 5.12 18.2272 15.4624 18.8928 27.0336a31.488 31.488 0 0 1-15.8208 28.672z m234.4448 0a121.4464 121.4464 0 0 1-126.2592 0 31.6928 31.6928 0 0 1-16.9984-27.648c0-11.4688 6.4512-22.016 16.9984-27.6992 17.8688-12.8 39.936-19.3024 62.464-18.2784 22.3232-1.024 44.3392 5.2224 62.464 17.6128a31.8464 31.8464 0 0 1 18.2784 27.648 31.6416 31.6416 0 0 1-16.9472 28.3648zM468.235264 437.0944c-30.72-12.4928-61.44-25.2928-92.4672-39.0144-109.568-46.08-217.088-90.2656-325.2224-135.68a36.096 36.096 0 0 0-31.3856-1.9456 33.6896 33.6896 0 0 0-18.432 33.9456v495.9744c-2.048 27.0848 14.9504 52.2752 41.984 62.0544 133.12 55.3472 265.1136 110.7456 397.2096 167.0656 28.672 11.776 49.4592 0 49.4592-30.1056V475.4944c4.096-16.1792-5.6832-32.5632-22.528-37.7344l1.3824-0.6656z m-197.5808 243.2a34.4064 34.4064 0 0 1-28.16 16.64 34.9184 34.9184 0 0 1-29.8496-13.7728 91.8016 91.8016 0 0 1-22.528-75.2128c2.5088-15.0016 7.68-29.4912 15.36-42.8544a34.304 34.304 0 0 1 27.648-17.0496 35.072 35.072 0 0 1 30.0032 12.9024c15.3088 16.5376 23.7568 37.632 23.9104 59.4944 1.28 21.0432-4.4544 41.984-16.384 59.8528z m704.3072-417.8944l-416.256 175.0016a36.4544 36.4544 0 0 0-24.9344 36.5056v514.8672a28.416 28.416 0 0 0 13.4144 29.184 32.768 32.768 0 0 0 33.9968 0.256L983.512064 848.896c25.0368-8.8576 41.4208-31.5392 40.96-56.6272V293.7344c0-28.7744-21.8624-42.5472-49.5104-31.3344z m-257.6384 578.2016a34.8672 34.8672 0 0 1-30.208 14.2848 34.304 34.304 0 0 1-28.4672-17.152 103.5264 103.5264 0 0 1 7.5264-118.0672 34.9696 34.9696 0 0 1 30.6176-13.7216c12.032 0.8704 22.7328 7.68 28.0576 17.8688 10.24 16.8448 15.1552 35.9936 14.336 55.3472a92.16 92.16 0 0 1-21.8624 61.44z m181.9136-293.12a34.816 34.816 0 0 1-31.3344 15.4112 34.1504 34.1504 0 0 1-29.0816-18.944 104.0384 104.0384 0 0 1 5.7856-115.5072 34.6624 34.6624 0 0 1 32.9216-16.8448 33.792 33.792 0 0 1 29.5424 21.6576c9.216 14.592 13.824 31.3856 13.312 48.3328 0.6144 23.7568-7.4752 47.0016-22.8864 65.8944h1.7408z" p-id="9271" data-astro-cid-qwm5cfxr></path> </svg>  </div>  <script>
  function openRandomUrl() {
    const dataElement = document.getElementById('dict-randomURLS');
    const urls = JSON.parse(dataElement.getAttribute('data-randomurls'));

    if (urls && urls.length > 0) {
      const randomUrl = urls[Math.floor(Math.random() * urls.length)];
      window.open(randomUrl, '_self');
    }
  }

  const svgElement = document.getElementById('sidebar-random-post');

  setInterval(() => {
    svgElement.classList.add('rotate');

    // Remove the class after the animation completes (1 second)
    setTimeout(() => {
      svgElement.classList.remove('rotate');
    }, 1000);
  }, 15000); // 20 seconds interval
</script> <div class=" opacity-50 hover:opacity-100 text-heading hover:text-secondary" style="width:20px; height:20px;">  <a href="https://x.com/intent/tweet?text=掌握 TipKit：基础&#38;url=https://fatbobman.com/zh/posts/mastering-tipkit-basic/&#38;hashtags=ios,swiftlang&#38;via=fatbobman" target="_blank" id="sidebar-share-with-twitter"> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M4 4l11.733 16h4.267l-11.733 -16z"></path><path d="M4 20l6.768 -6.768m2.46 -2.46l6.772 -6.772"></path></svg> </a>  </div> <div class=" opacity-50 hover:opacity-100 text-heading hover:text-secondary" style="width:20px; height:20px;">  <a href="https://bsky.app/intent/compose?text=掌握 TipKit：基础%0A by %40fatbobman.bsky.social %0Ahttps://fatbobman.com/zh/posts/mastering-tipkit-basic/%0A #ios #swift" target="_blank" id="sidebar-share-with-bluesky"> <svg xmlns="http://www.w3.org/2000/svg" class="text-default hover:text-secondary" width="20" height="20" viewBox="0 0 24 24" stroke-width="0.7" stroke="currentColor" fill="currentColor" stroke-linecap="round" stroke-linejoin="round"> <path d="M4.9 3.02725C5.6 3.12725 6.4 3.52725 7.5 4.22725C9.3 5.62725 10.8 7.32725 12 9.22726C13.2 7.42725 14.7 5.62725 16.5 4.32725C17.5 3.62725 18.4 3.22725 19.1 3.12725C19.9 3.02725 20.4 3.22725 20.7 3.32725C21.7 3.72725 22 4.92725 22 5.92725C22 6.12725 21.9 7.22725 21.8 8.32725C21.7 8.82725 21.7 9.42726 21.6 9.92726C21.5 10.3273 21.5 10.8273 21.4 11.0273C21.1 12.2273 20.3 13.0273 19.4 13.5273C20.3 14.2273 20.7 15.4273 20.3 16.5273C19.7 18.4273 17.6 20.9273 15.5 21.1273C13.7 21.3273 12.6 19.8273 11.9 18.3273C11.2 19.7273 10.1 21.2273 8.3 21.1273C6.2 20.9273 4.1 18.4273 3.5 16.5273C3.2 15.4273 3.5 14.2273 4.4 13.5273C3.5 13.0273 2.8 12.1273 2.4 11.0273C2.3 10.7273 2.3 10.3273 2.2 9.92726C2.1 9.42726 2.1 8.92725 2 8.32725C2.1 7.12725 2 6.02725 2 5.82725C2 4.82725 2.3 3.62725 3.3 3.22725C3.6 3.12725 4.1 2.92725 4.9 3.02725ZM4 6.52725C4.1 7.32725 4.2 8.62725 4.3 9.52725C4.3 9.82725 4.4 10.0273 4.4 10.3273C4.8 11.6273 6.3 12.4273 8.1 12.2273C8.6 12.1273 9.1 12.5273 9.2 13.1273C9.3 13.6273 8.9 14.1273 8.4 14.2273C7.6 14.3273 5.1 14.6273 5.5 15.8273C5.9 17.0273 7.3 18.9273 8.6 19.0273C9.5 19.1273 10.1 17.6273 10.4 17.0273C10.7 16.3273 10.9 15.6273 11.1 15.0273C11.2 14.6273 11.6 14.3273 12.1 14.3273C12.6 14.3273 12.9 14.6273 13.1 15.0273C13.3 15.6273 13.5 16.3273 13.8 17.0273C14.1 17.7273 14.6 19.1273 15.6 19.0273C16.9 18.9273 18.4 16.9273 18.7 15.8273C19.1 14.5273 16.5 14.3273 15.8 14.2273C15.3 14.1273 14.9 13.6273 15 13.1273C15.1 12.6273 15.6 12.2273 16.1 12.2273C17.9 12.4273 19.4 11.7273 19.8 10.3273C19.9 10.0273 19.9 9.82725 19.9 9.52725C20 8.62725 20.1 7.32725 20.2 6.52725C20.2 6.02725 20.4 4.92725 19.7 5.02725C19.4 5.02725 18.9 5.22725 18 5.92725C15.7 7.32725 14 9.42725 12.9 11.6273C12.7 11.9273 12.4 12.1273 12 12.1273C11.6 12.1273 11.3 11.9273 11.1 11.6273C10 9.42725 8.3 7.32725 6.3 5.92725C5.4 5.32725 4.9 5.12725 4.6 5.02725C3.8 4.92725 4 6.02725 4 6.52725Z" fill="currentColo"></path> </svg> </a>  </div> <div class=" opacity-50 hover:opacity-100 text-heading hover:text-secondary" style="width:20px; height:20px;">  <a href="https://www.facebook.com/sharer/sharer.php?u=https%3A%2F%2Ffatbobman.com%2Fzh%2Fposts%2Fmastering-tipkit-basic%2F" target="_blank" id="sidebar-share-with-facebook"> <svg fill="currentColor" stroke="currentColor" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg"><path d="M767.428571 6.857143v150.857143h-89.714285q-49.142857 0-66.285715 20.571428t-17.142857 61.714286v108h167.428572l-22.285715 169.142857h-145.142857v433.714286H419.428571V517.142857H273.714286V348h145.714285V223.428571q0-106.285714 59.428572-164.857142T637.142857 0q84 0 130.285714 6.857143z" p-id="4213"></path></svg> </a>  </div> <div class=" opacity-50 hover:opacity-100 text-heading hover:text-secondary" style="width:20px; height:20px;">  <a href="https://service.weibo.com/share/share.php?url=https%3A%2F%2Ffatbobman.com%2Fzh%2Fposts%2Fmastering-tipkit-basic%2F&#38;title=%E6%8E%8C%E6%8F%A1%20TipKit%EF%BC%9A%E5%9F%BA%E7%A1%80%0A%20%23ios%20%23swift%0A%20by%20%40fatbobman%0A" target="_blank" id="sidebar-share-with-weibo"> <svg fill="currentColor" stroke="currentColor" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg"><path d="M457.3 543c-68.1-17.7-145 16.2-174.6 76.2-30.1 61.2-1 129.1 67.8 151.3 71.2 23 155.2-12.2 184.4-78.3 28.7-64.6-7.2-131-77.6-149.2z m-52 156.2c-13.8 22.1-43.5 31.7-65.8 21.6-22-10-28.5-35.7-14.6-57.2 13.7-21.4 42.3-31 64.4-21.7 22.4 9.5 29.6 35 16 57.3z m45.5-58.5c-5 8.6-16.1 12.7-24.7 9.1-8.5-3.5-11.2-13.1-6.4-21.5 5-8.4 15.6-12.4 24.1-9.1 8.7 3.2 11.8 12.9 7 21.5zM785.3 443.5c15 4.8 31-3.4 35.9-18.3 11.8-36.6 4.4-78.4-23.2-109-27.6-30.6-68.4-42.3-106-34.3-15.4 3.3-25.2 18.4-21.9 33.8 3.3 15.3 18.4 25.2 33.8 21.8 18.4-3.9 38.3 1.8 51.9 16.7 13.5 15 17.2 35.4 11.3 53.3-4.9 15.1 3.2 31.1 18.2 36z"></path><path d="M885.1 237.5c-56.7-62.9-140.4-86.9-217.7-70.5-17.9 3.8-29.3 21.4-25.4 39.3 3.8 17.9 21.4 29.3 39.3 25.5 55-11.7 114.4 5.4 154.8 50.1 40.3 44.7 51.2 105.7 34 159.1-5.6 17.4 3.9 36 21.3 41.7 17.4 5.6 36-3.9 41.6-21.2v-0.1c24.1-75.4 8.9-161.1-47.9-223.9zM729 499c-12.2-3.6-20.5-6.1-14.1-22.1 13.8-34.7 15.2-64.7 0.3-86-28-40.1-104.8-37.9-192.8-1.1 0 0-27.6 12.1-20.6-9.8 13.5-43.5 11.5-79.9-9.6-101-47.7-47.8-174.6 1.8-283.5 110.6C127.3 471.1 80 557.5 80 632.2 80 775.1 263.2 862 442.5 862c235 0 391.3-136.5 391.3-245 0-65.5-55.2-102.6-104.8-118zM443 810.8c-143 14.1-266.5-50.5-275.8-144.5-9.3-93.9 99.2-181.5 242.2-195.6 143-14.2 266.5 50.5 275.8 144.4C694.4 709 586 796.6 443 810.8z"></path></svg> </a>  </div> <div class="hidden opacity-50 hover:opacity-100 text-heading hover:text-secondary" style="width:16px; height:16px;">  <a href="https://www.linkedin.com/sharing/share-offsite/?url=https%3A%2F%2Ffatbobman.com%2Fzh%2Fposts%2Fmastering-tipkit-basic%2F" target="_blank" id="sidebar-share-with-linkedin"> <svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 15 15"> <path fill-rule="evenodd" d="M7.979 5v1.586a3.5 3.5 0 0 1 3.082-1.574C14.3 5.012 15 7.03 15 9.655V15h-3v-4.738c0-1.13-.229-2.584-1.995-2.584-1.713 0-2.005 1.23-2.005 2.5V15H5.009V5h2.97ZM3 2.487a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0Z" clip-rule="evenodd"></path> <path d="M3 5.012H0V15h3V5.012Z"></path> </svg> </a>  </div> <div class=" opacity-50 hover:opacity-100 text-heading hover:text-secondary" style="width:20px; height:20px;">  <a href="mailto:?subject=%E6%8E%A8%E8%8D%90%3A%20%E6%8E%8C%E6%8F%A1%20TipKit%EF%BC%9A%E5%9F%BA%E7%A1%80&#38;body=%E6%88%91%E5%8F%91%E7%8E%B0%E4%BA%86%E8%BF%99%E7%AF%87%E6%9C%89%E8%B6%A3%E7%9A%84%E6%96%87%E7%AB%A0%EF%BC%8C%E6%83%B3%E5%88%86%E4%BA%AB%E7%BB%99%E4%BD%A0%EF%BC%9A%0A%0A%E6%8E%8C%E6%8F%A1%20TipKit%EF%BC%9A%E5%9F%BA%E7%A1%80%0A%0A%E5%8E%9F%E6%96%87%E5%9C%B0%E5%9D%80%3A%20https%3A%2F%2Ffatbobman.com%2Fzh%2Fposts%2Fmastering-tipkit-basic%2F" target="_blank" id="sidebar-share-with-email"> <svg fill="currentColor" stroke="currentColor" stroke-width="4" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg"><path d="M874.666667 181.333333H149.333333c-40.533333 0-74.666667 34.133333-74.666666 74.666667v512c0 40.533333 34.133333 74.666667 74.666666 74.666667h725.333334c40.533333 0 74.666667-34.133333 74.666666-74.666667V256c0-40.533333-34.133333-74.666667-74.666666-74.666667z m-725.333334 64h725.333334c6.4 0 10.666667 4.266667 10.666666 10.666667v25.6L512 516.266667l-373.333333-234.666667V256c0-6.4 4.266667-10.666667 10.666666-10.666667z m725.333334 533.333334H149.333333c-6.4 0-10.666667-4.266667-10.666666-10.666667V356.266667l356.266666 224c4.266667 4.266667 10.666667 4.266667 17.066667 4.266666s12.8-2.133333 17.066667-4.266666l356.266666-224V768c0 6.4-4.266667 10.666667-10.666666 10.666667z"></path></svg> </a>  </div> <div class=" opacity-50 hover:opacity-100 text-heading hover:text-secondary" style="width:20px; height:20px;">  <svg fill="currentColor" stroke="currentColor" onclick="scrollToElement()" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg"><path d="M573 421c-23.1 0-41 17.9-41 40s17.9 40 41 40c21.1 0 39-17.9 39-40s-17.9-40-39-40zM293 421c-23.1 0-41 17.9-41 40s17.9 40 41 40c21.1 0 39-17.9 39-40s-17.9-40-39-40z" p-id="13138"></path><path d="M894 345c-48.1-66-115.3-110.1-189-130v0.1c-17.1-19-36.4-36.5-58-52.1-163.7-119-393.5-82.7-513 81-96.3 133-92.2 311.9 6 439l0.8 132.6c0 3.2 0.5 6.4 1.5 9.4 5.3 16.9 23.3 26.2 40.1 20.9L309 806c33.5 11.9 68.1 18.7 102.5 20.6l-0.5 0.4c89.1 64.9 205.9 84.4 313 49l127.1 41.4c3.2 1 6.5 1.6 9.9 1.6 17.7 0 32-14.3 32-32V753c88.1-119.6 90.4-284.9 1-408zM323 735l-12-5-99 31-1-104-8-9c-84.6-103.2-90.2-251.9-11-361 96.4-132.2 281.2-161.4 413-66 132.2 96.1 161.5 280.6 66 412-80.1 109.9-223.5 150.5-348 102z m505-17l-8 10 1 104-98-33-12 5c-56 20.8-115.7 22.5-171 7l-0.2-0.1C613.7 788.2 680.7 742.2 729 676c76.4-105.3 88.8-237.6 44.4-350.4l0.6 0.4c23 16.5 44.1 37.1 62 62 72.6 99.6 68.5 235.2-8 330z" p-id="13139"></path><path d="M433 421c-23.1 0-41 17.9-41 40s17.9 40 41 40c21.1 0 39-17.9 39-40s-17.9-40-39-40z" p-id="13140"></path></svg>  </div> <script>
  var offset = 80
  function scrollToElement() {
    var gitalkContainer = document.getElementById('gitalk-container');
    if (gitalkContainer) {
      var topPosition = gitalkContainer.getBoundingClientRect().top + window.scrollY - offset;
      window.scrollTo({ top: topPosition, behavior: 'smooth' });
    }
  }
</script> <div class=" opacity-50 hover:opacity-100 text-heading hover:text-secondary" style="width:20px; height:20px;">  <svg fill="currentColor" stroke="currentColor" onclick="window.scrollTo({top:0,behavior:'smooth'})" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg"><path d="M862.464 161.536l-700.928 0c-30.976 0-56.096-25.12-56.096-56.096l0-28.064c0-30.944 25.12-56.064 56.096-56.064l700.896 0c30.976 0 56.096 25.12 56.096 56.064l0 28.032c0 31.008-25.12 56.096-56.096 56.096l0 0 0 0zM138.528 531.68c0 0 306.816-245.792 309.888-248.864 14.304-13.888 31.904-22.368 49.952-25.312 1.76-0.32 3.488-0.608 5.248-0.8 2.816-0.32 5.6-0.352 8.384-0.352 2.816-0.032 5.568 0.032 8.352 0.352 1.792 0.192 3.552 0.48 5.28 0.8 18.048 2.976 35.616 11.424 49.92 25.312 3.104 3.008 309.856 248.864 309.856 248.864 33.152 32.224 30.304 65.44-2.784 97.696s-77.376 3.04-110.496-29.216l-190.08-150.432 0 496.864c0 31.008-25.088 56.096-56.096 56.096l-28 0c-30.976 0-56.096-25.12-56.096-56.096l0-496.864-190.048 150.432c-33.088 32.288-77.408 61.536-110.496 29.216-33.056-32.256-35.872-65.44-2.816-97.696l0 0 0 0z"></path></svg>  </div> </div> </div>  </div>   </div> </main> </div> <footer> <footer class="bg-block"> <div class="mx-auto w-full max-w-3xl px-4 md:px-6"> <div class="container flex flex-col items-center pt-10"> <div class="flex flex-row justify-around w-full space-x-3"> <div class="flex flex-col space-y-4"> <h2 class="font-bold text-heading">网站</h2> <div class="flex flex-col space-y-2 text-sm text-default font-medium"> <a href="https://apps.apple.com/us/app/id1534513553" class="hover:text-secondary" target="_blank">健康笔记</a> <a href="https://discord.gg/zhou-zi-de-swiftji-shi-ben-967978112509935657" class="hover:text-secondary" target="_blank">Discord</a> <a href="/zh/posts/" class="hover:text-secondary">文章</a> <a href="/zh/tags/" class="hover:text-secondary">标签</a> <a href="/zh/collections/" class="hover:text-secondary">合集</a> <a href="/zh/snippet/" class="hover:text-secondary">小贴士</a> </div> </div> <div class="flex flex-col space-y-4"> <h2 class="font-bold text-heading">关注</h2> <div class="flex flex-col space-y-2 text-sm text-default font-medium"> <a href="https://weekly.fatbobman.com" class="hover:text-secondary">周报</a> <a href="https://x.com/fatbobman" class="hover:text-secondary" target="_blank">Twitter</a> <a href="https://mastodon.social/@fatbobman" class="hover:text-secondary" target="_blank">Mastodon</a> <a href="https://www.linkedin.com/in/fatbobman/" class="hover:text-secondary" target="_blank">Linkedin</a> <a href="https://bsky.app/profile/fatbobman.bsky.social" class="hover:text-secondary" target="_blank">Blue Sky</a> <a href="https://web.okjike.com/u/e32947ef-7751-4363-9456-b340eef2efd3" class="hover:text-secondary" target="_blank">
即刻
</a> <a href="https://github.com/fatbobman" class="hover:text-secondary" target="_blank">GitHub</a> <a href="/zh/rss.xml" class="hover:text-secondary hover:font-medium" target="_blank">RSS</a> </div> </div> <div class="flex flex-col space-y-4"> <h2 class="font-bold text-heading">信息</h2> <div class="flex flex-col space-y-2 text-sm text-default font-medium"> <a href="/zh/about/" class="hover:text-secondary">关于</a>  </div> </div> </div> <div class="pb-0"> <div class="flex items-center justify-center w-full px-6 pt-12 text-sm"> <span class="text-muted text-xs">Copyright © <span>2020-</span> 2025 <a href="https://x.com/fatbobman" class="border-b-secondary border-b-[1px]">Fatbobman Digital Limited</a>. All Rights
            Reserved.</span> </div> <div class="flex items-center justify-center w-full px-6 pt-2 text-sm pb-10"> <span> <a href="https://beian.miit.gov.cn/#/Integrated/index" target="_blank" class="block text-xs text-muted">
辽ICP备20006550号-1
</a> </span> </div> </div> </div> </div> </footer> </footer> </div>   <!-- <script is:inline src="https://cdnjs.cloudflare.com/ajax/libs/flowbite/1.8.0/flowbite.min.js"></script> --><script type="module" src="/js/theme.js" defer></script> <script>(function(){const currentLang = "zh";

  function attachEvent(selector, event, fn) {
    const matches = typeof selector === 'string' ? document.querySelectorAll(selector) : selector;
    if (matches && matches.length) {
      matches.forEach((elem) => {
        elem.addEventListener(event, (e) => fn(e, elem), false);
      });
    }
  }

  // 为每个需要清除 focus 状态的按钮都添加一个 clear-focus 类, 下面的代码将在点击后自动移除 focus 状态
  document.addEventListener('DOMContentLoaded', (event) => {
    // 获取所有具有 'clear-focus' 类的按钮
    const buttons = document.querySelectorAll('.clear-focus');

    buttons.forEach((button) => {
      button.addEventListener('click', () => {
        setTimeout(() => {
          button.blur();
        }, 0);
      });
    });
  });

  window.onpageshow = function () {
    document.documentElement.classList.add('motion-safe:scroll-smooth');
  };
})();</script> <div id="docsearch-container-data" data-lang="zh" data-searchtext="搜索..."></div> <script src="https://cdn.jsdelivr.net/npm/@docsearch/js@3"></script> <script src="/js/runsearch.js"></script> <!-- Google Tag Manager (noscript) --><noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-5C7N4MF5" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript><!-- End Google Tag Manager (noscript) --> </body></html>