<!DOCTYPE html><html lang="zh"> <head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="sitemap" href="/sitemap-index.xml"><!-- <link rel="shortcut icon" href={iconSVG.src} /> --><link rel="icon" type="image/png" sizes="16x16" href="/_astro/favicon-16x16.2312221518-2.4YWPtmqG.png"><link rel="icon" type="image/png" sizes="32x32" href="/_astro/favicon-32x32.2312221518-2.W1M1HUWf.png"><link rel="mask-icon" href="/_astro/faviconSVG-32x32.2312221518-2.JZf4E4CU.svg"><link rel="apple-touch-icon" sizes="180x180" href="/_astro/apple-touch-icon.2312227635.RNVrzb6f.png"><title>Swifter and Swifty：掌握 Swift Testing 框架 | 肘子的 Swift 记事本</title>
<meta name="description" content="探索Swift Testing框架，了解其特性、用法和优势。本文分析其如何助您编写更Swifter、Swifty的测试代码，并提升开发效率。">
<meta name="robots" content="index,follow">
<link rel="canonical" href="https://fatbobman.com/zh/posts/mastering-the-swift-testing-framework/">
<meta property="og:title" content="Swifter and Swifty：掌握 Swift Testing 框架 | 肘子的 Swift 记事本">
<meta property="og:description" content="探索Swift Testing框架，了解其特性、用法和优势。本文分析其如何助您编写更Swifter、Swifty的测试代码，并提升开发效率。">
<meta property="og:url" content="https://fatbobman.com/zh/posts/mastering-the-swift-testing-framework/">
<meta property="og:type" content="article">
<meta property="og:image" content="https://cdn.fatbobman.com/card/mastering-the-swift-testing-framework-zh.png">

<meta property="og:locale" content="zh">
<meta property="og:site_name" content="fatbobman.com">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:site" content="@fatbobman">
<meta name="twitter:creator" content="@fatbobman"><link rel="alternate" type="application/rss+xml" title="RSS Feed for My Website" href="https://fatbobman.com/zh/rss.xml"><link rel="sitemap" href="/sitemap-index.xml"><meta name="keywords" content="Swift 编程,Swift Programming,SwiftUI 教程,SwiftUI Tutorials,Core Data 实践,Core Data Practices,SwiftData 应用,SwiftData Applications,iOS 开发,iOS Development,Swift UI 设计,Swift UI Design,Swift 性能优化,Swift Performance Optimization,Swift 编码技巧,Swift Coding Techniques,iOS 应用开发,iOS App Development,Swift 数据管理,Swift Data Management,SwiftUI 布局,SwiftUI Layout,SwiftUI 动画,SwiftUI Animation"><meta name="apple-mobile-web-app-title" content="肘子的博客"><link rel="alternate" hreflang="zh" href="https://fatbobman.com/zh/posts/mastering-the-swift-testing-framework/"><link rel="alternate" hreflang="en" href="https://fatbobman.com/en/posts/mastering-the-swift-testing-framework/"><!-- <BasicScripts /> --><!-- <script is:inline>
  var _hmt = _hmt || [];
  (function() {
    var hm = document.createElement("script");
    hm.src = "https://hm.baidu.com/hm.js?14e5d60a3ea6276655f9d14c58b1fcd0";
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(hm, s);
  })();
</script> --><!-- Google Tag Manager --><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
  new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
  j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
  'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
  })(window,document,'script','dataLayer','GTM-5C7N4MF5');</script> <!-- End Google Tag Manager --><script>
      // Immediately set theme before page renders
      if (
        localStorage.getItem('color-theme') === 'dark' ||
        (!('color-theme' in localStorage) && window.matchMedia('(prefers-color-scheme: dark)').matches)
      ) {
        document.documentElement.classList.add('dark');
      }
    </script><link rel="stylesheet" href="/_astro/about.rOE2C0dG.css" />
<link rel="stylesheet" href="/_astro/about.mDxcPTzg.css" />
<link rel="stylesheet" href="/_astro/_slug_.EbA6AM4A.css" />
<style>.sticky[data-astro-cid-4wsjtibl]{position:fixed;top:0;left:50%;transform:translate(-50%);width:100%;max-width:100%}
</style><script type="module" src="/_astro/hoisted.aDTDKmSO.js"></script></head> <body class="antialiased text-default bg-page">  <div class="flex flex-col min-h-screen justify-between "> <div> <header> <div class="bg-block" id="wholeHeader" data-astro-cid-4wsjtibl> <div id="blogTitle"> <a href="/zh/"> <div class="flex space-x-4 mx-auto text-center pt-16 sm:pt-12 font-black w-[240px] sm:w-[300px] pb-6 sm:pb-1"> <svg class="text-heading" width="337" height="63"> <use href="/images/title-fatbobman.svg#main"></use> </svg> <svg class="text-primary mt-[-6px] sm:mt-[-5px]" width="130" height="91"> <use href="/images/title-blog.svg#main"></use> </svg> </div> </a> </div> <div class="bg-block z-50 shadow-custom-light dark:shadow-custom-dark" id="stickyHeader" data-astro-cid-4wsjtibl> <div class="max-w-5xl flex flex-wrap items-center justify-between mx-auto p-2 sm:p-0" data-astro-cid-4wsjtibl> <div class="flex space-x-2" data-astro-cid-4wsjtibl> <div id="lang-data" data-lang="zh" style="display: none;"></div> <button id="language-dropdown-button" data-dropdown-toggle="language-dropdown-menu" type="button" class="p-2 w-10 h-10 font-medium text-default hover:text-secondary hover:bg-gray-100 dark:hover:bg-page focus:outline-none focus:ring-2 focus:ring-gray-200 dark:hover:bg-gray-700 dark:focus:ring-gray-600 rounded-lg"> ZH </button> <!-- Dropdown --> <div class="z-50 hidden my-4 text-base list-none bg-page divide-y divide-gray-100 rounded-lg shadow dark:bg-gray-700" id="language-dropdown-menu"> <ul class="py-2 font-medium text-sm" role="none"> <li> <a href="/en/posts/mastering-the-swift-testing-framework/" class="block px-4 py-2 text-default hover:bg-gray-100 dark:hover:bg-gray-600 dark:hover:text-white" role="menuitem"> <div class="inline-flex items-center">
English
<svg xmlns="http://www.w3.org/2000/svg" class="w-3.5 h-3.5 ml-2 hidden text-primary" id="EN-check" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M6.979 3.074a6 6 0 0 1 4.988 1.425l.037 .033l.034 -.03a6 6 0 0 1 4.733 -1.44l.246 .036a6 6 0 0 1 3.364 10.008l-.18 .185l-.048 .041l-7.45 7.379a1 1 0 0 1 -1.313 .082l-.094 -.082l-7.493 -7.422a6 6 0 0 1 3.176 -10.215z" stroke-width="0" fill="currentColor"></path></svg> </div> </a> </li> <li> <a href="" class="block px-4 py-2 text-default hover:bg-gray-100 dark:hover:bg-gray-600 dark:hover:text-white" role="menuitem"> <div class="inline-flex items-center">
中文
<svg xmlns="http://www.w3.org/2000/svg" class="w-3.5 h-3.5 ml-2 hidden text-primary" id="ZH-check" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M6.979 3.074a6 6 0 0 1 4.988 1.425l.037 .033l.034 -.03a6 6 0 0 1 4.733 -1.44l.246 .036a6 6 0 0 1 3.364 10.008l-.18 .185l-.048 .041l-7.45 7.379a1 1 0 0 1 -1.313 .082l-.094 -.082l-7.493 -7.422a6 6 0 0 1 3.176 -10.215z" stroke-width="0" fill="currentColor"></path></svg> </div> </a> </li> <li> <div class="border-t border-gray-200 dark:border-gray-800 w-4/5 mx-auto my-2"></div> <button class="block px-4 py-2 text-default hover:bg-gray-100 dark:hover:bg-gray-600 dark:hover:text-white" role="menuitem" id="set-default-lang"> <div class="inline-flex items-center"> 将中文设置为默认 </div> </button> </li> </ul> </div>  <button id="theme-dropdown-button" data-dropdown-toggle="theme-dropdown-menu" type="button" class="group p-2 w-10 h-10 text-default hover:bg-gray-100 dark:hover:bg-page focus:outline-none focus:ring-2 focus:ring-gray-200 dark:text-gray-400 dark:hover:bg-gray-700 dark:focus:ring-gray-600 rounded-lg flex items-center justify-center"> <svg viewBox="0 0 24 24" id="theme_icon_system" class="w-5 h-5 text-default fill-current group-hover:text-secondary hidden" astro-icon="tabler:device-laptop"><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" class="icon-tabler"><path d="M3 19h18"/><rect width="14" height="10" x="5" y="6" rx="1"/></g></svg> <svg viewBox="0 0 24 24" id="theme_icon_dark" class="w-5 h-5 text-default fill-current group-hover:text-secondary hidden" astro-icon="tabler:moon"><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 3h.393a7.5 7.5 0 0 0 7.92 12.446A9 9 0 1 1 12 2.992z"/></svg> <svg viewBox="0 0 24 24" id="theme_icon_light" class="w-5 h-5 text-default fill-current group-hover:text-secondary hidden" astro-icon="tabler:sun"><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" class="icon-tabler"><circle cx="12" cy="12" r="4"/><path d="M3 12h1m8-9v1m8 8h1m-9 8v1M5.6 5.6l.7.7m12.1-.7-.7.7m0 11.4.7.7m-12.1-.7-.7.7"/></g></svg> </button> <!-- Dropdown --> <div class="z-50 hidden my-4 text-base list-none bg-white divide-y divide-gray-100 rounded-lg shadow dark:bg-gray-700" id="theme-dropdown-menu"> <ul class="py-2 font-medium" role="none"> <li class="hover:bg-gray-100 dark:hover:bg-gray-600"> <button class="flex px-4 py-2 text-sm align-text-center dark:hover:text-white text-default" id="theme_button_light"> <svg viewBox="0 0 24 24" class="w-5 h-5 fill-current" astro-icon="tabler:sun"><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" class="icon-tabler"><circle cx="12" cy="12" r="4"/><path d="M3 12h1m8-9v1m8 8h1m-9 8v1M5.6 5.6l.7.7m12.1-.7-.7.7m0 11.4.7.7m-12.1-.7-.7.7"/></g></svg> <span class="ml-2 dark:hover:text-white">Light</span> </button> </li> <li class="hover:bg-gray-100 dark:hover:bg-gray-600"> <button class="flex px-4 py-2 text-sm align-text-center dark:hover:text-white text-default" id="theme_button_dark"> <svg viewBox="0 0 24 24" class="w-5 h-5" astro-icon="tabler:moon"><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 3h.393a7.5 7.5 0 0 0 7.92 12.446A9 9 0 1 1 12 2.992z"/></svg> <span class="ml-2 text-default dark:hover:text-white">Dark</span> </button> </li> <li class="hover:bg-gray-100 dark:hover:bg-gray-600"> <button class="flex px-4 py-2 text-sm align-text-center dark:hover:text-white text-default" id="theme_button_system"> <svg viewBox="0 0 24 24" class="w-5 h-5" astro-icon="tabler:device-laptop"><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" class="icon-tabler"><path d="M3 19h18"/><rect width="14" height="10" x="5" y="6" rx="1"/></g></svg> <span class="ml-2 dark:hover:text-white">System</span> </button> </li> </ul> </div> <script>
  (async () => {
    const { setTheme } = await import('/js/theme.js');
    // Use setTheme here
    // Change the icons inside the button based on previous settings
    // 如果 localStorage 里面有设置过 color-theme 的值, 则 themeToggleSystemIcon.classList.remove('hidden')
    function setThemeButton() {
      let theme = localStorage.getItem('color-theme');
      if (theme === 'dark') {
        themeToggleDarkIcon.classList.remove('hidden');
        themeToggleLightIcon.classList.add('hidden');
        themeToggleSystemIcon.classList.add('hidden');
      } else if (theme === 'light') {
        themeToggleDarkIcon.classList.add('hidden');
        themeToggleLightIcon.classList.remove('hidden');
        themeToggleSystemIcon.classList.add('hidden');
      } else {
        themeToggleDarkIcon.classList.add('hidden');
        themeToggleLightIcon.classList.add('hidden');
        themeToggleSystemIcon.classList.remove('hidden');
      }
    }

    // 监听暗黑模式的变化
    window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', (event) => {
      setThemeButton();
    });

    // 保证其他的页面也能够监听到 localStorage 的变化
    window.addEventListener('storage', function (event) {
      if (event.key === 'color-theme') {
        setThemeButton();
      }
    });

    function resetTheme() {
      setTheme();
      setThemeButton();
    }

    // 获取按钮
    var themeButtonLight = document.getElementById('theme_button_light');
    var themeButtonDark = document.getElementById('theme_button_dark');
    var themeButtonSystem = document.getElementById('theme_button_system');
    // 获取图标
    var themeToggleDarkIcon = document.getElementById('theme_icon_dark');
    var themeToggleLightIcon = document.getElementById('theme_icon_light');
    var themeToggleSystemIcon = document.getElementById('theme_icon_system');

    // Listen for clicks on the button themeToggleDarkIcon
    themeButtonDark.addEventListener('click', function () {
      localStorage.setItem('color-theme', 'dark');
      resetTheme();
    });

    // // Listen for clicks on the button themeToggleLightIcon
    themeButtonLight.addEventListener('click', function () {
      localStorage.setItem('color-theme', 'light');
      resetTheme();
    });

    // // Listen for clicks on the button themeToggleSystemIcon
    themeButtonSystem.addEventListener('click', function () {
      localStorage.removeItem('color-theme');
      resetTheme();
    });

    resetTheme();
  })();
</script> <div id="docsearch" class="group w-10 h-10 text-default hover:bg-gray-100 dark:hover:bg-page focus:outline-none focus:ring-2 focus:ring-gray-200 dark:text-gray-400 dark:hover:bg-gray-700 dark:focus:ring-gray-600 rounded-lg flex items-center justify-center"> <svg width="20" height="20" viewBox="0 0 20 20" aria-hidden="true" class="DocSearch-Search-Icon"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg> </div> </div> <button data-collapse-toggle="navbar-solid-bg" type="button" class="inline-flex items-center p-2 mx-2 w-10 h-10 justify-center text-sm text-gray-500 rounded-lg md:hidden hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-gray-200 dark:text-gray-400 dark:hover:bg-gray-700 dark:focus:ring-gray-600" aria-controls="navbar-solid-bg" aria-expanded="false" id="navbar-toggle-button"> <span class="sr-only">Open main menu</span> <svg class="w-5 h-5 text-default" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 17 14"> <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M1 1h15M1 7h15M1 13h15"></path> </svg> </button> <nav class="hidden w-full md:block md:w-auto px-4 z-40" id="navbar-solid-bg"> <ul class="flex flex-col font-bold mt-4 rounded-lg bg-gray-50 md:space-x-8 rtl:space-x-reverse md:flex-row md:mt-0 md:border-0 md:bg-transparent dark:bg-gray-800 md:dark:bg-transparent dark:border-gray-700"> <a href="/zh/" class="block py-2 px-3 md:p-0 rounded  text-heading md:hover:text-secondary hover:bg-gray-100 dark:hover:bg-gray-700 md:hover:bg-transparent md:dark:hover:bg-transparent"> 首页 </a><a href="/zh/posts/" class="block py-2 px-3 md:p-0 rounded text-invert bg-secondary md:bg-transparent md:text-secondary md:dark:bg-transparent" aria-current="page"> 文章 </a><a href="/zh/weekly/" class="block py-2 px-3 md:p-0 rounded  text-heading md:hover:text-secondary hover:bg-gray-100 dark:hover:bg-gray-700 md:hover:bg-transparent md:dark:hover:bg-transparent"> 周报 </a><a href="/zh/snippet/" class="block py-2 px-3 md:p-0 rounded  text-heading md:hover:text-secondary hover:bg-gray-100 dark:hover:bg-gray-700 md:hover:bg-transparent md:dark:hover:bg-transparent"> 小贴士 </a><a href="/zh/about/" class="block py-2 px-3 md:p-0 rounded  text-heading md:hover:text-secondary hover:bg-gray-100 dark:hover:bg-gray-700 md:hover:bg-transparent md:dark:hover:bg-transparent"> 关于 </a> </ul> </nav>  </div> </div> <div id="placeholder" class="hidden" data-astro-cid-4wsjtibl></div> </div> <script>(function(){const enableSticky = true;
const enableStickyInMobile = true;

  window.onload = function () {
    checkStickyHeader();
    stickySetup();
  };

  window.addEventListener('resize', stickySetup);

  function checkStickyHeader() {
    const title = document.getElementById('blogTitle');
    const stickyHeader = document.getElementById('stickyHeader');
    const placeholder = document.getElementById('placeholder');

    if (title && stickyHeader && placeholder) {
      const offset = title.offsetTop + title.offsetHeight;

      if (shouldStick() && window.scrollY >= offset) {
        stickyHeader.classList.add('sticky');
        placeholder.style.display = 'block';
        placeholder.style.height = `${stickyHeader.offsetHeight}px`;
      } else {
        stickyHeader.classList.remove('sticky');
        placeholder.style.display = 'none';
      }
    }
  }

  function shouldStick() {
    if (!enableSticky) return false;

    let isMobile = window.matchMedia('(max-width: 640px)').matches;
    if (isMobile && !enableStickyInMobile) return false;

    return true;
  }

  function stickySetup() {
    window.onscroll = checkStickyHeader;
  }
})();</script>  </header> <main class="w-full mx-auto max-w-3xl p-4 md:p-6 "> <div class="container mx-auto space-y-6 sm:space-y-12">   <div class="mx-auto space-y-4 text-center py-10" style="width:80%"> <div class="flex mx-auto justify-center"> <div class="flex mx-auto justify-center"> <a class="text-xs font-medium sm:font-semibold mx-2 text-muted hover:text-secondary" href="/zh/tags/Frameworks/">
#Frameworks </a><a class="text-xs font-medium sm:font-semibold mx-2 text-muted hover:text-secondary" href="/zh/tags/Swift/">
#Swift </a> <a class="text-xs font-medium sm:font-semibold mx-2 text-muted hover:text-secondary" href="/en/posts/mastering-the-swift-testing-framework/" id="language-switcher-for-topic"> #English </a> </div> </div> <h1 class="text-2xl font-bold leadi md:text-3xl text-heading">Swifter and Swifty：掌握 Swift Testing 框架</h1> <p class="text-sm text-default"> <a itemprop="author" href="https://x.com/intent/follow?screen_name=fatbobman" target="_blank" class="hover:text-secondary font-medium">东坡肘子</a> <!-- <time datetime={`${post.data.publishDate.toISOString()}`}>{date}</time> --> </p> <p class="text-xs text-muted"> 发表于 <time datetime="2024-07-03T00:12:00.000Z">2024 年 7 月 3 日</time>  </p> </div> <svg style="display: none;"> <symbol id="icon-clipboard" viewBox="0 0 1024 1024"> <path d="M426.666667 42.666667l170.666667 0q41.344 0 74.325333 23.850667t46.336 61.482667l50.005333 0q52.992 0 90.496 37.504t37.504 90.496l0 597.333333q0 52.992-37.504 90.496t-90.496 37.504l-512 0q-52.992 0-90.496-37.504t-37.504-90.496l0-597.333333q0-52.992 37.504-90.496t90.496-37.504l50.005333 0q13.312-37.674667 46.336-61.482667t74.325333-23.850667zM768 213.333333l-50.005333 0q-13.312 37.674667-46.336 61.482667t-74.325333 23.850667l-170.666667 0q-41.344 0-74.325333-23.850667t-46.336-61.482667l-50.005333 0q-17.664 0-30.165333 12.501333t-12.501333 30.165333l0 597.333333q0 17.664 12.501333 30.165333t30.165333 12.501333l512 0q17.664 0 30.165333-12.501333t12.501333-30.165333l0-597.333333q0-17.664-12.501333-30.165333t-30.165333-12.501333zM597.333333 128l-170.666667 0q-17.664 0-30.165333 12.501333t-12.501333 30.165333 12.501333 30.165333 30.165333 12.501333l170.666667 0q17.664 0 30.165333-12.501333t12.501333-30.165333-12.501333-30.165333-30.165333-12.501333z"></path> </symbol> <symbol id="icon-check" viewBox="0 0 1024 1024"> <path d="M421.858 683.366l401.796-448.518c18.66-20.828 50.668-22.586 71.498-3.928 20.828 18.66 22.586 50.67 3.928 71.498L463.638 788.494c-18.606 20.768-50.5 22.586-71.344 4.066l-263.29-233.924c-20.906-18.572-22.796-50.576-4.222-71.48 18.574-20.906 50.576-22.796 71.48-4.222L421.86 683.366z"></path> </symbol> </svg> <div class="relative" id="article-area"> <article class="prose dark:prose-invert mx-auto w-full"> <div> 
<p>自 Swift 语言诞生以来，XCTest 一直是绝大多数 Swift 开发者的首选测试框架。然而，由于其深植于 Objective-C 的根基，API 设计大量沿袭了该语言的传统，无法充分体现 Swift 的现代编程最佳实践。在某些方面，这甚至成为了发展的障碍。为了克服这些限制，苹果在 WWDC 2024 上正式介绍了由社区开发的 Swift Testing —— 一个专门为 Swift 语言设计的全新测试框架。这个框架已被集成到 Xcode 16 中，并被定位为官方首选的测试工具。在本文中，我们将深入探讨 Swift Testing 框架的特性、用法和其独特之处，分析它如何帮助开发者以更快（Swifter）的方式编写出更符合 Swift 编程习惯（Swifty）的测试代码。</p>
<div class="dynamic-ad-container pt-4"></div>
<h2 id="配置和使用-swift-testing">配置和使用 Swift Testing</h2>
<p>本章将带你了解如何在不同环境下设置和运行 Swift Testing，以及如何编写你的第一个测试用例。</p>
<h3 id="在-xcode-项目中集成-swift-testing">在 Xcode 项目中集成 Swift Testing</h3>
<p>Swift Testing 已被无缝集成到 Xcode 16 中，成为官方首推的测试框架。在创建新项目时，你可以轻松选择 Swift Testing 作为默认测试框架，如下图所示：</p>
<p><picture>
                    <source media="(max-width: 479px)" srcset="https://cdn.fatbobman.com/image-20240627091747662.webp?imageView2/0/w/500"/>
                    <source media="(max-width: 767px)" srcset="https://cdn.fatbobman.com/image-20240627091747662.webp?imageView2/0/w/768"/>
                    <source media="(max-width: 1024px)" srcset="https://cdn.fatbobman.com/image-20240627091747662.webp?imageView2/0/w/1024"/>
                    <img src="https://cdn.fatbobman.com/image-20240627091747662.webp" alt="create-swift-testing-project" loading="lazy" decoding="async"/>
                  </picture></p>
<p>作为 Swift 6 工具链的组件，Swift Testing 无需额外的依赖声明即可直接使用，大大简化了配置流程。</p>
<p>对于 Swift Package，Swift Testing 同样提供了直接支持。在创建新的 Package 时，可以直接选择 Swift Testing 框架：</p>
<p><picture>
                    <source media="(max-width: 479px)" srcset="https://cdn.fatbobman.com/image-20240627091942673.webp?imageView2/0/w/500"/>
                    <source media="(max-width: 767px)" srcset="https://cdn.fatbobman.com/image-20240627091942673.webp?imageView2/0/w/768"/>
                    <source media="(max-width: 1024px)" srcset="https://cdn.fatbobman.com/image-20240627091942673.webp?imageView2/0/w/1024"/>
                    <img src="https://cdn.fatbobman.com/image-20240627091942673.webp" alt="create-swift-testing-package" loading="lazy" decoding="async"/>
                  </picture></p>
<h4 id="在-vscode-中配置-swift-testing">在 VSCode 中配置 Swift Testing</h4>
<p>为了照顾使用其他开发环境的开发者，Swift Server Work Group 为 VSCode 用户提供了完善的支持。通过其开发的 <a href="https://marketplace.visualstudio.com/items?itemName=sswg.swift-lang?&#38;utm_source=Fatbobman%20Blog&#38;utm_medium=web&#38;utm_campaign=Fatbobman%20Blog" rel="noreferrer noopener">VSCode 插件</a>，在 Swift 6 环境下，Swift Testing 可以实现真正的即插即用体验。</p>
<p><picture>
                    <source media="(max-width: 479px)" srcset="https://cdn.fatbobman.com/image-20240627093137909.webp?imageView2/0/w/500"/>
                    <source media="(max-width: 767px)" srcset="https://cdn.fatbobman.com/image-20240627093137909.webp?imageView2/0/w/768"/>
                    <source media="(max-width: 1024px)" srcset="https://cdn.fatbobman.com/image-20240627093137909.webp?imageView2/0/w/1024"/>
                    <img src="https://cdn.fatbobman.com/image-20240627093137909.webp" alt="swift-testing-demo1" loading="lazy" decoding="async"/>
                  </picture></p>
<h3 id="命令行下的-swift-testing">命令行下的 Swift Testing</h3>
<p>值得注意的是，截至 Xcode 16 beta2 版本，命令行中的 <code>swift test</code> 命令默认仍使用 XCTest 框架。要启用 Swift Testing，需要添加特定参数：</p>
<div>
        <div class="flex justify-between items-center h-8 font-medium bg-[#96744d] dark:bg-[#002565] text-gray-200 text-xs rounded-tl-md rounded-tr-md">
          <span class="px-4 py-1">Shell</span>
          <button class="copy-button py-1 px-4" onclick="copyCode(this, event)">
          <div class="copy-text">
            <span class="flex items-center justify-center sm:hover:text-white sm:hover:font-bold">
              <svg class="w-3 h-3 mr-1" fill="currentColor" stroke="currentColor">
                <use xlink:href="#icon-clipboard"></use>
              </svg>
            Copy code
            </span>
          </div>
          <div class="copied-text hidden">
            <span class="flex items-center justify-center">
              <svg class="w-3 h-3 mr-1" fill="currentColor" stroke="currentColor">
                  <use xlink:href="#icon-check"></use>
             </svg>
              Copied!
            </span>
          </div>
        </button>
        </div>
      <pre class="astro-code dracula" style="background-color:#282A36;color:#F8F8F2;overflow-x:auto" tabindex="0"><code><span class="line"><span style="color:#50FA7B">swift</span><span style="color:#F1FA8C"> test</span><span style="color:#BD93F9"> --enable-swift-testing</span></span></code></pre></div>
<p>添加此参数后，将确保执行基于 Swift Testing 框架的测试代码：</p>
<p><picture>
                    <source media="(max-width: 479px)" srcset="https://cdn.fatbobman.com/image-20240627094842368.webp?imageView2/0/w/500"/>
                    <source media="(max-width: 767px)" srcset="https://cdn.fatbobman.com/image-20240627094842368.webp?imageView2/0/w/768"/>
                    <source media="(max-width: 1024px)" srcset="https://cdn.fatbobman.com/image-20240627094842368.webp?imageView2/0/w/1024"/>
                    <img src="https://cdn.fatbobman.com/image-20240627094842368.webp" alt="run-swift-testing-in-shell" loading="lazy" decoding="async"/>
                  </picture></p>
<h3 id="编写你的第一个-swift-testing-测试用例">编写你的第一个 Swift Testing 测试用例</h3>
<p>Swift Testing 的语法比 XCTest 更加简洁明了。以下是一个基本的用户名检查测试用例：</p>
<div>
        <div class="flex justify-between items-center h-8 font-medium bg-[#96744d] dark:bg-[#002565] text-gray-200 text-xs rounded-tl-md rounded-tr-md">
          <span class="px-4 py-1">Swift</span>
          <button class="copy-button py-1 px-4" onclick="copyCode(this, event)">
          <div class="copy-text">
            <span class="flex items-center justify-center sm:hover:text-white sm:hover:font-bold">
              <svg class="w-3 h-3 mr-1" fill="currentColor" stroke="currentColor">
                <use xlink:href="#icon-clipboard"></use>
              </svg>
            Copy code
            </span>
          </div>
          <div class="copied-text hidden">
            <span class="flex items-center justify-center">
              <svg class="w-3 h-3 mr-1" fill="currentColor" stroke="currentColor">
                  <use xlink:href="#icon-check"></use>
             </svg>
              Copied!
            </span>
          </div>
        </button>
        </div>
      <pre class="astro-code dracula" style="background-color:#282A36;color:#F8F8F2;overflow-x:auto" tabindex="0"><code><span class="line"><span style="color:#FF79C6">@testable</span><span style="color:#FF79C6"> import</span><span style="color:#8BE9FD;font-style:italic"> Demo1</span></span>
<span class="line"><span style="color:#FF79C6">import</span><span style="color:#8BE9FD;font-style:italic"> Testing</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FF79C6">@Test</span><span style="color:#FF79C6"> func</span><span style="color:#50FA7B"> checkName</span><span style="color:#F8F8F2">() </span><span style="color:#FF79C6">async</span><span style="color:#FF79C6"> throws</span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#FF79C6">  let</span><span style="color:#F8F8F2"> fat </span><span style="color:#FF79C6">=</span><span style="color:#F8F8F2"> People.fat</span></span>
<span class="line"><span style="color:#F8F8F2">  #</span><span style="color:#8BE9FD">expect</span><span style="color:#F8F8F2">(fat.name </span><span style="color:#FF79C6">==</span><span style="color:#E9F284"> &quot;</span><span style="color:#F1FA8C">fat</span><span style="color:#E9F284">&quot;</span><span style="color:#F8F8F2">)</span></span>
<span class="line"><span style="color:#F8F8F2">}</span></span></code></pre></div>
<p>这段代码展示了 Swift Testing 的几个特性：</p>
<ul>
<li>使用 <code>import Testing</code> 引入框架</li>
<li><code>@Test</code> 宏标记测试函数</li>
<li>支持全局函数形式的测试代码</li>
<li>测试函数命名灵活，无特殊限制</li>
</ul>
<p>在 Xcode 的测试导航栏中，你可以找到并运行这个测试用例：</p>
<p><picture>
                    <source media="(max-width: 479px)" srcset="https://cdn.fatbobman.com/image-20240627101417328.webp?imageView2/0/w/500"/>
                    <source media="(max-width: 767px)" srcset="https://cdn.fatbobman.com/image-20240627101417328.webp?imageView2/0/w/768"/>
                    <source media="(max-width: 1024px)" srcset="https://cdn.fatbobman.com/image-20240627101417328.webp?imageView2/0/w/1024"/>
                    <img src="https://cdn.fatbobman.com/image-20240627101417328.webp" alt="swift-testing-demo2" loading="lazy" decoding="async"/>
                  </picture></p>
<p>为提高可读性，Swift Testing 允许你为测试用例添加描述性名称：</p>
<div>
        <div class="flex justify-between items-center h-8 font-medium bg-[#96744d] dark:bg-[#002565] text-gray-200 text-xs rounded-tl-md rounded-tr-md">
          <span class="px-4 py-1">Swift</span>
          <button class="copy-button py-1 px-4" onclick="copyCode(this, event)">
          <div class="copy-text">
            <span class="flex items-center justify-center sm:hover:text-white sm:hover:font-bold">
              <svg class="w-3 h-3 mr-1" fill="currentColor" stroke="currentColor">
                <use xlink:href="#icon-clipboard"></use>
              </svg>
            Copy code
            </span>
          </div>
          <div class="copied-text hidden">
            <span class="flex items-center justify-center">
              <svg class="w-3 h-3 mr-1" fill="currentColor" stroke="currentColor">
                  <use xlink:href="#icon-check"></use>
             </svg>
              Copied!
            </span>
          </div>
        </button>
        </div>
      <pre class="astro-code dracula" style="background-color:#282A36;color:#F8F8F2;overflow-x:auto" tabindex="0"><code><span class="line"><span style="color:#FF79C6">@Test</span><span style="color:#F8F8F2">(</span><span style="color:#E9F284">&quot;</span><span style="color:#F1FA8C">检查姓名</span><span style="color:#E9F284">&quot;</span><span style="color:#F8F8F2">) </span><span style="color:#FF79C6">func</span><span style="color:#50FA7B"> checkName</span><span style="color:#F8F8F2">() </span><span style="color:#FF79C6">async</span><span style="color:#FF79C6"> throws</span><span style="color:#F8F8F2"> {</span></span></code></pre></div>
<p>这样，测试导航栏中将显示更易理解的测试名称：</p>
<p><picture>
                    <source media="(max-width: 479px)" srcset="https://cdn.fatbobman.com/image-20240627101859968.webp?imageView2/0/w/500"/>
                    <source media="(max-width: 767px)" srcset="https://cdn.fatbobman.com/image-20240627101859968.webp?imageView2/0/w/768"/>
                    <source media="(max-width: 1024px)" srcset="https://cdn.fatbobman.com/image-20240627101859968.webp?imageView2/0/w/1024"/>
                    <img src="https://cdn.fatbobman.com/image-20240627101859968.webp" alt="custom-swift-testing-display-name" loading="lazy" decoding="async"/>
                  </picture></p>
<p>通过这些简单步骤，你已经成功配置并编写了第一个 Swift Testing 测试用例。接下来的章节将探讨 Swift Testing 的更多高级特性，帮助你充分利用这个强大的测试框架。</p>
<h2 id="预期expectations">预期（Expectations）</h2>
<blockquote>
<p>在编写测试时，库通常提供了用于比较值的 API —— 例如，验证一个函数是否返回了预期的结果。若比较结果不成功，则报告为测试失败。这些 API 在不同的库中可能被称作“断言（assertions）”、“预期（expectations）”、“检查（checks）”、“要求（requirements）”、“匹配器（matchers）”等。在 Swift Testing 中称之为 <strong>Expectations</strong>。</p>
</blockquote>
<h3 id="expect-宏">#expect 宏</h3>
<p>不同于 XCTest 拥有超过 40 个断言函数，Swift Testing 旨在尽可能地简化开发者的学习曲线，并提供更多的灵活性。利用 Swift 强大的语言表达能力，在 Swift Testing 中，开发者大多数情况下只需将预期表达为一个布尔表达式，并通过 <code>#expect</code> 宏进行验证。</p>
<div>
        <div class="flex justify-between items-center h-8 font-medium bg-[#96744d] dark:bg-[#002565] text-gray-200 text-xs rounded-tl-md rounded-tr-md">
          <span class="px-4 py-1">Swift</span>
          <button class="copy-button py-1 px-4" onclick="copyCode(this, event)">
          <div class="copy-text">
            <span class="flex items-center justify-center sm:hover:text-white sm:hover:font-bold">
              <svg class="w-3 h-3 mr-1" fill="currentColor" stroke="currentColor">
                <use xlink:href="#icon-clipboard"></use>
              </svg>
            Copy code
            </span>
          </div>
          <div class="copied-text hidden">
            <span class="flex items-center justify-center">
              <svg class="w-3 h-3 mr-1" fill="currentColor" stroke="currentColor">
                  <use xlink:href="#icon-check"></use>
             </svg>
              Copied!
            </span>
          </div>
        </button>
        </div>
      <pre class="astro-code dracula" style="background-color:#282A36;color:#F8F8F2;overflow-x:auto" tabindex="0"><code><span class="line"><span style="color:#FF79C6">let</span><span style="color:#F8F8F2"> x </span><span style="color:#FF79C6">=</span><span style="color:#BD93F9"> 2</span></span>
<span class="line"><span style="color:#F8F8F2">#</span><span style="color:#8BE9FD">expect</span><span style="color:#F8F8F2">(x </span><span style="color:#FF79C6">&lt;</span><span style="color:#BD93F9"> 1</span><span style="color:#F8F8F2">)  </span><span style="color:#6272A4">// failed: (x → 2) &lt; 1</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FF79C6">let</span><span style="color:#F8F8F2"> a </span><span style="color:#FF79C6">=</span><span style="color:#F8F8F2"> [</span><span style="color:#BD93F9">1</span><span style="color:#F8F8F2">, </span><span style="color:#BD93F9">2</span><span style="color:#F8F8F2">, </span><span style="color:#BD93F9">3</span><span style="color:#F8F8F2">]</span></span>
<span class="line"><span style="color:#FF79C6">let</span><span style="color:#F8F8F2"> b </span><span style="color:#FF79C6">=</span><span style="color:#BD93F9"> 4</span></span>
<span class="line"><span style="color:#F8F8F2">#</span><span style="color:#8BE9FD">expect</span><span style="color:#F8F8F2">(a.</span><span style="color:#8BE9FD">contains</span><span style="color:#F8F8F2">(b)) </span><span style="color:#6272A4">// failed: (a → [1, 2, 3]) does not contain (b → 4)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FF79C6">let</span><span style="color:#F8F8F2"> str </span><span style="color:#FF79C6">=</span><span style="color:#E9F284"> &quot;</span><span style="color:#F1FA8C">fatbobman</span><span style="color:#E9F284">&quot;</span></span>
<span class="line"><span style="color:#F8F8F2">#</span><span style="color:#8BE9FD">expect</span><span style="color:#F8F8F2">(str.</span><span style="color:#BD93F9">count</span><span style="color:#FF79C6"> &gt;</span><span style="color:#BD93F9"> 5</span><span style="color:#F8F8F2">) </span><span style="color:#6272A4">// success </span></span>
<span class="line"></span>
<span class="line"><span style="color:#FF79C6">let</span><span style="color:#F8F8F2"> array1 </span><span style="color:#FF79C6">=</span><span style="color:#F8F8F2"> [</span><span style="color:#BD93F9">1</span><span style="color:#F8F8F2">, </span><span style="color:#BD93F9">2</span><span style="color:#F8F8F2">, </span><span style="color:#BD93F9">3</span><span style="color:#F8F8F2">, </span><span style="color:#BD93F9">4</span><span style="color:#F8F8F2">, </span><span style="color:#BD93F9">5</span><span style="color:#F8F8F2">]</span></span>
<span class="line"><span style="color:#FF79C6">let</span><span style="color:#F8F8F2"> array2 </span><span style="color:#FF79C6">=</span><span style="color:#F8F8F2"> [</span><span style="color:#BD93F9">1</span><span style="color:#F8F8F2">, </span><span style="color:#BD93F9">2</span><span style="color:#F8F8F2">, </span><span style="color:#BD93F9">3</span><span style="color:#F8F8F2">, </span><span style="color:#BD93F9">3</span><span style="color:#F8F8F2">, </span><span style="color:#BD93F9">4</span><span style="color:#F8F8F2">, </span><span style="color:#BD93F9">5</span><span style="color:#F8F8F2">]</span></span>
<span class="line"><span style="color:#F8F8F2">#</span><span style="color:#8BE9FD">expect</span><span style="color:#F8F8F2">(array1 </span><span style="color:#FF79C6">==</span><span style="color:#F8F8F2"> array2) </span><span style="color:#6272A4">// failed: (array1 → [1, 2, 3, 4, 5]) != (array2 → [1, 2, 3, 3, 4, 5])</span></span></code></pre></div>
<p><code>#expect</code> 还支持多种用于捕获异常场景的形式：</p>
<ul>
<li><strong>不应抛出错误</strong></li>
</ul>
<div>
        <div class="flex justify-between items-center h-8 font-medium bg-[#96744d] dark:bg-[#002565] text-gray-200 text-xs rounded-tl-md rounded-tr-md">
          <span class="px-4 py-1">Swift</span>
          <button class="copy-button py-1 px-4" onclick="copyCode(this, event)">
          <div class="copy-text">
            <span class="flex items-center justify-center sm:hover:text-white sm:hover:font-bold">
              <svg class="w-3 h-3 mr-1" fill="currentColor" stroke="currentColor">
                <use xlink:href="#icon-clipboard"></use>
              </svg>
            Copy code
            </span>
          </div>
          <div class="copied-text hidden">
            <span class="flex items-center justify-center">
              <svg class="w-3 h-3 mr-1" fill="currentColor" stroke="currentColor">
                  <use xlink:href="#icon-check"></use>
             </svg>
              Copied!
            </span>
          </div>
        </button>
        </div>
      <pre class="astro-code dracula" style="background-color:#282A36;color:#F8F8F2;overflow-x:auto" tabindex="0"><code><span class="line"><span style="color:#FF79C6">let</span><span style="color:#F8F8F2"> age </span><span style="color:#FF79C6">=</span><span style="color:#BD93F9"> 10</span></span>
<span class="line"><span style="color:#F8F8F2">#</span><span style="color:#8BE9FD">expect</span><span style="color:#F8F8F2">(</span><span style="color:#8BE9FD">throws</span><span style="color:#F8F8F2">: </span><span style="color:#BD93F9">Never</span><span style="color:#F8F8F2">.</span><span style="color:#FF79C6">self</span><span style="color:#F8F8F2">) { </span><span style="color:#6272A4">// Expectation failed: an error was thrown when none was expected: &quot;err1&quot; of type MyError</span></span>
<span class="line"><span style="color:#FF79C6">  if</span><span style="color:#F8F8F2"> age </span><span style="color:#FF79C6">&gt;</span><span style="color:#BD93F9"> 0</span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#FF79C6">    throw</span><span style="color:#F8F8F2"> MyError.err1</span></span>
<span class="line"><span style="color:#F8F8F2">  }</span></span>
<span class="line"><span style="color:#F8F8F2">}</span></span></code></pre></div>
<ul>
<li><strong>必须抛出错误（任意错误类型）</strong></li>
</ul>
<div>
        <div class="flex justify-between items-center h-8 font-medium bg-[#96744d] dark:bg-[#002565] text-gray-200 text-xs rounded-tl-md rounded-tr-md">
          <span class="px-4 py-1">Swift</span>
          <button class="copy-button py-1 px-4" onclick="copyCode(this, event)">
          <div class="copy-text">
            <span class="flex items-center justify-center sm:hover:text-white sm:hover:font-bold">
              <svg class="w-3 h-3 mr-1" fill="currentColor" stroke="currentColor">
                <use xlink:href="#icon-clipboard"></use>
              </svg>
            Copy code
            </span>
          </div>
          <div class="copied-text hidden">
            <span class="flex items-center justify-center">
              <svg class="w-3 h-3 mr-1" fill="currentColor" stroke="currentColor">
                  <use xlink:href="#icon-check"></use>
             </svg>
              Copied!
            </span>
          </div>
        </button>
        </div>
      <pre class="astro-code dracula" style="background-color:#282A36;color:#F8F8F2;overflow-x:auto" tabindex="0"><code><span class="line"><span style="color:#FF79C6">let</span><span style="color:#F8F8F2"> age </span><span style="color:#FF79C6">=</span><span style="color:#BD93F9"> 10</span></span>
<span class="line"><span style="color:#F8F8F2">#</span><span style="color:#8BE9FD">expect</span><span style="color:#F8F8F2">(</span><span style="color:#8BE9FD">throws</span><span style="color:#F8F8F2">: (any </span><span style="color:#8BE9FD;font-style:italic">Error</span><span style="color:#F8F8F2">).</span><span style="color:#FF79C6">self</span><span style="color:#F8F8F2">) { </span><span style="color:#6272A4">// Expectation failed: an error was expected but none was thrown</span></span>
<span class="line"><span style="color:#FF79C6">  if</span><span style="color:#F8F8F2"> age </span><span style="color:#FF79C6">&lt;</span><span style="color:#BD93F9"> 10</span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#FF79C6">    throw</span><span style="color:#F8F8F2"> MyError.err1</span></span>
<span class="line"><span style="color:#F8F8F2">  }</span></span>
<span class="line"><span style="color:#F8F8F2">}</span></span></code></pre></div>
<ul>
<li><strong>必须抛出指定的错误（错误类型应符合 <code>Equatable</code> 协议）</strong></li>
</ul>
<div>
        <div class="flex justify-between items-center h-8 font-medium bg-[#96744d] dark:bg-[#002565] text-gray-200 text-xs rounded-tl-md rounded-tr-md">
          <span class="px-4 py-1">Swift</span>
          <button class="copy-button py-1 px-4" onclick="copyCode(this, event)">
          <div class="copy-text">
            <span class="flex items-center justify-center sm:hover:text-white sm:hover:font-bold">
              <svg class="w-3 h-3 mr-1" fill="currentColor" stroke="currentColor">
                <use xlink:href="#icon-clipboard"></use>
              </svg>
            Copy code
            </span>
          </div>
          <div class="copied-text hidden">
            <span class="flex items-center justify-center">
              <svg class="w-3 h-3 mr-1" fill="currentColor" stroke="currentColor">
                  <use xlink:href="#icon-check"></use>
             </svg>
              Copied!
            </span>
          </div>
        </button>
        </div>
      <pre class="astro-code dracula" style="background-color:#282A36;color:#F8F8F2;overflow-x:auto" tabindex="0"><code><span class="line"><span style="color:#FF79C6">enum</span><span style="color:#8BE9FD;font-style:italic"> MyError</span><span style="color:#F8F8F2">: Error, Equatable {</span></span>
<span class="line"><span style="color:#FF79C6">  case</span><span style="color:#F8F8F2"> err1</span></span>
<span class="line"><span style="color:#FF79C6">  case</span><span style="color:#8BE9FD"> err2</span><span style="color:#F8F8F2">(</span><span style="color:#8BE9FD;font-style:italic">Int</span><span style="color:#F8F8F2">)</span></span>
<span class="line"><span style="color:#F8F8F2">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FF79C6">let</span><span style="color:#F8F8F2"> age </span><span style="color:#FF79C6">=</span><span style="color:#BD93F9"> 10</span></span>
<span class="line"><span style="color:#F8F8F2">#</span><span style="color:#8BE9FD">expect</span><span style="color:#F8F8F2">(</span><span style="color:#8BE9FD">throws</span><span style="color:#F8F8F2">: MyError.err1) { </span><span style="color:#6272A4">// Expectation failed: expected error &quot;err1&quot; of type MyError, but &quot;err2(10)&quot; of type MyError was thrown</span></span>
<span class="line"><span style="color:#FF79C6">  if</span><span style="color:#F8F8F2"> age </span><span style="color:#FF79C6">&gt;</span><span style="color:#BD93F9"> 5</span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#FF79C6">    throw</span><span style="color:#F8F8F2"> MyError.</span><span style="color:#8BE9FD">err2</span><span style="color:#F8F8F2">(age)</span></span>
<span class="line"><span style="color:#F8F8F2">  }</span></span>
<span class="line"><span style="color:#F8F8F2">}</span></span></code></pre></div>
<ul>
<li><strong>必须抛出错误，并根据错误捕获逻辑的布尔返回值进行判断</strong></li>
</ul>
<div>
        <div class="flex justify-between items-center h-8 font-medium bg-[#96744d] dark:bg-[#002565] text-gray-200 text-xs rounded-tl-md rounded-tr-md">
          <span class="px-4 py-1">Swift</span>
          <button class="copy-button py-1 px-4" onclick="copyCode(this, event)">
          <div class="copy-text">
            <span class="flex items-center justify-center sm:hover:text-white sm:hover:font-bold">
              <svg class="w-3 h-3 mr-1" fill="currentColor" stroke="currentColor">
                <use xlink:href="#icon-clipboard"></use>
              </svg>
            Copy code
            </span>
          </div>
          <div class="copied-text hidden">
            <span class="flex items-center justify-center">
              <svg class="w-3 h-3 mr-1" fill="currentColor" stroke="currentColor">
                  <use xlink:href="#icon-check"></use>
             </svg>
              Copied!
            </span>
          </div>
        </button>
        </div>
      <pre class="astro-code dracula" style="background-color:#282A36;color:#F8F8F2;overflow-x:auto" tabindex="0"><code><span class="line"><span style="color:#FF79C6">let</span><span style="color:#F8F8F2"> age </span><span style="color:#FF79C6">=</span><span style="color:#BD93F9"> 10</span></span>
<span class="line"><span style="color:#F8F8F2">#</span><span style="color:#8BE9FD">expect</span><span style="color:#F8F8F2">(</span><span style="color:#8BE9FD">performing</span><span style="color:#F8F8F2">: {</span></span>
<span class="line"><span style="color:#FF79C6">  if</span><span style="color:#F8F8F2"> age </span><span style="color:#FF79C6">&gt;</span><span style="color:#BD93F9"> 5</span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#FF79C6">    throw</span><span style="color:#F8F8F2"> MyError.</span><span style="color:#8BE9FD">err2</span><span style="color:#F8F8F2">(age)</span></span>
<span class="line"><span style="color:#F8F8F2">  }</span></span>
<span class="line"><span style="color:#F8F8F2">}, </span><span style="color:#8BE9FD">throws</span><span style="color:#F8F8F2">: { err </span><span style="color:#FF79C6">in</span></span>
<span class="line"><span style="color:#FF79C6">  guard</span><span style="color:#FF79C6"> let</span><span style="color:#F8F8F2"> error </span><span style="color:#FF79C6">=</span><span style="color:#F8F8F2"> err </span><span style="color:#FF79C6">as?</span><span style="color:#F8F8F2"> MyError, </span><span style="color:#FF79C6">case</span><span style="color:#FF79C6"> let</span><span style="color:#F8F8F2"> .</span><span style="color:#8BE9FD">err2</span><span style="color:#F8F8F2">(age) </span><span style="color:#FF79C6">=</span><span style="color:#F8F8F2"> error </span><span style="color:#FF79C6">else</span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#FF79C6">    return</span><span style="color:#BD93F9"> false</span></span>
<span class="line"><span style="color:#F8F8F2">  }</span></span>
<span class="line"><span style="color:#FF79C6">  return</span><span style="color:#F8F8F2"> age </span><span style="color:#FF79C6">&gt;</span><span style="color:#BD93F9"> 10</span><span style="color:#6272A4"> // 对错误捕获逻辑的布尔返回值进行判断</span></span>
<span class="line"><span style="color:#F8F8F2">})</span></span></code></pre></div>
<p>以上示例清晰地展示了，对于 Swift 开发者来说，使用 <code>#expect</code> 结合 Swift 自身的语法来构建测试表达更为清晰、简洁且灵活。</p>
<h3 id="require-宏">#require 宏</h3>
<p><code>#require</code> 宏主要用于在测试中解包可选值，功能类似于 XCTest 的 <code>XCTUnwrap</code>：</p>
<div>
        <div class="flex justify-between items-center h-8 font-medium bg-[#96744d] dark:bg-[#002565] text-gray-200 text-xs rounded-tl-md rounded-tr-md">
          <span class="px-4 py-1">Swift</span>
          <button class="copy-button py-1 px-4" onclick="copyCode(this, event)">
          <div class="copy-text">
            <span class="flex items-center justify-center sm:hover:text-white sm:hover:font-bold">
              <svg class="w-3 h-3 mr-1" fill="currentColor" stroke="currentColor">
                <use xlink:href="#icon-clipboard"></use>
              </svg>
            Copy code
            </span>
          </div>
          <div class="copied-text hidden">
            <span class="flex items-center justify-center">
              <svg class="w-3 h-3 mr-1" fill="currentColor" stroke="currentColor">
                  <use xlink:href="#icon-check"></use>
             </svg>
              Copied!
            </span>
          </div>
        </button>
        </div>
      <pre class="astro-code dracula" style="background-color:#282A36;color:#F8F8F2;overflow-x:auto" tabindex="0"><code><span class="line"><span style="color:#FF79C6">let</span><span style="color:#F8F8F2"> x: </span><span style="color:#8BE9FD;font-style:italic">Int</span><span style="color:#FF79C6">?</span><span style="color:#FF79C6"> =</span><span style="color:#BD93F9"> 10</span></span>
<span class="line"><span style="color:#FF79C6">let</span><span style="color:#F8F8F2"> y: </span><span style="color:#8BE9FD;font-style:italic">String</span><span style="color:#FF79C6">?</span><span style="color:#FF79C6"> =</span><span style="color:#BD93F9"> nil</span></span>
<span class="line"><span style="color:#FF79C6">let</span><span style="color:#F8F8F2"> z </span><span style="color:#FF79C6">=</span><span style="color:#FF79C6"> try</span><span style="color:#F8F8F2"> #</span><span style="color:#8BE9FD">require</span><span style="color:#F8F8F2">(x) </span><span style="color:#6272A4">// 通过，z == 10</span></span>
<span class="line"><span style="color:#FF79C6">let</span><span style="color:#F8F8F2"> w </span><span style="color:#FF79C6">=</span><span style="color:#FF79C6"> try</span><span style="color:#F8F8F2"> #</span><span style="color:#8BE9FD">require</span><span style="color:#F8F8F2">(y) </span><span style="color:#6272A4">// 失败，测试因抛出错误而提前结束</span></span></code></pre></div>
<p>除了解包，<code>#require</code> 还提供了与 <code>#expect</code> 宏相同的所有构造方法，主要区别在于其语义——<code>#require</code> 用于表达“必须通过的测试”，而 <code>#expect</code> 更侧重于“预期获得的结果”。</p>
<p>任何使用 <code>#expect</code> 的代码均可用 <code>#require</code> 进行替换：</p>
<div>
        <div class="flex justify-between items-center h-8 font-medium bg-[#96744d] dark:bg-[#002565] text-gray-200 text-xs rounded-tl-md rounded-tr-md">
          <span class="px-4 py-1">Swift</span>
          <button class="copy-button py-1 px-4" onclick="copyCode(this, event)">
          <div class="copy-text">
            <span class="flex items-center justify-center sm:hover:text-white sm:hover:font-bold">
              <svg class="w-3 h-3 mr-1" fill="currentColor" stroke="currentColor">
                <use xlink:href="#icon-clipboard"></use>
              </svg>
            Copy code
            </span>
          </div>
          <div class="copied-text hidden">
            <span class="flex items-center justify-center">
              <svg class="w-3 h-3 mr-1" fill="currentColor" stroke="currentColor">
                  <use xlink:href="#icon-check"></use>
             </svg>
              Copied!
            </span>
          </div>
        </button>
        </div>
      <pre class="astro-code dracula" style="background-color:#282A36;color:#F8F8F2;overflow-x:auto" tabindex="0"><code><span class="line"><span style="color:#FF79C6">try</span><span style="color:#F8F8F2"> #</span><span style="color:#8BE9FD">require</span><span style="color:#F8F8F2">(a </span><span style="color:#FF79C6">==</span><span style="color:#F8F8F2"> b)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FF79C6">try</span><span style="color:#F8F8F2"> #</span><span style="color:#8BE9FD">require</span><span style="color:#F8F8F2">(</span><span style="color:#8BE9FD">throws</span><span style="color:#F8F8F2">: (any </span><span style="color:#8BE9FD;font-style:italic">Error</span><span style="color:#F8F8F2">).</span><span style="color:#FF79C6">self</span><span style="color:#F8F8F2">, </span><span style="color:#8BE9FD">performing</span><span style="color:#F8F8F2">: {</span></span>
<span class="line"><span style="color:#FF79C6">  if</span><span style="color:#F8F8F2"> age </span><span style="color:#FF79C6">&lt;</span><span style="color:#BD93F9"> 10</span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#FF79C6">    throw</span><span style="color:#F8F8F2"> MyError.err1</span></span>
<span class="line"><span style="color:#F8F8F2">  }</span></span>
<span class="line"><span style="color:#F8F8F2">})</span></span></code></pre></div>
<p>使用 <code>#require</code> 时，测试函数必须标记为可以抛出错误，并且需要在 <code>#require</code> 前使用 <code>try</code>。</p>
<h3 id="confirmation">confirmation</h3>
<p>当需要验证某个事件发生的次数时，特别是当 <code>#expect</code> 和 <code>#require</code> 无法满足需求时，<code>confirmation</code> 函数便显得尤为重要。它不仅可以验证事件在特定上下文中的发生情况，如事件处理器或委托回调，还可以用于确认事件发生的次数。</p>
<p>以下代码示例展示了如何使用 <code>confirmation</code> 函数：我们设定了一个期望，即 <code>pressDown</code> 事件必须被触发三次。测试只有在确实收到三次 <code>pressDown</code> 事件时才会通过：</p>
<div>
        <div class="flex justify-between items-center h-8 font-medium bg-[#96744d] dark:bg-[#002565] text-gray-200 text-xs rounded-tl-md rounded-tr-md">
          <span class="px-4 py-1">Swift</span>
          <button class="copy-button py-1 px-4" onclick="copyCode(this, event)">
          <div class="copy-text">
            <span class="flex items-center justify-center sm:hover:text-white sm:hover:font-bold">
              <svg class="w-3 h-3 mr-1" fill="currentColor" stroke="currentColor">
                <use xlink:href="#icon-clipboard"></use>
              </svg>
            Copy code
            </span>
          </div>
          <div class="copied-text hidden">
            <span class="flex items-center justify-center">
              <svg class="w-3 h-3 mr-1" fill="currentColor" stroke="currentColor">
                  <use xlink:href="#icon-check"></use>
             </svg>
              Copied!
            </span>
          </div>
        </button>
        </div>
      <pre class="astro-code dracula" style="background-color:#282A36;color:#F8F8F2;overflow-x:auto" tabindex="0"><code><span class="line"><span style="color:#FF79C6">await</span><span style="color:#8BE9FD"> confirmation</span><span style="color:#F8F8F2">(</span><span style="color:#8BE9FD">expectedCount</span><span style="color:#F8F8F2">: </span><span style="color:#BD93F9">3</span><span style="color:#F8F8F2">) { keyPressed </span><span style="color:#FF79C6">in</span><span style="color:#F8F8F2"> </span></span>
<span class="line"><span style="color:#F8F8F2">  keyHandler.eventHandler </span><span style="color:#FF79C6">=</span><span style="color:#F8F8F2"> { event </span><span style="color:#FF79C6">in</span></span>
<span class="line"><span style="color:#FF79C6">    if</span><span style="color:#F8F8F2"> event </span><span style="color:#FF79C6">==</span><span style="color:#F8F8F2"> .pressDown {</span></span>
<span class="line"><span style="color:#8BE9FD">      keyPressed</span><span style="color:#F8F8F2">() </span><span style="color:#6272A4">// 标记事件发生</span></span>
<span class="line"><span style="color:#F8F8F2">    }</span></span>
<span class="line"><span style="color:#F8F8F2">  }</span></span>
<span class="line"><span style="color:#FF79C6">  await</span><span style="color:#F8F8F2"> keyHandler.</span><span style="color:#8BE9FD">getEvent</span><span style="color:#F8F8F2">() </span><span style="color:#6272A4">// 激活事件处理器以等待事件</span></span>
<span class="line"><span style="color:#F8F8F2">}</span></span></code></pre></div>
<p>在某些测试场景中，验证特定事件<strong>未发生</strong>同样重要。例如，以下代码片段展示了如何确保在测试执行期间未触发 <code>pressDown</code> 事件。测试仅在没有接收到任何 <code>pressDown</code> 事件时才会通过：</p>
<div>
        <div class="flex justify-between items-center h-8 font-medium bg-[#96744d] dark:bg-[#002565] text-gray-200 text-xs rounded-tl-md rounded-tr-md">
          <span class="px-4 py-1">Swift</span>
          <button class="copy-button py-1 px-4" onclick="copyCode(this, event)">
          <div class="copy-text">
            <span class="flex items-center justify-center sm:hover:text-white sm:hover:font-bold">
              <svg class="w-3 h-3 mr-1" fill="currentColor" stroke="currentColor">
                <use xlink:href="#icon-clipboard"></use>
              </svg>
            Copy code
            </span>
          </div>
          <div class="copied-text hidden">
            <span class="flex items-center justify-center">
              <svg class="w-3 h-3 mr-1" fill="currentColor" stroke="currentColor">
                  <use xlink:href="#icon-check"></use>
             </svg>
              Copied!
            </span>
          </div>
        </button>
        </div>
      <pre class="astro-code dracula" style="background-color:#282A36;color:#F8F8F2;overflow-x:auto" tabindex="0"><code><span class="line"><span style="color:#FF79C6">await</span><span style="color:#8BE9FD"> confirmation</span><span style="color:#F8F8F2">(</span><span style="color:#8BE9FD">expectedCount</span><span style="color:#F8F8F2">: </span><span style="color:#BD93F9">0</span><span style="color:#F8F8F2">) { keyPressed </span><span style="color:#FF79C6">in</span><span style="color:#F8F8F2"> </span></span>
<span class="line"><span style="color:#F8F8F2">  keyHandler.eventHandler </span><span style="color:#FF79C6">=</span><span style="color:#F8F8F2"> { event </span><span style="color:#FF79C6">in</span></span>
<span class="line"><span style="color:#FF79C6">    if</span><span style="color:#F8F8F2"> event </span><span style="color:#FF79C6">==</span><span style="color:#F8F8F2"> .pressDown {</span></span>
<span class="line"><span style="color:#8BE9FD">      keyPressed</span><span style="color:#F8F8F2">()</span></span>
<span class="line"><span style="color:#F8F8F2">    }</span></span>
<span class="line"><span style="color:#F8F8F2">  }</span></span>
<span class="line"><span style="color:#FF79C6">  await</span><span style="color:#F8F8F2"> keyHandler.</span><span style="color:#8BE9FD">getEvent</span><span style="color:#F8F8F2">()</span></span>
<span class="line"><span style="color:#F8F8F2">}</span></span></code></pre></div>
<h3 id="withknownissue">withKnownIssue</h3>
<p>对于已知可能产生问题或错误的函数，但不希望这些问题导致测试失败时，可以使用 <code>withKnownIssue</code> 来进行标记。</p>
<div>
        <div class="flex justify-between items-center h-8 font-medium bg-[#96744d] dark:bg-[#002565] text-gray-200 text-xs rounded-tl-md rounded-tr-md">
          <span class="px-4 py-1">Swift</span>
          <button class="copy-button py-1 px-4" onclick="copyCode(this, event)">
          <div class="copy-text">
            <span class="flex items-center justify-center sm:hover:text-white sm:hover:font-bold">
              <svg class="w-3 h-3 mr-1" fill="currentColor" stroke="currentColor">
                <use xlink:href="#icon-clipboard"></use>
              </svg>
            Copy code
            </span>
          </div>
          <div class="copied-text hidden">
            <span class="flex items-center justify-center">
              <svg class="w-3 h-3 mr-1" fill="currentColor" stroke="currentColor">
                  <use xlink:href="#icon-check"></use>
             </svg>
              Copied!
            </span>
          </div>
        </button>
        </div>
      <pre class="astro-code dracula" style="background-color:#282A36;color:#F8F8F2;overflow-x:auto" tabindex="0"><code><span class="line"><span style="color:#FF79C6">@Test</span><span style="color:#FF79C6"> func</span><span style="color:#50FA7B"> example</span><span style="color:#F8F8F2">() </span><span style="color:#FF79C6">async</span><span style="color:#FF79C6"> throws</span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#8BE9FD">  withKnownIssue</span><span style="color:#F8F8F2">(</span><span style="color:#8BE9FD">isIntermittent</span><span style="color:#F8F8F2">: </span><span style="color:#BD93F9">true</span><span style="color:#F8F8F2">) { </span><span style="color:#6272A4">// Expected failure</span></span>
<span class="line"><span style="color:#FF79C6">    try</span><span style="color:#8BE9FD"> flakyCall</span><span style="color:#F8F8F2">()</span></span>
<span class="line"><span style="color:#F8F8F2">  }</span></span>
<span class="line"><span style="color:#F8F8F2">}</span></span></code></pre></div>
<p>这种方法具有以下优势：</p>
<ul>
<li>提升测试的可靠性，尤其是对于包含不稳定因素的测试。</li>
<li>允许在不影响总体测试结果的情况下继续运行包含已知问题的测试。</li>
<li>提供一种机制来记录和追踪已知问题，而不是简单地禁用测试。</li>
</ul>
<p><code>withKnownIssue</code> 是一种强大的工具，适用于处理复杂的测试场景和已知的系统限制，使开发者能够在承认问题存在的同时继续进行测试，这对于维护大型和复杂的测试套件非常有价值。</p>
<blockquote>
<p>在 Swift Testing 中，使用上述几种工具就可以替代 XCTest 中的多种断言方法，极大地简化了测试代码的编写过程。</p>
</blockquote>
<h2 id="组织测试用例">组织测试用例</h2>
<p>Swift Testing 提供了多种方式和维度来组织和管理测试用例，使开发者能够更有效地控制和维护他们的测试代码。通过灵活的结构化方法，包括套件、嵌套套件以及标签系统，开发者可以根据项目需求构建清晰且逻辑性强的测试架构。</p>
<h3 id="测试套件suite">测试套件（Suite）</h3>
<p>Swift Testing 不仅支持通过全局函数构建测试，还允许在结构体（<code>struct</code>）、类（<code>class</code>）和演员（<code>actor</code>）中定义测试用例，从而形成结构化的测试套件。</p>
<p>一个包含 <code>@Test</code> 函数的类型，无需额外配置即被隐式视为一个套件。以下示例展示了一个基本的测试套件，包含对姓名和年龄的验证：</p>
<div>
        <div class="flex justify-between items-center h-8 font-medium bg-[#96744d] dark:bg-[#002565] text-gray-200 text-xs rounded-tl-md rounded-tr-md">
          <span class="px-4 py-1">Swift</span>
          <button class="copy-button py-1 px-4" onclick="copyCode(this, event)">
          <div class="copy-text">
            <span class="flex items-center justify-center sm:hover:text-white sm:hover:font-bold">
              <svg class="w-3 h-3 mr-1" fill="currentColor" stroke="currentColor">
                <use xlink:href="#icon-clipboard"></use>
              </svg>
            Copy code
            </span>
          </div>
          <div class="copied-text hidden">
            <span class="flex items-center justify-center">
              <svg class="w-3 h-3 mr-1" fill="currentColor" stroke="currentColor">
                  <use xlink:href="#icon-check"></use>
             </svg>
              Copied!
            </span>
          </div>
        </button>
        </div>
      <pre class="astro-code dracula" style="background-color:#282A36;color:#F8F8F2;overflow-x:auto" tabindex="0"><code><span class="line"><span style="color:#FF79C6">struct</span><span style="color:#8BE9FD;font-style:italic"> PeopleTests</span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#FF79C6">  @Test</span><span style="color:#FF79C6"> func</span><span style="color:#50FA7B"> checkName</span><span style="color:#F8F8F2">() </span><span style="color:#FF79C6">async</span><span style="color:#FF79C6"> throws</span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#FF79C6">    let</span><span style="color:#F8F8F2"> fat </span><span style="color:#FF79C6">=</span><span style="color:#F8F8F2"> People.fat</span></span>
<span class="line"><span style="color:#F8F8F2">    #</span><span style="color:#8BE9FD">expect</span><span style="color:#F8F8F2">(fat.name </span><span style="color:#FF79C6">==</span><span style="color:#E9F284"> &quot;</span><span style="color:#F1FA8C">fat</span><span style="color:#E9F284">&quot;</span><span style="color:#F8F8F2">)</span></span>
<span class="line"><span style="color:#F8F8F2">  }</span></span>
<span class="line"><span style="color:#F8F8F2">  </span></span>
<span class="line"><span style="color:#FF79C6">  @Test</span><span style="color:#FF79C6"> func</span><span style="color:#50FA7B"> checkAge</span><span style="color:#F8F8F2">() </span><span style="color:#FF79C6">async</span><span style="color:#FF79C6"> throws</span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#FF79C6">    let</span><span style="color:#F8F8F2"> fat </span><span style="color:#FF79C6">=</span><span style="color:#F8F8F2"> People.fat</span></span>
<span class="line"><span style="color:#F8F8F2">    #</span><span style="color:#8BE9FD">expect</span><span style="color:#F8F8F2">(fat.name.</span><span style="color:#BD93F9">count</span><span style="color:#FF79C6"> &gt;</span><span style="color:#BD93F9"> 0</span><span style="color:#F8F8F2">)</span></span>
<span class="line"><span style="color:#F8F8F2">  }</span></span>
<span class="line"><span style="color:#F8F8F2">}</span></span></code></pre></div>
<p><picture>
                    <source media="(max-width: 479px)" srcset="https://cdn.fatbobman.com/image-20240627153716921.webp?imageView2/0/w/500"/>
                    <source media="(max-width: 767px)" srcset="https://cdn.fatbobman.com/image-20240627153716921.webp?imageView2/0/w/768"/>
                    <source media="(max-width: 1024px)" srcset="https://cdn.fatbobman.com/image-20240627153716921.webp?imageView2/0/w/1024"/>
                    <img src="https://cdn.fatbobman.com/image-20240627153716921.webp" alt="create-swift-testing-suite" loading="lazy" decoding="async"/>
                  </picture></p>
<p>若需对套件进行重命名或设定特定条件，可使用 <code>@Suite</code> 宏明确指定：</p>
<div>
        <div class="flex justify-between items-center h-8 font-medium bg-[#96744d] dark:bg-[#002565] text-gray-200 text-xs rounded-tl-md rounded-tr-md">
          <span class="px-4 py-1">Swift</span>
          <button class="copy-button py-1 px-4" onclick="copyCode(this, event)">
          <div class="copy-text">
            <span class="flex items-center justify-center sm:hover:text-white sm:hover:font-bold">
              <svg class="w-3 h-3 mr-1" fill="currentColor" stroke="currentColor">
                <use xlink:href="#icon-clipboard"></use>
              </svg>
            Copy code
            </span>
          </div>
          <div class="copied-text hidden">
            <span class="flex items-center justify-center">
              <svg class="w-3 h-3 mr-1" fill="currentColor" stroke="currentColor">
                  <use xlink:href="#icon-check"></use>
             </svg>
              Copied!
            </span>
          </div>
        </button>
        </div>
      <pre class="astro-code dracula" style="background-color:#282A36;color:#F8F8F2;overflow-x:auto" tabindex="0"><code><span class="line"><span style="color:#FF79C6">@Suite</span><span style="color:#F8F8F2">(</span><span style="color:#E9F284">&quot;</span><span style="color:#F1FA8C">人员测试</span><span style="color:#E9F284">&quot;</span><span style="color:#F8F8F2">)</span></span>
<span class="line"><span style="color:#FF79C6">struct</span><span style="color:#8BE9FD;font-style:italic"> PeopleTests</span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#6272A4">  // 测试函数定义</span></span>
<span class="line"><span style="color:#F8F8F2">}</span></span></code></pre></div>
<p><picture>
                    <source media="(max-width: 479px)" srcset="https://cdn.fatbobman.com/image-20240627154222528.webp?imageView2/0/w/500"/>
                    <source media="(max-width: 767px)" srcset="https://cdn.fatbobman.com/image-20240627154222528.webp?imageView2/0/w/768"/>
                    <source media="(max-width: 1024px)" srcset="https://cdn.fatbobman.com/image-20240627154222528.webp?imageView2/0/w/1024"/>
                    <img src="https://cdn.fatbobman.com/image-20240627154222528.webp" alt="rename-swift-testing-suite" loading="lazy" decoding="async"/>
                  </picture></p>
<p>测试方法在 Swift Testing 中不仅支持 <code>async</code> 和 <code>throws</code>，还可以通过使用 <code>mutating</code> 关键字来修改 <code>struct</code> 类型套件的变量数据。</p>
<div>
        <div class="flex justify-between items-center h-8 font-medium bg-[#96744d] dark:bg-[#002565] text-gray-200 text-xs rounded-tl-md rounded-tr-md">
          <span class="px-4 py-1">Swift</span>
          <button class="copy-button py-1 px-4" onclick="copyCode(this, event)">
          <div class="copy-text">
            <span class="flex items-center justify-center sm:hover:text-white sm:hover:font-bold">
              <svg class="w-3 h-3 mr-1" fill="currentColor" stroke="currentColor">
                <use xlink:href="#icon-clipboard"></use>
              </svg>
            Copy code
            </span>
          </div>
          <div class="copied-text hidden">
            <span class="flex items-center justify-center">
              <svg class="w-3 h-3 mr-1" fill="currentColor" stroke="currentColor">
                  <use xlink:href="#icon-check"></use>
             </svg>
              Copied!
            </span>
          </div>
        </button>
        </div>
      <pre class="astro-code dracula" style="background-color:#282A36;color:#F8F8F2;overflow-x:auto" tabindex="0"><code><span class="line"><span style="color:#FF79C6">struct</span><span style="color:#8BE9FD;font-style:italic"> Group</span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#FF79C6">  var</span><span style="color:#F8F8F2"> count </span><span style="color:#FF79C6">=</span><span style="color:#BD93F9"> 0</span></span>
<span class="line"><span style="color:#FF79C6">  @Test</span><span style="color:#FF79C6"> mutating</span><span style="color:#FF79C6"> func</span><span style="color:#50FA7B"> test1</span><span style="color:#F8F8F2">() {</span></span>
<span class="line"><span style="color:#F8F8F2">    count </span><span style="color:#FF79C6">+=</span><span style="color:#BD93F9"> 1</span></span>
<span class="line"><span style="color:#F8F8F2">    #</span><span style="color:#8BE9FD">expect</span><span style="color:#F8F8F2">(count </span><span style="color:#FF79C6">&gt;</span><span style="color:#BD93F9"> 0</span><span style="color:#F8F8F2">)</span></span>
<span class="line"><span style="color:#F8F8F2">  }</span></span>
<span class="line"><span style="color:#F8F8F2">}</span></span></code></pre></div>
<h3 id="套件嵌套">套件嵌套</h3>
<p>为了更复杂的测试需求，Swift Testing 支持套件嵌套，允许在一个套件中嵌入其他套件，以构建更加细致的测试结构。</p>
<div>
        <div class="flex justify-between items-center h-8 font-medium bg-[#96744d] dark:bg-[#002565] text-gray-200 text-xs rounded-tl-md rounded-tr-md">
          <span class="px-4 py-1">Swift</span>
          <button class="copy-button py-1 px-4" onclick="copyCode(this, event)">
          <div class="copy-text">
            <span class="flex items-center justify-center sm:hover:text-white sm:hover:font-bold">
              <svg class="w-3 h-3 mr-1" fill="currentColor" stroke="currentColor">
                <use xlink:href="#icon-clipboard"></use>
              </svg>
            Copy code
            </span>
          </div>
          <div class="copied-text hidden">
            <span class="flex items-center justify-center">
              <svg class="w-3 h-3 mr-1" fill="currentColor" stroke="currentColor">
                  <use xlink:href="#icon-check"></use>
             </svg>
              Copied!
            </span>
          </div>
        </button>
        </div>
      <pre class="astro-code dracula" style="background-color:#282A36;color:#F8F8F2;overflow-x:auto" tabindex="0"><code><span class="line"><span style="color:#FF79C6">struct</span><span style="color:#8BE9FD;font-style:italic"> PeopleTests</span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#FF79C6">  struct</span><span style="color:#8BE9FD;font-style:italic"> NameTests</span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#FF79C6">    @Test</span><span style="color:#FF79C6"> func</span><span style="color:#50FA7B"> checkName</span><span style="color:#F8F8F2">() </span><span style="color:#FF79C6">async</span><span style="color:#FF79C6"> throws</span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#FF79C6">      let</span><span style="color:#F8F8F2"> fat </span><span style="color:#FF79C6">=</span><span style="color:#F8F8F2"> People.fat</span></span>
<span class="line"><span style="color:#F8F8F2">      #</span><span style="color:#8BE9FD">expect</span><span style="color:#F8F8F2">(fat.name </span><span style="color:#FF79C6">==</span><span style="color:#E9F284"> &quot;</span><span style="color:#F1FA8C">fat</span><span style="color:#E9F284">&quot;</span><span style="color:#F8F8F2">)</span></span>
<span class="line"><span style="color:#F8F8F2">    }</span></span>
<span class="line"><span style="color:#F8F8F2">  }</span></span>
<span class="line"><span style="color:#F8F8F2">  </span></span>
<span class="line"><span style="color:#FF79C6">  struct</span><span style="color:#8BE9FD;font-style:italic"> AgeTests</span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#FF79C6">    @Test</span><span style="color:#FF79C6"> func</span><span style="color:#50FA7B"> checkAge</span><span style="color:#F8F8F2">() </span><span style="color:#FF79C6">async</span><span style="color:#FF79C6"> throws</span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#FF79C6">      let</span><span style="color:#F8F8F2"> fat </span><span style="color:#FF79C6">=</span><span style="color:#F8F8F2"> People.fat</span></span>
<span class="line"><span style="color:#F8F8F2">      #</span><span style="color:#8BE9FD">expect</span><span style="color:#F8F8F2">(fat.name.</span><span style="color:#BD93F9">count</span><span style="color:#FF79C6"> &gt;</span><span style="color:#BD93F9"> 0</span><span style="color:#F8F8F2">)</span></span>
<span class="line"><span style="color:#F8F8F2">    }</span></span>
<span class="line"><span style="color:#F8F8F2">  }</span></span>
<span class="line"><span style="color:#F8F8F2">}</span></span></code></pre></div>
<p><picture>
                    <source media="(max-width: 479px)" srcset="https://cdn.fatbobman.com/image-20240627154455283.webp?imageView2/0/w/500"/>
                    <source media="(max-width: 767px)" srcset="https://cdn.fatbobman.com/image-20240627154455283.webp?imageView2/0/w/768"/>
                    <source media="(max-width: 1024px)" srcset="https://cdn.fatbobman.com/image-20240627154455283.webp?imageView2/0/w/1024"/>
                    <img src="https://cdn.fatbobman.com/image-20240627154455283.webp" alt="nested-swift-testing-suite" loading="lazy" decoding="async"/>
                  </picture></p>
<p>在 Swift Testing 中，测试套件需包含无参数的 <code>init()</code>，因此，不能在枚举中直接定义测试用例。然而，枚举可以用来组织套件：</p>
<div>
        <div class="flex justify-between items-center h-8 font-medium bg-[#96744d] dark:bg-[#002565] text-gray-200 text-xs rounded-tl-md rounded-tr-md">
          <span class="px-4 py-1">Swift</span>
          <button class="copy-button py-1 px-4" onclick="copyCode(this, event)">
          <div class="copy-text">
            <span class="flex items-center justify-center sm:hover:text-white sm:hover:font-bold">
              <svg class="w-3 h-3 mr-1" fill="currentColor" stroke="currentColor">
                <use xlink:href="#icon-clipboard"></use>
              </svg>
            Copy code
            </span>
          </div>
          <div class="copied-text hidden">
            <span class="flex items-center justify-center">
              <svg class="w-3 h-3 mr-1" fill="currentColor" stroke="currentColor">
                  <use xlink:href="#icon-check"></use>
             </svg>
              Copied!
            </span>
          </div>
        </button>
        </div>
      <pre class="astro-code dracula" style="background-color:#282A36;color:#F8F8F2;overflow-x:auto" tabindex="0"><code><span class="line"><span style="color:#FF79C6">enum</span><span style="color:#8BE9FD;font-style:italic"> PeopleTests</span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#FF79C6">  struct</span><span style="color:#8BE9FD;font-style:italic"> NameTests</span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#FF79C6">    @Test</span><span style="color:#FF79C6"> func</span><span style="color:#50FA7B"> checkName</span><span style="color:#F8F8F2">() </span><span style="color:#FF79C6">async</span><span style="color:#FF79C6"> throws</span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#FF79C6">      let</span><span style="color:#F8F8F2"> fat </span><span style="color:#FF79C6">=</span><span style="color:#F8F8F2"> People.fat</span></span>
<span class="line"><span style="color:#F8F8F2">      #</span><span style="color:#8BE9FD">expect</span><span style="color:#F8F8F2">(fat.name </span><span style="color:#FF79C6">==</span><span style="color:#E9F284"> &quot;</span><span style="color:#F1FA8C">fat</span><span style="color:#E9F284">&quot;</span><span style="color:#F8F8F2">)</span></span>
<span class="line"><span style="color:#F8F8F2">    }</span></span>
<span class="line"><span style="color:#F8F8F2">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FF79C6">  struct</span><span style="color:#8BE9FD;font-style:italic"> AgeTests</span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#FF79C6">    @Test</span><span style="color:#FF79C6"> func</span><span style="color:#50FA7B"> checkAge</span><span style="color:#F8F8F2">() </span><span style="color:#FF79C6">async</span><span style="color:#FF79C6"> throws</span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#FF79C6">      let</span><span style="color:#F8F8F2"> fat </span><span style="color:#FF79C6">=</span><span style="color:#F8F8F2"> People.fat</span></span>
<span class="line"><span style="color:#F8F8F2">      #</span><span style="color:#8BE9FD">expect</span><span style="color:#F8F8F2">(</span><span style="color:#FF79C6">!</span><span style="color:#F8F8F2">fat.name.</span><span style="color:#BD93F9">isEmpty</span><span style="color:#F8F8F2">)</span></span>
<span class="line"><span style="color:#F8F8F2">    }</span></span>
<span class="line"><span style="color:#F8F8F2">  }</span></span>
<span class="line"><span style="color:#F8F8F2">}</span></span></code></pre></div>
<h3 id="利用标签进行测试管理">利用标签进行测试管理</h3>
<p>Swift Testing 还提供了基于标签（Tag）的分类方式，增加了对测试用例管理的灵活性和维度。</p>
<div>
        <div class="flex justify-between items-center h-8 font-medium bg-[#96744d] dark:bg-[#002565] text-gray-200 text-xs rounded-tl-md rounded-tr-md">
          <span class="px-4 py-1">Swift</span>
          <button class="copy-button py-1 px-4" onclick="copyCode(this, event)">
          <div class="copy-text">
            <span class="flex items-center justify-center sm:hover:text-white sm:hover:font-bold">
              <svg class="w-3 h-3 mr-1" fill="currentColor" stroke="currentColor">
                <use xlink:href="#icon-clipboard"></use>
              </svg>
            Copy code
            </span>
          </div>
          <div class="copied-text hidden">
            <span class="flex items-center justify-center">
              <svg class="w-3 h-3 mr-1" fill="currentColor" stroke="currentColor">
                  <use xlink:href="#icon-check"></use>
             </svg>
              Copied!
            </span>
          </div>
        </button>
        </div>
      <pre class="astro-code dracula" style="background-color:#282A36;color:#F8F8F2;overflow-x:auto" tabindex="0"><code><span class="line"><span style="color:#FF79C6">@Suite</span><span style="color:#F8F8F2">(.</span><span style="color:#8BE9FD">tags</span><span style="color:#F8F8F2">(.people))</span></span>
<span class="line"><span style="color:#FF79C6">struct</span><span style="color:#8BE9FD;font-style:italic"> PeopleTests</span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#FF79C6">  struct</span><span style="color:#8BE9FD;font-style:italic"> NameTests</span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#FF79C6">    @Test</span><span style="color:#FF79C6"> func</span><span style="color:#50FA7B"> checkName</span><span style="color:#F8F8F2">() </span><span style="color:#FF79C6">async</span><span style="color:#FF79C6"> throws</span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#FF79C6">      let</span><span style="color:#F8F8F2"> fat </span><span style="color:#FF79C6">=</span><span style="color:#F8F8F2"> People.fat</span></span>
<span class="line"><span style="color:#F8F8F2">      #</span><span style="color:#8BE9FD">expect</span><span style="color:#F8F8F2">(fat.name </span><span style="color:#FF79C6">==</span><span style="color:#E9F284"> &quot;</span><span style="color:#F1FA8C">fat</span><span style="color:#E9F284">&quot;</span><span style="color:#F8F8F2">)</span></span>
<span class="line"><span style="color:#F8F8F2">    }</span></span>
<span class="line"><span style="color:#F8F8F2">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FF79C6">  struct</span><span style="color:#8BE9FD;font-style:italic"> AgeTests</span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#FF79C6">    @Test</span><span style="color:#F8F8F2">(.</span><span style="color:#8BE9FD">tags</span><span style="color:#F8F8F2">(.numberCheck)) </span><span style="color:#FF79C6">func</span><span style="color:#50FA7B"> checkAge</span><span style="color:#F8F8F2">() </span><span style="color:#FF79C6">async</span><span style="color:#FF79C6"> throws</span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#FF79C6">      let</span><span style="color:#F8F8F2"> fat </span><span style="color:#FF79C6">=</span><span style="color:#F8F8F2"> People.fat</span></span>
<span class="line"><span style="color:#F8F8F2">      #</span><span style="color:#8BE9FD">expect</span><span style="color:#F8F8F2">(</span><span style="color:#FF79C6">!</span><span style="color:#F8F8F2">fat.name.</span><span style="color:#BD93F9">isEmpty</span><span style="color:#F8F8F2">)</span></span>
<span class="line"><span style="color:#F8F8F2">    }</span></span>
<span class="line"><span style="color:#F8F8F2">  }</span></span>
<span class="line"><span style="color:#F8F8F2">}</span></span></code></pre></div>
<p><picture>
                    <source media="(max-width: 479px)" srcset="https://cdn.fatbobman.com/image-20240627160556171.webp?imageView2/0/w/500"/>
                    <source media="(max-width: 767px)" srcset="https://cdn.fatbobman.com/image-20240627160556171.webp?imageView2/0/w/768"/>
                    <source media="(max-width: 1024px)" srcset="https://cdn.fatbobman.com/image-20240627160556171.webp?imageView2/0/w/1024"/>
                    <img src="https://cdn.fatbobman.com/image-20240627160556171.webp" alt="image-20240627160556171" loading="lazy" decoding="async"/>
                  </picture></p>
<p>为套件（<code>@Suite</code>）或测试用例（<code>@Test</code>）添加标签后，不仅可以直接运行包含特定标签的测试用例，还能便利地构建和管理测试计划（Test Plan）。这使得针对不同功能或需求集中进行测试变得更加简单高效。</p>
<p><picture>
                    <source media="(max-width: 479px)" srcset="https://cdn.fatbobman.com/image-20240627161110595.webp?imageView2/0/w/500"/>
                    <source media="(max-width: 767px)" srcset="https://cdn.fatbobman.com/image-20240627161110595.webp?imageView2/0/w/768"/>
                    <source media="(max-width: 1024px)" srcset="https://cdn.fatbobman.com/image-20240627161110595.webp?imageView2/0/w/1024"/>
                    <img src="https://cdn.fatbobman.com/image-20240627161110595.webp" alt="tags-of-swift-testing" loading="lazy" decoding="async"/>
                  </picture></p>
<h2 id="特征-trait">特征（ Trait ）</h2>
<p>Swift Testing 提供了多种特征（Traits）定义，使开发者能够控制和配置测试套件（<code>@Suite</code>）和测试用例（<code>@Test</code>）。这些特征允许对测试执行的行为进行细致的管理，如上文中出现的 <code>.tag</code> 特征，专用于添加标签。</p>
<h3 id="tag">tag</h3>
<p>给套件或测试用例添加标签。开发者可以通过如下方式声明标签：</p>
<div>
        <div class="flex justify-between items-center h-8 font-medium bg-[#96744d] dark:bg-[#002565] text-gray-200 text-xs rounded-tl-md rounded-tr-md">
          <span class="px-4 py-1">Swift</span>
          <button class="copy-button py-1 px-4" onclick="copyCode(this, event)">
          <div class="copy-text">
            <span class="flex items-center justify-center sm:hover:text-white sm:hover:font-bold">
              <svg class="w-3 h-3 mr-1" fill="currentColor" stroke="currentColor">
                <use xlink:href="#icon-clipboard"></use>
              </svg>
            Copy code
            </span>
          </div>
          <div class="copied-text hidden">
            <span class="flex items-center justify-center">
              <svg class="w-3 h-3 mr-1" fill="currentColor" stroke="currentColor">
                  <use xlink:href="#icon-check"></use>
             </svg>
              Copied!
            </span>
          </div>
        </button>
        </div>
      <pre class="astro-code dracula" style="background-color:#282A36;color:#F8F8F2;overflow-x:auto" tabindex="0"><code><span class="line"><span style="color:#FF79C6">@Suite</span><span style="color:#F8F8F2">(.</span><span style="color:#8BE9FD">tags</span><span style="color:#F8F8F2">(.people))</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FF79C6">extension</span><span style="color:#8BE9FD;font-style:italic"> Tag</span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#FF79C6">  @Tag</span><span style="color:#FF79C6"> static</span><span style="color:#FF79C6"> var</span><span style="color:#F8F8F2"> people: </span><span style="color:#BD93F9;font-style:italic">Self</span></span>
<span class="line"><span style="color:#FF79C6">  @Tag</span><span style="color:#FF79C6"> static</span><span style="color:#FF79C6"> var</span><span style="color:#F8F8F2"> numberCheck: </span><span style="color:#BD93F9;font-style:italic">Self</span></span>
<span class="line"><span style="color:#F8F8F2">}</span></span></code></pre></div>
<h3 id="enabled">enabled</h3>
<p>仅在满足特定条件时执行相应的测试：</p>
<div>
        <div class="flex justify-between items-center h-8 font-medium bg-[#96744d] dark:bg-[#002565] text-gray-200 text-xs rounded-tl-md rounded-tr-md">
          <span class="px-4 py-1">Swift</span>
          <button class="copy-button py-1 px-4" onclick="copyCode(this, event)">
          <div class="copy-text">
            <span class="flex items-center justify-center sm:hover:text-white sm:hover:font-bold">
              <svg class="w-3 h-3 mr-1" fill="currentColor" stroke="currentColor">
                <use xlink:href="#icon-clipboard"></use>
              </svg>
            Copy code
            </span>
          </div>
          <div class="copied-text hidden">
            <span class="flex items-center justify-center">
              <svg class="w-3 h-3 mr-1" fill="currentColor" stroke="currentColor">
                  <use xlink:href="#icon-check"></use>
             </svg>
              Copied!
            </span>
          </div>
        </button>
        </div>
      <pre class="astro-code dracula" style="background-color:#282A36;color:#F8F8F2;overflow-x:auto" tabindex="0"><code><span class="line"><span style="color:#FF79C6">let</span><span style="color:#F8F8F2"> enableTest </span><span style="color:#FF79C6">=</span><span style="color:#BD93F9"> true</span></span>
<span class="line"><span style="color:#FF79C6">@Test</span><span style="color:#F8F8F2">(.</span><span style="color:#8BE9FD">enabled</span><span style="color:#F8F8F2">(</span><span style="color:#8BE9FD">if</span><span style="color:#F8F8F2">: enableTest)) </span><span style="color:#FF79C6">func</span><span style="color:#50FA7B"> example</span><span style="color:#F8F8F2">() {}</span></span></code></pre></div>
<h3 id="disabled">disabled</h3>
<p>禁用当前测试。与通过注释禁用测试相比，<code>disabled</code> 特征允许在测试日志中提供更明确的屏蔽原因：</p>
<div>
        <div class="flex justify-between items-center h-8 font-medium bg-[#96744d] dark:bg-[#002565] text-gray-200 text-xs rounded-tl-md rounded-tr-md">
          <span class="px-4 py-1">Swift</span>
          <button class="copy-button py-1 px-4" onclick="copyCode(this, event)">
          <div class="copy-text">
            <span class="flex items-center justify-center sm:hover:text-white sm:hover:font-bold">
              <svg class="w-3 h-3 mr-1" fill="currentColor" stroke="currentColor">
                <use xlink:href="#icon-clipboard"></use>
              </svg>
            Copy code
            </span>
          </div>
          <div class="copied-text hidden">
            <span class="flex items-center justify-center">
              <svg class="w-3 h-3 mr-1" fill="currentColor" stroke="currentColor">
                  <use xlink:href="#icon-check"></use>
             </svg>
              Copied!
            </span>
          </div>
        </button>
        </div>
      <pre class="astro-code dracula" style="background-color:#282A36;color:#F8F8F2;overflow-x:auto" tabindex="0"><code><span class="line"><span style="color:#FF79C6">@Test</span><span style="color:#F8F8F2">(.</span><span style="color:#8BE9FD">enabled</span><span style="color:#F8F8F2">(</span><span style="color:#8BE9FD">if</span><span style="color:#F8F8F2">: enableTest),.</span><span style="color:#8BE9FD">disabled</span><span style="color:#F8F8F2">(</span><span style="color:#E9F284">&quot;</span><span style="color:#F1FA8C">ignore for this loop</span><span style="color:#E9F284">&quot;</span><span style="color:#F8F8F2">))</span></span>
<span class="line"><span style="color:#FF79C6">func</span><span style="color:#50FA7B"> example</span><span style="color:#F8F8F2">() {} </span><span style="color:#6272A4">// Test &#39;example()&#39; skipped: ignore for this loop</span></span></code></pre></div>
<h3 id="bug">bug</h3>
<p>为测试用例或套件添加与 Bug 相关的信息（如 URL、标识符或备注），这些信息将被集成到测试报告中：</p>
<div>
        <div class="flex justify-between items-center h-8 font-medium bg-[#96744d] dark:bg-[#002565] text-gray-200 text-xs rounded-tl-md rounded-tr-md">
          <span class="px-4 py-1">Swift</span>
          <button class="copy-button py-1 px-4" onclick="copyCode(this, event)">
          <div class="copy-text">
            <span class="flex items-center justify-center sm:hover:text-white sm:hover:font-bold">
              <svg class="w-3 h-3 mr-1" fill="currentColor" stroke="currentColor">
                <use xlink:href="#icon-clipboard"></use>
              </svg>
            Copy code
            </span>
          </div>
          <div class="copied-text hidden">
            <span class="flex items-center justify-center">
              <svg class="w-3 h-3 mr-1" fill="currentColor" stroke="currentColor">
                  <use xlink:href="#icon-check"></use>
             </svg>
              Copied!
            </span>
          </div>
        </button>
        </div>
      <pre class="astro-code dracula" style="background-color:#282A36;color:#F8F8F2;overflow-x:auto" tabindex="0"><code><span class="line"><span style="color:#FF79C6">@Test</span><span style="color:#F8F8F2">(.</span><span style="color:#8BE9FD">bug</span><span style="color:#F8F8F2">(</span><span style="color:#E9F284">&quot;</span><span style="color:#F1FA8C">https://example.org/bugs/1234</span><span style="color:#E9F284">&quot;</span><span style="color:#F8F8F2">))</span></span>
<span class="line"><span style="color:#FF79C6">func</span><span style="color:#50FA7B"> example</span><span style="color:#F8F8F2">() {</span></span>
<span class="line"><span style="color:#F8F8F2">  withKnownIssue {</span></span>
<span class="line"><span style="color:#F8F8F2">    #</span><span style="color:#8BE9FD">expect</span><span style="color:#F8F8F2">( </span><span style="color:#BD93F9">3</span><span style="color:#FF79C6"> &gt;</span><span style="color:#BD93F9"> 4</span><span style="color:#F8F8F2">)</span></span>
<span class="line"><span style="color:#F8F8F2">  }</span></span>
<span class="line"><span style="color:#F8F8F2">}</span></span></code></pre></div>
<h3 id="timelimit">timeLimit</h3>
<p>设置测试的最大运行时间，超时则视为测试失败：</p>
<div>
        <div class="flex justify-between items-center h-8 font-medium bg-[#96744d] dark:bg-[#002565] text-gray-200 text-xs rounded-tl-md rounded-tr-md">
          <span class="px-4 py-1">Swift</span>
          <button class="copy-button py-1 px-4" onclick="copyCode(this, event)">
          <div class="copy-text">
            <span class="flex items-center justify-center sm:hover:text-white sm:hover:font-bold">
              <svg class="w-3 h-3 mr-1" fill="currentColor" stroke="currentColor">
                <use xlink:href="#icon-clipboard"></use>
              </svg>
            Copy code
            </span>
          </div>
          <div class="copied-text hidden">
            <span class="flex items-center justify-center">
              <svg class="w-3 h-3 mr-1" fill="currentColor" stroke="currentColor">
                  <use xlink:href="#icon-check"></use>
             </svg>
              Copied!
            </span>
          </div>
        </button>
        </div>
      <pre class="astro-code dracula" style="background-color:#282A36;color:#F8F8F2;overflow-x:auto" tabindex="0"><code><span class="line"><span style="color:#FF79C6">@Test</span><span style="color:#F8F8F2">(.</span><span style="color:#8BE9FD">timeLimit</span><span style="color:#F8F8F2">(.</span><span style="color:#8BE9FD">minutes</span><span style="color:#F8F8F2">(</span><span style="color:#BD93F9">1</span><span style="color:#F8F8F2">)))</span></span>
<span class="line"><span style="color:#FF79C6">func</span><span style="color:#50FA7B"> example</span><span style="color:#F8F8F2">() </span><span style="color:#FF79C6">async</span><span style="color:#FF79C6"> throws</span><span style="color:#F8F8F2">{  </span><span style="color:#6272A4">// Time limit was exceeded: 60.000 seconds</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FF79C6">  try</span><span style="color:#FF79C6"> await</span><span style="color:#F8F8F2"> Task.</span><span style="color:#8BE9FD">sleep</span><span style="color:#F8F8F2">(</span><span style="color:#8BE9FD">for</span><span style="color:#F8F8F2">: .</span><span style="color:#8BE9FD">seconds</span><span style="color:#F8F8F2">(</span><span style="color:#BD93F9">70</span><span style="color:#F8F8F2">))</span></span>
<span class="line"><span style="color:#F8F8F2">  #</span><span style="color:#8BE9FD">expect</span><span style="color:#F8F8F2">( </span><span style="color:#BD93F9">4</span><span style="color:#FF79C6"> &gt;</span><span style="color:#BD93F9"> 3</span><span style="color:#F8F8F2">)</span></span>
<span class="line"><span style="color:#F8F8F2">}</span></span></code></pre></div>
<h3 id="serialized">serialized</h3>
<p>虽然 Swift Testing 默认采用并行化的测试模式，<code>serialized</code> 特征允许指定的测试套件以串行方式执行：</p>
<div>
        <div class="flex justify-between items-center h-8 font-medium bg-[#96744d] dark:bg-[#002565] text-gray-200 text-xs rounded-tl-md rounded-tr-md">
          <span class="px-4 py-1">Swift</span>
          <button class="copy-button py-1 px-4" onclick="copyCode(this, event)">
          <div class="copy-text">
            <span class="flex items-center justify-center sm:hover:text-white sm:hover:font-bold">
              <svg class="w-3 h-3 mr-1" fill="currentColor" stroke="currentColor">
                <use xlink:href="#icon-clipboard"></use>
              </svg>
            Copy code
            </span>
          </div>
          <div class="copied-text hidden">
            <span class="flex items-center justify-center">
              <svg class="w-3 h-3 mr-1" fill="currentColor" stroke="currentColor">
                  <use xlink:href="#icon-check"></use>
             </svg>
              Copied!
            </span>
          </div>
        </button>
        </div>
      <pre class="astro-code dracula" style="background-color:#282A36;color:#F8F8F2;overflow-x:auto" tabindex="0"><code><span class="line"><span style="color:#FF79C6">@Suite</span><span style="color:#F8F8F2">(.serialized)</span></span>
<span class="line"><span style="color:#FF79C6">struct</span><span style="color:#8BE9FD;font-style:italic"> PeopleTests</span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#FF79C6">  struct</span><span style="color:#8BE9FD;font-style:italic"> NameTests</span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#FF79C6">    @Test</span><span style="color:#FF79C6"> func</span><span style="color:#50FA7B"> checkName</span><span style="color:#F8F8F2">() </span><span style="color:#FF79C6">async</span><span style="color:#FF79C6"> throws</span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#FF79C6">      let</span><span style="color:#F8F8F2"> fat </span><span style="color:#FF79C6">=</span><span style="color:#F8F8F2"> People.fat</span></span>
<span class="line"><span style="color:#F8F8F2">      #</span><span style="color:#8BE9FD">expect</span><span style="color:#F8F8F2">(fat.name </span><span style="color:#FF79C6">==</span><span style="color:#E9F284"> &quot;</span><span style="color:#F1FA8C">fat</span><span style="color:#E9F284">&quot;</span><span style="color:#F8F8F2">)</span></span>
<span class="line"><span style="color:#F8F8F2">    }</span></span>
<span class="line"><span style="color:#F8F8F2">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FF79C6">  struct</span><span style="color:#8BE9FD;font-style:italic"> AgeTests</span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#FF79C6">    @Test</span><span style="color:#F8F8F2">(.</span><span style="color:#8BE9FD">tags</span><span style="color:#F8F8F2">(.numberCheck)) </span><span style="color:#FF79C6">func</span><span style="color:#50FA7B"> checkAge</span><span style="color:#F8F8F2">() </span><span style="color:#FF79C6">async</span><span style="color:#FF79C6"> throws</span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#FF79C6">      let</span><span style="color:#F8F8F2"> fat </span><span style="color:#FF79C6">=</span><span style="color:#F8F8F2"> People.fat</span></span>
<span class="line"><span style="color:#F8F8F2">      #</span><span style="color:#8BE9FD">expect</span><span style="color:#F8F8F2">(</span><span style="color:#FF79C6">!</span><span style="color:#F8F8F2">fat.name.</span><span style="color:#BD93F9">isEmpty</span><span style="color:#F8F8F2">)</span></span>
<span class="line"><span style="color:#F8F8F2">    }</span></span>
<span class="line"><span style="color:#F8F8F2">  }</span></span>
<span class="line"><span style="color:#F8F8F2">}</span></span>
<span class="line"></span></code></pre></div>
<h3 id="特征继承">特征继承</h3>
<p>测试套件上定义的特征会被其所有嵌套类型和测试用例继承。例如，添加到 <code>PeopleTests</code> 的 <code>.tags(.people)</code> 特征会自动应用到 <code>NameTests</code> 和 <code>AgeTests</code>，以及它们包含的测试用例上</p>
<div>
        <div class="flex justify-between items-center h-8 font-medium bg-[#96744d] dark:bg-[#002565] text-gray-200 text-xs rounded-tl-md rounded-tr-md">
          <span class="px-4 py-1">Swift</span>
          <button class="copy-button py-1 px-4" onclick="copyCode(this, event)">
          <div class="copy-text">
            <span class="flex items-center justify-center sm:hover:text-white sm:hover:font-bold">
              <svg class="w-3 h-3 mr-1" fill="currentColor" stroke="currentColor">
                <use xlink:href="#icon-clipboard"></use>
              </svg>
            Copy code
            </span>
          </div>
          <div class="copied-text hidden">
            <span class="flex items-center justify-center">
              <svg class="w-3 h-3 mr-1" fill="currentColor" stroke="currentColor">
                  <use xlink:href="#icon-check"></use>
             </svg>
              Copied!
            </span>
          </div>
        </button>
        </div>
      <pre class="astro-code dracula" style="background-color:#282A36;color:#F8F8F2;overflow-x:auto" tabindex="0"><code><span class="line"><span style="color:#FF79C6">@Suite</span><span style="color:#F8F8F2">(.</span><span style="color:#8BE9FD">tags</span><span style="color:#F8F8F2">(.people)) </span><span style="color:#6272A4">// 添加 people 标签到套件</span></span>
<span class="line"><span style="color:#FF79C6">struct</span><span style="color:#8BE9FD;font-style:italic"> PeopleTests</span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#FF79C6">  struct</span><span style="color:#8BE9FD;font-style:italic"> NameTests</span><span style="color:#F8F8F2"> { </span><span style="color:#6272A4">// 默认继承 people tag</span></span>
<span class="line"><span style="color:#FF79C6">    @Test</span><span style="color:#FF79C6"> func</span><span style="color:#50FA7B"> checkName</span><span style="color:#F8F8F2">() </span><span style="color:#FF79C6">async</span><span style="color:#FF79C6"> throws</span><span style="color:#F8F8F2"> { </span><span style="color:#6272A4">// 默认继承 people tag</span></span>
<span class="line"><span style="color:#FF79C6">      let</span><span style="color:#F8F8F2"> fat </span><span style="color:#FF79C6">=</span><span style="color:#F8F8F2"> People.fat</span></span>
<span class="line"><span style="color:#F8F8F2">      #</span><span style="color:#8BE9FD">expect</span><span style="color:#F8F8F2">(fat.name </span><span style="color:#FF79C6">==</span><span style="color:#E9F284"> &quot;</span><span style="color:#F1FA8C">fat</span><span style="color:#E9F284">&quot;</span><span style="color:#F8F8F2">)</span></span>
<span class="line"><span style="color:#F8F8F2">    }</span></span>
<span class="line"><span style="color:#F8F8F2">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FF79C6">  struct</span><span style="color:#8BE9FD;font-style:italic"> AgeTests</span><span style="color:#F8F8F2"> { </span><span style="color:#6272A4">// 默认继承 people tag</span></span>
<span class="line"><span style="color:#FF79C6">    @Test</span><span style="color:#FF79C6"> func</span><span style="color:#50FA7B"> checkAge</span><span style="color:#F8F8F2">() </span><span style="color:#FF79C6">async</span><span style="color:#FF79C6"> throws</span><span style="color:#F8F8F2"> { </span><span style="color:#6272A4">// 默认继承 people tag</span></span>
<span class="line"><span style="color:#FF79C6">      let</span><span style="color:#F8F8F2"> fat </span><span style="color:#FF79C6">=</span><span style="color:#F8F8F2"> People.fat</span></span>
<span class="line"><span style="color:#F8F8F2">      #</span><span style="color:#8BE9FD">expect</span><span style="color:#F8F8F2">(</span><span style="color:#FF79C6">!</span><span style="color:#F8F8F2">fat.name.</span><span style="color:#BD93F9">isEmpty</span><span style="color:#F8F8F2">)</span></span>
<span class="line"><span style="color:#F8F8F2">    }</span></span>
<span class="line"><span style="color:#F8F8F2">  }</span></span>
<span class="line"><span style="color:#F8F8F2">}</span></span></code></pre></div>
<p>了解特征的继承规则和它们在多层级结构中的相互关系是至关重要的。在下面的示例中，<code>test1()</code> 只有在满足 <code>Suite</code> 和个别测试用例的条件时才会执行。如果条件不满足，如 <code>count</code> 未大于 20，相关的测试用例将被跳过：</p>
<div>
        <div class="flex justify-between items-center h-8 font-medium bg-[#96744d] dark:bg-[#002565] text-gray-200 text-xs rounded-tl-md rounded-tr-md">
          <span class="px-4 py-1">Swift</span>
          <button class="copy-button py-1 px-4" onclick="copyCode(this, event)">
          <div class="copy-text">
            <span class="flex items-center justify-center sm:hover:text-white sm:hover:font-bold">
              <svg class="w-3 h-3 mr-1" fill="currentColor" stroke="currentColor">
                <use xlink:href="#icon-clipboard"></use>
              </svg>
            Copy code
            </span>
          </div>
          <div class="copied-text hidden">
            <span class="flex items-center justify-center">
              <svg class="w-3 h-3 mr-1" fill="currentColor" stroke="currentColor">
                  <use xlink:href="#icon-check"></use>
             </svg>
              Copied!
            </span>
          </div>
        </button>
        </div>
      <pre class="astro-code dracula" style="background-color:#282A36;color:#F8F8F2;overflow-x:auto" tabindex="0"><code><span class="line"><span style="color:#FF79C6">let</span><span style="color:#F8F8F2"> count </span><span style="color:#FF79C6">=</span><span style="color:#BD93F9"> 10</span></span>
<span class="line"><span style="color:#FF79C6">@Suite</span><span style="color:#F8F8F2">(.</span><span style="color:#8BE9FD">enabled</span><span style="color:#F8F8F2">(</span><span style="color:#8BE9FD">if</span><span style="color:#F8F8F2">: count </span><span style="color:#FF79C6">&gt;</span><span style="color:#BD93F9"> 3</span><span style="color:#F8F8F2">))</span></span>
<span class="line"><span style="color:#FF79C6">struct</span><span style="color:#8BE9FD;font-style:italic"> Group1</span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#FF79C6">  @Test</span><span style="color:#F8F8F2">(.</span><span style="color:#8BE9FD">enabled</span><span style="color:#F8F8F2">(</span><span style="color:#8BE9FD">if</span><span style="color:#F8F8F2">:count </span><span style="color:#FF79C6">&gt;</span><span style="color:#BD93F9"> 20</span><span style="color:#F8F8F2">)) </span><span style="color:#6272A4">// skip</span></span>
<span class="line"><span style="color:#FF79C6">  func</span><span style="color:#50FA7B"> test1</span><span style="color:#F8F8F2">() </span><span style="color:#FF79C6">async</span><span style="color:#FF79C6"> throws</span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#F8F8F2">    #</span><span style="color:#8BE9FD">expect</span><span style="color:#F8F8F2">(</span><span style="color:#BD93F9">true</span><span style="color:#F8F8F2">)</span></span>
<span class="line"><span style="color:#F8F8F2">  }</span></span>
<span class="line"><span style="color:#F8F8F2">  </span></span>
<span class="line"><span style="color:#FF79C6">  @Test</span></span>
<span class="line"><span style="color:#FF79C6">  func</span><span style="color:#50FA7B"> test2</span><span style="color:#F8F8F2">() </span><span style="color:#FF79C6">async</span><span style="color:#FF79C6"> throws</span><span style="color:#F8F8F2"> { </span><span style="color:#6272A4">// success</span></span>
<span class="line"><span style="color:#F8F8F2">    #</span><span style="color:#8BE9FD">expect</span><span style="color:#F8F8F2">(</span><span style="color:#BD93F9">true</span><span style="color:#F8F8F2">)</span></span>
<span class="line"><span style="color:#F8F8F2">  }</span></span>
<span class="line"><span style="color:#F8F8F2">}</span></span></code></pre></div>
<h2 id="让测试内容和测试结果更清晰">让测试内容和测试结果更清晰</h2>
<p>Swift Testing 已经显著改善了失败提示的质量，优于 XCTest。然而，我们还可以采取以下措施，进一步提升错误报告的清晰度和信息丰富性。</p>
<h3 id="自定义错误提示">自定义错误提示</h3>
<p>Swift Testing 提供了强大的自定义错误提示功能，适用于 <code>#expect</code>、<code>#require</code>、<code>confirmation</code> 和 <code>withKnownIssue</code> 等断言：</p>
<div>
        <div class="flex justify-between items-center h-8 font-medium bg-[#96744d] dark:bg-[#002565] text-gray-200 text-xs rounded-tl-md rounded-tr-md">
          <span class="px-4 py-1">Swift</span>
          <button class="copy-button py-1 px-4" onclick="copyCode(this, event)">
          <div class="copy-text">
            <span class="flex items-center justify-center sm:hover:text-white sm:hover:font-bold">
              <svg class="w-3 h-3 mr-1" fill="currentColor" stroke="currentColor">
                <use xlink:href="#icon-clipboard"></use>
              </svg>
            Copy code
            </span>
          </div>
          <div class="copied-text hidden">
            <span class="flex items-center justify-center">
              <svg class="w-3 h-3 mr-1" fill="currentColor" stroke="currentColor">
                  <use xlink:href="#icon-check"></use>
             </svg>
              Copied!
            </span>
          </div>
        </button>
        </div>
      <pre class="astro-code dracula" style="background-color:#282A36;color:#F8F8F2;overflow-x:auto" tabindex="0"><code><span class="line"><span style="color:#FF79C6">@Test</span><span style="color:#FF79C6"> func</span><span style="color:#50FA7B"> checkAge</span><span style="color:#F8F8F2">() </span><span style="color:#FF79C6">async</span><span style="color:#FF79C6"> throws</span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#FF79C6">  let</span><span style="color:#F8F8F2"> age </span><span style="color:#FF79C6">=</span><span style="color:#BD93F9"> 0</span></span>
<span class="line"><span style="color:#F8F8F2">  #</span><span style="color:#8BE9FD">expect</span><span style="color:#F8F8F2">(age </span><span style="color:#FF79C6">&gt;</span><span style="color:#BD93F9"> 10</span><span style="color:#F8F8F2">,</span><span style="color:#E9F284">&quot;</span><span style="color:#F1FA8C">age should be greater than 10</span><span style="color:#E9F284">&quot;</span><span style="color:#F8F8F2">) </span><span style="color:#6272A4">// Expectation failed: (age → 5) &gt; 10 age should be greater than 10</span></span>
<span class="line"><span style="color:#F8F8F2">}</span></span></code></pre></div>
<p>这种自定义消息使错误原因一目了然，有助于快速定位问题。</p>
<h3 id="自定义类型在错误报告中的表达方式">自定义类型在错误报告中的表达方式</h3>
<p>对于复杂的数据类型，我们可以实现 <code>CustomTestStringConvertible</code> 协议，自定义 <code>testDescription</code> 属性，以改善其在错误报告中的表现。这样做不仅使错误信息更加直观，也增强了报告的可读性。</p>
<div>
        <div class="flex justify-between items-center h-8 font-medium bg-[#96744d] dark:bg-[#002565] text-gray-200 text-xs rounded-tl-md rounded-tr-md">
          <span class="px-4 py-1">Swift</span>
          <button class="copy-button py-1 px-4" onclick="copyCode(this, event)">
          <div class="copy-text">
            <span class="flex items-center justify-center sm:hover:text-white sm:hover:font-bold">
              <svg class="w-3 h-3 mr-1" fill="currentColor" stroke="currentColor">
                <use xlink:href="#icon-clipboard"></use>
              </svg>
            Copy code
            </span>
          </div>
          <div class="copied-text hidden">
            <span class="flex items-center justify-center">
              <svg class="w-3 h-3 mr-1" fill="currentColor" stroke="currentColor">
                  <use xlink:href="#icon-check"></use>
             </svg>
              Copied!
            </span>
          </div>
        </button>
        </div>
      <pre class="astro-code dracula" style="background-color:#282A36;color:#F8F8F2;overflow-x:auto" tabindex="0"><code><span class="line"><span style="color:#FF79C6">struct</span><span style="color:#8BE9FD;font-style:italic"> Student</span><span style="color:#F8F8F2">: Equatable {</span></span>
<span class="line"><span style="color:#FF79C6">  let</span><span style="color:#F8F8F2"> name: </span><span style="color:#8BE9FD;font-style:italic">String</span></span>
<span class="line"><span style="color:#FF79C6">  let</span><span style="color:#F8F8F2"> age: </span><span style="color:#8BE9FD;font-style:italic">Int</span></span>
<span class="line"><span style="color:#FF79C6">  let</span><span style="color:#F8F8F2"> address: </span><span style="color:#8BE9FD;font-style:italic">String</span></span>
<span class="line"><span style="color:#FF79C6">  let</span><span style="color:#F8F8F2"> id: </span><span style="color:#8BE9FD;font-style:italic">Int</span></span>
<span class="line"><span style="color:#F8F8F2">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FF79C6">@Test</span><span style="color:#FF79C6"> func</span><span style="color:#50FA7B"> checkStudent</span><span style="color:#F8F8F2">() </span><span style="color:#FF79C6">async</span><span style="color:#FF79C6"> throws</span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#FF79C6">  let</span><span style="color:#F8F8F2"> fat </span><span style="color:#FF79C6">=</span><span style="color:#8BE9FD"> Student</span><span style="color:#F8F8F2">(</span><span style="color:#8BE9FD">name</span><span style="color:#F8F8F2">: </span><span style="color:#E9F284">&quot;</span><span style="color:#F1FA8C">fat</span><span style="color:#E9F284">&quot;</span><span style="color:#F8F8F2">, </span><span style="color:#8BE9FD">age</span><span style="color:#F8F8F2">: </span><span style="color:#BD93F9">5</span><span style="color:#F8F8F2">, </span><span style="color:#8BE9FD">address</span><span style="color:#F8F8F2">: </span><span style="color:#E9F284">&quot;&quot;</span><span style="color:#F8F8F2">, </span><span style="color:#8BE9FD">id</span><span style="color:#F8F8F2">: </span><span style="color:#BD93F9">0</span><span style="color:#F8F8F2">)</span></span>
<span class="line"><span style="color:#FF79C6">  let</span><span style="color:#F8F8F2"> bob </span><span style="color:#FF79C6">=</span><span style="color:#8BE9FD"> Student</span><span style="color:#F8F8F2">(</span><span style="color:#8BE9FD">name</span><span style="color:#F8F8F2">: </span><span style="color:#E9F284">&quot;</span><span style="color:#F1FA8C">bob</span><span style="color:#E9F284">&quot;</span><span style="color:#F8F8F2">, </span><span style="color:#8BE9FD">age</span><span style="color:#F8F8F2">: </span><span style="color:#BD93F9">5</span><span style="color:#F8F8F2">, </span><span style="color:#8BE9FD">address</span><span style="color:#F8F8F2">: </span><span style="color:#E9F284">&quot;&quot;</span><span style="color:#F8F8F2">, </span><span style="color:#8BE9FD">id</span><span style="color:#F8F8F2">: </span><span style="color:#BD93F9">0</span><span style="color:#F8F8F2">)</span></span>
<span class="line"><span style="color:#6272A4">  // Expectation failed: (fat → Student(name: &quot;fat&quot;, age: 5, address: &quot;&quot;, id: 0)) == (bob → Student(name: &quot;bob&quot;, age: 5, address: &quot;&quot;, id: 0))</span></span>
<span class="line"><span style="color:#F8F8F2">  #</span><span style="color:#8BE9FD">expect</span><span style="color:#F8F8F2">(fat </span><span style="color:#FF79C6">==</span><span style="color:#F8F8F2"> bob) </span></span>
<span class="line"><span style="color:#F8F8F2">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6272A4">// 自定义 testDescription</span></span>
<span class="line"><span style="color:#FF79C6">extension</span><span style="color:#8BE9FD;font-style:italic"> Student</span><span style="color:#F8F8F2">: CustomTestStringConvertible {</span></span>
<span class="line"><span style="color:#FF79C6">  var</span><span style="color:#F8F8F2"> testDescription: </span><span style="color:#8BE9FD;font-style:italic">String</span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#E9F284">    &quot;</span><span style="color:#F1FA8C">student: </span><span style="color:#FF79C6">\(</span><span style="color:#F1FA8C">name</span><span style="color:#FF79C6">)</span><span style="color:#E9F284">&quot;</span></span>
<span class="line"><span style="color:#F8F8F2">  }</span></span>
<span class="line"><span style="color:#F8F8F2">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FF79C6">@Test</span><span style="color:#FF79C6"> func</span><span style="color:#50FA7B"> checkStudent</span><span style="color:#F8F8F2">() </span><span style="color:#FF79C6">async</span><span style="color:#FF79C6"> throws</span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#FF79C6">  let</span><span style="color:#F8F8F2"> fat </span><span style="color:#FF79C6">=</span><span style="color:#8BE9FD"> Student</span><span style="color:#F8F8F2">(</span><span style="color:#8BE9FD">name</span><span style="color:#F8F8F2">: </span><span style="color:#E9F284">&quot;</span><span style="color:#F1FA8C">fat</span><span style="color:#E9F284">&quot;</span><span style="color:#F8F8F2">, </span><span style="color:#8BE9FD">age</span><span style="color:#F8F8F2">: </span><span style="color:#BD93F9">5</span><span style="color:#F8F8F2">, </span><span style="color:#8BE9FD">address</span><span style="color:#F8F8F2">: </span><span style="color:#E9F284">&quot;&quot;</span><span style="color:#F8F8F2">, </span><span style="color:#8BE9FD">id</span><span style="color:#F8F8F2">: </span><span style="color:#BD93F9">0</span><span style="color:#F8F8F2">)</span></span>
<span class="line"><span style="color:#FF79C6">  let</span><span style="color:#F8F8F2"> bob </span><span style="color:#FF79C6">=</span><span style="color:#8BE9FD"> Student</span><span style="color:#F8F8F2">(</span><span style="color:#8BE9FD">name</span><span style="color:#F8F8F2">: </span><span style="color:#E9F284">&quot;</span><span style="color:#F1FA8C">bob</span><span style="color:#E9F284">&quot;</span><span style="color:#F8F8F2">, </span><span style="color:#8BE9FD">age</span><span style="color:#F8F8F2">: </span><span style="color:#BD93F9">5</span><span style="color:#F8F8F2">, </span><span style="color:#8BE9FD">address</span><span style="color:#F8F8F2">: </span><span style="color:#E9F284">&quot;&quot;</span><span style="color:#F8F8F2">, </span><span style="color:#8BE9FD">id</span><span style="color:#F8F8F2">: </span><span style="color:#BD93F9">0</span><span style="color:#F8F8F2">)</span></span>
<span class="line"><span style="color:#6272A4">  // Expectation failed: (fat → student: fat) == (bob → student: bob)</span></span>
<span class="line"><span style="color:#F8F8F2">  #</span><span style="color:#8BE9FD">expect</span><span style="color:#F8F8F2">(fat </span><span style="color:#FF79C6">==</span><span style="color:#F8F8F2"> bob)</span></span>
<span class="line"><span style="color:#F8F8F2">}</span></span></code></pre></div>
<p>通过这些技术，测试结果的表述不仅更具体，而且更容易理解，极大地简化了测试代码的调试过程。</p>
<h2 id="参数化测试-parameterized-testing">参数化测试（ Parameterized testing ）</h2>
<p>参数化测试是 Swift Testing 一项非常有特色的功能，它显著减少了重复测试相同逻辑但使用不同参数的需要。这使得开发者能够在最小化代码重复的同时扩展测试覆盖范围，覆盖更广泛的使用场景。</p>
<p>考虑以下多个测试用例的示例：</p>
<div>
        <div class="flex justify-between items-center h-8 font-medium bg-[#96744d] dark:bg-[#002565] text-gray-200 text-xs rounded-tl-md rounded-tr-md">
          <span class="px-4 py-1">Swift</span>
          <button class="copy-button py-1 px-4" onclick="copyCode(this, event)">
          <div class="copy-text">
            <span class="flex items-center justify-center sm:hover:text-white sm:hover:font-bold">
              <svg class="w-3 h-3 mr-1" fill="currentColor" stroke="currentColor">
                <use xlink:href="#icon-clipboard"></use>
              </svg>
            Copy code
            </span>
          </div>
          <div class="copied-text hidden">
            <span class="flex items-center justify-center">
              <svg class="w-3 h-3 mr-1" fill="currentColor" stroke="currentColor">
                  <use xlink:href="#icon-check"></use>
             </svg>
              Copied!
            </span>
          </div>
        </button>
        </div>
      <pre class="astro-code dracula" style="background-color:#282A36;color:#F8F8F2;overflow-x:auto" tabindex="0"><code><span class="line"><span style="color:#FF79C6">struct</span><span style="color:#8BE9FD;font-style:italic"> VideoContinentsTests</span><span style="color:#F8F8F2"> {</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FF79C6">    @Test</span><span style="color:#FF79C6"> func</span><span style="color:#50FA7B"> mentionsFor_A_Beach</span><span style="color:#F8F8F2">() </span><span style="color:#FF79C6">async</span><span style="color:#FF79C6"> throws</span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#FF79C6">        let</span><span style="color:#F8F8F2"> videoLibrary </span><span style="color:#FF79C6">=</span><span style="color:#FF79C6"> try</span><span style="color:#FF79C6"> await</span><span style="color:#8BE9FD"> VideoLibrary</span><span style="color:#F8F8F2">()</span></span>
<span class="line"><span style="color:#FF79C6">        let</span><span style="color:#F8F8F2"> video </span><span style="color:#FF79C6">=</span><span style="color:#FF79C6"> try</span><span style="color:#F8F8F2"> #</span><span style="color:#8BE9FD">require</span><span style="color:#F8F8F2">(</span><span style="color:#FF79C6">await</span><span style="color:#F8F8F2"> videoLibrary.</span><span style="color:#8BE9FD">video</span><span style="color:#F8F8F2">(</span><span style="color:#8BE9FD">named</span><span style="color:#F8F8F2">: </span><span style="color:#E9F284">&quot;</span><span style="color:#F1FA8C">A Beach</span><span style="color:#E9F284">&quot;</span><span style="color:#F8F8F2">))</span></span>
<span class="line"><span style="color:#F8F8F2">        #</span><span style="color:#8BE9FD">expect</span><span style="color:#F8F8F2">(</span><span style="color:#FF79C6">!</span><span style="color:#F8F8F2">video.mentionedContinents.</span><span style="color:#BD93F9">isEmpty</span><span style="color:#F8F8F2">)</span></span>
<span class="line"><span style="color:#F8F8F2">        #</span><span style="color:#8BE9FD">expect</span><span style="color:#F8F8F2">(video.mentionedContinents.</span><span style="color:#BD93F9">count</span><span style="color:#FF79C6"> &lt;=</span><span style="color:#BD93F9"> 3</span><span style="color:#F8F8F2">)</span></span>
<span class="line"><span style="color:#F8F8F2">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FF79C6">    @Test</span><span style="color:#FF79C6"> func</span><span style="color:#50FA7B"> mentionsFor_By_the_Lake</span><span style="color:#F8F8F2">() </span><span style="color:#FF79C6">async</span><span style="color:#FF79C6"> throws</span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#FF79C6">        let</span><span style="color:#F8F8F2"> videoLibrary </span><span style="color:#FF79C6">=</span><span style="color:#FF79C6"> try</span><span style="color:#FF79C6"> await</span><span style="color:#8BE9FD"> VideoLibrary</span><span style="color:#F8F8F2">()</span></span>
<span class="line"><span style="color:#FF79C6">        let</span><span style="color:#F8F8F2"> video </span><span style="color:#FF79C6">=</span><span style="color:#FF79C6"> try</span><span style="color:#F8F8F2"> #</span><span style="color:#8BE9FD">require</span><span style="color:#F8F8F2">(</span><span style="color:#FF79C6">await</span><span style="color:#F8F8F2"> videoLibrary.</span><span style="color:#8BE9FD">video</span><span style="color:#F8F8F2">(</span><span style="color:#8BE9FD">named</span><span style="color:#F8F8F2">: </span><span style="color:#E9F284">&quot;</span><span style="color:#F1FA8C">By the Lake</span><span style="color:#E9F284">&quot;</span><span style="color:#F8F8F2">))</span></span>
<span class="line"><span style="color:#F8F8F2">        #</span><span style="color:#8BE9FD">expect</span><span style="color:#F8F8F2">(</span><span style="color:#FF79C6">!</span><span style="color:#F8F8F2">video.mentionedContinents.</span><span style="color:#BD93F9">isEmpty</span><span style="color:#F8F8F2">)</span></span>
<span class="line"><span style="color:#F8F8F2">        #</span><span style="color:#8BE9FD">expect</span><span style="color:#F8F8F2">(video.mentionedContinents.</span><span style="color:#BD93F9">count</span><span style="color:#FF79C6"> &lt;=</span><span style="color:#BD93F9"> 3</span><span style="color:#F8F8F2">)</span></span>
<span class="line"><span style="color:#F8F8F2">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FF79C6">    @Test</span><span style="color:#FF79C6"> func</span><span style="color:#50FA7B"> mentionsFor_Camping_in_the_Woods</span><span style="color:#F8F8F2">() </span><span style="color:#FF79C6">async</span><span style="color:#FF79C6"> throws</span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#FF79C6">        let</span><span style="color:#F8F8F2"> videoLibrary </span><span style="color:#FF79C6">=</span><span style="color:#FF79C6"> try</span><span style="color:#FF79C6"> await</span><span style="color:#8BE9FD"> VideoLibrary</span><span style="color:#F8F8F2">()</span></span>
<span class="line"><span style="color:#FF79C6">        let</span><span style="color:#F8F8F2"> video </span><span style="color:#FF79C6">=</span><span style="color:#FF79C6"> try</span><span style="color:#F8F8F2"> #</span><span style="color:#8BE9FD">require</span><span style="color:#F8F8F2">(</span><span style="color:#FF79C6">await</span><span style="color:#F8F8F2"> videoLibrary.</span><span style="color:#8BE9FD">video</span><span style="color:#F8F8F2">(</span><span style="color:#8BE9FD">named</span><span style="color:#F8F8F2">: </span><span style="color:#E9F284">&quot;</span><span style="color:#F1FA8C">Camping in the Woods</span><span style="color:#E9F284">&quot;</span><span style="color:#F8F8F2">))</span></span>
<span class="line"><span style="color:#F8F8F2">        #</span><span style="color:#8BE9FD">expect</span><span style="color:#F8F8F2">(</span><span style="color:#FF79C6">!</span><span style="color:#F8F8F2">video.mentionedContinents.</span><span style="color:#BD93F9">isEmpty</span><span style="color:#F8F8F2">)</span></span>
<span class="line"><span style="color:#F8F8F2">        #</span><span style="color:#8BE9FD">expect</span><span style="color:#F8F8F2">(video.mentionedContinents.</span><span style="color:#BD93F9">count</span><span style="color:#FF79C6"> &lt;=</span><span style="color:#BD93F9"> 3</span><span style="color:#F8F8F2">)</span></span>
<span class="line"><span style="color:#F8F8F2">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6272A4">    // ...and more, similar test functions</span></span>
<span class="line"><span style="color:#F8F8F2">}</span></span></code></pre></div>
<p>通过使用参数化测试，上述代码可以被简化为：</p>
<div>
        <div class="flex justify-between items-center h-8 font-medium bg-[#96744d] dark:bg-[#002565] text-gray-200 text-xs rounded-tl-md rounded-tr-md">
          <span class="px-4 py-1">Swift</span>
          <button class="copy-button py-1 px-4" onclick="copyCode(this, event)">
          <div class="copy-text">
            <span class="flex items-center justify-center sm:hover:text-white sm:hover:font-bold">
              <svg class="w-3 h-3 mr-1" fill="currentColor" stroke="currentColor">
                <use xlink:href="#icon-clipboard"></use>
              </svg>
            Copy code
            </span>
          </div>
          <div class="copied-text hidden">
            <span class="flex items-center justify-center">
              <svg class="w-3 h-3 mr-1" fill="currentColor" stroke="currentColor">
                  <use xlink:href="#icon-check"></use>
             </svg>
              Copied!
            </span>
          </div>
        </button>
        </div>
      <pre class="astro-code dracula" style="background-color:#282A36;color:#F8F8F2;overflow-x:auto" tabindex="0"><code><span class="line"><span style="color:#FF79C6">struct</span><span style="color:#8BE9FD;font-style:italic"> VideoContinentsTests</span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#FF79C6">    @Test</span><span style="color:#F8F8F2">(</span><span style="color:#E9F284">&quot;</span><span style="color:#F1FA8C">Number of mentioned continents</span><span style="color:#E9F284">&quot;</span><span style="color:#F8F8F2">, arguments</span><span style="color:#FF79C6">:</span><span style="color:#F8F8F2"> [</span></span>
<span class="line"><span style="color:#E9F284">        &quot;</span><span style="color:#F1FA8C">A Beach</span><span style="color:#E9F284">&quot;</span><span style="color:#F8F8F2">,</span></span>
<span class="line"><span style="color:#E9F284">        &quot;</span><span style="color:#F1FA8C">By the Lake</span><span style="color:#E9F284">&quot;</span><span style="color:#F8F8F2">,</span></span>
<span class="line"><span style="color:#E9F284">        &quot;</span><span style="color:#F1FA8C">Camping in the Woods</span><span style="color:#E9F284">&quot;</span><span style="color:#F8F8F2">,</span></span>
<span class="line"><span style="color:#E9F284">        &quot;</span><span style="color:#F1FA8C">The Rolling Hills</span><span style="color:#E9F284">&quot;</span><span style="color:#F8F8F2">,</span></span>
<span class="line"><span style="color:#E9F284">        &quot;</span><span style="color:#F1FA8C">Ocean Breeze</span><span style="color:#E9F284">&quot;</span><span style="color:#F8F8F2">,</span></span>
<span class="line"><span style="color:#E9F284">        &quot;</span><span style="color:#F1FA8C">Patagonia Lake</span><span style="color:#E9F284">&quot;</span><span style="color:#F8F8F2">,</span></span>
<span class="line"><span style="color:#E9F284">        &quot;</span><span style="color:#F1FA8C">Scotland Coast</span><span style="color:#E9F284">&quot;</span><span style="color:#F8F8F2">,</span></span>
<span class="line"><span style="color:#E9F284">        &quot;</span><span style="color:#F1FA8C">China Paddy Field</span><span style="color:#E9F284">&quot;</span><span style="color:#F8F8F2">,</span></span>
<span class="line"><span style="color:#F8F8F2">    ])</span></span>
<span class="line"><span style="color:#FF79C6">    func</span><span style="color:#50FA7B"> mentionedContinentCounts</span><span style="color:#F8F8F2">(</span><span style="color:#50FA7B;font-style:italic">videoName</span><span style="color:#F8F8F2">: </span><span style="color:#8BE9FD;font-style:italic">String</span><span style="color:#F8F8F2">) </span><span style="color:#FF79C6">async</span><span style="color:#FF79C6"> throws</span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#FF79C6">        let</span><span style="color:#F8F8F2"> videoLibrary </span><span style="color:#FF79C6">=</span><span style="color:#FF79C6"> try</span><span style="color:#FF79C6"> await</span><span style="color:#8BE9FD"> VideoLibrary</span><span style="color:#F8F8F2">()</span></span>
<span class="line"><span style="color:#FF79C6">        let</span><span style="color:#F8F8F2"> video </span><span style="color:#FF79C6">=</span><span style="color:#FF79C6"> try</span><span style="color:#F8F8F2"> #</span><span style="color:#8BE9FD">require</span><span style="color:#F8F8F2">(</span><span style="color:#FF79C6">await</span><span style="color:#F8F8F2"> videoLibrary.</span><span style="color:#8BE9FD">video</span><span style="color:#F8F8F2">(</span><span style="color:#8BE9FD">named</span><span style="color:#F8F8F2">: videoName))</span></span>
<span class="line"><span style="color:#F8F8F2">        #</span><span style="color:#8BE9FD">expect</span><span style="color:#F8F8F2">(</span><span style="color:#FF79C6">!</span><span style="color:#F8F8F2">video.mentionedContinents.</span><span style="color:#BD93F9">isEmpty</span><span style="color:#F8F8F2">)</span></span>
<span class="line"><span style="color:#F8F8F2">        #</span><span style="color:#8BE9FD">expect</span><span style="color:#F8F8F2">(video.mentionedContinents.</span><span style="color:#BD93F9">count</span><span style="color:#FF79C6"> &lt;=</span><span style="color:#BD93F9"> 3</span><span style="color:#F8F8F2">)</span></span>
<span class="line"><span style="color:#F8F8F2">    }</span></span>
<span class="line"><span style="color:#F8F8F2">}</span></span></code></pre></div>
<p>Swift Testing 自动跟踪每次测试调用的参数，并在结果中记录它们。开发者可以选择性地重新运行失败的特定参数组合，进行细粒度的调试：</p>
<div>
        <div class="flex justify-between items-center h-8 font-medium bg-[#96744d] dark:bg-[#002565] text-gray-200 text-xs rounded-tl-md rounded-tr-md">
          <span class="px-4 py-1">Swift</span>
          <button class="copy-button py-1 px-4" onclick="copyCode(this, event)">
          <div class="copy-text">
            <span class="flex items-center justify-center sm:hover:text-white sm:hover:font-bold">
              <svg class="w-3 h-3 mr-1" fill="currentColor" stroke="currentColor">
                <use xlink:href="#icon-clipboard"></use>
              </svg>
            Copy code
            </span>
          </div>
          <div class="copied-text hidden">
            <span class="flex items-center justify-center">
              <svg class="w-3 h-3 mr-1" fill="currentColor" stroke="currentColor">
                  <use xlink:href="#icon-check"></use>
             </svg>
              Copied!
            </span>
          </div>
        </button>
        </div>
      <pre class="astro-code dracula" style="background-color:#282A36;color:#F8F8F2;overflow-x:auto" tabindex="0"><code><span class="line"><span style="color:#FF79C6">let</span><span style="color:#F8F8F2"> data </span><span style="color:#FF79C6">=</span><span style="color:#F8F8F2"> [</span></span>
<span class="line"><span style="color:#F8F8F2">  (</span><span style="color:#E9F284">&quot;</span><span style="color:#F1FA8C">fat</span><span style="color:#E9F284">&quot;</span><span style="color:#F8F8F2">,</span><span style="color:#BD93F9">3</span><span style="color:#F8F8F2">),</span></span>
<span class="line"><span style="color:#F8F8F2">  (</span><span style="color:#E9F284">&quot;</span><span style="color:#F1FA8C">bob</span><span style="color:#E9F284">&quot;</span><span style="color:#F8F8F2">,</span><span style="color:#BD93F9">2</span><span style="color:#F8F8F2">)</span></span>
<span class="line"><span style="color:#F8F8F2">]</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FF79C6">@Test</span><span style="color:#F8F8F2">(arguments</span><span style="color:#FF79C6">:</span><span style="color:#F8F8F2">data)</span></span>
<span class="line"><span style="color:#FF79C6">func</span><span style="color:#50FA7B"> matchStrLength</span><span style="color:#F8F8F2">(</span><span style="color:#50FA7B;font-style:italic">str</span><span style="color:#F8F8F2">:</span><span style="color:#8BE9FD;font-style:italic">String</span><span style="color:#F8F8F2">,</span><span style="color:#50FA7B;font-style:italic">count</span><span style="color:#F8F8F2">:</span><span style="color:#8BE9FD;font-style:italic">Int</span><span style="color:#F8F8F2">) {</span></span>
<span class="line"><span style="color:#F8F8F2">  #</span><span style="color:#8BE9FD">expect</span><span style="color:#F8F8F2">(str.</span><span style="color:#BD93F9">count</span><span style="color:#FF79C6"> ==</span><span style="color:#F8F8F2"> count)</span></span>
<span class="line"><span style="color:#F8F8F2">}</span></span></code></pre></div>
<p><picture>
                    <source media="(max-width: 479px)" srcset="https://cdn.fatbobman.com/image-20240627184209655.webp?imageView2/0/w/500"/>
                    <source media="(max-width: 767px)" srcset="https://cdn.fatbobman.com/image-20240627184209655.webp?imageView2/0/w/768"/>
                    <source media="(max-width: 1024px)" srcset="https://cdn.fatbobman.com/image-20240627184209655.webp?imageView2/0/w/1024"/>
                    <img src="https://cdn.fatbobman.com/image-20240627184209655.webp" alt="parameterized-testing-of-swift-testing" loading="lazy" decoding="async"/>
                  </picture></p>
<p>在上面的测试中，与 <code>bob</code> 对应的长度数据 <code>2</code> 出现了错误，将其调整为 <code>3</code> 后，可以点击左侧导航栏中对应的 <code>bob</code> 参数，单独执行这一组数据的测试。</p>
<p><picture>
                    <source media="(max-width: 479px)" srcset="https://cdn.fatbobman.com/image-20240627184444440.webp?imageView2/0/w/500"/>
                    <source media="(max-width: 767px)" srcset="https://cdn.fatbobman.com/image-20240627184444440.webp?imageView2/0/w/768"/>
                    <source media="(max-width: 1024px)" srcset="https://cdn.fatbobman.com/image-20240627184444440.webp?imageView2/0/w/1024"/>
                    <img src="https://cdn.fatbobman.com/image-20240627184444440.webp" alt="parameterized-testing-of-swift-testing-2" loading="lazy" decoding="async"/>
                  </picture></p>
<p>Swift Testing 支持使用任何符合 <code>Collection</code> 协议的数据结构作为参数源，要求数据类型一致且每个数据项符合 <code>Sendable</code> 协议。以下几种方式声明的数据均可作为 <code>matchStrLength</code> 的测试参数源：</p>
<div>
        <div class="flex justify-between items-center h-8 font-medium bg-[#96744d] dark:bg-[#002565] text-gray-200 text-xs rounded-tl-md rounded-tr-md">
          <span class="px-4 py-1">Swift</span>
          <button class="copy-button py-1 px-4" onclick="copyCode(this, event)">
          <div class="copy-text">
            <span class="flex items-center justify-center sm:hover:text-white sm:hover:font-bold">
              <svg class="w-3 h-3 mr-1" fill="currentColor" stroke="currentColor">
                <use xlink:href="#icon-clipboard"></use>
              </svg>
            Copy code
            </span>
          </div>
          <div class="copied-text hidden">
            <span class="flex items-center justify-center">
              <svg class="w-3 h-3 mr-1" fill="currentColor" stroke="currentColor">
                  <use xlink:href="#icon-check"></use>
             </svg>
              Copied!
            </span>
          </div>
        </button>
        </div>
      <pre class="astro-code dracula" style="background-color:#282A36;color:#F8F8F2;overflow-x:auto" tabindex="0"><code><span class="line"><span style="color:#FF79C6">let</span><span style="color:#F8F8F2"> data: [</span><span style="color:#8BE9FD;font-style:italic">String</span><span style="color:#FF79C6">:</span><span style="color:#8BE9FD;font-style:italic"> Int</span><span style="color:#F8F8F2">] </span><span style="color:#FF79C6">=</span><span style="color:#F8F8F2"> [</span></span>
<span class="line"><span style="color:#E9F284">  &quot;</span><span style="color:#F1FA8C">fat</span><span style="color:#E9F284">&quot;</span><span style="color:#FF79C6">:</span><span style="color:#BD93F9"> 3</span><span style="color:#F8F8F2">,</span></span>
<span class="line"><span style="color:#E9F284">  &quot;</span><span style="color:#F1FA8C">bob</span><span style="color:#E9F284">&quot;</span><span style="color:#FF79C6">:</span><span style="color:#BD93F9"> 3</span><span style="color:#F8F8F2">,</span></span>
<span class="line"><span style="color:#F8F8F2">]</span></span>
<span class="line"><span style="color:#FF79C6">@Test</span><span style="color:#F8F8F2">(arguments</span><span style="color:#FF79C6">:</span><span style="color:#F8F8F2"> data)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FF79C6">let</span><span style="color:#F8F8F2"> strs </span><span style="color:#FF79C6">=</span><span style="color:#F8F8F2"> [</span><span style="color:#E9F284">&quot;</span><span style="color:#F1FA8C">fat</span><span style="color:#E9F284">&quot;</span><span style="color:#F8F8F2">,</span><span style="color:#E9F284">&quot;</span><span style="color:#F1FA8C">bob</span><span style="color:#E9F284">&quot;</span><span style="color:#F8F8F2">]</span></span>
<span class="line"><span style="color:#FF79C6">let</span><span style="color:#F8F8F2"> counts </span><span style="color:#FF79C6">=</span><span style="color:#F8F8F2"> [</span><span style="color:#BD93F9">3</span><span style="color:#F8F8F2">,</span><span style="color:#BD93F9">3</span><span style="color:#F8F8F2">]</span></span>
<span class="line"><span style="color:#FF79C6">@Test</span><span style="color:#F8F8F2">(arguments</span><span style="color:#FF79C6">:</span><span style="color:#F8F8F2"> strs,counts)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FF79C6">let</span><span style="color:#F8F8F2"> strs </span><span style="color:#FF79C6">=</span><span style="color:#F8F8F2"> [</span><span style="color:#E9F284">&quot;</span><span style="color:#F1FA8C">fat</span><span style="color:#E9F284">&quot;</span><span style="color:#F8F8F2">,</span><span style="color:#E9F284">&quot;</span><span style="color:#F1FA8C">bob</span><span style="color:#E9F284">&quot;</span><span style="color:#F8F8F2">]</span></span>
<span class="line"><span style="color:#FF79C6">let</span><span style="color:#F8F8F2"> counts </span><span style="color:#FF79C6">=</span><span style="color:#F8F8F2"> [</span><span style="color:#BD93F9">3</span><span style="color:#F8F8F2">,</span><span style="color:#BD93F9">3</span><span style="color:#F8F8F2">]</span></span>
<span class="line"><span style="color:#FF79C6">@Test</span><span style="color:#F8F8F2">(arguments</span><span style="color:#FF79C6">:</span><span style="color:#8BE9FD"> zip</span><span style="color:#F8F8F2">(strs,counts))</span></span></code></pre></div>
<p>参数化测试的并行化执行不仅简化了测试代码，而且通过自动记录每次测试的参数以及提供选择性重运行的机制，显著提高了测试的灵活性和执行的准确性。</p>
<h2 id="并行化">并行化</h2>
<p>Swift Testing 采用默认并行化的测试方式。并行化不仅加快了测试结果的输出和缩短了迭代周期，还有助于揭示测试之间的隐藏依赖关系，从而促使开发者在代码中实施更严格的状态隔离措施。</p>
<p>对于不适宜并行执行的测试，可以通过为 <code>@Suite</code> 添加 <code>serialized</code> 特征来禁用并行化。由于特征的继承性，一旦套件被标记为 <code>serialized</code>，其内部的所有测试都将按顺序执行。</p>
<p>参数化测试默认采用并行化方式，相比于传统的 <code>for in</code> 循环迭代数据，这种方法显著提高了测试的效率。然而，这种方法不保证数据处理的顺序。</p>
<p>在 XCTest 中，为 <code>XCTestCase</code> 子类添加 <code>@MainActor</code> 或其他 <code>GlobalActor</code> 标注可能会触发警告，这迫使开发者需要为每个测试用例单独添加 <code>@MainActor</code>。</p>
<div>
        <div class="flex justify-between items-center h-8 font-medium bg-[#96744d] dark:bg-[#002565] text-gray-200 text-xs rounded-tl-md rounded-tr-md">
          <span class="px-4 py-1">Swift</span>
          <button class="copy-button py-1 px-4" onclick="copyCode(this, event)">
          <div class="copy-text">
            <span class="flex items-center justify-center sm:hover:text-white sm:hover:font-bold">
              <svg class="w-3 h-3 mr-1" fill="currentColor" stroke="currentColor">
                <use xlink:href="#icon-clipboard"></use>
              </svg>
            Copy code
            </span>
          </div>
          <div class="copied-text hidden">
            <span class="flex items-center justify-center">
              <svg class="w-3 h-3 mr-1" fill="currentColor" stroke="currentColor">
                  <use xlink:href="#icon-check"></use>
             </svg>
              Copied!
            </span>
          </div>
        </button>
        </div>
      <pre class="astro-code dracula" style="background-color:#282A36;color:#F8F8F2;overflow-x:auto" tabindex="0"><code><span class="line"><span style="color:#FF79C6">@MainActor</span><span style="color:#6272A4"> // Main actor-isolated class &#39;LoggerTests&#39; has different actor isolation from nonisolated superclass &#39;XCTestCase&#39;; this is an error in the Swift 6 language mode</span></span>
<span class="line"><span style="color:#FF79C6">class</span><span style="color:#8BE9FD"> LoggerTests</span><span style="color:#F8F8F2">: XCTestCase {</span></span>
<span class="line"><span style="color:#F8F8F2">}</span></span></code></pre></div>
<p>而在 Swift Testing 中，这类限制不存在。你可以直接在 <code>Suite</code> 上使用 <code>@MainActor</code> 标注，或声明 <code>actor</code> 类型的 <code>Suite</code>。需要注意的是，即便在这种情况下，其包含的测试用例仍将以并行方式执行，因此无法保证执行顺序。</p>
<p>开发者可以通过定义套件的 <code>init</code> 和 <code>deinit</code> 方法，为每个测试用例准备和清理数据：</p>
<div>
        <div class="flex justify-between items-center h-8 font-medium bg-[#96744d] dark:bg-[#002565] text-gray-200 text-xs rounded-tl-md rounded-tr-md">
          <span class="px-4 py-1">Swift</span>
          <button class="copy-button py-1 px-4" onclick="copyCode(this, event)">
          <div class="copy-text">
            <span class="flex items-center justify-center sm:hover:text-white sm:hover:font-bold">
              <svg class="w-3 h-3 mr-1" fill="currentColor" stroke="currentColor">
                <use xlink:href="#icon-clipboard"></use>
              </svg>
            Copy code
            </span>
          </div>
          <div class="copied-text hidden">
            <span class="flex items-center justify-center">
              <svg class="w-3 h-3 mr-1" fill="currentColor" stroke="currentColor">
                  <use xlink:href="#icon-check"></use>
             </svg>
              Copied!
            </span>
          </div>
        </button>
        </div>
      <pre class="astro-code dracula" style="background-color:#282A36;color:#F8F8F2;overflow-x:auto" tabindex="0"><code><span class="line"><span style="color:#FF79C6">actor</span><span style="color:#8BE9FD;font-style:italic"> IntermediateTests</span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#FF79C6">  private</span><span style="color:#FF79C6"> var</span><span style="color:#F8F8F2"> count: </span><span style="color:#8BE9FD;font-style:italic">Int</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FF79C6">  init</span><span style="color:#F8F8F2">() </span><span style="color:#FF79C6">async</span><span style="color:#FF79C6"> throws</span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#6272A4">    // 在此类型中的每个 @Test 实例方法之前运行</span></span>
<span class="line"><span style="color:#BD93F9;font-style:italic">    self</span><span style="color:#F8F8F2">.</span><span style="color:#BD93F9">count</span><span style="color:#FF79C6"> =</span><span style="color:#FF79C6"> try</span><span style="color:#FF79C6"> await</span><span style="color:#8BE9FD"> fetchInitialCount</span><span style="color:#F8F8F2">()</span></span>
<span class="line"><span style="color:#F8F8F2">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FF79C6">  deinit</span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#6272A4">    // 在此类型中的每个 @Test 实例方法之后运行</span></span>
<span class="line"><span style="color:#8BE9FD">    print</span><span style="color:#F8F8F2">(</span><span style="color:#E9F284">&quot;</span><span style="color:#F1FA8C">count: </span><span style="color:#FF79C6">\(</span><span style="color:#F1FA8C">count</span><span style="color:#FF79C6">)</span><span style="color:#F1FA8C">, delta: </span><span style="color:#FF79C6">\(</span><span style="color:#F1FA8C">delta</span><span style="color:#FF79C6">)</span><span style="color:#E9F284">&quot;</span><span style="color:#F8F8F2">)</span></span>
<span class="line"><span style="color:#F8F8F2">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FF79C6">  @Test</span><span style="color:#FF79C6"> func</span><span style="color:#50FA7B"> example3</span><span style="color:#F8F8F2">() </span><span style="color:#FF79C6">async</span><span style="color:#FF79C6"> throws</span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#F8F8F2">    delta </span><span style="color:#FF79C6">=</span><span style="color:#FF79C6"> try</span><span style="color:#FF79C6"> await</span><span style="color:#8BE9FD"> computeDelta</span><span style="color:#F8F8F2">()</span></span>
<span class="line"><span style="color:#F8F8F2">    count </span><span style="color:#FF79C6">+=</span><span style="color:#F8F8F2"> delta</span></span>
<span class="line"><span style="color:#6272A4">    // ...</span></span>
<span class="line"><span style="color:#F8F8F2">  }</span></span>
<span class="line"><span style="color:#F8F8F2">}  </span></span></code></pre></div>
<p>测试框架会为每个测试用例创建一个独立的套件实例，确保每个实例的变量独立，从而支持更高的测试隔离度和并行性。</p>
<h2 id="与-xctest-混合使用">与 XCTest 混合使用</h2>
<p>Swift Testing 是一个新兴的测试框架，尚未支持某些特定功能，如性能测试和 UI 测试，这使得它需要与其他测试框架如 XCTest 配合使用。此外，对于已有大量基于 XCTest 的测试用例，要求开发者一次性全面转换到 Swift Testing 是不现实的。因此，Swift Testing 设计为可以与 XCTest 在同一个目标（Target）中共存，支持逐步迁移。</p>
<p>需要特别注意的是，<strong>在 Swift Testing 中使用 XCTest 的断言或反之都是不允许的</strong>。</p>
<p>在命令行中执行 <code>swift test --enable-swift-testing</code> 命令后，可以在单次运行中同时执行基于 Swift Testing 和 XCTest 的测试用例，实现两种测试框架的无缝整合。</p>
<h2 id="swift-testing-只能运行于-swift-6-语言模式吗">Swift Testing 只能运行于 Swift 6 语言模式吗？</h2>
<p>虽然 Swift Testing 需要在使用 Swift 6 工具链的项目中运行，但它并不强制要求使用 Swift 6 语言模式。即便是在 Swift 5 语言模式下，甚至是采用最小化的并发检查，Swift Testing 仍能正常执行。然而，为了充分利用 Swift Testing 提供的并发测试能力，建议开发者在编写测试代码时采用更现代的并发模型并严格限制数据竞争，从而享受到这些默认特性所带来的优势。</p>
<h2 id="开源与跨平台">开源与跨平台</h2>
<p>Swift Testing 是一个由社区主导开发的开源框架，其适用范围涵盖了 Swift 语言支持的所有主要平台，包括苹果生态系统、Linux 以及 Windows。作为一个开源项目，Swift Testing 不仅仅是一个测试工具，更是一个充满活力的技术社区。框架的开发团队积极鼓励全球开发者参与项目的 <a href="https://forums.swift.org/c/related-projects/swift-testing?&#38;utm_source=Fatbobman%20Blog&#38;utm_medium=web&#38;utm_campaign=Fatbobman%20Blog" rel="noreferrer noopener">讨论</a> 和 <a href="https://github.com/apple/swift-testing?&#38;utm_source=Fatbobman%20Blog&#38;utm_medium=web&#38;utm_campaign=Fatbobman%20Blog" rel="noreferrer noopener">开发</a>。无论是提出新想法、报告问题，还是直接贡献代码，每一份努力都将推动 Swift Testing 更快速地成长和成熟。</p>
<p>这种开放、协作的模式不仅确保了框架能够持续改进，适应不断变化的开发需求，还为 Swift 开发者提供了一个深入学习和影响测试工具发展方向的宝贵机会。通过积极参与，开发者们可以共同塑造 Swift 生态系统中这一关键组件的未来。</p>
<div class="dynamic-ad-container pt-4"></div>
<h2 id="总结">总结</h2>
<p>Swift Testing 框架为 Swift 开发者提供了全新的测试体验。它的简洁语法、灵活的预期表达方式，以及强大的特性支持，使得编写和维护测试代码不仅更加迅速（Swifter），也更符合 Swift 开发者的习惯（Swifty）。通过本文对其核心功能的详细介绍和代码示例，我们展示了如何在项目中应用 Swift Testing，并利用其独特优势提升测试质量。</p>
<p>在实际开发过程中，逐步迁移到 Swift Testing 框架是一个明智的决策。开发者可以从新增的测试用例开始采用 Swift Testing，并逐步将现有的 XCTest 测试用例迁移过来。同时，对于性能测试和 UI 测试，Swift Testing 仍需与其他测试框架配合使用，以实现全面的测试覆盖。随着 Swift Testing 的持续发展和完善，我们期待它将带来更多的功能和优化。Swift Testing 的引入不仅丰富了 Swift 语言生态，更是提升了开发者的生产力的重要一步。让我们一起期待 Swift Testing 为 Swift 开发带来的更多惊喜！</p> </div> </article>  <!-- Modal toggle --><button data-modal-target="default-modal" data-modal-toggle="default-modal" class="hidden text-white bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800" type="button">
Toggle modal
</button> <!-- Modal backdrop with flex centering --> <div id="modal-backdrop" class="hidden fixed inset-0 bg-black bg-opacity-50 z-40 items-center justify-center"> <div id="default-modal" class="hidden relative p-4 w-full max-w-2xl"> <!-- Modal content --> <div class="relative bg-white rounded-lg shadow-2xl dark:bg-gray-800 border-gray-200 border dark:border-gray-600"> <!-- Modal header --> <div class="flex items-center justify-between px-4 md:px-5 pt-4 pb-0 rounded-t dark:border-gray-600"> <button type="button" class="text-gray-400 bg-transparent hover:bg-gray-200 hover:text-gray-900 rounded-lg text-sm w-8 h-8 ms-auto inline-flex justify-center items-center dark:hover:bg-gray-600 dark:hover:text-white" data-modal-hide="default-modal"> <svg class="w-3 h-3" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 14 14"> <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m1 1 6 6m0 0 6 6M7 7l6-6M7 7l-6 6"></path> </svg> <span class="sr-only">Close modal</span> </button> </div> <!-- Modal body --> <div class="px-4 md:px-5 pb-4"> <div class="w-full mx-auto text-center px-6 pb-6"> <div class="text-lg font-semibold text-gray-900 dark:text-blue-100 pt-4 pb-8">每周一，与您分享精心筛选的 Swift 与 SwiftUI 开发精华</div> <div id="custom-substack-embed1"></div> <!-- <div class="text-gray-700 dark:text-blue-200 text-xs font-medium pt-4">{bottomTip}</div> --> <script>(function(){const subscribeText = "立刻订阅";
const placeholder = "输入邮箱订阅周报";

    window.CustomSubstackWidget = {
      substackUrl: 'weekly.fatbobman.com',
      placeholder: placeholder,
      buttonText: subscribeText,
      theme: 'custom',
      colors: {
        primary: '#F50000',
        input: '#000000',
        email: '#777777',
        text: '#000000',
      },
    };

    // 创建一个新的 MutationObserver 实例
    const observer = new MutationObserver((mutationsList, observer) => {
      // 遍历所有的 mutations
      for (let mutation of mutationsList) {
        // 如果这个 mutation 是一个子节点的添加或删除
        if (mutation.type === 'childList') {
          // 查找订阅框
          const widget = document.querySelector('.custom-substack-widget1');
          if (widget) {
            // 查找 input 元素
            const input = widget.querySelector('input');
            const button = widget.querySelector('button');
            // 根据当前的颜色方案修改订阅框的样式
            if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) {
              // 暗黑模式
              widget.style.border = 'var(--subscribe-widget-border)';
              widget.style.padding = '0.3rem';
              widget.style.borderRadius = '0.7rem 0.7rem 0.7rem 0.7rem';
              widget.style.backgroundColor = 'var(--subscribe-input-background)';
              input.style.border = '0px solid #000';
              input.style.backgroundColor = 'var(--subscribe-input-background)';
              input.style.padding = '0.5rem';
              // input.style.border = '1px solid #E2E8F0';
              input.style.outline = 'none';
              button.style.backgroundColor = 'var(--subscribe-button-background)';
              button.style.color = 'var(--subscribe-button-text)';
              button.style.fontWeight = 'bold';
              button.style.padding = '0.5rem 1rem';
              button.style.borderRadius = '0.5rem 0.5rem 0.5rem 0.5rem';
              button.style.maxWidth = '100px';
            } else {
              // 正常模式
              widget.style.border = 'var(--subscribe-widget-border)';
              widget.style.padding = '0.3rem';
              widget.style.borderRadius = '0.7rem 0.7rem 0.7rem 0.7rem';
              widget.style.backgroundColor = 'var(--subscribe-input-background)';
              input.style.border = '0px solid #000';
              input.style.backgroundColor = 'var(--subscribe-input-background)';
              input.style.padding = '0.5rem';
              // input.style.border = '1px solid #E2E8F0';
              input.style.outline = 'none';
              button.style.backgroundColor = 'var(--subscribe-button-background)';
              button.style.color = 'var(--subscribe-button-text)';
              button.style.fontWeight = 'bold';
              button.style.padding = '0.5rem 1rem';
              button.style.borderRadius = '0.5rem 0.5rem 0.5rem 0.5rem';
              button.style.maxWidth = '100px';
            }

            if (window.matchMedia('(max-width: 640px)').matches) {
              // 屏幕尺寸小于 640px
              widget.style.maxWidth = '325px';
            } else {
              // 屏幕尺寸大于或等于 640px
              widget.style.maxWidth = '600px';
            }
            // 停止观察
            observer.disconnect();
          }
        }
      }
    });

    // 开始观察 #custom-substack-embed 元素的子节点的变化
    observer.observe(document.getElementById('custom-substack-embed1'), { childList: true });
  })();</script> <script src="/js/subscriber.js" async></script> </div> <div class="flex justify-center pb-6"> <button data-modal-hide="default-modal" type="button" class="text-gray-600 dark:text-gray-400 bg-transparent hover:text-gray-800 dark:hover:text-gray-200 font-medium rounded-lg text-sm px-8 py-2.5 text-center transition-colors">继续阅读</button> </div> </div> </div> </div> </div> <script type="application/ld+json">{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "author": {
    "@type": "Person",
    "name": "Fatbobman",
    "url": "https://twitter.com/fatbobman"
  },
  "dateModified": "2024-07-03T00:12:00.000Z",
  "datePublished": "2024-07-03T00:12:00.000Z",
  "description": "探索Swift Testing框架，了解其特性、用法和优势。本文分析其如何助您编写更Swifter、Swifty的测试代码，并提升开发效率。",
  "headline": "Swifter and Swifty：掌握 Swift Testing 框架",
  "image": {
    "@type": "ImageObject",
    "url": [
      {
        "url": "https://cdn.fatbobman.com/card/mastering-the-swift-testing-framework-zh.png"
      }
    ]
  },
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://fatbobman.com/zh/posts/mastering-the-swift-testing-framework/"
  },
  "url": "https://fatbobman.com/zh/posts/mastering-the-swift-testing-framework/",
  "publisher": {
    "@type": "Organization",
    "name": "Fatbobman's Blog",
    "logo": {
      "@type": "ImageObject",
      "url": "https://fatbobman.com/images/blog-card.png"
    }
  }
}</script> <div class="w-full mx-auto text-center pb-0 sm:pb-6 pt-8"> <div id="custom-substack-embed"></div> <div class="text-xs font-medium text-heading p-4">为您每周带来有关 Swift 和 SwiftUI 的精选资讯！</div> <script>(function(){const subscribeText = "立刻订阅";
const placeholder = "输入邮箱订阅周报";

    window.CustomSubstackWidget = {
      substackUrl: 'weekly.fatbobman.com',
      placeholder: placeholder,
      buttonText: subscribeText,
      theme: 'custom',
      colors: {
        primary: '#F50000',
        input: '#000000',
        email: '#777777',
        text: '#000000',
      },
    };
  
    const observer = new MutationObserver((mutationsList) => {
      const widget = document.querySelector('.custom-substack-widget');
      if (widget) {
        const input = widget.querySelector('input');
        const button = widget.querySelector('button');
  
        // 设置样式（合并暗黑模式与默认模式逻辑）
        const darkMode = window.matchMedia('(prefers-color-scheme: dark)').matches;
        widget.style.padding = '0.5rem';
        widget.style.borderRadius = '1.2rem';
        widget.style.border = '0.1px solid var(--aw-color-text-muted)';
        input.style.border = '0px solid #000';
        input.style.backgroundColor = 'var(--aw-background-color)';
        button.style.backgroundColor = 'var(--subscribe-button-background)';
        button.style.color = 'var(--subscribe-button-text)';
        button.style.borderRadius = '0.8rem';
        button.style.maxWidth = '100px';
        button.style.fontWeight = 'bold';
  
        // 响应式调整
        widget.style.maxWidth = window.matchMedia('(max-width: 640px)').matches
          ? '325px'
          : '400px';
  
        observer.disconnect(); // 停止观察
      }
    });
  
    // 开始观察
    observer.observe(document.getElementById('custom-substack-embed'), { childList: true });
  })();</script> <script src="https://substackapi.com/widget.js" defer></script> </div> <div class="pt-6 pb-6  dark:border-gray-700"> <!-- <p class="flex justify-center align-center text-sm font-medium text-heading">
    { lang === Lang.ZH && <SupportMeTextZH /> }
    { lang === Lang.EN && <SupportMeTextEN /> }
  </p> --> <div class="flex flex-col sm:flex-row justify-center items-center mx-auto sm:space-x-8 align-center pt-2"> <button type="button" class="text-gray-900 bg-yellow-200 hover:bg-yellow-300 border border-gray-200 focus:ring-4 focus:outline-none focus:ring-gray-100 font-medium rounded-lg text-sm px-8 py-4 text-center inline-flex items-center dark:focus:ring-gray-600 dark:border-gray-700 me-2 mb-2" onclick="window.open('https://www.buymeacoffee.com/fatbobman')"> <img src="/images/buymeacoffee.svg" alt="Buy me a coffee" class="w-5 h-5 me-2 -ms-1" decoding="async" loading="lazy"> <span class="text-black font-bold">Buy me a coffee</span> </button> <div class="pt-4 sm:pt-0"> <button type="button" class="text-red-500 bg-[#3b82f6] hover:bg-blue-700 border border-gray-200 focus:ring-4 focus:outline-none focus:ring-gray-100 font-medium rounded-lg text-sm px-8 py-4 text-center inline-flex items-center dark:focus:ring-gray-600 dark:border-gray-700 me-2 mb-2" onclick="window.open('https://afdian.com/a/fatbobman')"> <img src="/images/aifadian.svg" alt="" width="18" height="18" loading="lazy" decoding="async" class="w-4 h-4 me-2 -ms-1" aria-hidden="true"> <span class="text-white font-bold">爱发电(微信/支付宝)</span> </button>  </div> </div> </div> <!-- <WeeklySubscribe1 lang={lang} top={0} bottom={4}/> --> <div id="copy-alert" class="hidden fixed bottom-28 right-5"> <div id="alert-1" class="flex items-center p-4 mb-4 text-blue-800 rounded-lg bg-blue-50/90 dark:bg-gray-800/90 dark:text-blue-400" role="alert"> <div class="text-sm font-medium">链接已复制</div> </div> </div> <style>
  .copy-icon {
    position: absolute;
    left: -30px; /* 根据您的布局调整位置 */
    top: 50%; /* 将图标定位到标题的中间高度 */
    transform: translateY(-50%); /* 垂直居中对齐图标 */
    cursor: pointer;
    transition: opacity 0.6s ease;
    pointer-events: all; /* 始终响应鼠标事件 */
  }

  article h2,
  article h3,
  article h4,
  article h5 {
    position: relative;
  }

  #copy-alert {
    position: fixed;
    bottom: -100px; /* 初始在视窗下方 */
    right: 20px;
    transition: bottom 0.5s ease-in-out;
  }

  /* 进入动画 */
  @keyframes slideIn {
    from {
      bottom: -100px;
    }
    to {
      bottom: 0px;
    }
  }

  /* 消失动画 */
  @keyframes slideOut {
    from {
      bottom: 20px;
    }
    to {
      bottom: -100px;
    }
  }
</style> <script>
  var hideTimeout; // 用于保存自动隐藏定时器的引用
  document.querySelectorAll('article h2, article h3, article h4, article h5').forEach(function (header) {
    var copyIcon = document.createElement('span');
    copyIcon.innerHTML =
      '<svg fill="currentColor" aria-hidden="true" stroke="currentColor" class="w-5 h-5 hidden md:block hover:text-secondary" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg"><path d="M861.866667 164.266667c-87.466667-87.466667-230.4-89.6-320-2.133334l-68.266667 68.266667c-12.8 12.8-12.8 32 0 44.8s32 12.8 44.8 0l68.266667-68.266667c64-61.866667 166.4-61.866667 230.4 2.133334 64 64 64 168.533333 2.133333 232.533333l-117.333333 119.466667c-34.133333 34.133333-81.066667 51.2-128 49.066666-46.933333-4.266667-91.733333-27.733333-119.466667-66.133333-10.666667-14.933333-29.866667-17.066667-44.8-6.4-14.933333 10.666667-17.066667 29.866667-6.4 44.8 40.533333 53.333333 100.266667 87.466667 166.4 91.733333h17.066667c59.733333 0 119.466667-23.466667 162.133333-68.266666l117.333333-119.466667c83.2-89.6 83.2-234.666667-4.266666-322.133333z"></path><path d="M505.6 750.933333l-66.133333 68.266667c-64 61.866667-166.4 61.866667-230.4-2.133333-64-64-64-168.533333-2.133334-232.533334l117.333334-119.466666c34.133333-34.133333 81.066667-51.2 128-49.066667 46.933333 4.266667 91.733333 27.733333 119.466666 66.133333 10.666667 14.933333 29.866667 17.066667 44.8 6.4 14.933333-10.666667 17.066667-29.866667 6.4-44.8-40.533333-53.333333-100.266667-87.466667-166.4-91.733333-66.133333-4.266667-130.133333 19.2-177.066666 66.133333l-117.333334 119.466667c-85.333333 89.6-85.333333 234.666667 2.133334 322.133333 44.8 44.8 102.4 66.133333 162.133333 66.133334 57.6 0 115.2-21.333333 160-64l66.133333-68.266667c12.8-12.8 12.8-32 0-44.8-14.933333-10.666667-34.133333-10.666667-46.933333 2.133333z"></path></svg>'; // 使用您选择的图标
    copyIcon.className = 'copy-icon';
    copyIcon.style.opacity = '0'; // 默认透明
    header.insertBefore(copyIcon, header.firstChild);

    header.addEventListener('mouseover', function () {
      copyIcon.style.opacity = '1';
    });
    header.addEventListener('mouseout', function () {
      copyIcon.style.opacity = '0';
    });

    copyIcon.addEventListener('click', function () {
        var url = window.location.href.split('#')[0] + '#' + header.id;
        navigator.clipboard.writeText(url).then(function () {
            var alertDiv = document.getElementById('copy-alert');
            if (alertDiv) {
                alertDiv.classList.remove('hidden'); // 确保提示框是可见的
                alertDiv.style.display = 'block'; // 显示提示框
                clearTimeout(hideTimeout); // 清除之前的定时器
                alertDiv.style.animation = 'none'; // 先清除之前的动画
                setTimeout(function () {
                    alertDiv.style.animation = 'slideIn 0.5s forwards'; // 应用新动画
                }, 10);

                // 设置自动隐藏定时器
                hideTimeout = setTimeout(function () {
                    alertDiv.style.animation = 'slideOut 0.5s forwards'; // 应用消失动画
                    setTimeout(function () {
                        alertDiv.style.display = 'none';
                    }, 500);
                }, 3000);
            }
        });
    });
  });
</script> <script>
function copyCode(button, event) {
  event.preventDefault();
  const codeBlock = button.parentNode.nextElementSibling.textContent; // 获取代码内容
  navigator.clipboard.writeText(codeBlock).then(() => {
    // 显示 "Copied"
    button.querySelector('.copy-text').style.display = 'none';
    button.querySelector('.copied-text').style.display = 'inline';

    // 3秒后恢复
    setTimeout(() => {
      button.querySelector('.copy-text').style.display = 'inline';
      button.querySelector('.copied-text').style.display = 'none';
    }, 3000);
  });
}
</script> <script>(function(){const url = "https://fatbobman.com/ads/zh";

  // 根据中英文对应不同的 adCacheKey
  const adCacheKey = 'dynamicAdCache' + (window.location.pathname.includes('/zh/') ? 'ZH' : 'EN');

  // 尝试从缓存中获取广告
  const cachedAd = JSON.parse(localStorage.getItem(adCacheKey));
  const now = Date.now();

  if (cachedAd && cachedAd.expiresAt > now) {
    console.log('Using cached ad');
    console.log(cachedAd.expiresAt - now);
    // 如果缓存有效，直接使用缓存的广告
    renderAd(cachedAd.content);
  } else {
    console.log('Fetching ad from the server');
    // 如果缓存无效，从服务器获取广告
    fetch(url, {
      headers: {
        'Accept': 'text/html',
      },
      cache: 'default'
    })
      .then(response => {
        const maxAgeMatch = response.headers.get('Cache-Control')?.match(/max-age=(\d+)/);
        const maxAge = maxAgeMatch ? parseInt(maxAgeMatch[1], 10) : 0;

        if (!response.ok || maxAge <= 0) {
          throw new Error('Invalid response or missing Cache-Control');
        }

        return response.text().then(adContent => {
          const expiresAt = now + maxAge * 1000; // 计算失效时间
          // 缓存广告内容
          localStorage.setItem(adCacheKey, JSON.stringify({ content: adContent, expiresAt }));
          // 渲染广告
          renderAd(adContent);
        });
      })
      .catch(error => console.error('Error loading the ad:', error));
  }

  // 渲染广告函数
  function renderAd(html) {
    const adSlots = document.querySelectorAll('.dynamic-ad-container');
    adSlots.forEach(slot => {
      slot.innerHTML = html;
    });
  }
})();</script>  <!-- <LeaveFeedback lang={lang} /> --> <section class="pt-10"><div class="max-w-5xl sm:px-4 py-2 mx-auto"><div class="grid gap-4 sm:gap-2 sm:mx-4 sm:grid-cols-12"><div class="col-span-12 sm:col-span-3 hidden sm:block"><div class="text-center sm:text-left mt-3 mb-14 before:block before:w-24 before:h-1 before:mb-3 before:rounded before:mx-auto sm:before:mx-0 before:bg-secondary"><h3 class="text-lg font-medium text-default">相关文章</h3></div></div><div class="sm:hidden text-lg font-medium text-heading col-span-12 text-left">相关文章</div><div class="relative col-span-12 sm:px-4 space-y-6 sm:col-span-9"><div class="col-span-12 space-y-2 relative sm:px-4 sm:col-span-8 sm:space-y-4 sm:before:absolute sm:before:top-2 sm:before:bottom-0 sm:before:w-0.5 sm:before:-left-3 before:bg-block"><a class="flex flex-col sm:relative sm:before:absolute sm:before:top-2 sm:before:w-2 sm:before:h-2 sm:before:rounded-full sm:before:left-[-31px] sm:before:z-[1] before:bg-secondary group cursor-pointer" href="/zh/posts/how-swiftui-preview-works/" id="relatedPosts-构建稳定的预览视图 —— SwiftUI 预览的工作原理"><div class="flex items-start"><div class="w-[7px] h-[7px] bg-secondary ml-4 mr-2 flex-shrink-0 mt-2 sm:hidden" style="border-radius: 50%;"></div><h3 class="text-default group-hover:text-secondary">构建稳定的预览视图 —— SwiftUI 预览的工作原理</h3></div></a><a class="flex flex-col sm:relative sm:before:absolute sm:before:top-2 sm:before:w-2 sm:before:h-2 sm:before:rounded-full sm:before:left-[-31px] sm:before:z-[1] before:bg-secondary group cursor-pointer" href="/zh/posts/pari-programming-with-ai/" id="relatedPosts-与 AI 结对编程"><div class="flex items-start"><div class="w-[7px] h-[7px] bg-secondary ml-4 mr-2 flex-shrink-0 mt-2 sm:hidden" style="border-radius: 50%;"></div><h3 class="text-default group-hover:text-secondary">与 AI 结对编程</h3></div></a><a class="flex flex-col sm:relative sm:before:absolute sm:before:top-2 sm:before:w-2 sm:before:h-2 sm:before:rounded-full sm:before:left-[-31px] sm:before:z-[1] before:bg-secondary group cursor-pointer" href="/zh/weekly/issue-052" id="relatedPosts-Weekly #52 - 回顾初心，写在周报创刊一周年"><div class="flex items-start"><div class="w-[7px] h-[7px] bg-secondary ml-4 mr-2 flex-shrink-0 mt-2 sm:hidden" style="border-radius: 50%;"></div><h3 class="text-default group-hover:text-secondary">Weekly #52 - 回顾初心，写在周报创刊一周年</h3></div></a><a class="flex flex-col sm:relative sm:before:absolute sm:before:top-2 sm:before:w-2 sm:before:h-2 sm:before:rounded-full sm:before:left-[-31px] sm:before:z-[1] before:bg-secondary group cursor-pointer" href="/zh/posts/practical-swiftdata-building-swiftui-applications-with-modern-approaches/" id="relatedPosts-SwiftData 实战：用现代方法构建 SwiftUI 应用"><div class="flex items-start"><div class="w-[7px] h-[7px] bg-secondary ml-4 mr-2 flex-shrink-0 mt-2 sm:hidden" style="border-radius: 50%;"></div><h3 class="text-default group-hover:text-secondary">SwiftData 实战：用现代方法构建 SwiftUI 应用</h3></div></a><a class="flex flex-col sm:relative sm:before:absolute sm:before:top-2 sm:before:w-2 sm:before:h-2 sm:before:rounded-full sm:before:left-[-31px] sm:before:z-[1] before:bg-secondary group cursor-pointer" href="/zh/posts/developing-embedded-applications-with-swift/" id="relatedPosts-用 Swift 开发嵌入式应用"><div class="flex items-start"><div class="w-[7px] h-[7px] bg-secondary ml-4 mr-2 flex-shrink-0 mt-2 sm:hidden" style="border-radius: 50%;"></div><h3 class="text-default group-hover:text-secondary">用 Swift 开发嵌入式应用</h3></div></a><a class="flex flex-col sm:relative sm:before:absolute sm:before:top-2 sm:before:w-2 sm:before:h-2 sm:before:rounded-full sm:before:left-[-31px] sm:before:z-[1] before:bg-secondary group cursor-pointer" href="/zh/posts/swiftplaygrounds4/" id="relatedPosts-Swift Playgrounds 4 娱乐还是生产力"><div class="flex items-start"><div class="w-[7px] h-[7px] bg-secondary ml-4 mr-2 flex-shrink-0 mt-2 sm:hidden" style="border-radius: 50%;"></div><h3 class="text-default group-hover:text-secondary">Swift Playgrounds 4 娱乐还是生产力</h3></div></a><a class="flex flex-col sm:relative sm:before:absolute sm:before:top-2 sm:before:w-2 sm:before:h-2 sm:before:rounded-full sm:before:left-[-31px] sm:before:z-[1] before:bg-secondary group cursor-pointer" href="/zh/posts/xcodeplayground1/" id="relatedPosts-玩转 Xcode Playground（上）"><div class="flex items-start"><div class="w-[7px] h-[7px] bg-secondary ml-4 mr-2 flex-shrink-0 mt-2 sm:hidden" style="border-radius: 50%;"></div><h3 class="text-default group-hover:text-secondary">玩转 Xcode Playground（上）</h3></div></a><a class="flex flex-col sm:relative sm:before:absolute sm:before:top-2 sm:before:w-2 sm:before:h-2 sm:before:rounded-full sm:before:left-[-31px] sm:before:z-[1] before:bg-secondary group cursor-pointer" href="/zh/posts/swift-in-linux/" id="relatedPosts-在 Linux 系统上搭建 Swift 开发调试环境"><div class="flex items-start"><div class="w-[7px] h-[7px] bg-secondary ml-4 mr-2 flex-shrink-0 mt-2 sm:hidden" style="border-radius: 50%;"></div><h3 class="text-default group-hover:text-secondary">在 Linux 系统上搭建 Swift 开发调试环境</h3></div></a><a class="flex flex-col sm:relative sm:before:absolute sm:before:top-2 sm:before:w-2 sm:before:h-2 sm:before:rounded-full sm:before:left-[-31px] sm:before:z-[1] before:bg-secondary group cursor-pointer" href="/zh/posts/vapor4/" id="relatedPosts-Vapor4 的安装与配置"><div class="flex items-start"><div class="w-[7px] h-[7px] bg-secondary ml-4 mr-2 flex-shrink-0 mt-2 sm:hidden" style="border-radius: 50%;"></div><h3 class="text-default group-hover:text-secondary">Vapor4 的安装与配置</h3></div></a></div></div></div></div></section> <!-- <BottomWeeklySubscribe lang={lang} /> --> <div><div id="gitalk-container" data-comment-id="掌握 Swift Testing 框架" data-lang="zh"></div><script src="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.min.js" defer></script></div><script>
      document.addEventListener('DOMContentLoaded', async function () {
        const response = await fetch('https://fatbobman.com/status/comment');
        const data = await response.text();
        console.log(data);
        if (data === '1') {
          var container = document.getElementById('gitalk-container');
          if (container) {
            var commentID = container.getAttribute('data-comment-id');
            var lang = container.getAttribute('data-lang');

            var gitalk = new Gitalk({
              clientID: 'fcf61195c7f73253dc8b',
              clientSecret: '0ac2907be08248a1fcb5312e27480ad535c682e5',
              repo: 'blogComments',
              owner: 'fatbobman',
              admin: ['fatbobman'],
              id: commentID.split('/').pop().substring(0, 49),
              distractionFreeMode: true,
              createIssueManually: true,
              language: lang,
            });

            gitalk.render('gitalk-container');
          }
        }
      });
    </script> <div class="hidden xl:block w-44 lg:absolute" id="toc" style="left: -30px; top: 0px"> <div class="text-muted items-center justify-center overflow-x-clip"> <div class="w-full flex justify-end pb-2" id="toc-button"> <div class="opacity-50 text-heading hover:opacity-100 hover:text-secondary " style="width:20px; height:20px;">  <svg fill="currentColor" stroke="currentColor" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" id="toc-list-switcher"> <use href="/images/iconCollection.svg#icon-toc"></use> </svg>  </div> </div> <div class="text-default text-xs hidden" id="toc-list"> <ul> <li class=" pb-1"> <div class="text-muted hover:text-secondary items-center justify-start"> <a href="#配置和使用-swift-testing" class=""> 配置和使用 Swift Testing </a> </div> </li><li class="pl-2 pb-1"> <div class="text-muted hover:text-secondary items-center justify-start"> <a href="#在-xcode-项目中集成-swift-testing" class=""> 在 Xcode 项目中集成 Swift Testing </a> </div> </li><li class="pl-2 pb-1"> <div class="text-muted hover:text-secondary items-center justify-start"> <a href="#命令行下的-swift-testing" class=""> 命令行下的 Swift Testing </a> </div> </li><li class="pl-2 pb-1"> <div class="text-muted hover:text-secondary items-center justify-start"> <a href="#编写你的第一个-swift-testing-测试用例" class=""> 编写你的第一个 Swift Testing 测试用例 </a> </div> </li><li class=" pb-1"> <div class="text-muted hover:text-secondary items-center justify-start"> <a href="#预期expectations" class=""> 预期（Expectations） </a> </div> </li><li class="pl-2 pb-1"> <div class="text-muted hover:text-secondary items-center justify-start"> <a href="##expect-宏" class=""> #expect 宏 </a> </div> </li><li class="pl-2 pb-1"> <div class="text-muted hover:text-secondary items-center justify-start"> <a href="##require-宏" class=""> #require 宏 </a> </div> </li><li class="pl-2 pb-1"> <div class="text-muted hover:text-secondary items-center justify-start"> <a href="#confirmation" class=""> confirmation </a> </div> </li><li class="pl-2 pb-1"> <div class="text-muted hover:text-secondary items-center justify-start"> <a href="#withknownissue" class=""> withKnownIssue </a> </div> </li><li class=" pb-1"> <div class="text-muted hover:text-secondary items-center justify-start"> <a href="#组织测试用例" class=""> 组织测试用例 </a> </div> </li><li class="pl-2 pb-1"> <div class="text-muted hover:text-secondary items-center justify-start"> <a href="#测试套件suite" class=""> 测试套件（Suite） </a> </div> </li><li class="pl-2 pb-1"> <div class="text-muted hover:text-secondary items-center justify-start"> <a href="#套件嵌套" class=""> 套件嵌套 </a> </div> </li><li class="pl-2 pb-1"> <div class="text-muted hover:text-secondary items-center justify-start"> <a href="#利用标签进行测试管理" class=""> 利用标签进行测试管理 </a> </div> </li><li class=" pb-1"> <div class="text-muted hover:text-secondary items-center justify-start"> <a href="#特征-trait" class=""> 特征（ Trait ） </a> </div> </li><li class="pl-2 pb-1"> <div class="text-muted hover:text-secondary items-center justify-start"> <a href="#tag" class=""> tag </a> </div> </li><li class="pl-2 pb-1"> <div class="text-muted hover:text-secondary items-center justify-start"> <a href="#enabled" class=""> enabled </a> </div> </li><li class="pl-2 pb-1"> <div class="text-muted hover:text-secondary items-center justify-start"> <a href="#disabled" class=""> disabled </a> </div> </li><li class="pl-2 pb-1"> <div class="text-muted hover:text-secondary items-center justify-start"> <a href="#bug" class=""> bug </a> </div> </li><li class="pl-2 pb-1"> <div class="text-muted hover:text-secondary items-center justify-start"> <a href="#timelimit" class=""> timeLimit </a> </div> </li><li class="pl-2 pb-1"> <div class="text-muted hover:text-secondary items-center justify-start"> <a href="#serialized" class=""> serialized </a> </div> </li><li class="pl-2 pb-1"> <div class="text-muted hover:text-secondary items-center justify-start"> <a href="#特征继承" class=""> 特征继承 </a> </div> </li><li class=" pb-1"> <div class="text-muted hover:text-secondary items-center justify-start"> <a href="#让测试内容和测试结果更清晰" class=""> 让测试内容和测试结果更清晰 </a> </div> </li><li class="pl-2 pb-1"> <div class="text-muted hover:text-secondary items-center justify-start"> <a href="#自定义错误提示" class=""> 自定义错误提示 </a> </div> </li><li class="pl-2 pb-1"> <div class="text-muted hover:text-secondary items-center justify-start"> <a href="#自定义类型在错误报告中的表达方式" class=""> 自定义类型在错误报告中的表达方式 </a> </div> </li><li class=" pb-1"> <div class="text-muted hover:text-secondary items-center justify-start"> <a href="#参数化测试-parameterized-testing" class=""> 参数化测试（ Parameterized testing ） </a> </div> </li><li class=" pb-1"> <div class="text-muted hover:text-secondary items-center justify-start"> <a href="#并行化" class=""> 并行化 </a> </div> </li><li class=" pb-1"> <div class="text-muted hover:text-secondary items-center justify-start"> <a href="#与-xctest-混合使用" class=""> 与 XCTest 混合使用 </a> </div> </li><li class=" pb-1"> <div class="text-muted hover:text-secondary items-center justify-start"> <a href="#swift-testing-只能运行于-swift-6-语言模式吗？" class=""> Swift Testing 只能运行于 Swift 6 语言模式吗？ </a> </div> </li><li class=" pb-1"> <div class="text-muted hover:text-secondary items-center justify-start"> <a href="#开源与跨平台" class=""> 开源与跨平台 </a> </div> </li><li class=" pb-1"> <div class="text-muted hover:text-secondary items-center justify-start"> <a href="#总结" class=""> 总结 </a> </div> </li> </ul> </div> </div> </div> <style>
  #toc-list {
    transition: all 0.9s ease-in-out;
  }

  #toc-button {
    transition: all 0.9s ease-in-out;
  }
</style> <script>
  function getOffsetTop(element) {
    var offsetTop = 0;
    while (element) {
      offsetTop += element.offsetTop;
      element = element.offsetParent;
    }
    return offsetTop;
  }

  var toc = document.querySelector('#toc');
  // 获取 sidebar 在浏览器中的初始 top 值
  var initialTop = getOffsetTop(toc);
  var positioningElement = document.querySelector('#article-area'); // 定位视图的选择器
  var stickyPoint = 150;
  var tocPadding = 30;
  var tocTopOffset = 4;
  var sidebarWidth = toc.offsetWidth;

  function adjustTocPosition() {
    var sidebarOffsetTop = toc.getBoundingClientRect().top;
    if (sidebarOffsetTop <= stickyPoint) {
      // 获取 positioningElement 的左侧侧与浏览器左侧之间的距离
      var positioningElementRight = (window.innerWidth - positioningElement.getBoundingClientRect().width) / 2;
      toc.style.position = 'fixed';
      toc.style.top = stickyPoint + 'px';
      toc.style.left = positioningElementRight - toc.getBoundingClientRect().width - tocPadding + 'px';
    }

    if (window.scrollY <= initialTop - stickyPoint) {
      toc.style.position = 'absolute';
      toc.style.top = tocTopOffset + 'px';
      toc.style.left = -(tocPadding + toc.getBoundingClientRect().width) + 'px';
    }
  }

  document.addEventListener('scroll', adjustTocPosition);
  window.addEventListener('resize', adjustTocPosition);
  // doc 加载完成后，调整 toc 的位置
  toc.style.left = -(tocPadding + toc.getBoundingClientRect().width) + 'px';

  document.addEventListener('DOMContentLoaded', function () {
    const tocList = document.getElementById('toc-list');
    const tocButton = document.getElementById('toc-button');

    // 更新toc-list和toc-button的显示状态
    function updateDisplay() {
      const showToc = localStorage.getItem('showToc') === 'true';
      if (showToc) {
        tocList.classList.remove('hidden');
        tocButton.classList.add('justify-start');
        tocButton.classList.remove('justify-end');
      } else {
        tocList.classList.add('hidden');
        tocButton.classList.remove('justify-start');
        tocButton.classList.add('justify-end');
      }
    }

    // 初始状态检查
    updateDisplay();

    // 点击事件监听器，用于切换toc-list的显示状态并更新按钮位置
    tocButton.addEventListener('click', function () {
      const isHidden = tocList.classList.contains('hidden');
      localStorage.setItem('showToc', isHidden);
      updateDisplay();
    });
  });
</script> <div class="hidden md:block md:absolute" id="sidebar" style="right: -50px; top: 0px"> <div class="invisible flex flex-col space-y-4 text-muted items-center justify-center opacity-0 transition-all duration-1000 delay-300 ease-out" id="sidebar-content"> <div class="opacity-50 text-heading hover:opacity-100 hover:text-secondary " style="width:20px; height:20px;">  <a href="/zh/posts/the-evolution-of-swiftui-scroll-control-apis/" data-tooltip-target="tooltip-next-post" data-tooltip-placement="left" id="sidebar-next-post" class=""> <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="currentColor" stroke-linecap="round" stroke-linejoin="round"> <use href="/images/iconCollection.svg#icon-previous"></use> </svg> </a>  </div> <div id="tooltip-next-post" role="tooltip" class="absolute z-10 invisible inline-block px-3 py-2 w-44 text-sm font-medium text-gray-200 bg-gray-600/90 rounded-lg shadow-sm transition-opacity duration-300 tooltip dark:bg-gray-700/90"> <div> <div>SwiftUI 滚动控制 API 的发展历程与 WWDC 2024 的新亮点</div> <div class="text-xs text-yellow-200 font-extrabold pt-2">⌥ + ←</div> </div> <div class="tooltip-arrow" data-popper-arrow></div> </div> <script>(function(){const url = "/zh/posts/the-evolution-of-swiftui-scroll-control-apis/";
const isHidden = false;

  document.addEventListener('keydown', (e) => {
    // Check if Alt+RightArrow or just RightArrow was pressed
    if (e.altKey && e.key === 'ArrowLeft') {
      // Only navigate if there's a URL and the button isn't hidden
      if (url && !isHidden) {
        e.preventDefault(); // Prevent default browser behavior
        window.location.href = url;
      }
    }
  });
})();</script> <div class="opacity-50 text-heading hover:opacity-100 hover:text-secondary " style="width:20px; height:20px;">  <a href="/zh/posts/list-or-lazyvstack/" data-tooltip-target="tooltip-previous-post" data-tooltip-placement="left" id="sidebar-previous-post" class=""> <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="currentColor" stroke-linecap="round" stroke-linejoin="round"> <use href="/images/iconCollection.svg#icon-next"></use> <symbol id="icon-next" viewBox="0 0 24 24" fill="currentColor"> <path stroke="none" d="M0 0h24v24H0z" fill="none"></path> <path d="M12.089 3.634a2 2 0 0 0 -1.089 1.78l-.001 2.586h-6.999a2 2 0 0 0 -2 2v4l.005 .15a2 2 0 0 0 1.995 1.85l6.999 -.001l.001 2.587a2 2 0 0 0 3.414 1.414l6.586 -6.586a2 2 0 0 0 0 -2.828l-6.586 -6.586a2 2 0 0 0 -2.18 -.434l-.145 .068z" stroke-width="0" fill="currentColor"></path> </symbol> </svg> </a>  </div> <div id="tooltip-previous-post" role="tooltip" class="absolute z-10 invisible inline-block px-3 py-2 w-44 text-sm font-medium text-gray-200 bg-gray-600/90 rounded-lg shadow-sm transition-opacity duration-300 tooltip dark:bg-gray-700/90"> <div> <div>List 还是 LazyVStack：SwiftUI 中的惰性容器选择</div> <div class="text-xs text-yellow-200 font-extrabold pt-2">⌥ + →</div> </div> <div class="tooltip-arrow" data-popper-arrow></div> </div> <script>(function(){const url = "/zh/posts/list-or-lazyvstack/";
const isHidden = false;

  document.addEventListener('keydown', (e) => {
    // Check if Alt+RightArrow or just RightArrow was pressed
    if (e.altKey && e.key === 'ArrowRight') {
      // Only navigate if there's a URL and the button isn't hidden
      if (url && !isHidden) {
        e.preventDefault(); // Prevent default browser behavior
        window.location.href = url;
      }
    }
  });
})();</script> <!-- <DictButton lang={lang} post = {post}/> --> <div class="opacity-50 text-heading hover:opacity-100 hover:text-secondary " style="width:20px; height:20px;">  <a href="https://x.com/intent/tweet?text=Swifter%20and%20Swifty%EF%BC%9A%E6%8E%8C%E6%8F%A1%20Swift%20Testing%20%E6%A1%86%E6%9E%B6&#38;url=https%3A%2F%2Ffatbobman.com%2Fzh%2Fposts%2Fmastering-the-swift-testing-framework%2F&#38;hashtags=ios%2Cswiftlang&#38;via=fatbobman" target="_blank" id="sidebar-share-with-twitter"> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"> <use href="/images/iconCollection.svg#icon-twitter"></use> </svg> </a>  </div> <div class="opacity-50 text-heading hover:opacity-100 hover:text-secondary " style="width:20px; height:20px;">  <a href="https://bsky.app/intent/compose?text=Swifter%20and%20Swifty%EF%BC%9A%E6%8E%8C%E6%8F%A1%20Swift%20Testing%20%E6%A1%86%E6%9E%B6%0A by %40fatbobman.bsky.social %0Ahttps%3A%2F%2Ffatbobman.com%2Fzh%2Fposts%2Fmastering-the-swift-testing-framework%2F%0A #ios #swift" target="_blank" id="sidebar-share-with-bluesky"> <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" stroke-width="0.4" stroke="currentColor" fill="currentColor" stroke-linecap="round" stroke-linejoin="round"> <use href="/images/iconCollection.svg#icon-bluesky"></use> </svg> </a>  </div> <div class="opacity-50 text-heading hover:opacity-100 hover:text-secondary " style="width:20px; height:20px;">  <a href="https://www.facebook.com/sharer/sharer.php?u=https%253A%252F%252Ffatbobman.com%252Fzh%252Fposts%252Fmastering-the-swift-testing-framework%252F" target="_blank" id="sidebar-share-with-facebook"> <svg stroke="currentColor" fill="currentColor" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg"> <use href="/images/iconCollection.svg#icon-facebook"></use> </svg> </a>  </div> <div class="opacity-50 text-heading hover:opacity-100 hover:text-secondary " style="width:20px; height:20px;">  <a href="https://service.weibo.com/share/share.php?url=https%3A%2F%2Ffatbobman.com%2Fzh%2Fposts%2Fmastering-the-swift-testing-framework%2F&#38;title=Swifter%20and%20Swifty%EF%BC%9A%E6%8E%8C%E6%8F%A1%20Swift%20Testing%20%E6%A1%86%E6%9E%B6%0A%20%23ios%20%23swift%0A%20by%20%40fatbobman%0A" target="_blank" id="sidebar-share-with-weibo"> <svg fill="currentColor" stroke="currentColor" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg"> <use href="/images/iconCollection.svg#icon-weibo"></use> </svg> </a>  </div> <div class="opacity-50 text-heading hover:opacity-100 hover:text-secondary " style="width:16px; height:16px;">  <a href="https://www.linkedin.com/sharing/share-offsite/?url=https%3A%2F%2Ffatbobman.com%2Fzh%2Fposts%2Fmastering-the-swift-testing-framework%2F" target="_blank" id="sidebar-share-with-linkedin"> <svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" stroke="currentColor" stroke-width="0.1" viewBox="0 0 15 15"> <use href="/images/iconCollection.svg#icon-linkedin"></use> </svg> </a>  </div> <div class="opacity-50 text-heading hover:opacity-100 hover:text-secondary " style="width:20px; height:20px;">  <a href="mailto:?subject=%E6%96%87%E7%AB%A0%3A%E3%80%90Swifter%20and%20Swifty%EF%BC%9A%E6%8E%8C%E6%8F%A1%20Swift%20Testing%20%E6%A1%86%E6%9E%B6%E3%80%91&#38;body=%E5%88%86%E4%BA%AB%E4%B8%80%E7%AF%87%E6%96%87%E7%AB%A0%E7%BB%99%E4%BD%A0%EF%BC%9A%0A%0ASwifter%20and%20Swifty%EF%BC%9A%E6%8E%8C%E6%8F%A1%20Swift%20Testing%20%E6%A1%86%E6%9E%B6%0A%0A%E9%93%BE%E6%8E%A5%3A%20https%3A%2F%2Ffatbobman.com%2Fzh%2Fposts%2Fmastering-the-swift-testing-framework%2F" target="_blank" id="sidebar-share-with-email"> <svg fill="currentColor" stroke="currentColor" stroke-width="20" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg"> <use href="/images/iconCollection.svg#icon-email"></use> </svg> </a>  </div> <div class="opacity-50 text-heading hover:opacity-100 hover:text-secondary " style="width:20px; height:20px;">  <svg fill="currentColor" stroke="currentColor" stroke-width="20" onclick="scrollToElement()" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg"> <use href="/images/iconCollection.svg#icon-comment"></use> </svg>  </div> <script>
  var offset = 80
  function scrollToElement() {
    var gitalkContainer = document.getElementById('gitalk-container');
    if (gitalkContainer) {
      var topPosition = gitalkContainer.getBoundingClientRect().top + window.scrollY - offset;
      window.scrollTo({ top: topPosition, behavior: 'smooth' });
    }
  }
</script> <div class="opacity-50 text-heading hover:opacity-100 hover:text-secondary " style="width:20px; height:20px;">  <svg fill="currentColor" stroke="currentColor" onclick="window.scrollTo({top:0,behavior:'smooth'})" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg"> <!-- <path d="M862.464 161.536l-700.928 0c-30.976 0-56.096-25.12-56.096-56.096l0-28.064c0-30.944 25.12-56.064 56.096-56.064l700.896 0c30.976 0 56.096 25.12 56.096 56.064l0 28.032c0 31.008-25.12 56.096-56.096 56.096l0 0 0 0zM138.528 531.68c0 0 306.816-245.792 309.888-248.864 14.304-13.888 31.904-22.368 49.952-25.312 1.76-0.32 3.488-0.608 5.248-0.8 2.816-0.32 5.6-0.352 8.384-0.352 2.816-0.032 5.568 0.032 8.352 0.352 1.792 0.192 3.552 0.48 5.28 0.8 18.048 2.976 35.616 11.424 49.92 25.312 3.104 3.008 309.856 248.864 309.856 248.864 33.152 32.224 30.304 65.44-2.784 97.696s-77.376 3.04-110.496-29.216l-190.08-150.432 0 496.864c0 31.008-25.088 56.096-56.096 56.096l-28 0c-30.976 0-56.096-25.12-56.096-56.096l0-496.864-190.048 150.432c-33.088 32.288-77.408 61.536-110.496 29.216-33.056-32.256-35.872-65.44-2.816-97.696l0 0 0 0z"></path> --> <use href="/images/iconCollection.svg#icon-top"></use> </svg>  </div> </div> </div>  </div>   </div> </main> </div> <footer> <footer class="bg-block"> <div class="mx-auto w-full max-w-3xl px-4 md:px-6"> <div class="container flex flex-col items-center pt-10"> <div class="flex flex-row justify-around w-full space-x-3"> <div class="flex flex-col space-y-4"> <h2 class="font-bold text-heading">网站</h2> <div class="flex flex-col space-y-2 text-sm text-default font-medium"> <a href="https://apps.apple.com/us/app/id1534513553" class="hover:text-secondary" target="_blank">健康笔记</a> <a href="https://discord.gg/zhou-zi-de-swiftji-shi-ben-967978112509935657" class="hover:text-secondary" target="_blank">Discord</a> <a href="/zh/posts/" class="hover:text-secondary">文章</a> <a href="/zh/tags/" class="hover:text-secondary">标签</a> <a href="/zh/collections/" class="hover:text-secondary">合集</a> <a href="/zh/snippet/" class="hover:text-secondary">小贴士</a> </div> </div> <div class="flex flex-col space-y-4"> <h2 class="font-bold text-heading">关注</h2> <div class="flex flex-col space-y-2 text-sm text-default font-medium"> <a href="https://weekly.fatbobman.com" class="hover:text-secondary">周报</a> <a href="https://x.com/intent/follow?screen_name=fatbobman" class="hover:text-secondary" target="_blank">Twitter</a> <a href="https://mastodon.social/@fatbobman" class="hover:text-secondary" target="_blank">Mastodon</a> <a href="https://www.linkedin.com/in/fatbobman/" class="hover:text-secondary" target="_blank">Linkedin</a> <a href="https://bsky.app/profile/fatbobman.bsky.social" class="hover:text-secondary" target="_blank">Blue Sky</a> <a href="https://web.okjike.com/u/e32947ef-7751-4363-9456-b340eef2efd3" class="hover:text-secondary" target="_blank">
即刻
</a> <a href="https://github.com/fatbobman" class="hover:text-secondary" target="_blank">GitHub</a> <a href="/zh/rss.xml" class="hover:text-secondary hover:font-medium" target="_blank">RSS</a> </div> </div> <div class="flex flex-col space-y-4"> <h2 class="font-bold text-heading">信息</h2> <div class="flex flex-col space-y-2 text-sm text-default font-medium"> <a href="/zh/about/" class="hover:text-secondary">关于</a>  </div> </div> </div> <div class="pb-0"> <div class="flex items-center justify-center w-full px-6 pt-12 text-sm"> <span class="text-muted text-xs">Copyright © <span>2020-</span> 2025 <a href="https://x.com/fatbobman" class="border-b-secondary border-b-[1px]">Fatbobman Digital Limited</a>. All Rights
            Reserved.</span> </div> <div class="flex items-center justify-center w-full px-6 pt-2 text-sm pb-10"> <span> <a href="https://beian.miit.gov.cn/#/Integrated/index" target="_blank" class="block text-xs text-muted">
辽ICP备20006550号-1
</a> </span> </div> </div> </div> </div> </footer> </footer> </div>   <!-- <script is:inline src="https://cdnjs.cloudflare.com/ajax/libs/flowbite/1.8.0/flowbite.min.js"></script> --><!-- <script type="module" src="/js/theme.js" defer></script> --><script>(function(){const currentLang = "zh";

  function attachEvent(selector, event, fn) {
    const matches = typeof selector === 'string' ? document.querySelectorAll(selector) : selector;
    if (matches && matches.length) {
      matches.forEach((elem) => {
        elem.addEventListener(event, (e) => fn(e, elem), false);
      });
    }
  }

  // 为每个需要清除 focus 状态的按钮都添加一个 clear-focus 类, 下面的代码将在点击后自动移除 focus 状态
  document.addEventListener('DOMContentLoaded', (event) => {
    // 获取所有具有 'clear-focus' 类的按钮
    const buttons = document.querySelectorAll('.clear-focus');

    buttons.forEach((button) => {
      button.addEventListener('click', () => {
        setTimeout(() => {
          button.blur();
        }, 0);
      });
    });
  });

  window.onpageshow = function () {
    document.documentElement.classList.add('motion-safe:scroll-smooth');
  };
})();</script> <div id="docsearch-container-data" data-lang="zh" data-searchtext="搜索..."></div> <script src="https://cdn.jsdelivr.net/npm/@docsearch/js@3" defer></script>  <!-- Google Tag Manager (noscript) --><noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-5C7N4MF5" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript><!-- End Google Tag Manager (noscript) --> </body></html>