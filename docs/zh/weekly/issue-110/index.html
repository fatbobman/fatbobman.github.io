<!DOCTYPE html><html lang="zh"> <head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="sitemap" href="/sitemap-index.xml"><!-- <link rel="shortcut icon" href={iconSVG.src} /> --><link rel="icon" type="image/png" sizes="16x16" href="/_astro/favicon-16x16.2312221518-2.DhhY-2ao.png"><link rel="icon" type="image/png" sizes="32x32" href="/_astro/favicon-32x32.2312221518-2.BbUzUdRZ.png"><link rel="mask-icon" href="/_astro/faviconSVG-32x32.2312221518-2.ll_gTgJS.svg"><link rel="apple-touch-icon" sizes="180x180" href="/_astro/apple-touch-icon.2312227635.BE1WvNvp.png"><title>Skip Fuse 现在对独立开发者免费！ -- 肘子的 Swift 周报 #110</title>
<meta name="description" content="Skip 宣布 Skip Fuse 版本对独立开发者免费开放，支持基于 Swift 官方 Android SDK 的交叉编译。本期周报还精选 SwiftData 架构优化、Tuist 项目管理迁移，以及 Language Discovery 个性化机制等内容，由肘子的 Swift 周报精选呈现。">
<meta name="robots" content="index,follow">
<link rel="canonical" href="https://fatbobman.com/zh/weekly/issue-110/">
<meta property="og:title" content="Skip Fuse 现在对独立开发者免费！ -- 肘子的 Swift 周报 #110">
<meta property="og:description" content="Skip 宣布 Skip Fuse 版本对独立开发者免费开放，支持基于 Swift 官方 Android SDK 的交叉编译。本期周报还精选 SwiftData 架构优化、Tuist 项目管理迁移，以及 Language Discovery 个性化机制等内容，由肘子的 Swift 周报精选呈现。">
<meta property="og:url" content="https://fatbobman.com/zh/weekly/issue-110/">
<meta property="og:type" content="article">
<meta property="og:image" content="https://cdn.fatbobman.com/weekly/issue110.webp">

<meta property="og:locale" content="zh">
<meta property="og:site_name" content="fatbobman.com">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:site" content="@fatbobman">
<meta name="twitter:creator" content="@fatbobman"><link rel="alternate" type="application/rss+xml" title="RSS Feed for My Website" href="https://fatbobman.com/zh/rss.xml"><link rel="sitemap" href="/sitemap-index.xml"><!-- 其他路径的 hreflang -->
  <link rel="alternate" hreflang="zh-CN" href="https://fatbobman.com/zh/weekly/issue-110/">
  <link rel="alternate" hreflang="en" href="https://fatbobman.com/en/weekly/issue-110/">
  <link rel="alternate" hreflang="x-default" href="https://fatbobman.com/en/weekly/issue-110/"><script>
  var _hmt = _hmt || [];
  (function() {
    var hm = document.createElement("script");
    hm.async = true; // Add async attribute
    hm.src = "https://hm.baidu.com/hm.js?14e5d60a3ea6276655f9d14c58b1fcd0";
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(hm, s);
  })();
</script> <!-- Google Tag Manager --><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
  new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
  j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
  'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
  })(window,document,'script','dataLayer','GTM-5C7N4MF5');</script> <!-- End Google Tag Manager --><script>
      // Immediately set theme before page renders
      if (
        localStorage.getItem('color-theme') === 'dark' ||
        (!('color-theme' in localStorage) && window.matchMedia('(prefers-color-scheme: dark)').matches)
      ) {
        document.documentElement.classList.add('dark');
      }
    </script><script type='application/ld+json'>{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "author": {
    "@id": "#author"
  },
  "dateModified": "2025-11-10T14:00:00.000Z",
  "datePublished": "2025-11-10T14:00:00.000Z",
  "description": "Skip 宣布 Skip Fuse 版本对独立开发者免费开放，支持基于 Swift 官方 Android SDK 的交叉编译。本期周报还精选 SwiftData 架构优化、Tuist 项目管理迁移，以及 Language Discovery 个性化机制等内容，由肘子的 Swift 周报精选呈现。",
  "headline": "Skip Fuse 现在对独立开发者免费！ -- 肘子的 Swift 周报 #110",
  "image": {
    "@type": "ImageObject",
    "url": "https://cdn.fatbobman.com/weekly/issue110.webp"
  },
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://fatbobman.com/zh/weekly/issue-110/"
  },
  "url": "https://fatbobman.com/zh/weekly/issue-110/",
  "publisher": {
    "@type": "Organization",
    "name": "肘子的 Swift 周报",
    "logo": {
      "@type": "ImageObject",
      "url": "https://fatbobman.com/images/blog-card.png"
    }
  },
  "articleSection": [
    "开发周报",
    "Swift",
    "邮件列表"
  ],
  "inLanguage": "zh-Hans"
}</script><script type='application/ld+json'>{
  "@context": "https://schema.org",
  "@type": "Person",
  "@id": "#author",
  "name": "东坡肘子 (徐杨)",
  "alternateName": "Fatbobman (Xu Yang)",
  "jobTitle": "Apple Developer",
  "description": "苹果生态开发者，专注 Swift 和 SwiftUI 开发。Fatbobman's Blog 作者。",
  "url": "https://fatbobman.com",
  "image": {
    "@type": "ImageObject",
    "url": "https://cdn.fatbobman.com/FatWithBoys.png"
  },
  "sameAs": [
    "https://github.com/fatbobman",
    "https://x.com/fatbobman",
    "https://www.linkedin.com/in/fatbobman/",
    "https://bsky.app/profile/fatbobman.com",
    "https://mastodon.social/@fatbobman",
    "https://web.okjike.com/u/e32947ef-7751-4363-9456-b340eef2efd3",
    "https://fatbobman.com/zh/about/",
    "https://fatbobman.com/en/about/"
  ],
  "worksFor": {
    "@type": "Organization",
    "name": "Fatbobman's Blog",
    "logo": {
      "@type": "ImageObject",
      "url": "https://fatbobman.com/images/blog-card.png"
    }
  }
}</script><link rel="stylesheet" href="/_astro/about.SoD2cByX.css">
<style>.sticky[data-astro-cid-4wsjtibl]{position:fixed;top:0;left:50%;transform:translate(-50%);width:100%;max-width:100%}
</style>
<link rel="stylesheet" href="/_astro/_slug_.BRLGXoDU.css">
<style>.prose h2{margin-top:48px!important}.prose h2+h3{margin-top:16px!important}.prose h2~h3:not(h2+h3){margin-top:2rem!important}
</style></head> <body class="antialiased text-default bg-page">  <div class="flex flex-col min-h-screen justify-between "> <div> <header> <div class="bg-block" id="wholeHeader" data-astro-cid-4wsjtibl> <div id="blogTitle"> <a href="/zh/"> <div class="flex space-x-4 mx-auto text-center pt-6 sm:pt-6 font-black w-[240px] sm:w-[300px] pb-2 sm:pb-0"> <svg fill="currentColor" class="text-heading" width="500"> <use href="/_astro/blogTitle.Ca1NZNqJ.svg#blog-title"></use> </svg> </div> </a> </div> <div class="bg-block z-50 shadow-custom-light dark:shadow-custom-dark" id="stickyHeader" data-astro-cid-4wsjtibl> <div class="max-w-5xl flex flex-wrap items-center justify-between mx-auto p-2 sm:p-0" data-astro-cid-4wsjtibl> <div class="flex space-x-2" data-astro-cid-4wsjtibl> <div id="lang-data" data-lang="zh" style="display: none;"></div> <button id="language-dropdown-button" data-dropdown-toggle="language-dropdown-menu" type="button" class="p-2 w-10 h-10 font-medium text-default hover:text-secondary hover:bg-gray-100 dark:hover:bg-page focus:outline-none focus:ring-2 focus:ring-gray-200 dark:hover:bg-gray-700 dark:focus:ring-gray-600 rounded-lg"> ZH </button> <!-- Dropdown --> <div class="z-50 hidden my-4 text-base list-none bg-page divide-y divide-gray-100 rounded-lg shadow dark:bg-gray-700" id="language-dropdown-menu"> <ul class="py-2 font-medium text-sm" role="none"> <li> <button type="button" onclick="
            try {
                if ('/en/weekly/issue-110/' !== '#') {
                    window.location.href = '/en/weekly/issue-110/';
                }
            } catch (e) {
                console.log('Navigation failed:', e);
            }
        " class="w-full text-left px-4 py-2 text-default hover:bg-gray-100 dark:hover:bg-gray-600 dark:hover:text-white" role="menuitem"> <div class="inline-flex items-center">
English
<svg xmlns="http://www.w3.org/2000/svg" class="w-3.5 h-3.5 ml-2 hidden text-primary" id="EN-check" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"> <use href="/_astro/iconCollection.C9WNJL2e.svg#icon-aifadian"></use> </svg> </div> </button> </li><li> <button type="button" onclick="
              try {
                  if ('#' !== '#') {
                      window.location.href = '#';
                  }
              } catch (e) {
                  console.log('Navigation failed:', e);
              }
          " class="w-full text-left px-4 py-2 text-default hover:bg-gray-100 dark:hover:bg-gray-600 dark:hover:text-white" role="menuitem"> <div class="inline-flex items-center">
中文
<svg xmlns="http://www.w3.org/2000/svg" class="w-3.5 h-3.5 ml-2 hidden text-primary" id="ZH-check" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"> <use href="/_astro/iconCollection.C9WNJL2e.svg#icon-aifadian"></use> </svg> </div> </button> </li> <li> <div class="border-t border-gray-200 dark:border-gray-800 w-4/5 mx-auto my-2"></div> <button class="block px-4 py-2 text-default hover:bg-gray-100 dark:hover:bg-gray-600 dark:hover:text-white" role="menuitem" id="set-default-lang"> <div class="inline-flex items-center"> 将中文设置为默认 </div> </button> </li> </ul> <script type="module">function a(){const t=localStorage.getItem("lang"),e=document.getElementById("EN-check"),n=document.getElementById("ZH-check");e!==null&&n!==null&&(t==="en"?(e.classList.remove("hidden"),n.classList.add("hidden")):t==="zh"&&(n.classList.remove("hidden"),e.classList.add("hidden")))}document.addEventListener("DOMContentLoaded",()=>{a()});const l=document.getElementById("set-default-lang");l?.addEventListener("click",()=>{const t=document.getElementById("lang-data");if(t!=null){const e=t.dataset.lang;e!=null&&(localStorage.setItem("lang",e),a())}});</script> </div> <button id="theme-dropdown-button" data-dropdown-toggle="theme-dropdown-menu" type="button" class="group p-2 w-10 h-10 text-default hover:bg-gray-100 dark:hover:bg-page focus:outline-none focus:ring-2 focus:ring-gray-200 dark:text-gray-400 dark:hover:bg-gray-700 dark:focus:ring-gray-600 rounded-lg flex items-center justify-center"> <svg viewBox="0 0 1024 1024" stroke="currentColor" class="w-5 h-5 text-default fill-current group-hover:text-secondary hidden" id="theme_icon_system"> <use href="/_astro/iconCollection.C9WNJL2e.svg#icon-computer"></use> </svg> <svg viewBox="0 0 1024 1024" stroke="currentColor" class="w-5 h-5 text-default fill-current group-hover:text-secondary hidden" id="theme_icon_dark"> <use href="/_astro/iconCollection.C9WNJL2e.svg#icon-moon"></use> </svg> <svg viewBox="0 0 24 24" stroke="currentColor" class="w-5 h-5 text-default fill-current group-hover:text-secondary hidden" id="theme_icon_light"> <use href="/_astro/iconCollection.C9WNJL2e.svg#icon-sun"></use> </svg> </button> <!-- Dropdown --> <div class="z-50 hidden my-4 text-base list-none bg-white divide-y divide-gray-100 rounded-lg shadow dark:bg-gray-700" id="theme-dropdown-menu"> <ul class="py-2 font-medium" role="none"> <li class="hover:bg-gray-100 dark:hover:bg-gray-600 dark:hover:text-white text-default"> <button class="flex px-4 py-2 text-sm align-text-center" id="theme_button_light"> <svg class="w-5 h-5" viewBox="0 0 1024 1024" stroke-width="2" stroke="currentColor" fill="currentColor" stroke-linecap="round" stroke-linejoin="round"> <use href="/_astro/iconCollection.C9WNJL2e.svg#icon-sun"></use> </svg> <span class="ml-2 dark:hover:text-white">Light</span> </button> </li> <li class="hover:bg-gray-100 dark:hover:bg-gray-600 dark:hover:text-white text-default"> <button class="flex px-4 py-2 text-sm align-text-center " id="theme_button_dark"> <svg class="w-5 h-5"> <use href="/_astro/iconCollection.C9WNJL2e.svg#icon-moon"></use> </svg> <span class="ml-2">Dark</span> </button> </li> <li class="hover:bg-gray-100 dark:hover:bg-gray-600 dark:hover:text-white text-default"> <button class="flex px-4 py-2 text-sm align-text-center " id="theme_button_system"> <svg class="w-5 h-5"> <use href="/_astro/iconCollection.C9WNJL2e.svg#icon-computer"></use> </svg> <span class="ml-2 dark:hover:text-white">System</span> </button> </li> </ul> </div> <script>
  // 获取按钮
  var themeButtonLight = document.getElementById('theme_button_light');
  var themeButtonDark = document.getElementById('theme_button_dark');
  var themeButtonSystem = document.getElementById('theme_button_system');
  // 获取图标
  var themeToggleDarkIcon = document.getElementById('theme_icon_dark');
  var themeToggleLightIcon = document.getElementById('theme_icon_light');
  var themeToggleSystemIcon = document.getElementById('theme_icon_system');

  function setTheme() {
    if (
      localStorage.getItem('color-theme') === 'dark' ||
      (!('color-theme' in localStorage) && window.matchMedia('(prefers-color-scheme: dark)').matches)
    ) {
      document.documentElement.classList.add('dark');
    } else {
      document.documentElement.classList.remove('dark');
    }
  }

  function setThemeButton() {
    let theme = localStorage.getItem('color-theme');
    if (theme === 'dark') {
      themeToggleDarkIcon.classList.remove('hidden');
      themeToggleLightIcon.classList.add('hidden');
      themeToggleSystemIcon.classList.add('hidden');
    } else if (theme === 'light') {
      themeToggleDarkIcon.classList.add('hidden');
      themeToggleLightIcon.classList.remove('hidden');
      themeToggleSystemIcon.classList.add('hidden');
    } else {
      themeToggleDarkIcon.classList.add('hidden');
      themeToggleLightIcon.classList.add('hidden');
      themeToggleSystemIcon.classList.remove('hidden');
    }
  }

  function resetTheme() {
    setTheme();
    setThemeButton();
  }

  resetTheme();

  // 监听暗黑模式的变化
  window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', () => {
    resetTheme();
  });

  // 保证其他的页面也能够监听到 localStorage 的变化
  window.addEventListener('storage', function (event) {
    if (event.key === 'color-theme') {
      resetTheme();
    }
  });


  // Listen for clicks on the button themeToggleDarkIcon
  themeButtonDark.addEventListener('click', function () {
    localStorage.setItem('color-theme', 'dark');
    resetTheme();
  });

  // // Listen for clicks on the button themeToggleLightIcon
  themeButtonLight.addEventListener('click', function () {
    localStorage.setItem('color-theme', 'light');
    resetTheme();
  });

  // // Listen for clicks on the button themeToggleSystemIcon
  themeButtonSystem.addEventListener('click', function () {
    localStorage.removeItem('color-theme');
    resetTheme();
  });
</script> <div id="docsearch" class="group w-10 h-10 text-default hover:bg-gray-100 dark:hover:bg-page focus:outline-none focus:ring-2 focus:ring-gray-200 dark:text-gray-400 dark:hover:bg-gray-700 dark:focus:ring-gray-600 rounded-lg flex items-center justify-center"> <svg width="20" height="20" viewBox="0 0 20 20" aria-hidden="true" class="DocSearch-Search-Icon"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg> </div> </div> <button data-collapse-toggle="navbar-solid-bg" type="button" class="inline-flex items-center p-2 mx-2 w-10 h-10 justify-center text-sm text-gray-500 rounded-lg md:hidden hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-gray-200 dark:text-gray-400 dark:hover:bg-gray-700 dark:focus:ring-gray-600" aria-controls="navbar-solid-bg" aria-expanded="false" id="navbar-toggle-button"> <span class="sr-only">Open main menu</span> <svg class="w-5 h-5 text-default" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 17 14"> <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M1 1h15M1 7h15M1 13h15"></path> </svg> </button> <nav class="hidden w-full md:block md:w-auto px-4 z-40" id="navbar-solid-bg"> <ul class="flex flex-col font-bold mt-4 rounded-lg bg-gray-50 md:space-x-8 rtl:space-x-reverse md:flex-row md:mt-0 md:border-0 md:bg-transparent dark:bg-gray-800 md:dark:bg-transparent dark:border-gray-700"> <a href="/zh/" class="block py-2 px-3 md:p-0 rounded text-heading md:hover:text-secondary hover:bg-gray-100 dark:hover:bg-gray-700 md:hover:bg-transparent md:dark:hover:bg-transparent tracking-widest"> 首页 </a><a href="/zh/posts/" class="block py-2 px-3 md:p-0 rounded text-heading md:hover:text-secondary hover:bg-gray-100 dark:hover:bg-gray-700 md:hover:bg-transparent md:dark:hover:bg-transparent tracking-widest"> 文章 </a><a href="/zh/weekly/" class="block py-2 px-3 md:p-0 rounded text-invert bg-secondary md:bg-transparent md:text-secondary md:dark:bg-transparent tracking-widest" aria-current="page"> 周报 </a><a href="/zh/snippet/" class="block py-2 px-3 md:p-0 rounded text-heading md:hover:text-secondary hover:bg-gray-100 dark:hover:bg-gray-700 md:hover:bg-transparent md:dark:hover:bg-transparent tracking-widest"> 小贴士 </a><a href="/zh/about/" class="block py-2 px-3 md:p-0 rounded text-heading md:hover:text-secondary hover:bg-gray-100 dark:hover:bg-gray-700 md:hover:bg-transparent md:dark:hover:bg-transparent tracking-widest"> 关于 </a> </ul> </nav> </div> </div> <div id="placeholder" class="hidden" data-astro-cid-4wsjtibl></div> </div> <script>(function(){const enableSticky = true;
const enableStickyInMobile = true;

  window.onload = function () {
    checkStickyHeader();
    stickySetup();
  };

  window.addEventListener('resize', stickySetup);

  function checkStickyHeader() {
    const title = document.getElementById('blogTitle');
    const stickyHeader = document.getElementById('stickyHeader');
    const placeholder = document.getElementById('placeholder');

    if (title && stickyHeader && placeholder) {
      const offset = title.offsetTop + title.offsetHeight;

      if (shouldStick() && window.scrollY >= offset) {
        stickyHeader.classList.add('sticky');
        placeholder.style.display = 'block';
        placeholder.style.height = `${stickyHeader.offsetHeight}px`;
      } else {
        stickyHeader.classList.remove('sticky');
        placeholder.style.display = 'none';
      }
    }
  }

  function shouldStick() {
    if (!enableSticky) return false;

    let isMobile = window.matchMedia('(max-width: 640px)').matches;
    if (isMobile && !enableStickyInMobile) return false;

    return true;
  }

  function stickySetup() {
    window.onscroll = checkStickyHeader;
  }
})();</script>  </header>  <main class="w-full mx-auto max-w-3xl p-4 md:p-6 "> <div class="container mx-auto space-y-6 sm:space-y-12">    <div class="mx-auto space-y-4 text-center pt-10 pb-6"> <div class="flex mx-auto justify-center"> <a class="text-xs font-medium sm:font-semibold mx-2 text-muted hover:text-secondary" href="/en/weekly/issue-110/" id="language-switcher-for-topic"> #English </a> </div> <div class="flex mx-auto justify-center" style="width:80%;"> <h1 class="text-2xl font-bold leadi md:text-3xl text-heading"># 110 - Skip Fuse 现在对独立开发者免费！</h1> </div> <p class="text-xs text-muted pt-0 sm:pt-4"> 发表于 <time datetime="2025-11-10T14:00:00.000Z">2025 年 11 月 10 日</time> </p> <div class="space-y-2 pt-2 sm:pt-4"> <picture class="critical-content object-cover w-full"> <!-- 为不同屏幕尺寸提供响应式图片 --> <source media="(max-width: 479px)" srcset="https://cdn.fatbobman.com/weekly/issue110.webp?imageView2/0/w/300 1x, https://cdn.fatbobman.com/weekly/issue110.webp?imageView2/0/w/400 2x"> <source media="(max-width: 767px)" srcset="https://cdn.fatbobman.com/weekly/issue110.webp?imageView2/0/w/400 1x, https://cdn.fatbobman.com/weekly/issue110.webp?imageView2/0/w/600 2x"> <source media="(max-width: 1024px)" srcset="https://cdn.fatbobman.com/weekly/issue110.webp?imageView2/0/w/600 1x, https://cdn.fatbobman.com/weekly/issue110.webp?imageView2/0/w/700 2x"> <!-- 默认图片，适配更大的屏幕 --> <img src="https://cdn.fatbobman.com/weekly/issue110.webp?imageView2/1/w/1600" alt="Article Image" class="critical-image object-cover w-full rounded-lg shadow-sm" decoding="async" fetchpriority="high" width="1600" height="900"> </picture> <p class="text-muted text-xs text-center">Photo by Skip.tools</p> </div> </div> <svg style="display: none;"> <symbol id="icon-clipboard" viewBox="0 0 1024 1024"> <path d="M426.666667 42.666667l170.666667 0q41.344 0 74.325333 23.850667t46.336 61.482667l50.005333 0q52.992 0 90.496 37.504t37.504 90.496l0 597.333333q0 52.992-37.504 90.496t-90.496 37.504l-512 0q-52.992 0-90.496-37.504t-37.504-90.496l0-597.333333q0-52.992 37.504-90.496t90.496-37.504l50.005333 0q13.312-37.674667 46.336-61.482667t74.325333-23.850667zM768 213.333333l-50.005333 0q-13.312 37.674667-46.336 61.482667t-74.325333 23.850667l-170.666667 0q-41.344 0-74.325333-23.850667t-46.336-61.482667l-50.005333 0q-17.664 0-30.165333 12.501333t-12.501333 30.165333l0 597.333333q0 17.664 12.501333 30.165333t30.165333 12.501333l512 0q17.664 0 30.165333-12.501333t12.501333-30.165333l0-597.333333q0-17.664-12.501333-30.165333t-30.165333-12.501333zM597.333333 128l-170.666667 0q-17.664 0-30.165333 12.501333t-12.501333 30.165333 12.501333 30.165333 30.165333 12.501333l170.666667 0q17.664 0 30.165333-12.501333t12.501333-30.165333-12.501333-30.165333-30.165333-12.501333z"></path> </symbol> <symbol id="icon-check" viewBox="0 0 1024 1024"> <path d="M421.858 683.366l401.796-448.518c18.66-20.828 50.668-22.586 71.498-3.928 20.828 18.66 22.586 50.67 3.928 71.498L463.638 788.494c-18.606 20.768-50.5 22.586-71.344 4.066l-263.29-233.924c-20.906-18.572-22.796-50.576-4.222-71.48 18.574-20.906 50.576-22.796 71.48-4.222L421.86 683.366z"></path> </symbol> </svg> <div class="relative" id="article-area" data-astro-cid-klpvivtk> <!-- <WeeklyBottomNavigator lang={lang} issue={post.data.issue} /> --> <article class="prose prose-h2:inline-flex dark:prose-invert mx-auto w-full mb-16 prose-h3:mb-8  prose-h3:text-lg prose-h2:font-medium dark:prose-h2:text-white/90 prose-h2:text-white dark:prose-h2:bg-blue-700/80 prose-h2:bg-orange-600/80 prose-h2:text-base prose-h2:px-4 prose-h2:py-1 prose-h2:rounded-lg  prose-headings:tracking-wide prose-p:tracking-wide prose-a:tracking-wide>" data-astro-cid-klpvivtk> <div data-astro-cid-klpvivtk> <aside aria-label="advertisement" role="complementary" data-astro-cid-klpvivtk><div class="dynamic-ad-inline" data-astro-cid-klpvivtk></div></aside> <!-- <AdsBannerTest /> --> 
<p>在 Swift 社区<a href="/zh/weekly/issue-108/" target="_blank">发布官方 Android 版 SDK</a> 不久之后，Skip 宣布其 <a href="https://skip.tools/blog/skip-fuse-free-for-indies/?utm_source=fatbobman%20weekly%20issue%20110&utm_medium=web" rel="noreferrer noopener">Skip Fuse 版本将对符合条件的独立开发者免费开放</a>，用于构建 Android 应用。</p>
<p>与过去一年多独立开发者可免费使用的 Skip Lite 相比，Skip Fuse 带来了实质性的技术变革。Skip Lite 的原理是将 Swift 代码转译为 Kotlin，而 Skip Fuse 则直接利用 Swift 官方 Android SDK 进行交叉编译，将 Swift 源码编译为可在 Android 平台上原生运行的 ARM 二进制文件。这意味着开发者不再局限于“具有 Skip 感知”的依赖包，而可以使用任何能在 Android 上编译的 Swift 包。</p>
<p>根据 <a href="https://swift-everywhere.org?utm_source=fatbobman%20weekly%20issue%20110&utm_medium=web" rel="noreferrer noopener">Swift Everywhere</a> 的统计，目前已有超过 2000 个 Swift Package 支持 Android 平台，其中包括 Alamofire、SwiftSoup、swift-sqlcipher 等常用库。换句话说，Fuse 模式让开发者能够充分利用标准 SwiftPM 生态。这不仅显著拓宽了可用依赖的范围，也降低了项目迁移与维护的复杂度。</p>
<p>在架构层面上，Skip Fuse 采用了混合实现方案：业务逻辑部分由原生 Swift 直接编译执行，而 UI 层的 SwiftUI DSL 则在构建过程中由 Skip Fuse UI 模块映射为 Jetpack Compose 代码，从而在 Android 上呈现出完全原生的用户体验。这种做法既保留了 SwiftUI 的声明式语法，又遵循了 Android 平台的设计规范。</p>
<p>此次政策调整，或许会让许多独立开发者和中小团队在技术选型上更倾向于具备跨平台潜力的方案。即便继续主要面向 Apple 生态进行开发（使用苹果私有框架），也可能开始在架构中加入抽象层，为未来的多平台拓展预留空间。</p>
<p>当然，Skip 对“独立开发者”的定义也有明确限制：仅适用于个人或不超过两人的团队，年收入需低于 30,000 美元，并且免费许可仅允许发布一个闭源商业应用（开源项目数量不限）。即便如此，这一政策仍为 Swift 开发者以近乎零成本的方式进入 Android 市场打开了大门，为他们在这一庞大平台上探索新的可能与收入来源提供了契机。</p>
<p>尽管未来还会出现更多面向 Swift 的跨平台开发方案，但 Skip 已经为 Swift 在 Android 生态中的落地提供了一条清晰、可行的路径。社区也正期待着类似 Skip 这样成熟的跨平台方案能够扩展至 Linux、Windows 乃至嵌入式平台，为 Swift 的多平台发展奠定更坚实的基础。</p>
<blockquote>
<p>若有开发者已在尝试（或计划）使用 Skip 迁移安卓端，烦请告知。我想了解更多相关经验与实践，先行致谢。</p>
</blockquote>
<h2 id="近期推荐">近期推荐</h2>
<h3 id="swiftdata-的优雅取消编辑方案从混乱到艺术-the-art-of-swiftdata-in-2025-from-scattered-pieces-to-a-masterpiece"><a href="https://l.fatbobman.com/w0110-01" rel="noreferrer noopener">SwiftData 的优雅取消编辑方案：从混乱到艺术 (The Art of SwiftData in 2025: From Scattered Pieces to a Masterpiece)</a></h3>
<p>由于取消了父子上下文的概念，SwiftData 在实现“可撤销修改”方面变得更加棘手。<a href="https://www.linkedin.com/in/mathisgnt/?utm_source=Fatbobman%20Blog&utm_medium=web" rel="noreferrer noopener">Mathis Gaignet</a> 在这篇长文中，通过构建一个专用于编辑状态的独立 <code>ModelContext</code>，阐述了在 SwiftData 中实现“可撤销、可复用、低样板”增改（Upsert）架构的思路，用以取代散乱的表单状态与脆弱的回滚方案。</p>
<p>作者并未直接给出“标准答案”，而是完整展示了从问题发现到方案演进的思考路径。文章深入解析了 <code>@Model</code>、<code>@Query</code> 宏的底层机制，揭示了 <code>PersistentIdentifier</code> 的临时与永久状态陷阱，以及上下文同步延迟导致的隐蔽 Bug。这种探索式的写作方式，使读者不仅明白“怎么做”，更理解“为什么这样做”。</p>
<hr/>
<h3 id="从-spm-项目管理迁移到-tuist-项目管理-back-market-x-tuist---part-i-why-we-moved-our-ios-project-to-tuist"><a href="https://l.fatbobman.com/w0110-02" rel="noreferrer noopener">从 SPM 项目管理迁移到 Tuist 项目管理 (Back Market x Tuist - Part I: Why We Moved Our iOS Project To Tuist)</a></h3>
<p>在 Swift 项目中，SPM 除了负责代码模块化，也承担了项目结构管理的职责。然而，随着项目规模的扩大，这种方式的局限逐渐显现：依赖解析频繁、缺乏构建设置和自定义阶段、无法运行脚本、xcodeproj 文件易冲突、模块间规则难以统一，且 SPM 插件能力有限。<a href="https://www.linkedin.com/in/albsala/?utm_source=Fatbobman%20Blog&utm_medium=web" rel="noreferrer noopener">Alberto Salas</a> 在本文中介绍了其团队如何将项目结构管理从 SPM Packages 迁移至 Tuist Targets，并系统梳理了问题成因、探索路径与决策过程。在 <a href="https://l.fatbobman.com/w0110-11" rel="noreferrer noopener">Part II</a> 中，他进一步分享了如何在不阻塞日常开发的前提下完成迁移，并量化了构建性能的提升。</p>
<blockquote>
<p>本文并非要抛弃 SPM，而是将项目结构与生成工作交由 Tuist 接管，依赖管理依然由 SPM 负责。文章还比较了 SPM、Bazel 与 Tuist 的不同取舍。作者指出，Bazel 功能更强大，但最终选择 Tuist，是因为它更符合团队能力与项目特性。这也提醒我们，工具选型的关键不在“最强”，而在“最合适”——尤其对于中小型团队，可自主掌控、易于维护的方案往往更具长期价值。</p>
</blockquote>
<hr/>
<h3 id="让应用更懂用户语言language-discovery-的个性化新机制-making-apps-more-personal-with-language-discovery"><a href="https://l.fatbobman.com/w0110-03" rel="noreferrer noopener">让应用更懂用户语言：Language Discovery 的个性化新机制 (Making Apps More Personal with Language Discovery)</a></h3>
<p>传统的“选择主要语言”(<code>Locale.preferredLanguages</code>) 模式假设每位用户都有单一语言偏好，但现实中人们往往在不同情境下使用多种语言——例如在工作中使用英语、在社交中使用法语、在媒体消费中使用西班牙语。苹果在 iOS 26 中添加了 <a href="https://developer.apple.com/videos/play/wwdc2025/222/?utm_source=Fatbobman%20Blog&utm_medium=web" rel="noreferrer noopener">Language Discovery</a> 功能，通过设备端的机器学习，在确保隐私的前提下，基于用户的输入模式、内容消费、沟通语言以及应用偏好等行为数据，自动推断用户的语言使用习惯。<a href="https://www.linkedin.com/in/letizia-granata/?utm_source=Fatbobman%20Blog&utm_medium=web" rel="noreferrer noopener">Letizia Granata</a> 在文中介绍了这一智能识别用户语言偏好的系统机制。</p>
<blockquote>
<p>通过 Language Discovery，应用可以更准确地响应用户的语言与文化背景，从而在本地化层面实现个性化。这项功能标志着苹果在多语言支持上的一次重要转变：从被动配置走向主动理解，从单一语言到多语共存，为开发者提供了打造更包容、更真实应用体验的新基础。</p>
</blockquote>
<hr/>
<h3 id="关于-xcode-261-cpu-异常占用的提醒和临时解决方案"><a href="https://l.fatbobman.com/w0110-04" rel="noreferrer noopener">关于 Xcode 26.1 CPU 异常占用的提醒和临时解决方案</a></h3>
<p>iOS 开发者 <a href="https://www.linkedin.com/in/artem-mirzabekian/?utm_source=Fatbobman%20Blog&utm_medium=web" rel="noreferrer noopener">Artem Mirzabekian</a> 指出，Xcode 26.1 在运行 iOS 26.1 模拟器时会出现异常的 CPU 占用问题。原因是 iOS 26.1 模拟器中与壁纸渲染相关的 <code>MercuryPosterExtension</code> 进程持续崩溃并重启，导致 CPU 异常占用。Xcode 26.2（beta 版）目前也受影响。</p>
<p>临时解决方案：使用 iOS 26.0 模拟器，或在 iOS 26.1 模拟器中更换壁纸并删除默认的纯黑壁纸。</p>
<hr/>
<h3 id="swift-6-并发模型技术挑战与社区争议">Swift 6 并发模型：技术挑战与社区争议</h3>
<p><a href="https://x.com/mjtsai?utm_source=Fatbobman%20Blog&utm_medium=web" rel="noreferrer noopener">Michael Tsai</a> 汇总了两组关于 Swift 6 并发的重要讨论。<a href="https://l.fatbobman.com/w0110-05" rel="noreferrer noopener">第一篇</a> 关注 Swift 6.2 推出的 “Approachable Concurrency” 改进；<a href="https://l.fatbobman.com/w0110-06" rel="noreferrer noopener">第二篇</a> 则聚焦具体技术议题，如 <code>MainActor.assumeIsolated</code> 与 <code>@preconcurrency</code> 的实际使用与限制；</p>
<p>社区观点呈现明显分化。支持者认为，默认主线程隔离有效防止了“意外跑到后台线程”的常见问题，降低了初学者与 UI 密集型项目的上手难度，一些团队已经成功完成大型应用的迁移。质疑者则指出，完整的 UIKit 应用仍难以全面采用 Swift 6 模式，与 Core Data 和第三方框架的集成问题频出，错误信息晦涩难懂，而语言的持续演进也让代码不断老化。更激进的声音甚至认为当前并发模型已成为“无法协同运作的拼凑体系”，需要一次“彻底重置”。</p>
<p>整体共识是：Swift 6 并发机制的收益高度依赖项目的并发复杂度——对单线程或 UI 驱动型应用帮助显著，但对于并发密集或系统耦合度高的项目，迁移仍充满挑战。</p>
<hr/>
<h3 id="深入解析-visionos-上的动画机制-deep-dive-into-animation-on-visionos"><a href="https://l.fatbobman.com/w0110-07" rel="noreferrer noopener">深入解析 visionOS 上的动画机制 (Deep Dive into Animation on visionOS)</a></h3>
<p>空间计算不仅改变了用户体验，也对开发者提出了更高的要求——许多在平面界面中行之有效的技巧，在三维空间中已不再适用。<a href="https://www.linkedin.com/in/elkraneo/?utm_source=Fatbobman%20Blog&utm_medium=web" rel="noreferrer noopener">Cristian Díaz</a> 从“空间交互的可感知性与舒适性”出发，提出了一个动画决策框架：谁创作动画（设计师预制 vs. 运行时生成）、什么需要动画（SwiftUI 窗口 vs. RealityKit 实体）、复杂度如何（微交互 vs. 编排表演)。在此基础上，他系统梳理了 visionOS 的五条渲染路径与十种动画机制，为每种方案明确列出适用场景、避免情形与实现要点。</p>
<blockquote>
<p>即便你并非 visionOS 开发者，也能从这篇文章中受益。Cristian 以“从感知需求推导技术选择”的方式诠释了动画设计思维，这种方法同样适用于其他平台和界面的动态设计。</p>
</blockquote>
<hr/>
<h3 id="使用-instruments-找出-swiftui-中更新最频繁的视图-find-the-swiftui-views-that-update-the-most-using-instruments"><a href="https://l.fatbobman.com/w0110-08" rel="noreferrer noopener">使用 Instruments 找出 SwiftUI 中更新最频繁的视图 (Find the SwiftUI Views that Update the Most Using Instruments)</a></h3>
<p>Xcode 26 为 Instruments 新增了 SwiftUI 专用的分析工具，可统计视图的更新次数与耗时，并通过 All Updates Summary 与 Cause &amp; Effect Graph 定位哪些视图“更新过于频繁”以及具体触发链路。<a href="https://mastodon.world/@swiftdevjournal?utm_source=Fatbobman%20Blog&utm_medium=web" rel="noreferrer noopener">Mark Szymczyk</a> 以实操示例展示了如何创建 SwiftUI Profiling 会话、按更新次数/耗时排序视图，并用因果图追踪更新来源。</p>
<blockquote>
<p>排查症状之外，更应理解 SwiftUI 的刷新原理，才能从源头减少无效重绘。在我的文章<a href="/zh/posts/understanding-swiftui-view-update-mechanism/" target="_blank">理解 SwiftUI 的视图刷新机制：从 TimelineView 刷新问题谈起</a>中，借由 TimelineView 个案系统阐述了视图声明、响应机制与递归更新的判定逻辑。只有搞清“为什么视图会更新”、“系统如何决定是否重算视图声明值”，优化才不会沦为补丁式修修补补。</p>
</blockquote>
<h2 id="工具">工具</h2>
<h3 id="imessage-kit在-ai-agent-中提供消息集成能力"><a href="https://l.fatbobman.com/w0110-09" rel="noreferrer noopener">imessage-kit：在 AI Agent 中提供消息集成能力</a></h3>
<p>imessage-kit 是一个由 <a href="https://x.com/photon_hq?utm_source=Fatbobman%20Blog&utm_medium=web" rel="noreferrer noopener">Photon</a> 开发的功能强大的 iMessage 开源 SDK，非常适合将 iMessage 集成到 AI 智能体或自动化工作流中。其主要功能有:</p>
<ul>
<li><strong>现代化的 API</strong>：提供优雅的链式调用（Fluent API），可以轻松实现“收到消息 A，则回复 B”的逻辑。</li>
<li><strong>功能全面</strong>：不仅支持收发文本，还能处理图片、各类文件，并能实时监控新消息。</li>
<li><strong>类型安全与跨运行时</strong>：完全使用 TypeScript 编写，类型支持良好，并同时兼容 Node.js 和 Bun。</li>
<li><strong>AI 集成友好</strong>：官方定位就是为 AI Agent 提供消息集成能力，是连接物理世界和 AI 的一个有趣尝试。</li>
</ul>
<p>它通过直接读取 iMessage 数据库(<code>chat.db</code>)并结合 AppleScript 实现自动化,因此仅限 macOS 使用，且需要授予应用”完全磁盘访问权限”。</p>
<blockquote>
<p>该库采用 SSPL-1.0 许可证，禁止用于创建竞争产品（如其他消息 SDK/API），但允许用于内部业务、个人项目和教育用途。值得注意的是，Photon 还提供高级版本，支持线程回复、消息撤回/编辑、实时输入指示器等功能，以及企业级托管服务。更多内容可以在其<a href="https://photon.codes?utm_source=fatbobman%20weekly%20issue%20110&utm_medium=web" rel="noreferrer noopener">官网</a>获取。</p>
</blockquote>
<hr/>
<h3 id="swiftui-detectgestureutil为单个-swiftui-视图绑定多个自定义手势"><a href="https://l.fatbobman.com/w0110-10" rel="noreferrer noopener">SwiftUI-DetectGestureUtil：为单个 SwiftUI 视图绑定多个自定义手势</a></h3>
<p>在 SwiftUI 中，让同一个视图同时识别多个手势一直是个棘手的问题。由 <a href="https://github.com/Saw-000?utm_source=Fatbobman%20Blog&utm_medium=web" rel="noreferrer noopener">Saw-000</a> 开发的 SwiftUI-DetectGestureUtil 通过引入独立的“检测阶段”，让开发者能在多个自定义手势中只确认其中一个，从而绕开系统默认组合方式（simultaneous、sequenced、exclusive）带来的约束，实现更自然的多手势交互。</p>
<p>它将手势识别流程清晰地拆分为两个阶段：</p>
<ul>
<li><strong>检测阶段</strong>(<code>detectGesture</code>)：在手势发生的整个周期内持续更新状态，直到某一自定义规则匹配并返回手势类型</li>
<li><strong>处理阶段</strong>(<code>handleGesture</code>)：在识别完成后持续追踪手势进展,通过 <code>.yet</code> 与 <code>.finished</code> 明确控制生命周期</li>
</ul>
<p>这一模型为构建复杂交互（如“双击 + 拖动”、“圆形绘制”、“自定义笔迹检测”）提供了新的思路。借助 <code>DetectGestureState</code>，开发者可在一次手势周期内获得所有触点、时间与几何信息，实现远超 SwiftUI 原生 Gesture API 的表达力与精度。</p> </div> <!-- <BuymeacoffeeInPost lang={lang} /> --> </article> <aside aria-label="advertisement" role="complementary" id="card-advertisement"><div class="dynamic-ad-card"></div></aside> <div id="copy-alert" class="hidden fixed bottom-28 right-5"> <div id="alert-1" class="flex items-center p-4 mb-4 text-blue-800 rounded-lg bg-blue-50/90 dark:bg-gray-800/90 dark:text-blue-400" role="alert"> <div class="text-sm font-medium">链接已复制</div> </div> </div> <style>
  .copy-icon {
    position: absolute;
    left: -30px; /* 根据您的布局调整位置 */
    top: 50%; /* 将图标定位到标题的中间高度 */
    transform: translateY(-50%); /* 垂直居中对齐图标 */
    cursor: pointer;
    transition: opacity 0.6s ease;
    pointer-events: all; /* 始终响应鼠标事件 */
  }

  article h2,
  article h3,
  article h4,
  article h5 {
    position: relative;
  }

  #copy-alert {
    position: fixed;
    bottom: -100px; /* 初始在视窗下方 */
    right: 20px;
    transition: bottom 0.5s ease-in-out;
  }

  /* 进入动画 */
  @keyframes slideIn {
    from {
      bottom: -100px;
    }
    to {
      bottom: 0px;
    }
  }

  /* 消失动画 */
  @keyframes slideOut {
    from {
      bottom: 20px;
    }
    to {
      bottom: -100px;
    }
  }
</style> <script defer>
  var hideTimeout; // 用于保存自动隐藏定时器的引用
  document.querySelectorAll('article h2, article h3, article h4, article h5').forEach(function (header) {
    var copyIcon = document.createElement('span');
    copyIcon.innerHTML =
      '<svg fill="currentColor" aria-hidden="true" stroke="currentColor" class="w-5 h-5 hidden md:block hover:text-secondary" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg"><path d="M861.866667 164.266667c-87.466667-87.466667-230.4-89.6-320-2.133334l-68.266667 68.266667c-12.8 12.8-12.8 32 0 44.8s32 12.8 44.8 0l68.266667-68.266667c64-61.866667 166.4-61.866667 230.4 2.133334 64 64 64 168.533333 2.133333 232.533333l-117.333333 119.466667c-34.133333 34.133333-81.066667 51.2-128 49.066666-46.933333-4.266667-91.733333-27.733333-119.466667-66.133333-10.666667-14.933333-29.866667-17.066667-44.8-6.4-14.933333 10.666667-17.066667 29.866667-6.4 44.8 40.533333 53.333333 100.266667 87.466667 166.4 91.733333h17.066667c59.733333 0 119.466667-23.466667 162.133333-68.266666l117.333333-119.466667c83.2-89.6 83.2-234.666667-4.266666-322.133333z"></path><path d="M505.6 750.933333l-66.133333 68.266667c-64 61.866667-166.4 61.866667-230.4-2.133333-64-64-64-168.533333-2.133334-232.533334l117.333334-119.466666c34.133333-34.133333 81.066667-51.2 128-49.066667 46.933333 4.266667 91.733333 27.733333 119.466666 66.133333 10.666667 14.933333 29.866667 17.066667 44.8 6.4 14.933333-10.666667 17.066667-29.866667 6.4-44.8-40.533333-53.333333-100.266667-87.466667-166.4-91.733333-66.133333-4.266667-130.133333 19.2-177.066666 66.133333l-117.333334 119.466667c-85.333333 89.6-85.333333 234.666667 2.133334 322.133333 44.8 44.8 102.4 66.133333 162.133333 66.133334 57.6 0 115.2-21.333333 160-64l66.133333-68.266667c12.8-12.8 12.8-32 0-44.8-14.933333-10.666667-34.133333-10.666667-46.933333 2.133333z"></path></svg>'; // 使用您选择的图标
    copyIcon.className = 'copy-icon';
    copyIcon.style.opacity = '0'; // 默认透明
    header.insertBefore(copyIcon, header.firstChild);

    header.addEventListener('mouseover', function () {
      copyIcon.style.opacity = '1';
    });
    header.addEventListener('mouseout', function () {
      copyIcon.style.opacity = '0';
    });

    copyIcon.addEventListener('click', function () {
        var url = window.location.href.split('#')[0] + '#' + header.id;
        navigator.clipboard.writeText(url).then(function () {
            var alertDiv = document.getElementById('copy-alert');
            if (alertDiv) {
                alertDiv.classList.remove('hidden'); // 确保提示框是可见的
                alertDiv.style.display = 'block'; // 显示提示框
                clearTimeout(hideTimeout); // 清除之前的定时器
                alertDiv.style.animation = 'none'; // 先清除之前的动画
                setTimeout(function () {
                    alertDiv.style.animation = 'slideIn 0.5s forwards'; // 应用新动画
                }, 10);

                // 设置自动隐藏定时器
                hideTimeout = setTimeout(function () {
                    alertDiv.style.animation = 'slideOut 0.5s forwards'; // 应用消失动画
                    setTimeout(function () {
                        alertDiv.style.display = 'none';
                    }, 500);
                }, 3000);
            }
        });
    });
  });
</script> <script>
function copyCode(button, event) {
  event.preventDefault();
  const codeBlock = button.parentNode.nextElementSibling.textContent; // 获取代码内容
  navigator.clipboard.writeText(codeBlock).then(() => {
    // 显示 "Copied"
    button.querySelector('.copy-text').style.display = 'none';
    button.querySelector('.copied-text').style.display = 'inline';

    // 3秒后恢复
    setTimeout(() => {
      button.querySelector('.copy-text').style.display = 'inline';
      button.querySelector('.copied-text').style.display = 'none';
    }, 3000);
  });
}
</script> <script type="module">var l=document.querySelectorAll("article");l.forEach(function(t){var e=t.querySelectorAll("a");e.forEach(function(r){r.setAttribute("target","_blank")})});</script> <script>(function(){const baseUrl = "https://fatbobman.com/ads/";
const langSuffix = "zh";

  // ========================================
  // Configuration & Constants
  // ========================================

  const CACHE_DURATION = 20 * 60 * 1000; // 20 minutes
  const STALE_THRESHOLD = 24 * 60 * 60 * 1000; // 24 hours - when to force UI refresh

  // 读取 URL 参数用于测试和预览
  const urlParams = new URLSearchParams(window.location.search);
  const adIdParam = urlParams.get('adid') || urlParams.get('adId');
  const sponsorIdParam = urlParams.get('sponsorId');
  const scheduleIdParam = urlParams.get('scheduleId');
  const forceUpdateParam = urlParams.get('adForceUpdate') === 'true';

  const isPreviewMode = !!(adIdParam || sponsorIdParam || scheduleIdParam);
  const effectiveCacheDuration = isPreviewMode ? 60 * 1000 : CACHE_DURATION;

  // ========================================
  // Cache Management Functions
  // ========================================

  /**
   * Load ad from cache with SWR metadata
   * @param {string} cacheKey - Cache key
   * @returns {Object|null} - Cached ad data with metadata or null
   */
  function loadFromCache(cacheKey) {
    try {
      const cachedData = localStorage.getItem(cacheKey);
      if (!cachedData) return null;

      const cached = JSON.parse(cachedData);

      // Backward compatibility: handle old cache format
      if (cached.content && !cached.metadata) {
        console.log(`[AdsLoader SWR] Old cache format detected for ${cacheKey}, will update`);
        return null; // Force refresh to get new format
      }

      return cached;
    } catch (e) {
      console.warn(`[AdsLoader SWR] Failed to parse cached ad: ${cacheKey}`, e);
      localStorage.removeItem(cacheKey);
      return null;
    }
  }

  /**
   * Save ad to cache with metadata
   * @param {string} cacheKey - Cache key
   * @param {string} content - Ad HTML content
   * @param {Object} metadata - Ad metadata from response headers
   */
  function saveToCache(cacheKey, content, metadata) {
    try {
      const cacheData = {
        content: content,
        metadata: {
          ...metadata,
          fetchedAt: Date.now()
        }
      };

      localStorage.setItem(cacheKey, JSON.stringify(cacheData));
      const cacheMinutes = Math.round(effectiveCacheDuration / 60000);
      console.log(`[AdsLoader SWR] Saved to cache: ${cacheKey} (${cacheMinutes} min)`, metadata);
    } catch (e) {
      console.warn(`[AdsLoader SWR] Failed to save cache: ${cacheKey}`, e);
    }
  }

  /**
   * Extract metadata from response headers
   * @param {Response} response - Fetch response object
   * @returns {Object} - Metadata object
   */
  function extractMetadata(response) {
    return {
      sponsorId: response.headers.get('X-Sponsor-Id') || 'unknown',
      adId: response.headers.get('X-Ad-Id') || 'unknown',
      version: parseInt(response.headers.get('X-Ad-Version') || '1'),
      lang: response.headers.get('X-Ad-Lang') || langSuffix,
      lastUpdated: response.headers.get('Last-Modified') || new Date().toISOString(),
      forceUpdate: response.headers.get('X-Force-Update') === 'true'
    };
  }

  // ========================================
  // Smart Refresh Logic
  // ========================================

  /**
   * Decide if UI should be refreshed based on cache age and ad changes
   * @param {Object|null} cached - Cached ad data with metadata
   * @param {Object} newMetadata - New ad metadata from server
   * @returns {boolean} - True if UI should be refreshed
   */
  function shouldRefreshUI(cached, newMetadata) {
    // No cache -> always render (first load)
    if (!cached || !cached.metadata) {
      console.log('[AdsLoader SWR] No cache, will render immediately');
      return true;
    }

    // Force update parameter -> always refresh
    if (forceUpdateParam || newMetadata.forceUpdate) {
      console.log('[AdsLoader SWR] Force update detected, will refresh UI');
      return true;
    }

    const cachedMeta = cached.metadata;
    const cacheAge = Date.now() - cachedMeta.fetchedAt;

    // Sponsor changed -> always refresh (different advertiser)
    if (cachedMeta.sponsorId !== newMetadata.sponsorId) {
      console.log(`[AdsLoader SWR] Sponsor changed: ${cachedMeta.sponsorId} → ${newMetadata.sponsorId}, will refresh UI`);
      return true;
    }

    // Ad ID changed (same sponsor, different version or variant) -> refresh if old
    if (cachedMeta.adId !== newMetadata.adId) {
      if (cacheAge > STALE_THRESHOLD) {
        console.log(`[AdsLoader SWR] Ad changed and cache stale (${Math.round(cacheAge / 3600000)}h old), will refresh UI`);
        return true;
      } else {
        console.log(`[AdsLoader SWR] Ad changed but cache fresh, will update silently`);
        return false;
      }
    }

    // Same ad, check if cache is very old
    if (cacheAge > STALE_THRESHOLD) {
      console.log(`[AdsLoader SWR] Cache very old (${Math.round(cacheAge / 3600000)}h), will refresh UI`);
      return true;
    }

    // Default: silent update
    console.log(`[AdsLoader SWR] Cache fresh (${Math.round(cacheAge / 60000)}min old), will update silently`);
    return false;
  }

  // ========================================
  // Ad Loading & Rendering
  // ========================================

  /**
   * Render ad to containers
   * @param {string} html - Ad HTML content
   * @param {string} containerSelector - Container selector
   * @param {string} reason - Reason for rendering (for logging)
   */
  function renderAd(html, containerSelector, reason = 'unknown') {
    const containers = document.querySelectorAll(containerSelector);
    if (containers.length === 0) {
      console.warn(`[AdsLoader SWR] No containers found: ${containerSelector}`);
      return;
    }

    containers.forEach(container => {
      container.innerHTML = html;
    });

    console.log(`[AdsLoader SWR] Rendered ad to ${containers.length} container(s): ${containerSelector} (${reason})`);
  }

  /**
   * Fetch ad from server
   * @param {number} version - Ad version (1 or 2)
   * @param {string} cacheKey - Cache key
   * @param {string} containerSelector - Container selector
   * @param {Object|null} cached - Cached ad data (if any)
   */
  async function fetchAd(version, cacheKey, containerSelector, cached) {
    // Build URL with parameters
    const params = new URLSearchParams({
      lang: langSuffix,
      version: version.toString()
    });

    // Add test/preview parameters
    if (adIdParam) params.append('adId', adIdParam);
    if (sponsorIdParam) params.append('sponsorId', sponsorIdParam);
    if (scheduleIdParam) params.append('scheduleId', scheduleIdParam);
    if (forceUpdateParam) params.append('adForceUpdate', 'true');

    const url = `${baseUrl}?${params.toString()}`;
    const previewTag = isPreviewMode ? ' [PREVIEW MODE]' : '';
    console.log(`[AdsLoader SWR] Fetching ad: ${url}${previewTag}`);

    try {
      const response = await fetch(url, {
        headers: { 'Accept': 'text/html' },
        cache: 'no-cache'
      });

      if (!response.ok) {
        throw new Error(`HTTP ${response.status}`);
      }

      const content = await response.text();
      const metadata = extractMetadata(response);

      console.log('[AdsLoader SWR] Server response metadata:', metadata);

      // Decide if UI should be refreshed
      const shouldRefresh = shouldRefreshUI(cached, metadata);

      // Always update cache
      saveToCache(cacheKey, content, metadata);

      // Conditionally refresh UI
      if (shouldRefresh) {
        renderAd(content, containerSelector, shouldRefresh === true && !cached ? 'initial load' : 'smart refresh');
      } else {
        console.log(`[AdsLoader SWR] UI kept as-is, updated cache for next visit`);
      }

    } catch (error) {
      console.error(`[AdsLoader SWR] Error loading ad (version ${version}):`, error);
    }
  }

  /**
   * Load ad with SWR strategy
   * @param {number} version - Ad version
   * @param {string} cacheKey - Cache key
   * @param {string} containerSelector - Container selector
   */
  function loadAd(version, cacheKey, containerSelector) {
    // Check if containers exist
    const containers = document.querySelectorAll(containerSelector);
    if (containers.length === 0) {
      console.log(`[AdsLoader SWR] No containers found for ${containerSelector}, skipping version ${version}`);
      return;
    }

    // Step 1: Load from cache if available
    const cached = loadFromCache(cacheKey);
    if (cached && cached.content) {
      console.log(`[AdsLoader SWR] Displaying cached ad: ${cacheKey}`, cached.metadata);
      renderAd(cached.content, containerSelector, 'from cache');
    } else {
      console.log(`[AdsLoader SWR] No cache available for ${cacheKey}, will show blank until loaded`);
    }

    // Step 2: Fetch from server in background
    fetchAd(version, cacheKey, containerSelector, cached);
  }

  // ========================================
  // Initialization
  // ========================================

  function initAds() {
    console.log('[AdsLoader SWR] Initializing ad loading with Stale-While-Revalidate strategy...');
    console.log(`[AdsLoader SWR] Config: cacheDuration=${effectiveCacheDuration/60000}min, staleThreshold=${STALE_THRESHOLD/3600000}h`);

    if (isPreviewMode) {
      const params = [];
      if (adIdParam) params.push(`adId=${adIdParam}`);
      if (sponsorIdParam) params.push(`sponsorId=${sponsorIdParam}`);
      if (scheduleIdParam) params.push(`scheduleId=${scheduleIdParam}`);
      console.log(`[AdsLoader SWR] 🔍 PREVIEW MODE: ${params.join(', ')}`);
    }

    if (forceUpdateParam) {
      console.log('[AdsLoader SWR] 🔄 FORCE UPDATE MODE: UI will always refresh');
    }

    // Generate cache keys (include test params to avoid conflicts)
    const cacheKeySuffix = langSuffix + (adIdParam || sponsorIdParam || scheduleIdParam || '');
    const cacheKeyCard = 'dynamicAdCardSWR-' + cacheKeySuffix;
    const cacheKeyInline = 'dynamicAdInlineSWR-' + cacheKeySuffix;

    // Load both ad versions
    loadAd(1, cacheKeyCard, '.dynamic-ad-card');
    loadAd(2, cacheKeyInline, '.dynamic-ad-inline');
  }

  // Start loading when page is ready
  if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', initAds);
  } else {
    initAds();
  }
})();</script> <section class="pt-4 pb-10  " id="weekly-bottom-navigator"><!-- Section 标题：与正文区分，增加层次感 --><div class="flex items-center gap-2 mb-6 justify-center text-gray-400 dark:text-gray-500"><span class="h-px w-8 bg-gray-200 dark:bg-gray-700"></span><span class="text-xs font-bold uppercase tracking-widest">相关周报</span><span class="h-px w-8 bg-gray-200 dark:bg-gray-700"></span></div><!-- 网格布局：2列 (移动端 1列太长，直接 2列更紧凑) --><div class="grid grid-cols-1 md:grid-cols-2 gap-4" id="more-tips"><a href="/zh/weekly/issue-113/" id="relatedPosts-当 Android 手机『强行兼容』AirDrop" class="
                group relative flex flex-col justify-center px-5 py-4 h-full
                bg-white dark:bg-gray-900/50 
                border border-gray-200 dark:border-gray-700/60 rounded-xl
                hover:border-orange-400/50 dark:hover:border-blue-500/50
                hover:shadow-[0_2px_8px_-2px_rgba(0,0,0,0.05)] dark:hover:shadow-none
                transition-all duration-300
              "><!-- 装饰：左上角的小点或图标，增加精致感 --><div class="absolute top-4 left-3 w-1 h-1 rounded-full bg-gray-300 dark:bg-gray-600 group-hover:bg-orange-500 dark:group-hover:bg-blue-500 transition-colors"></div><div class="flex items-start justify-between gap-3 pl-2"><!-- 标题 --><span class="text-[15px] leading-relaxed font-medium text-gray-700 dark:text-gray-200 group-hover:text-black dark:group-hover:text-white transition-colors font-wide"><span class="mr-1">#113</span>当 Android 手机『强行兼容』AirDrop</span><!-- 箭头图标：Hover 时平移出现 --><svg class="w-4 h-4 text-gray-400 opacity-0 -translate-x-2 group-hover:opacity-100 group-hover:translate-x-0 transition-all duration-300 shrink-0 mt-1" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M17 8l4 4m0 0l-4 4m4-4H3"></path></svg></div></a><a href="/zh/weekly/issue-112/" id="relatedPosts-毕业 30 年同学群：一场 AI 引发的“真假难辨”危机" class="
                group relative flex flex-col justify-center px-5 py-4 h-full
                bg-white dark:bg-gray-900/50 
                border border-gray-200 dark:border-gray-700/60 rounded-xl
                hover:border-orange-400/50 dark:hover:border-blue-500/50
                hover:shadow-[0_2px_8px_-2px_rgba(0,0,0,0.05)] dark:hover:shadow-none
                transition-all duration-300
              "><!-- 装饰：左上角的小点或图标，增加精致感 --><div class="absolute top-4 left-3 w-1 h-1 rounded-full bg-gray-300 dark:bg-gray-600 group-hover:bg-orange-500 dark:group-hover:bg-blue-500 transition-colors"></div><div class="flex items-start justify-between gap-3 pl-2"><!-- 标题 --><span class="text-[15px] leading-relaxed font-medium text-gray-700 dark:text-gray-200 group-hover:text-black dark:group-hover:text-white transition-colors font-wide"><span class="mr-1">#112</span>毕业 30 年同学群：一场 AI 引发的“真假难辨”危机</span><!-- 箭头图标：Hover 时平移出现 --><svg class="w-4 h-4 text-gray-400 opacity-0 -translate-x-2 group-hover:opacity-100 group-hover:translate-x-0 transition-all duration-300 shrink-0 mt-1" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M17 8l4 4m0 0l-4 4m4-4H3"></path></svg></div></a><a href="/zh/weekly/issue-111/" id="relatedPosts-Homebrew 5.0：并行加速、MCP 加持，与 Intel 的最后倒计时" class="
                group relative flex flex-col justify-center px-5 py-4 h-full
                bg-white dark:bg-gray-900/50 
                border border-gray-200 dark:border-gray-700/60 rounded-xl
                hover:border-orange-400/50 dark:hover:border-blue-500/50
                hover:shadow-[0_2px_8px_-2px_rgba(0,0,0,0.05)] dark:hover:shadow-none
                transition-all duration-300
              "><!-- 装饰：左上角的小点或图标，增加精致感 --><div class="absolute top-4 left-3 w-1 h-1 rounded-full bg-gray-300 dark:bg-gray-600 group-hover:bg-orange-500 dark:group-hover:bg-blue-500 transition-colors"></div><div class="flex items-start justify-between gap-3 pl-2"><!-- 标题 --><span class="text-[15px] leading-relaxed font-medium text-gray-700 dark:text-gray-200 group-hover:text-black dark:group-hover:text-white transition-colors font-wide"><span class="mr-1">#111</span>Homebrew 5.0：并行加速、MCP 加持，与 Intel 的最后倒计时</span><!-- 箭头图标：Hover 时平移出现 --><svg class="w-4 h-4 text-gray-400 opacity-0 -translate-x-2 group-hover:opacity-100 group-hover:translate-x-0 transition-all duration-300 shrink-0 mt-1" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M17 8l4 4m0 0l-4 4m4-4H3"></path></svg></div></a><a href="/zh/weekly/issue-109/" id="relatedPosts-惊险但幸运，两次！" class="
                group relative flex flex-col justify-center px-5 py-4 h-full
                bg-white dark:bg-gray-900/50 
                border border-gray-200 dark:border-gray-700/60 rounded-xl
                hover:border-orange-400/50 dark:hover:border-blue-500/50
                hover:shadow-[0_2px_8px_-2px_rgba(0,0,0,0.05)] dark:hover:shadow-none
                transition-all duration-300
              "><!-- 装饰：左上角的小点或图标，增加精致感 --><div class="absolute top-4 left-3 w-1 h-1 rounded-full bg-gray-300 dark:bg-gray-600 group-hover:bg-orange-500 dark:group-hover:bg-blue-500 transition-colors"></div><div class="flex items-start justify-between gap-3 pl-2"><!-- 标题 --><span class="text-[15px] leading-relaxed font-medium text-gray-700 dark:text-gray-200 group-hover:text-black dark:group-hover:text-white transition-colors font-wide"><span class="mr-1">#109</span>惊险但幸运，两次！</span><!-- 箭头图标：Hover 时平移出现 --><svg class="w-4 h-4 text-gray-400 opacity-0 -translate-x-2 group-hover:opacity-100 group-hover:translate-x-0 transition-all duration-300 shrink-0 mt-1" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M17 8l4 4m0 0l-4 4m4-4H3"></path></svg></div></a></div></section> <!-- 整合底座容器 --><div class="mt-16 mb-28 bg-gray-50 dark:bg-gray-800/50 border border-gray-100 dark:border-gray-700/60 rounded-2xl p-6 sm:p-8"> <div class="flex flex-col lg:flex-row items-center justify-between gap-8 lg:gap-12"> <!-- 左侧：订阅区域 --> <!-- 适配逻辑：移动端/平板居中(text-center)，桌面端居左(lg:text-left) --> <div class="flex-1 w-full text-center lg:text-left flex flex-col items-center lg:items-start"> <h3 class="font-bold text-xl text-gray-900 dark:text-gray-100 mb-2"> 订阅 Fatbobman 周报 </h3> <p class="text-sm text-gray-500 dark:text-gray-400 mb-6 max-w-md"> 每周精选 Swift 与 SwiftUI 开发技巧，加入众多开发者的行列。 </p> <!-- 订阅按钮：使用锚点链接触发 Modal --> <a href="#subscript" class="
          bg-black dark:bg-white text-white dark:text-black 
          font-bold text-sm px-8 py-3 rounded-xl 
          hover:opacity-80 hover:scale-105 active:scale-95
          transition-all duration-200 shadow-sm
          w-full sm:w-auto inline-block text-center
        "> 立即订阅 </a> </div> <!-- 右侧：功能按钮组 --> <!-- 适配逻辑：移动端堆叠(grid-cols-1)，平板以上并排(sm:grid-cols-2) --> <!-- w-full lg:w-auto 保证移动端撑满，桌面端紧凑 --> <div class="grid grid-cols-1 sm:grid-cols-2 gap-4 w-full lg:w-auto min-w-[320px]"> <!-- 咖啡按钮 --> <a href="https://www.buymeacoffee.com/fatbobman" target="_blank" rel="noopener" class="group flex items-center justify-center lg:justify-start gap-3 px-5 py-3 bg-white dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-xl shadow-sm hover:shadow-md hover:border-orange-200 dark:hover:border-orange-900 transition-all"> <span class="text-2xl group-hover:scale-110 transition-transform">☕️</span> <div class="text-left"> <div class="text-[10px] text-gray-400 font-bold uppercase tracking-wider">支持</div> <div class="text-sm font-bold text-gray-800 dark:text-gray-100">请喝杯咖啡</div> </div> </a> <!-- Discord 按钮 --> <a href="https://discord.com/invite/7FedN5E2QQ" target="_blank" rel="noopener" class="group flex items-center justify-center lg:justify-start gap-3 px-5 py-3 bg-white dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-xl shadow-sm hover:shadow-md hover:border-blue-200 dark:hover:border-blue-900 transition-all"> <span class="text-2xl group-hover:scale-110 transition-transform">💬</span> <div class="text-left"> <div class="text-[10px] text-gray-400 font-bold uppercase tracking-wider">社区</div> <div class="text-sm font-bold text-gray-800 dark:text-gray-100">加入 Discord</div> </div> </a> </div> </div> </div> <!-- <LeaveFeedback lang={lang} /> --> <!-- <BottomWeeklySubscribe lang={lang} /> --> <!-- <WeeklySubscribe lang={lang} top={0} bottom={4} anchor='weekly-bottom-navigator'/> --> <!-- <Author lang={lang} /> --> <!-- <RelatedWeeklys lang={lang} currentIssue={post.data.issue} /> --> <div class="hidden lg:block w-32 xl:w-44 lg:absolute" id="toc" style="left: -30px; top: 0px"> <div class="text-muted items-center justify-center opacity-0 transition-all duration-1000 delay-300 ease-out" id="toc-content"> <div class="w-full flex justify-end pb-2" id="toc-float-button"> <div class="opacity-50 text-heading hover:opacity-100 hover:text-secondary " style="width:20px; height:20px;">  <svg fill="currentColor" stroke="currentColor" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" id="toc-list-switcher"> <use href="/_astro/iconCollection.C9WNJL2e.svg#icon-toc"></use> </svg> <svg fill="currentColor" stroke="currentColor" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" id="toc-list-close" class="hidden"> <use href="/_astro/iconCollection.C9WNJL2e.svg#icon-toc-close"></use> </svg>  </div> </div> <div class="text-default text-xxs xl:text-xs hidden" id="toc-list"> <ul>  <li class="xl:pl-4 pl-1"> <div class="text-default hover:text-secondary hover:font-bold"> <a href="#swiftdata-的优雅取消编辑方案从混乱到艺术-the-art-of-swiftdata-in-2025-from-scattered-pieces-to-a-masterpiece" class="inline-block hover:text-secondary font-medium relative before:hidden xl:before:block before:content-[&quot;▪&quot;] before:absolute before:left-[-15px] before:text-heading before:w-0 py-2 break-words"> SwiftData 的优雅取消编辑方案：从混乱到艺术 (The Art of SwiftData in 2025: From Scattered Pieces to a Masterpiece) </a> </div> </li><li class="xl:pl-4 pl-1"> <div class="text-default hover:text-secondary hover:font-bold"> <a href="#从-spm-项目管理迁移到-tuist-项目管理-back-market-x-tuist---part-i-why-we-moved-our-ios-project-to-tuist" class="inline-block hover:text-secondary font-medium relative before:hidden xl:before:block before:content-[&quot;▪&quot;] before:absolute before:left-[-15px] before:text-heading before:w-0 py-2 break-words"> 从 SPM 项目管理迁移到 Tuist 项目管理 (Back Market x Tuist - Part I: Why We Moved Our iOS Project To Tuist) </a> </div> </li><li class="xl:pl-4 pl-1"> <div class="text-default hover:text-secondary hover:font-bold"> <a href="#让应用更懂用户语言language-discovery-的个性化新机制-making-apps-more-personal-with-language-discovery" class="inline-block hover:text-secondary font-medium relative before:hidden xl:before:block before:content-[&quot;▪&quot;] before:absolute before:left-[-15px] before:text-heading before:w-0 py-2 break-words"> 让应用更懂用户语言：Language Discovery 的个性化新机制 (Making Apps More Personal with Language Discovery) </a> </div> </li><li class="xl:pl-4 pl-1"> <div class="text-default hover:text-secondary hover:font-bold"> <a href="#关于-xcode-261-cpu-异常占用的提醒和临时解决方案" class="inline-block hover:text-secondary font-medium relative before:hidden xl:before:block before:content-[&quot;▪&quot;] before:absolute before:left-[-15px] before:text-heading before:w-0 py-2 break-words"> 关于 Xcode 26.1 CPU 异常占用的提醒和临时解决方案 </a> </div> </li><li class="xl:pl-4 pl-1"> <div class="text-default hover:text-secondary hover:font-bold"> <a href="#swift-6-并发模型技术挑战与社区争议" class="inline-block hover:text-secondary font-medium relative before:hidden xl:before:block before:content-[&quot;▪&quot;] before:absolute before:left-[-15px] before:text-heading before:w-0 py-2 break-words"> Swift 6 并发模型：技术挑战与社区争议 </a> </div> </li><li class="xl:pl-4 pl-1"> <div class="text-default hover:text-secondary hover:font-bold"> <a href="#深入解析-visionos-上的动画机制-deep-dive-into-animation-on-visionos" class="inline-block hover:text-secondary font-medium relative before:hidden xl:before:block before:content-[&quot;▪&quot;] before:absolute before:left-[-15px] before:text-heading before:w-0 py-2 break-words"> 深入解析 visionOS 上的动画机制 (Deep Dive into Animation on visionOS) </a> </div> </li><li class="xl:pl-4 pl-1"> <div class="text-default hover:text-secondary hover:font-bold"> <a href="#使用-instruments-找出-swiftui-中更新最频繁的视图-find-the-swiftui-views-that-update-the-most-using-instruments" class="inline-block hover:text-secondary font-medium relative before:hidden xl:before:block before:content-[&quot;▪&quot;] before:absolute before:left-[-15px] before:text-heading before:w-0 py-2 break-words"> 使用 Instruments 找出 SwiftUI 中更新最频繁的视图 (Find the SwiftUI Views that Update the Most Using Instruments) </a> </div> </li><li class="xl:pl-4 pl-1"> <div class="text-default hover:text-secondary hover:font-bold"> <a href="#imessage-kit在-ai-agent-中提供消息集成能力" class="inline-block hover:text-secondary font-medium relative before:hidden xl:before:block before:content-[&quot;▪&quot;] before:absolute before:left-[-15px] before:text-heading before:w-0 py-2 break-words"> imessage-kit：在 AI Agent 中提供消息集成能力 </a> </div> </li><li class="xl:pl-4 pl-1"> <div class="text-default hover:text-secondary hover:font-bold"> <a href="#swiftui-detectgestureutil为单个-swiftui-视图绑定多个自定义手势" class="inline-block hover:text-secondary font-medium relative before:hidden xl:before:block before:content-[&quot;▪&quot;] before:absolute before:left-[-15px] before:text-heading before:w-0 py-2 break-words"> SwiftUI-DetectGestureUtil：为单个 SwiftUI 视图绑定多个自定义手势 </a> </div> </li> </ul> </div> </div> </div> <script type="module" src="/_astro/TOC.astro_astro_type_script_index_0_lang.ARhKvemZ.js"></script> <div class="hidden md:block md:absolute" id="sidebar" style="right: -50px; top: 0px"> <div class="invisible flex flex-col space-y-4 text-muted items-center justify-center opacity-0 transition-all duration-1000 delay-300 ease-out" id="sidebar-content"> <div class="opacity-50 text-heading hover:opacity-100 hover:text-secondary " style="width:20px; height:20px;">  <button type="button" onclick="
      try {
        if ('/zh/weekly/issue-109' !== '#') {
          window.location.href = '/zh/weekly/issue-109';
        }
      } catch (e) {
        console.log('Navigation failed:', e);
      }
    " data-tooltip-target="tooltip-next-post" data-tooltip-placement="left" id="sidebar-next-post" class="cursor-pointer" aria-label="Next post"> <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" fill="currentColor" stroke-linecap="round" stroke-linejoin="round"> <use href="/_astro/iconCollection.C9WNJL2e.svg#icon-previous"></use> </svg> </button>  </div> <div id="tooltip-next-post" role="tooltip" class="absolute z-10 invisible inline-block px-3 py-2 w-44 text-sm font-medium text-gray-200 bg-gray-600/90 rounded-lg shadow-sm transition-opacity duration-300 tooltip dark:bg-gray-700/90"> <div> <div>#109 : 惊险但幸运，两次！</div> <div class="text-xs text-yellow-200 font-extrabold pt-2">⌥ + ←</div> </div> </div> <script>(function(){const url = "/zh/weekly/issue-109";
const isHidden = false;

  document.addEventListener('keydown', (e) => {
    // Check if Alt+RightArrow or just RightArrow was pressed
    if (e.altKey && e.key === 'ArrowLeft') {
      // Only navigate if there's a URL and the button isn't hidden
      if (url && !isHidden) {
        e.preventDefault(); // Prevent default browser behavior
        window.location.href = url;
      }
    }
  });
})();</script> <div class="opacity-50 text-heading hover:opacity-100 hover:text-secondary " style="width:20px; height:20px;">  <button type="button" onclick="
      try {
        if ('/zh/weekly/issue-111' !== '#') {
          window.location.href = '/zh/weekly/issue-111';
        }
      } catch (e) {
        console.log('Navigation failed:', e);
      }
    " data-tooltip-target="tooltip-previous-post" data-tooltip-placement="left" id="sidebar-previous-post" class="cursor-pointer" aria-label="Previous post"> <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" fill="currentColor" stroke-linecap="round" stroke-linejoin="round"> <use href="/_astro/iconCollection.C9WNJL2e.svg#icon-next"></use> </svg> </button>  </div> <div id="tooltip-previous-post" role="tooltip" class="absolute z-10 invisible inline-block px-3 py-2 w-44 text-sm font-medium text-gray-200 bg-gray-600/90 rounded-lg shadow-sm transition-opacity duration-300 tooltip dark:bg-gray-700/90"> <div> <div>#111 : Homebrew 5.0：并行加速、MCP 加持，与 Intel 的最后倒计时</div> <div class="text-xs text-yellow-200 font-extrabold pt-2">⌥ + →</div> </div> <div class="tooltip-arrow" data-popper-arrow></div> </div> <script>(function(){const url = "/zh/weekly/issue-111";
const isHidden = false;

  document.addEventListener('keydown', (e) => {
    // Check if Alt+RightArrow or just RightArrow was pressed
    if (e.altKey && e.key === 'ArrowRight') {
      // Only navigate if there's a URL and the button isn't hidden
      if (url && !isHidden) {
        e.preventDefault(); // Prevent default browser behavior
        window.location.href = url;
      }
    }
  });
})();</script> <!-- <DictButton lang={lang} post = {post}/> --> <div class="opacity-50 text-heading hover:opacity-100 hover:text-secondary " style="width:20px; height:20px;">  <a href="https://x.com/intent/tweet?text=Skip%20Fuse%20%E7%8E%B0%E5%9C%A8%E5%AF%B9%E7%8B%AC%E7%AB%8B%E5%BC%80%E5%8F%91%E8%80%85%E5%85%8D%E8%B4%B9%EF%BC%81%20-%20%E8%82%98%E5%AD%90%E7%9A%84%20Swift%20%E5%91%A8%E5%88%8A%20%23110%0A&url=https%3A%2F%2Ffatbobman.com%2Fzh%2Fweekly%2Fissue-110%2F%0A&hashtags=ios%2Cswiftlang&via=fatbobman" target="_blank" id="sidebar-share-with-twitter" data-tooltip-target="tooltip-share-with-twitter" data-tooltip-placement="left"> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"> <use href="/_astro/iconCollection.C9WNJL2e.svg#icon-twitter"></use> </svg> </a>  </div> <div id="tooltip-share-with-twitter" role="tooltip" class="absolute z-10 invisible inline-block px-3 py-2 w-32 text-sm font-medium text-gray-200 bg-gray-600/90 rounded-lg shadow-sm transition-opacity duration-300 tooltip dark:bg-gray-700/90"> <div> <div>Share on X</div> </div> <div class="tooltip-arrow" data-popper-arrow></div> </div> <div class="opacity-50 text-heading hover:opacity-100 hover:text-secondary " style="width:20px; height:20px;">  <button type="button" onclick="
      try {
        window.open('https://bsky.app/intent/compose?text=Skip%20Fuse%20%E7%8E%B0%E5%9C%A8%E5%AF%B9%E7%8B%AC%E7%AB%8B%E5%BC%80%E5%8F%91%E8%80%85%E5%85%8D%E8%B4%B9%EF%BC%81%20-%20%E8%82%98%E5%AD%90%E7%9A%84%20Swift%20%E5%91%A8%E5%88%8A%20%23110%0A%0A by %40fatbobman.com %0Ahttps%3A%2F%2Ffatbobman.com%2Fzh%2Fweekly%2Fissue-110%2F%0A%0A #ios #swift', '_blank');
      } catch (e) {
        console.log('Failed to open BlueSky share');
      }
    " id="sidebar-share-with-bluesky" data-tooltip-target="tooltip-share-with-bluesky" data-tooltip-placement="left" class="cursor-pointer" aria-label="Share on BlueSky"> <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" stroke-width="0.4" stroke="currentColor" fill="currentColor" stroke-linecap="round" stroke-linejoin="round"> <use href="/_astro/iconCollection.C9WNJL2e.svg#icon-bluesky"></use> </svg> </button>  </div> <div id="tooltip-share-with-bluesky" role="tooltip" class="absolute z-10 invisible inline-block px-3 py-2 w-40 text-sm font-medium text-gray-200 bg-gray-600/90 rounded-lg shadow-sm transition-opacity duration-300 tooltip dark:bg-gray-700/90"> <div> <div>Share on BlueSky</div> </div> <div class="tooltip-arrow" data-popper-arrow></div> </div> <div class="opacity-50 text-heading hover:opacity-100 hover:text-secondary " style="width:20px; height:20px;">  <a href="https://www.facebook.com/sharer/sharer.php?u=https%253A%252F%252Ffatbobman.com%252Fzh%252Fweekly%252Fissue-110%252F" target="_blank" id="sidebar-share-with-facebook" data-tooltip-target="tooltip-share-with-facebook" data-tooltip-placement="left"> <svg stroke="currentColor" fill="currentColor" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg"> <use href="/_astro/iconCollection.C9WNJL2e.svg#icon-facebook"></use> </svg> </a>  </div> <div id="tooltip-share-with-facebook" role="tooltip" class="absolute z-10 invisible inline-block px-3 py-2 w-44 text-sm font-medium text-gray-200 bg-gray-600/90 rounded-lg shadow-sm transition-opacity duration-300 tooltip dark:bg-gray-700/90"> <div> <div>Share on Facebook</div> </div> <div class="tooltip-arrow" data-popper-arrow></div> </div> <div class="opacity-50 text-heading hover:opacity-100 hover:text-secondary " style="width:20px; height:20px;">  <a href="https://service.weibo.com/share/share.php?url=https%3A%2F%2Ffatbobman.com%2Fzh%2Fweekly%2Fissue-110%2F&title=Skip%20Fuse%20%E7%8E%B0%E5%9C%A8%E5%AF%B9%E7%8B%AC%E7%AB%8B%E5%BC%80%E5%8F%91%E8%80%85%E5%85%8D%E8%B4%B9%EF%BC%81-%E8%82%98%E5%AD%90%E7%9A%84%20Swift%20%E5%91%A8%E5%88%8A%20%23110%0A%20%23ios%20%23swift%0A%20by%20%40fatbobman%0A" target="_blank" id="sidebar-share-with-weibo" data-tooltip-target="tooltip-share-with-weibo" data-tooltip-placement="left"> <svg fill="currentColor" stroke="currentColor" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg"> <use href="/_astro/iconCollection.C9WNJL2e.svg#icon-weibo"></use> </svg> </a>  </div> <div id="tooltip-share-with-weibo" role="tooltip" class="absolute z-10 invisible inline-block px-3 py-2 w-40 text-sm font-medium text-gray-200 bg-gray-600/90 rounded-lg shadow-sm transition-opacity duration-300 tooltip dark:bg-gray-700/90"> <div> <div>Share on Weibo</div> </div> <div class="tooltip-arrow" data-popper-arrow></div> </div> <div class="opacity-50 text-heading hover:opacity-100 hover:text-secondary " style="width:16px; height:16px;">  <a href="https://www.linkedin.com/sharing/share-offsite/?url=https%3A%2F%2Ffatbobman.com%2Fzh%2Fweekly%2Fissue-110%2F" target="_blank" id="sidebar-share-with-linkedin" data-tooltip-target="tooltip-share-with-linkedin" data-tooltip-placement="left"> <svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" stroke="currentColor" stroke-width="0.1" viewBox="0 0 15 15"> <use href="/_astro/iconCollection.C9WNJL2e.svg#icon-linkedin"></use> </svg> </a>  </div> <div id="tooltip-share-with-linkedin" role="tooltip" class="absolute z-10 invisible inline-block px-3 py-2 w-40 text-sm font-medium text-gray-200 bg-gray-600/90 rounded-lg shadow-sm transition-opacity duration-300 tooltip dark:bg-gray-700/90"> <div> <div>Share on Linkedin</div> </div> <div class="tooltip-arrow" data-popper-arrow></div> </div> <div class="opacity-50 text-heading hover:opacity-100 hover:text-secondary " style="width:20px; height:20px;">  <a href="mailto:?subject=%E6%96%87%E7%AB%A0%3A%E3%80%90Skip%20Fuse%20%E7%8E%B0%E5%9C%A8%E5%AF%B9%E7%8B%AC%E7%AB%8B%E5%BC%80%E5%8F%91%E8%80%85%E5%85%8D%E8%B4%B9%EF%BC%81%20-%20%E8%82%98%E5%AD%90%E7%9A%84%20Swift%20%E5%91%A8%E5%88%8A%20%23110%E3%80%91&#38;body=%E5%88%86%E4%BA%AB%E4%B8%80%E7%AF%87%E6%96%87%E7%AB%A0%E7%BB%99%E4%BD%A0%EF%BC%9A%0A%0ASkip%20Fuse%20%E7%8E%B0%E5%9C%A8%E5%AF%B9%E7%8B%AC%E7%AB%8B%E5%BC%80%E5%8F%91%E8%80%85%E5%85%8D%E8%B4%B9%EF%BC%81%20-%20%E8%82%98%E5%AD%90%E7%9A%84%20Swift%20%E5%91%A8%E5%88%8A%20%23110%0A%0A%E9%93%BE%E6%8E%A5%3A%20https%3A%2F%2Ffatbobman.com%2Fzh%2Fweekly%2Fissue-110%2F" target="_blank" id="sidebar-share-with-email" data-tooltip-target="tooltip-share-with-email" data-tooltip-placement="left"> <svg fill="currentColor" stroke="currentColor" stroke-width="20" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg"> <use href="/_astro/iconCollection.C9WNJL2e.svg#icon-email"></use> </svg> </a>  </div> <div id="tooltip-share-with-email" role="tooltip" class="absolute z-10 invisible inline-block px-3 py-2 w-40 text-sm font-medium text-gray-200 bg-gray-600/90 rounded-lg shadow-sm transition-opacity duration-300 tooltip dark:bg-gray-700/90"> <div> <div>Share via Email</div> </div> <div class="tooltip-arrow" data-popper-arrow></div> </div> <div class="opacity-50 text-heading hover:opacity-100 hover:text-secondary " style="width:20px; height:20px;">  <svg fill="currentColor" stroke="currentColor" stroke-width="20" id="comment-button" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" data-tooltip-target="tooltip-share-with-comment" data-tooltip-placement="left"> <use href="/_astro/iconCollection.C9WNJL2e.svg#icon-comment"></use> </svg>  </div> <div id="tooltip-share-with-comment" role="tooltip" class="absolute z-10 invisible inline-block px-3 py-2 w-44 text-sm font-medium text-gray-200 bg-gray-600/90 rounded-lg shadow-sm transition-opacity duration-300 tooltip dark:bg-gray-700/90"> <div> <div>Share Your Thoughts</div> </div> <div class="tooltip-arrow" data-popper-arrow></div> </div> <script>
  const SCROLL_OFFSET = 80;
  
  document.addEventListener('DOMContentLoaded', function() {
    const commentButton = document.getElementById('comment-button');
    if (commentButton) {
      commentButton.addEventListener('click', function() {
        const gitalkContainer = document.getElementById('gitalk-container');
        if (gitalkContainer) {
          const topPosition = gitalkContainer.getBoundingClientRect().top + window.scrollY - SCROLL_OFFSET;
          window.scrollTo({ top: topPosition, behavior: 'smooth' });
        }
      });
    }
  });
</script> <div class="opacity-50 text-heading hover:opacity-100 hover:text-secondary " style="width:20px; height:20px;">  <svg fill="currentColor" stroke="currentColor" onclick="window.scrollTo({top:0,behavior:'smooth'})" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" data-tooltip-target="tooltip-back-to-top" data-tooltip-placement="left"> <use href="/_astro/iconCollection.C9WNJL2e.svg#icon-top"></use> </svg>  </div> <div id="tooltip-back-to-top" role="tooltip" class="absolute z-10 invisible inline-block px-3 py-2 w-28 text-sm font-medium text-gray-200 bg-gray-600/90 rounded-lg shadow-sm transition-opacity duration-300 tooltip dark:bg-gray-700/90"> <div> <div>Back to Top</div> </div> <div class="tooltip-arrow" data-popper-arrow></div> </div> </div> </div> <script type="module" src="/_astro/SideBar.astro_astro_type_script_index_0_lang.DVW0R156.js"></script> <div id="gitalk-container" data-comment-id="weekly - issue 110" data-lang="zh" data-repo="weeklyComments" data-createIssueManually="false" data-anchor="weekly-bottom-navigator" class="pb-16"></div>

    <script defer>
      document.addEventListener('DOMContentLoaded', async function () {
      const container = document.getElementById('gitalk-container');
      let anchor = '';
      if (container) {
        anchor = container.getAttribute('data-anchor') || '';
      }
        // 提前检查是否需要加载评论
        try {
          const response = await fetch('https://fatbobman.com/status/comment');
          const data = await response.text();
          console.log(data, "comment");

          if (data !== '1') {
            console.log('评论功能未启用，跳过监控和加载操作。');
            return; // 提前返回，跳过后续逻辑
          }
        } catch (error) {
          console.error('检查评论状态时出错：', error);
          return; // 出现错误时也跳过后续逻辑
        }

        // 如果返回值为 "1"，则启动观察器
        const observerTarget = document.getElementById(anchor);
        if (observerTarget) {
          const observer = new IntersectionObserver(async (entries, observer) => {
            const entry = entries[0];
            if (entry.isIntersecting) {
              console.log("load comment")
              // 停止观察，避免重复触发
              observer.unobserve(observerTarget);

              // 动态加载评论区脚本
              await loadGitalk();
            }
          }, {
            root: null, // 相对于视口
            rootMargin: '20%', // 提前 20% 的位置触发
            threshold: 0.1, // 元素显示 10% 即触发
          });

          observer.observe(observerTarget);
        }

        // 动态加载 Gitalk 脚本并初始化评论区
        async function loadGitalk() {
          const container = document.getElementById('gitalk-container');
          if (container) {
            const commentID = container.getAttribute('data-comment-id');
            const lang = container.getAttribute('data-lang');
            const repo = container.getAttribute('data-repo')
            const createIssueManually = container.getAttribute('data-createIssueManually')

            console.log(repo);
            console.log(createIssueManually)

            // 动态加载 Gitalk 脚本
            const script = document.createElement('script');
            script.src = 'https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.min.js';
            script.defer = true;
            script.onload = () => {
              const gitalk = new Gitalk({
                clientID: 'fcf61195c7f73253dc8b',
                clientSecret: '0ac2907be08248a1fcb5312e27480ad535c682e5',
                repo: repo,
                owner: 'fatbobman',
                admin: ['fatbobman'],
                id: commentID.split('/').pop().substring(0, 49),
                distractionFreeMode: true,
                createIssueManually: createIssueManually,
                language: lang,
              });

              gitalk.render('gitalk-container');
            };
            document.body.appendChild(script);
          }
        }
      });
    </script> </div>   </div> </main> </div> <footer> <footer class="bg-block tracking-widest"> <div class="mx-auto w-full max-w-3xl px-4 md:px-6"> <div class="container flex flex-col items-center pt-10"> <div class="flex flex-row justify-around w-full space-x-3"> <div class="flex flex-col space-y-4"> <h2 class="font-bold text-heading">探索</h2> <div class="flex flex-col space-y-2 text-sm text-default font-medium"> <a href="/zh/snippet/" class="hover:text-secondary">小贴士</a> <a href="/zh/posts/" class="hover:text-secondary">文章</a> <a href="/zh/tags/" class="hover:text-secondary">标签</a> <a href="/zh/collections/" class="hover:text-secondary">合集</a> </div> </div> <div class="flex flex-col space-y-4"> <h2 class="font-bold text-heading">订阅</h2> <div class="flex flex-col space-y-2 text-sm text-default font-medium"> <a href="https://weekly.fatbobman.com/welcome" class="hover:text-secondary" target="_blank">周报订阅</a> <a href="/zh/rss.xml" class="hover:text-secondary hover:font-medium" target="_blank">RSS 订阅</a> </div> </div> <div class="flex flex-col space-y-4"> <h2 class="font-bold text-heading">合作与支持</h2> <div class="flex flex-col space-y-2 text-sm text-default font-medium">  <a href="/zh/about/#contact" class="hover:text-secondary">联系我</a> <a href="https://afdian.com/a/fatbobman" class="hover:text-secondary" target="_blank">请肘子喝茶 ☕️</a> </div> </div> </div> <div class="pb-0"> <div class="flex items-center justify-center w-full px-6 pt-12 text-sm"> <span class="text-muted text-xs tracking-normal">Copyright © <span>2020-</span> 2025
Fatbobman Digital Limited. All Rights
            Reserved.</span> </div> <div class="flex items-center justify-center w-full px-6 pt-2 text-sm pb-10"> <button type="button" onclick="
        try {
          window.open('https://beian.miit.gov.cn/#/Integrated/index', '_blank');
        } catch (e) {
          console.log('Failed to open ICP link:', e);
        }
      " class="text-xxs hover:underline text-muted tracking-wide" aria-label="ICP Registration Information">
辽ICP备20006550号-1
</button> </div> </div> </div> </div> </footer> </footer> </div> <section> <div id="weekly-modal" data-subscribeText="订阅周报" data-placeholder="输入你的邮箱"> <div id="popup-modal" tabindex="-1" class="hidden overflow-y-auto overflow-x-hidden fixed top-0 right-0 left-0 z-50 justify-center items-center w-full md:inset-0 h-[calc(100%-1rem)] max-h-full"> <!-- Modal content --> <div class="relative bg-gradient-to-br from-white to-gray-50 dark:from-gray-800 dark:to-gray-900 rounded-lg shadow-2xl border-gray-200 border dark:border-gray-600"> <!-- Modal header --> <div class="flex items-center justify-between px-4 md:px-5 pt-4 pb-0 rounded-t dark:border-gray-600"> <button id="popup-modal-close-button" type="button" class="text-gray-400 bg-transparent hover:bg-gray-200 hover:text-gray-900 rounded-lg text-sm w-8 h-8 ms-auto inline-flex justify-center items-center dark:hover:bg-gray-600 dark:hover:text-white"> <svg class="w-3 h-3" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 14 14"> <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m1 1 6 6m0 0 6 6M7 7l6-6M7 7l-6 6"></path> </svg> <span class="sr-only">Close modal</span> </button> </div> <!-- Modal body --> <div class="px-4 md:px-5 pb-4 md:w-[480px] sm:w-80 mx-auto"> <div class="sm:hidden md:block text-base text-center font-bold text-gray-900 dark:text-blue-100 pt-4 pb-2 font-wide">每周一，与全球开发者共享 Swift 与 SwiftUI 开发精华</div> <iframe class="mx-auto sm:w-[320px] md:w-[480px] sm:h-[200px] md:h-[320px] dark:opacity-80 dark:rounded-lg dark:shadow-2xl dark:border-gray-600" src="https://weekly.fatbobman.com/embed" style="border:0px solid #EEE; background:white; width: 100%; max-width: 480px;"></iframe> </div> </div> </div> </div> </section> <script type="module" src="/_astro/WeeklyModalLoader.astro_astro_type_script_index_0_lang.Ce3o6Yt-.js"></script>  <script src="https://cdn.jsdelivr.net/npm/flowbite@2.5.2/dist/flowbite.min.js" async></script> <script src="https://analytics.ahrefs.com/analytics.js" data-key="KF0NNRpbcfyJPzijzZEiOw" async></script> <script>
  // 为每个需要清除 focus 状态的按钮都添加一个 clear-focus 类, 下面的代码将在点击后自动移除 focus 状态
  document.addEventListener('DOMContentLoaded', () => {
    // 获取所有具有 'clear-focus' 类的按钮
    const buttons = document.querySelectorAll('.clear-focus');

    buttons.forEach((button) => {
      button.addEventListener('click', () => {
        setTimeout(() => {
          button.blur();
        }, 0);
      });
    });
  });

  window.onpageshow = function () {
    document.documentElement.classList.add('motion-safe:scroll-smooth');
  };
</script> <div id="docsearch-container-data" data-lang="zh" data-searchtext="搜索..."></div> <script src="https://cdn.jsdelivr.net/npm/@docsearch/js@3.8.3" defer></script> <script type="module">function r(e,t){const a={button:{buttonText:"搜索",buttonAriaLabel:"搜索"},modal:{searchBox:{resetButtonTitle:"清除搜索关键字",resetButtonAriaLabel:"清除搜索关键字",cancelButtonText:"取消",cancelButtonAriaLabel:"取消"},startScreen:{recentSearchesTitle:"最近搜索",noRecentSearchesText:"当前没有搜索历史记录",saveRecentSearchButtonTitle:"保存本次搜索",removeRecentSearchButtonTitle:"从搜索历史中移除",favoriteSearchesTitle:"收藏夹",removeFavoriteSearchButtonTitle:"从收藏夹移除"},errorScreen:{titleText:"无法获取结果",helpText:"请检查网络连接"},footer:{selectText:"选择",selectKeyAriaLabel:"选择",navigateText:"切换",navigateUpKeyAriaLabel:"Arrow up",navigateDownKeyAriaLabel:"Arrow down",closeText:"退出",closeKeyAriaLabel:"Escape key",searchByText:"引擎支持"},noResultsScreen:{noResultsText:"无法找到对应结果",suggestedQueryText:"可以尝试搜索如下内容",reportMissingResultsText:"确认本次搜索应该返回内容？",reportMissingResultsLinkText:"请告知我们"}}};if(typeof window<"u"){const n=window.docsearch;n({appId:"MVXKD4F4BR",apiKey:"a1b4111c3de8b9f60eeca6da001711da",indexName:"fatbobman",container:"#docsearch",insights:!0,placeholder:t,maxResultsPerGroup:50,translations:e==="zh"?a:void 0,searchParameters:{facetFilters:[`lang:${e}`],hitsPerPage:50}})}}function o(){const e=document.getElementById("docsearch-container-data");if(!e){console.error("Search container not found");return}const t=e.dataset.lang,a=e.dataset.searchtext;r(t,a)}window.addEventListener("load",()=>{document.querySelector('script[src*="docsearch"]')&&o()});</script> <!-- Google Tag Manager (noscript) --><noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-5C7N4MF5" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript><!-- End Google Tag Manager (noscript) --> <!--Magic Fix 解决在 Safari 下搜索框取消后会滚动到页面底部--> <div class="fixed"> <input type="text"> </div> </body></html>